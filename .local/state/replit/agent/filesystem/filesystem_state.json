{"file_contents":{"COMPATIBILIDADE-LIBS.md":{"content":"# Compatibilidade de Bibliotecas Ubuntu ‚Üí Oracle Linux\n\n**Sistema da Marinha do Brasil**\n\n---\n\n## ‚úÖ RESPOSTA R√ÅPIDA: SIM, √â COMPAT√çVEL\n\n**Ubuntu e Oracle Linux s√£o ambos baseados em Linux x64 e usam bibliotecas compat√≠veis.**\n\n---\n\n## üìã Compatibilidade por Componente\n\n### Node.js e NPM\n- ‚úÖ **100% Compat√≠vel** - Node.js usa bin√°rios universais Linux x64\n- ‚úÖ **Depend√™ncias npm** - Todas compat√≠veis entre distros Linux\n- ‚úÖ **M√≥dulos nativos** - Compilados para arquitetura x64 gen√©rica\n\n### Bibliotecas do Sistema (RPMs)\n- ‚úÖ **Git, curl, wget** - Presentes em ambas as distros\n- ‚úÖ **Nginx, firewalld** - Compat√≠veis entre RHEL-family\n- ‚úÖ **Python 3** - Vers√µes similares dispon√≠veis\n\n### Google Chrome & ChromeDriver\n- ‚úÖ **Chrome** - Mesmo pacote .rpm para RHEL/Oracle Linux\n- ‚úÖ **ChromeDriver** - Bin√°rio universal Linux x64\n\n---\n\n## üîß Por que funciona?\n\n### Arquitetura\n```\nUbuntu 20.04/22.04 x64  ‚Üí  Oracle Linux 8/9 x64\n        ‚Üì                           ‚Üì\n    glibc 2.31+                 glibc 2.28+\n        ‚Üì                           ‚Üì\n   Kernel Linux                Kernel Linux\n        ‚Üì                           ‚Üì\n     x86_64                      x86_64\n```\n\n### Bibliotecas Base\n- **glibc**: Ambas usam vers√µes compat√≠veis\n- **libssl**: OpenSSL presente em ambas\n- **zlib**: Biblioteca padr√£o Linux\n- **pthread**: Threading POSIX padr√£o\n\n---\n\n## ‚ö†Ô∏è Pontos de Aten√ß√£o\n\n### Gerenciador de Pacotes\n```bash\n# Ubuntu usa apt\nsudo apt install git curl\n\n# Oracle Linux usa dnf/yum\nsudo dnf install git curl\n```\n\n### Caminhos de Sistema\n```bash\n# Ambos usam os mesmos caminhos padr√£o\n/usr/bin/node\n/usr/local/bin/\n/opt/\n/etc/systemd/system/\n```\n\n### Usu√°rios e Permiss√µes\n```bash\n# Ambos seguem padr√£o Linux\nnobody:nobody\nsystemctl\nfirewall-cmd\n```\n\n---\n\n## üöÄ Como os Scripts Resolvem\n\n### Script de Empacotamento\n1. **Baixa Node.js** - Bin√°rio universal Linux x64\n2. **Empacota depend√™ncias npm** - node_modules completo\n3. **Inclui RPMs** - Para Oracle Linux especificamente\n4. **Testa compatibilidade** - Durante instala√ß√£o\n\n### Script de Instala√ß√£o\n1. **Detecta sistema** - Oracle Linux 7/8/9\n2. **Instala depend√™ncias** - Via dnf/yum\n3. **Configura servi√ßos** - Via systemd\n4. **Testa funcionamento** - Antes de finalizar\n\n---\n\n## üìã Checklist de Compatibilidade\n\n### Na sua m√°quina Ubuntu:\n- [x] Node.js funcionando\n- [x] npm install sem erros\n- [x] Sistema rodando corretamente\n- [x] Testes passando\n\n### No Oracle Linux:\n- [x] Mesma arquitetura (x64)\n- [x] glibc compat√≠vel (2.28+)\n- [x] systemd dispon√≠vel\n- [x] firewalld instalado\n\n---\n\n## üîç Teste de Compatibilidade\n\n### Antes de empacotar (Ubuntu):\n```bash\n# Verificar arquitetura\nuname -m  # deve ser x86_64\n\n# Verificar glibc\nldd --version\n\n# Testar aplica√ß√£o\nnpm run dev\n```\n\n### Ap√≥s instalar (Oracle Linux):\n```bash\n# Verificar instala√ß√£o\nsystemctl status sistema-marinha\n\n# Testar acesso\ncurl http://localhost:5000\n\n# Executar testes\n./teste.sh\n```\n\n---\n\n## üí° Resumo T√©cnico\n\n**O empacotamento offline funciona porque:**\n\n1. **Node.js** √© distribu√≠do como bin√°rio universal Linux\n2. **npm** empacota todas as depend√™ncias no node_modules\n3. **RPMs** s√£o baixados especificamente para Oracle Linux\n4. **Scripts** detectam e configuram o ambiente automaticamente\n\n**Resultado:** Sistema 100% funcional mesmo sendo empacotado no Ubuntu.\n\n---\n\n## üìû Solu√ß√£o de Problemas\n\n### Se algo n√£o funcionar:\n1. Verificar logs: `journalctl -u sistema-marinha`\n2. Testar manualmente: `cd /opt/sistema-marinha && npm run dev`\n3. Verificar permiss√µes: `ls -la /opt/sistema-marinha`\n4. Reinstalar depend√™ncias: `npm install --production`\n\n### Comandos de diagn√≥stico:\n```bash\n# Arquitetura\nuname -a\n\n# Bibliotecas\nldd /usr/local/bin/node\n\n# Processos\nps aux | grep node\n\n# Portas\nnetstat -tulpn | grep 5000\n```\n\n---\n\n**Sistema da Marinha do Brasil - PAPEM**","size_bytes":3923},"INSTALACAO-LOCAL.md":{"content":"# Instala√ß√£o Local - Sistema de Display da Marinha\n\n## Vers√£o: 2.0\n**√öltima atualiza√ß√£o: 20/06/2025**\n\n## Pr√©-requisitos\n\n### Sistema Operacional Suportado\n- Oracle Linux 8+ / RHEL 8+\n- Ubuntu 20.04+ / Debian 11+\n- CentOS 8+\n\n### Depend√™ncias do Sistema\n```bash\n# Oracle Linux / RHEL / CentOS\nsudo dnf update\nsudo dnf install -y curl wget git unzip tar gzip\n\n# Ubuntu / Debian\nsudo apt update\nsudo apt install -y curl wget git unzip tar gzip\n```\n\n### Node.js 20+ LTS\n```bash\n# Instalar Node.js via NodeSource\ncurl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -\nsudo dnf install -y nodejs\n\n# Verificar instala√ß√£o\nnode --version  # deve ser v20.x.x\nnpm --version   # deve ser 10.x.x\n```\n\n## Instala√ß√£o Online (com internet)\n\n### 1. Clonar o reposit√≥rio\n```bash\ngit clone <url-do-repositorio>\ncd sistema-display-marinha\n```\n\n### 2. Instalar depend√™ncias\n```bash\nnpm install\n```\n\n### 3. Configurar ambiente\n```bash\n# Criar arquivo de configura√ß√£o\ncp .env.example .env\n\n# Editar configura√ß√µes (opcional)\nnano .env\n```\n\n### 4. Executar o sistema\n```bash\n# Modo desenvolvimento (recomendado para testes)\nnpm run dev\n\n# Modo produ√ß√£o\nnpm run build\nnpm start\n```\n\n## Instala√ß√£o Offline (sem internet)\n\n### 1. Preparar pacote offline (m√°quina com internet)\n```bash\n# Executar script de empacotamento\n./empacotamento-offline.sh\n\n# Isso criar√° o arquivo: sistema-display-marinha-offline.tar.gz\n```\n\n### 2. Transferir para m√°quina de destino\n```bash\n# Copiar arquivo via USB, rede interna, etc.\nscp sistema-display-marinha-offline.tar.gz usuario@servidor:/tmp/\n```\n\n### 3. Instalar na m√°quina de destino\n```bash\n# Extrair pacote\ncd /opt\nsudo tar -xzf /tmp/sistema-display-marinha-offline.tar.gz\nsudo chown -R display:display sistema-display-marinha\n\n# Entrar no diret√≥rio\ncd sistema-display-marinha\n\n# Executar instala√ß√£o offline\nsudo ./setup-oracle-linux.sh\n```\n\n## Configura√ß√£o de Rede\n\n### Firewall\n```bash\n# Oracle Linux / RHEL / CentOS\nsudo firewall-cmd --permanent --add-port=5000/tcp\nsudo firewall-cmd --reload\n\n# Ubuntu / Debian (UFW)\nsudo ufw allow 5000/tcp\n```\n\n### SELinux (Oracle Linux / RHEL)\n```bash\n# Verificar status\nsestatus\n\n# Se necess√°rio, permitir conex√µes na porta 5000\nsudo setsebool -P httpd_can_network_connect 1\nsudo semanage port -a -t http_port_t -p tcp 5000\n```\n\n## Funcionalidades do Sistema\n\n### Interface Principal (/)\n- **Exibi√ß√£o PLASA**: Documentos de plano de servi√ßo semanal com scroll autom√°tico\n- **Exibi√ß√£o Escala**: Rota√ß√£o autom√°tica entre escalas de servi√ßo (30s por documento)\n- **Avisos Importantes**: Notifica√ß√µes priorit√°rias em tempo real\n- **Data/Hora**: Atualiza√ß√£o cont√≠nua com hor√°rio do p√¥r do sol para Rio de Janeiro\n- **Layout Responsivo**: Adapta-se automaticamente a diferentes tamanhos de tela\n\n### Painel Administrativo (/admin)\n- **Gerenciamento de Avisos**: Criar, editar e excluir notifica√ß√µes\n- **Upload de Documentos**: PDFs para PLASA e Escala de Servi√ßo\n- **Configura√ß√µes**: Velocidade de scroll, intervalo de altern√¢ncia\n- **Visualiza√ß√£o em Tempo Real**: Preview dos documentos carregados\n\n### Recursos T√©cnicos\n- **Processamento PDF**: Convers√£o autom√°tica para visualiza√ß√£o\n- **Cache Inteligente**: Otimiza√ß√£o de performance para documentos grandes\n- **Auto-restart**: Rein√≠cio autom√°tico do scroll ap√≥s conclus√£o\n- **API REST**: Endpoints para integra√ß√£o externa\n- **Timezone Autom√°tico**: Atualiza√ß√£o di√°ria do hor√°rio do p√¥r do sol\n\n## Acessar o Sistema\n\n### URLs de Acesso\n- **Interface Principal**: http://localhost:5000\n- **Painel Admin**: http://localhost:5000/admin\n\n### Acesso Remoto\nPara acesso de outras m√°quinas na rede:\n```bash\n# Descobrir IP da m√°quina\nip addr show | grep inet\n\n# Acessar via: http://IP_DA_MAQUINA:5000\n```\n\n## Solu√ß√£o de Problemas\n\n### Erro: \"EACCES: permission denied\"\n```bash\n# Definir owner correto\nsudo chown -R $USER:$USER /caminho/para/projeto\n```\n\n### Erro: \"Error: Cannot find module\"\n```bash\n# Limpar cache e reinstalar\nrm -rf node_modules package-lock.json\nnpm cache clean --force\nnpm install\n```\n\n### Porta em uso\n```bash\n# Verificar processo usando a porta 5000\nsudo netstat -tulpn | grep :5000\nsudo kill -9 <PID>\n\n# Ou usar porta alternativa\nPORT=5001 npm run dev\n```\n\n### PDF n√£o carrega\n```bash\n# Verificar permiss√µes da pasta uploads\nls -la uploads/\nsudo chmod 755 uploads/\nsudo chmod 644 uploads/*\n```\n\n### Hor√°rio do p√¥r do sol incorreto\n```bash\n# O sistema busca automaticamente via API externa\n# Em caso de falha, usa c√°lculo local como fallback\n# Logs dispon√≠veis no console do navegador (F12)\n```\n\n## Manuten√ß√£o\n\n### Logs do Sistema\n```bash\n# Ver logs em tempo real\nnpm run dev 2>&1 | tee logs/sistema.log\n\n# Logs espec√≠ficos\nmkdir -p logs\necho \"$(date): Sistema iniciado\" >> logs/display.log\n```\n\n### Backup\n```bash\n# Backup completo\ntar -czf backup-display-$(date +%Y%m%d-%H%M).tar.gz \\\n    uploads/ .env package.json package-lock.json\n\n# Backup apenas uploads\ntar -czf backup-uploads-$(date +%Y%m%d).tar.gz uploads/\n\n# Restaurar backup\ntar -xzf backup-display-YYYYMMDD-HHMM.tar.gz\n```\n\n### Limpeza de Cache\n```bash\n# Limpar cache de PDFs convertidos\nrm -rf uploads/cache/\nmkdir uploads/cache\n\n# Limpar logs antigos\nfind logs/ -name \"*.log\" -mtime +30 -delete\n```\n\n### Atualiza√ß√µes\n```bash\n# Atualizar c√≥digo (com internet)\ngit pull origin main\nnpm install\nnpm run build\n\n# Reiniciar servi√ßo\nsudo systemctl restart display-marinha\n```\n\n## Instala√ß√£o como Servi√ßo (systemd)\n\n### 1. Criar usu√°rio do sistema\n```bash\nsudo useradd -r -s /bin/false display\nsudo mkdir -p /opt/display-marinha\nsudo chown display:display /opt/display-marinha\n```\n\n### 2. Criar arquivo de servi√ßo\n```bash\nsudo nano /etc/systemd/system/display-marinha.service\n```\n\n### 3. Conte√∫do do arquivo:\n```ini\n[Unit]\nDescription=Sistema de Display da Marinha v2.0\nDocumentation=file:///opt/display-marinha/README.md\nAfter=network.target\nWants=network-online.target\n\n[Service]\nType=simple\nUser=display\nGroup=display\nWorkingDirectory=/opt/display-marinha\nExecStart=/usr/bin/node server/index.js\nExecReload=/bin/kill -s HUP $MAINPID\nRestart=always\nRestartSec=10\nTimeoutStopSec=20\n\n# Vari√°veis de ambiente\nEnvironment=NODE_ENV=production\nEnvironment=PORT=5000\n\n# Limites de recursos\nLimitNOFILE=65536\nLimitNPROC=32768\n\n# Seguran√ßa\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/opt/display-marinha/uploads\n\n[Install]\nWantedBy=multi-user.target\n```\n\n### 4. Ativar e iniciar servi√ßo\n```bash\nsudo systemctl daemon-reload\nsudo systemctl enable display-marinha\nsudo systemctl start display-marinha\nsudo systemctl status display-marinha\n\n# Verificar logs\njournalctl -u display-marinha -f\n```\n\n## Configura√ß√µes Avan√ßadas\n\n### Proxy Reverso (Nginx)\n```bash\n# Instalar Nginx\nsudo dnf install -y nginx\n\n# Configurar site\nsudo nano /etc/nginx/sites-available/display-marinha\n```\n\n```nginx\nserver {\n    listen 80;\n    server_name display.marinha.local;\n    \n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n```\n\n### Monitoramento\n```bash\n# Script de monitoramento simples\nnano monitor-display.sh\n```\n\n```bash\n#!/bin/bash\nif ! curl -f http://localhost:5000 > /dev/null 2>&1; then\n    echo \"$(date): Sistema fora do ar, reiniciando...\" >> /var/log/display-monitor.log\n    sudo systemctl restart display-marinha\nfi\n```\n\n```bash\n# Adicionar ao cron (verificar a cada 5 minutos)\ncrontab -e\n*/5 * * * * /opt/display-marinha/monitor-display.sh\n```\n\n## Suporte e Troubleshooting\n\n### Verifica√ß√£o R√°pida do Sistema\n```bash\n# Verificar status geral\n./teste.sh\n\n# Verificar configura√ß√£o\nnode -e \"console.log('Node.js:', process.version); console.log('Plataforma:', process.platform);\"\n\n# Testar conectividade\ncurl -I http://localhost:5000\n\n# Verificar logs detalhados\ntail -f logs/sistema.log\n```\n\n### Informa√ß√µes do Sistema\n- **Vers√£o**: 2.0\n- **Porta Padr√£o**: 5000\n- **Documenta√ß√£o**: README.md\n- **Logs**: Console do navegador + logs/\n- **Cache**: uploads/cache/","size_bytes":8382},"INSTALACAO-OFFLINE.md":{"content":"# Sistema da Marinha - Instala√ß√£o Offline\n**Passo-a-Passo Completo**\n\n**Autor: 2SG Bruna Rocha**  \n**Marinha do Brasil**\n\n---\n\n## üìã PARTE 1: PREPARAR PACOTE (Na sua m√°quina com internet)\n\n### Passo 1: Preparar o sistema\n```bash\n# Certifique-se que est√° na pasta do projeto\ncd sistema-marinha\n\n# Verificar se os scripts existem\nls -la *.sh\n\n# Dar permiss√£o de execu√ß√£o\nchmod +x criar-pacote-offline.sh\nchmod +x empacotamento-offline.sh\n```\n\n### Passo 2: Criar o pacote offline\n```bash\n# OP√á√ÉO A: Pacote simples (mais r√°pido)\n./criar-pacote-offline.sh\n\n# OP√á√ÉO B: Pacote completo (recomendado para Oracle Linux)\n./empacotamento-offline.sh\n```\n\n### Passo 3: Verificar o pacote criado\n```bash\n# Verificar se o arquivo foi criado\nls -lh sistema-marinha-offline-*.tar.gz\n\n# Exemplo de sa√≠da:\n# sistema-marinha-offline-20250618.tar.gz (150MB - 2GB)\n```\n\n---\n\n## üì¶ PARTE 2: TRANSFERIR PARA ORACLE LINUX\n\n### Passo 4: Copiar arquivo para o servidor\n```bash\n# Via SCP (se tiver acesso SSH)\nscp sistema-marinha-offline-*.tar.gz usuario@servidor:/tmp/\n\n# Via pendrive/m√≠dia f√≠sica\n# Copie o arquivo .tar.gz para um pendrive\n# Conecte no servidor Oracle Linux\n```\n\n---\n\n## üñ•Ô∏è PARTE 3: INSTALAR NO ORACLE LINUX\n\n### Passo 5: Conectar no servidor Oracle Linux\n```bash\n# SSH no servidor\nssh usuario@servidor\n\n# Ou acesso direto ao console\n```\n\n### Passo 6: Extrair e instalar\n```bash\n# Ir para o diret√≥rio onde est√° o arquivo\ncd /tmp\n\n# Extrair o pacote\ntar -xzf sistema-marinha-offline-*.tar.gz\n\n# Entrar na pasta extra√≠da\ncd pacote-offline-marinha\n\n# IMPORTANTE: Instalar como root\nsudo ./instalar.sh\n```\n\n### Passo 7: Verificar instala√ß√£o\n```bash\n# Verificar se o servi√ßo foi criado\nsudo systemctl status sistema-marinha\n\n# Iniciar o servi√ßo\nsudo systemctl start sistema-marinha\n\n# Verificar se est√° rodando\nsudo systemctl status sistema-marinha\n\n# Ver logs em tempo real\nsudo journalctl -u sistema-marinha -f\n```\n\n---\n\n## üåê PARTE 4: ACESSAR O SISTEMA\n\n### Passo 8: Configurar firewall (se necess√°rio)\n```bash\n# Verificar portas abertas\nsudo firewall-cmd --list-ports\n\n# Se a porta 5000 n√£o estiver aberta\nsudo firewall-cmd --permanent --add-port=5000/tcp\nsudo firewall-cmd --reload\n```\n\n### Passo 9: Acessar via browser\n```\n# No navegador do servidor ou rede local\nhttp://IP_DO_SERVIDOR:5000\n\n# P√°gina principal (display)\nhttp://IP_DO_SERVIDOR:5000\n\n# Painel administrativo\nhttp://IP_DO_SERVIDOR:5000/admin\n```\n\n---\n\n## üîß RESOLU√á√ÉO DE PROBLEMAS\n\n### Se o Node.js n√£o foi instalado:\n```bash\n# Verificar se Node.js existe\nnode --version\n\n# Se n√£o existir, instalar manualmente\ncd /opt\nsudo tar -xf /caminho/para/pacote/binarios/node-v20.15.1-linux-x64.tar.xz\nsudo ln -sf /opt/node-v*/bin/node /usr/local/bin/node\nsudo ln -sf /opt/node-v*/bin/npm /usr/local/bin/npm\n```\n\n### Se o servi√ßo n√£o iniciar:\n```bash\n# Ver logs detalhados\nsudo journalctl -u sistema-marinha --no-pager\n\n# Verificar se as depend√™ncias est√£o instaladas\ncd /opt/sistema-marinha\nls -la node_modules/\n\n# Reinstalar depend√™ncias se necess√°rio\nsudo npm install\n```\n\n### Testar manualmente:\n```bash\n# Parar o servi√ßo\nsudo systemctl stop sistema-marinha\n\n# Executar manualmente para ver erros\ncd /opt/sistema-marinha\nsudo -u nobody npm run dev\n```\n\n---\n\n## üìû COMANDOS √öTEIS\n\n```bash\n# Parar sistema\nsudo systemctl stop sistema-marinha\n\n# Iniciar sistema  \nsudo systemctl start sistema-marinha\n\n# Reiniciar sistema\nsudo systemctl restart sistema-marinha\n\n# Ver status\nsudo systemctl status sistema-marinha\n\n# Ver logs\nsudo journalctl -u sistema-marinha -f\n\n# Executar testes\ncd /opt/sistema-marinha\n./teste.sh\n```\n\n---\n\n## ‚ö†Ô∏è IMPORTANTE\n\n1. **Execute sempre como root** para instala√ß√£o\n2. **Firewall** deve permitir porta 5000\n3. **Espa√ßo em disco** necess√°rio: ~500MB-2GB\n4. **Oracle Linux** 7, 8 ou 9 suportados\n5. **Backup** dos dados antes de atualiza√ß√µes\n\n---\n\n**Sistema desenvolvido por 2SG Bruna Rocha**  \n**Marinha do Brasil - PAPEM**","size_bytes":3960},"INSTRUCOES-PACOTE-OFFLINE.md":{"content":"# Sistema Display Marinha - Pacote Offline para Oracle Linux\n\n## Situa√ß√£o Atual\n\nO sistema est√° funcionando perfeitamente no Replit com todas as funcionalidades implementadas:\n\n- ‚úÖ Hor√°rio do p√¥r do sol corrigido (17:18 para Rio de Janeiro)\n- ‚úÖ Layout responsivo completo (mobile, tablet, desktop)\n- ‚úÖ Sistema de exibi√ß√£o de PLASA e Escalas funcionando\n- ‚úÖ Cache inteligente e auto-restart implementados\n- ‚úÖ Todas as 335 depend√™ncias npm instaladas\n\n## Problema com Empacotamento no Replit\n\nO ambiente Replit tem limita√ß√µes para criar pacotes offline devido a:\n- Restri√ß√µes no sistema de arquivos virtual\n- Problemas com links simb√≥licos no node_modules\n- Timeouts em downloads grandes\n\n## Solu√ß√£o: Criar Pacote na M√°quina Local\n\n### Op√ß√£o 1: Script Autom√°tico (Recomendado)\n\nExecute este script em uma m√°quina com internet para criar o pacote completo:\n\n```bash\n#!/bin/bash\n# criar-pacote-offline-local.sh\n\nset -e\n\necho \"=== Criando Pacote Offline - Sistema Display Marinha ===\"\n\n# Baixar c√≥digo fonte do Replit\necho \"üì• Baixando c√≥digo fonte...\"\ngit clone https://github.com/seu-usuario/sistema-display-marinha.git || {\n    echo \"Baixe o c√≥digo fonte manualmente do Replit\"\n    echo \"Ou copie todos os arquivos para um diret√≥rio local\"\n}\n\n# Ou usar arquivos locais se j√° tiver\nPROJETO_DIR=\"./sistema-display-marinha\"\n[[ ! -d \"$PROJETO_DIR\" ]] && PROJETO_DIR=\".\"\n\ncd \"$PROJETO_DIR\"\n\n# Instalar depend√™ncias\necho \"üì¶ Instalando depend√™ncias...\"\nnpm install\n\n# Criar estrutura do pacote\necho \"üìÅ Criando estrutura do pacote offline...\"\nPACOTE_DIR=\"sistema-display-marinha-offline\"\nrm -rf \"$PACOTE_DIR\" 2>/dev/null || true\nmkdir -p \"$PACOTE_DIR\"/{app,nodejs,install}\n\n# Copiar aplica√ß√£o completa\necho \"üìã Copiando aplica√ß√£o...\"\ncp -r package*.json client server shared uploads *.md *.js *.ts *.config.* .env.example .gitignore \"$PACOTE_DIR/app/\" 2>/dev/null || true\n\n# Copiar node_modules (com todas as depend√™ncias)\necho \"üì¶ Copiando depend√™ncias (pode demorar)...\"\ncp -r node_modules \"$PACOTE_DIR/app/\"\n\n# Baixar Node.js para Linux\necho \"üì• Baixando Node.js para Linux...\"\ncd \"$PACOTE_DIR/nodejs\"\ncurl -fsSL https://nodejs.org/dist/v18.20.4/node-v18.20.4-linux-x64.tar.xz -o node.tar.xz\ntar -xf node.tar.xz --strip-components=1\nrm node.tar.xz\ncd ../..\n\n# Criar script de instala√ß√£o\ncat > \"$PACOTE_DIR/install/instalar.sh\" << 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== INSTALADOR Sistema Display Marinha ===\"\n\n[[ $EUID -ne 0 ]] && { echo \"Execute como root: sudo ./instalar.sh\"; exit 1; }\n\nDEST=\"/opt/display-marinha\"\nUSER=\"display-marinha\"\n\necho \"üìÅ Instalando em $DEST\"\nrm -rf \"$DEST\" 2>/dev/null || true\nmkdir -p \"$DEST\"\n\necho \"üë§ Criando usu√°rio do sistema\"\nif ! id \"$USER\" &>/dev/null; then\n    useradd -r -s /bin/false -d \"$DEST\" \"$USER\"\nfi\n\necho \"üì¶ Instalando Node.js e aplica√ß√£o\"\ncp -r nodejs/* \"$DEST/\"\ncp -r app/* \"$DEST/\"\nchmod +x \"$DEST/bin/\"*\nchown -R \"$USER:$USER\" \"$DEST\"\n\necho \"üìù Configurando servi√ßo\"\ncat > \"$DEST/start.sh\" << 'STARTEOF'\n#!/bin/bash\nexport PATH=\"/opt/display-marinha/bin:$PATH\"\ncd /opt/display-marinha\nnpm run dev\nSTARTEOF\n\nchmod +x \"$DEST/start.sh\"\nchown \"$USER:$USER\" \"$DEST/start.sh\"\n\n[[ -f \"$DEST/.env.example\" && ! -f \"$DEST/.env\" ]] && {\n    cp \"$DEST/.env.example\" \"$DEST/.env\"\n    chown \"$USER:$USER\" \"$DEST/.env\"\n}\n\ncat > /etc/systemd/system/display-marinha.service << 'SERVICEEOF'\n[Unit]\nDescription=Sistema Display Marinha\nAfter=network.target\n\n[Service]\nType=simple\nUser=display-marinha\nWorkingDirectory=/opt/display-marinha\nEnvironment=PATH=/opt/display-marinha/bin:/usr/bin:/bin\nEnvironment=NODE_ENV=production\nExecStart=/opt/display-marinha/start.sh\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nSERVICEEOF\n\nif command -v firewall-cmd &>/dev/null; then\n    firewall-cmd --permanent --add-port=5000/tcp &>/dev/null || true\n    firewall-cmd --reload &>/dev/null || true\nfi\n\nsystemctl daemon-reload\nsystemctl enable display-marinha\nsystemctl start display-marinha\n\nsleep 10\nif systemctl is-active --quiet display-marinha; then\n    echo \"‚úÖ Instala√ß√£o conclu√≠da!\"\n    echo \"üåê Interface: http://localhost:5000\"\n    echo \"üîß Admin: http://localhost:5000/admin\"\nelse\n    echo \"‚ùå Falha na inicializa√ß√£o\"\n    echo \"Logs: journalctl -u display-marinha -f\"\n    exit 1\nfi\nEOF\n\nchmod +x \"$PACOTE_DIR/install/instalar.sh\"\n\n# Criar README\ncat > \"$PACOTE_DIR/README.txt\" << 'EOF'\nSISTEMA DISPLAY MARINHA - PACOTE OFFLINE COMPLETO\n\nCONTE√öDO:\n- app/: Aplica√ß√£o completa com todas as depend√™ncias\n- nodejs/: Node.js 18.20.4 para Linux\n- install/: Script de instala√ß√£o autom√°tica\n\nINSTALA√á√ÉO NO ORACLE LINUX (SEM INTERNET):\n1. tar -xzf sistema-display-marinha-offline.tar.gz\n2. cd sistema-display-marinha-offline\n3. sudo ./install/instalar.sh\n\nACESSO:\n- Interface: http://localhost:5000\n- Admin: http://localhost:5000/admin\n\nCOMANDOS:\n- Status: systemctl status display-marinha\n- Logs: journalctl -u display-marinha -f\n- Restart: systemctl restart display-marinha\nEOF\n\n# Criar pacote final\necho \"üì¶ Criando pacote final...\"\ntar -czf sistema-display-marinha-offline.tar.gz \"$PACOTE_DIR\"\nrm -rf \"$PACOTE_DIR\"\n\nSIZE=$(du -h sistema-display-marinha-offline.tar.gz | cut -f1)\necho \"\"\necho \"‚úÖ PACOTE CRIADO: sistema-display-marinha-offline.tar.gz\"\necho \"üìè Tamanho: $SIZE\"\necho \"\"\necho \"Para instalar no Oracle Linux:\"\necho \"1. Transferir arquivo para o servidor\"\necho \"2. tar -xzf sistema-display-marinha-offline.tar.gz\"\necho \"3. cd sistema-display-marinha-offline\"\necho \"4. sudo ./install/instalar.sh\"\n```\n\n### Op√ß√£o 2: Processo Manual\n\nSe preferir fazer manualmente:\n\n1. **Baixar c√≥digo fonte completo do Replit**\n2. **Em uma m√°quina com internet, executar:**\n   ```bash\n   npm install  # Instalar todas as depend√™ncias\n   ```\n\n3. **Baixar Node.js para Linux:**\n   ```bash\n   curl -fsSL https://nodejs.org/dist/v18.20.4/node-v18.20.4-linux-x64.tar.xz -o node.tar.xz\n   ```\n\n4. **Criar estrutura do pacote:**\n   ```\n   pacote-offline/\n   ‚îú‚îÄ‚îÄ app/          # Todo o c√≥digo + node_modules\n   ‚îú‚îÄ‚îÄ nodejs/       # Node.js extra√≠do\n   ‚îî‚îÄ‚îÄ install/      # Scripts de instala√ß√£o\n   ```\n\n5. **Compactar:**\n   ```bash\n   tar -czf sistema-display-marinha-offline.tar.gz pacote-offline/\n   ```\n\n## Arquivos Essenciais para o Pacote\n\nCertifique-se de incluir todos estes arquivos/diret√≥rios:\n\n### C√≥digo Fonte\n- `package.json` e `package-lock.json`\n- `client/` (frontend React)\n- `server/` (backend Express)  \n- `shared/` (tipos compartilhados)\n- `uploads/` (diret√≥rio de uploads)\n- `node_modules/` (TODAS as 335 depend√™ncias)\n- Arquivos de configura√ß√£o: `*.config.*`, `.env.example`\n- Documenta√ß√£o: `*.md`\n\n### Runtime\n- Node.js 18.20.4 para Linux x64\n- Bin√°rios npm inclusos\n\n### Scripts de Instala√ß√£o\n- Script autom√°tico de instala√ß√£o\n- Configura√ß√£o de servi√ßo systemd\n- Configura√ß√£o de firewall\n- Cria√ß√£o de usu√°rio do sistema\n\n## Lista de Depend√™ncias Inclu√≠das\n\nO pacote deve incluir todas estas depend√™ncias (335 total):\n\n```json\n{\n  \"@hookform/resolvers\",\n  \"@radix-ui/react-*\",\n  \"@tanstack/react-query\",\n  \"react\", \"react-dom\",\n  \"typescript\",\n  \"vite\",\n  \"express\",\n  \"drizzle-orm\",\n  \"tailwindcss\",\n  \"lucide-react\",\n  \"framer-motion\",\n  // ... e mais 320+ depend√™ncias\n}\n```\n\n## Teste do Pacote\n\nAp√≥s criar o pacote, teste em uma VM Oracle Linux limpa:\n\n1. Transferir o arquivo `.tar.gz`\n2. Extrair e executar instala√ß√£o\n3. Verificar se o servi√ßo inicia\n4. Testar acesso via http://localhost:5000\n5. Verificar funcionalidades (PLASA, Escalas, Admin)\n\n## Suporte\n\nO sistema est√° totalmente funcional no Replit. O pacote offline permitir√° a mesma funcionalidade em Oracle Linux sem internet, incluindo:\n\n- Exibi√ß√£o autom√°tica de PLASA com scroll\n- Rota√ß√£o de escalas a cada 30 segundos  \n- Hor√°rio do p√¥r do sol atualizado (17:18)\n- Layout responsivo completo\n- Painel administrativo\n- Sistema de avisos\n\nQualquer d√∫vida sobre a cria√ß√£o do pacote ou instala√ß√£o no Oracle Linux, consulte este documento.","size_bytes":8009},"Index.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport PDFViewer from \"@/components/PDFViewer\";\nimport NoticeDisplay from \"@/components/NoticeDisplay\";\nimport { WeatherAlertsActive } from \"@/components/WeatherAlertsActive\";\nimport { DutyOfficersDisplay } from \"@/components/DutyOfficersDisplay\";\nimport { useDisplay } from \"@/context/DisplayContext\";\nimport { getSunsetWithLabel } from \"@/utils/sunsetUtils\";\nimport { getCurrentTemperature } from \"@/utils/temperatureUtils\";\nimport logoPAPEM from \"@assets/logoPAPEM_1751352314977.png\";\n\nconst Index = () => {\n  const {\n    activePlasaDoc,\n    activeBonoDoc,\n    activeEscalaDoc,\n    currentMainDocType,\n    scrollSpeed = \"normal\",\n    autoRestartDelay = 3,\n    handleScrollComplete\n  } = useDisplay();\n\n  const [sunsetTime, setSunsetTime] = useState<string>(\"--:--\");\n  const [currentTime, setCurrentTime] = useState<string>(\"\");\n  const [currentDate, setCurrentDate] = useState({\n    day: \"\",\n    month: \"\",\n    weekday: \"\"\n  });\n\n  // Estados para dados inline\n  const [officers, setOfficers] = useState<{officerName?: string, masterName?: string} | null>(null);\n  const [temperature, setTemperature] = useState<{temp?: number, humidity?: number, description?: string, rainChance?: number} | null>(null);\n\n  // Buscar hor√°rio do p√¥r do sol\n  useEffect(() => {\n    const fetchSunset = async () => {\n      try {\n        const sunset = await getSunsetWithLabel();\n        setSunsetTime(sunset);\n      } catch (error) {\n        console.error('Erro ao buscar p√¥r do sol:', error);\n        setSunsetTime(\"P√¥r do sol: --:--\");\n      }\n    };\n\n    fetchSunset();\n    \n    // Atualizar a cada hora\n    const interval = setInterval(fetchSunset, 60 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Buscar dados dos oficiais\n  useEffect(() => {\n    const fetchOfficers = async () => {\n      try {\n        const getBackendUrl = (): string => {\n          const currentHost = window.location.hostname;\n          const currentOrigin = window.location.origin;\n          const isReplit = currentHost.includes('replit.dev');\n          if (isReplit) {\n            return `${currentOrigin}/api/duty-officers`;\n          }\n          if (currentHost === 'localhost' || currentHost === '127.0.0.1') {\n            return `http://localhost:5000/api/duty-officers`;\n          }\n          return `${currentOrigin}/api/duty-officers`;\n        };\n\n        const response = await fetch(getBackendUrl());\n        if (response.ok) {\n          const data = await response.json();\n          if (data.success) {\n            setOfficers(data.officers);\n          }\n        }\n      } catch (error) {\n        console.error('Erro ao buscar oficiais:', error);\n      }\n    };\n\n    fetchOfficers();\n    const interval = setInterval(fetchOfficers, 5 * 60 * 1000); // 5 minutos\n    return () => clearInterval(interval);\n  }, []);\n\n  // Buscar dados da temperatura\n  useEffect(() => {\n    const fetchTemperature = async () => {\n      try {\n        const data = await getCurrentTemperature();\n        if (data) {\n          setTemperature(data);\n        }\n      } catch (error) {\n        console.error('Erro ao buscar temperatura:', error);\n      }\n    };\n\n    fetchTemperature();\n    const interval = setInterval(fetchTemperature, 30 * 60 * 1000); // 30 minutos\n    return () => clearInterval(interval);\n  }, []);\n\n  // Atualizar hor√°rio e data em tempo real\n  useEffect(() => {\n    const updateDateTime = () => {\n      const now = new Date();\n      \n      // Atualizar hor√°rio\n      const timeString = now.toLocaleTimeString('pt-BR', { \n        hour: '2-digit', \n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false \n      });\n      setCurrentTime(timeString);\n\n      // Atualizar data\n      const day = now.getDate().toString().padStart(2, '0');\n      const month = (now.getMonth() + 1).toString().padStart(2, '0');\n      const weekday = now.toLocaleDateString('pt-BR', { weekday: 'short' }).toUpperCase();\n      \n      setCurrentDate({ day, month, weekday });\n    };\n\n    // Atualizar imediatamente\n    updateDateTime();\n    \n    // Configurar timer para atualizar a cada segundo\n    const clockInterval = setInterval(updateDateTime, 1000);\n    \n    // Cleanup do timer\n    return () => clearInterval(clockInterval);\n  }, []);\n\n  // Determinar qual documento principal mostrar\n  const currentMainDoc = currentMainDocType === \"plasa\" ? activePlasaDoc : activeBonoDoc;\n  const mainDocTitle = currentMainDoc?.title || \n    (currentMainDocType === \"plasa\" ? \"PLASA - Plano de Servi√ßo Semanal\" : \"BONO - Boletim de Ocorr√™ncias\");\n\n  console.log(\"üè† Index: Renderizando p√°gina principal\", {\n    activePlasa: activePlasaDoc?.title || 'nenhum',\n    activeBono: activeBonoDoc?.title || 'nenhum',\n    activeEscala: activeEscalaDoc?.title || 'nenhum',\n    currentMainDocType,\n    currentMainDoc: currentMainDoc?.title || 'nenhum',\n    scrollSpeed,\n    autoRestartDelay\n  });\n\n  return (\n    <div className=\"h-screen w-screen bg-gradient-to-br from-blue-950 via-slate-900 to-blue-950 flex flex-col overflow-hidden\">\n      {/* Header Principal - Painel com contorno restaurado */}\n      <header className=\"flex-shrink-0 mb-2 px-6 py-4 bg-gradient-to-r from-slate-800/80 to-blue-900/80 backdrop-blur-xl rounded-lg shadow-xl border border-blue-400/30 mx-2\">\n        <div className=\"flex items-center justify-center space-x-4\">\n          <div className=\"relative\">\n            <div className=\"w-16 h-16 bg-transparent rounded-lg flex items-center justify-center shadow-lg p-1\">\n              <img \n                src={logoPAPEM} \n                alt=\"Logo PAPEM\" \n                className=\"w-full h-full object-contain\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold bg-gradient-to-r from-blue-300 to-white bg-clip-text text-transparent\">\n              MARINHA DO BRASIL\n            </h1>\n            <p className=\"text-blue-200/90 text-base font-medium\">\n              Pagadoria de Pessoal da Marinha\n            </p>\n          </div>\n        </div>\n      </header>\n\n      {/* Barra de Informa√ß√µes Operacionais - Com bordas arredondadas */}\n      <div className=\"flex-shrink-0 mb-2 px-2 sm:px-4 py-2 bg-gradient-to-r from-slate-700/50 to-blue-800/50 backdrop-blur-lg rounded-lg shadow-lg border border-blue-400/20 mx-2\">\n        \n        {/* Layout Desktop - Uma linha */}\n        <div className=\"hidden lg:flex items-center justify-center space-x-6 text-sm overflow-hidden\">\n          \n          {/* Oficial - Din√¢mico e Estilizado */}\n          {officers?.officerName && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-blue-600/20 px-3 py-1 rounded-lg border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">üëÆ‚Äç‚ôÇÔ∏è Oficial:</span>\n                <span className=\"text-white font-bold text-sm\">{officers.officerName}</span>\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n          \n          {/* Contramestre - Din√¢mico e Estilizado */}\n          {officers?.masterName && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-blue-600/20 px-3 py-1 rounded-lg border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">‚öì Contramestre:</span>\n                <span className=\"text-white font-bold text-sm\">{officers.masterName}</span>\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n\n          {/* Temperatura - Din√¢mica com Probabilidade de Chuva */}\n          {temperature && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-slate-600/20 px-3 py-1 rounded-lg border border-slate-400/30\">\n                <span className=\"text-slate-300 font-medium text-xs\">üå°Ô∏è Temp:</span>\n                <span className=\"text-white font-bold text-sm\">{temperature.temp}¬∞C</span>\n                \n                {/* Probabilidade de chuva com emoji din√¢mico */}\n                {temperature.rainChance !== undefined && (\n                  <div className=\"flex items-center space-x-1\">\n                    <span className=\"text-lg\">\n                      {temperature.rainChance >= 80 ? 'üåßÔ∏è' : \n                       temperature.rainChance >= 60 ? '‚õàÔ∏è' : \n                       temperature.rainChance >= 40 ? 'üå¶Ô∏è' : \n                       temperature.rainChance >= 20 ? 'üå§Ô∏è' : '‚òÄÔ∏è'}\n                    </span>\n                    <span className=\"text-blue-300 font-semibold text-xs\">{temperature.rainChance}%</span>\n                  </div>\n                )}\n                \n                {/* Emoji baseado na temperatura */}\n                {temperature.temp && (\n                  <span className=\"text-base opacity-70\">\n                    {temperature.temp >= 30 ? 'üî•' : \n                     temperature.temp >= 25 ? 'üåû' : \n                     temperature.temp >= 20 ? 'üå§Ô∏è' : \n                     temperature.temp >= 15 ? '‚õÖ' : '‚ùÑÔ∏è'}\n                  </span>\n                )}\n                \n                {/* Descri√ß√£o do clima */}\n                {temperature.description && (\n                  <span className=\"text-slate-300 text-xs capitalize italic\">\n                    {temperature.description}\n                  </span>\n                )}\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n          \n          {/* Data - Estilizada */}\n          <div className=\"flex items-center space-x-2 bg-green-600/20 px-3 py-1 rounded-lg border border-green-400/30\">\n            <span className=\"text-green-300 font-medium text-xs\">üìÖ Hoje:</span>\n            <span className=\"text-white font-bold text-sm\">\n              {currentDate.weekday}, {new Date().toLocaleDateString('pt-BR', { \n                day: '2-digit', \n                month: 'short' \n              })}\n            </span>\n          </div>\n          \n          {/* Divisor */}\n          <div className=\"w-px h-4 bg-blue-400/30\"></div>\n          \n          {/* Hora - Estilizada */}\n          <div className=\"flex items-center space-x-2 bg-purple-600/20 px-3 py-1 rounded-lg border border-purple-400/30\">\n            <span className=\"text-purple-300 font-medium text-xs\">‚è∞ Hora:</span>\n            <span className=\"text-white font-mono font-bold text-sm tracking-wider\">\n              {currentTime}\n            </span>\n          </div>\n          \n          {/* Divisor */}\n          <div className=\"w-px h-4 bg-blue-400/30\"></div>\n          \n          {/* P√¥r do Sol - Estilizado */}\n          <div className=\"flex items-center space-x-2 bg-orange-600/20 px-3 py-1 rounded-lg border border-orange-400/30\">\n            <span className=\"text-amber-300 font-bold text-sm\">\n              üåÖ {sunsetTime}\n            </span>\n          </div>\n          \n        </div>\n\n        {/* Layout Mobile/Tablet - Grid Responsivo */}\n        <div className=\"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs\">\n          \n          {/* Primeira Linha Mobile */}\n          <div className=\"col-span-1 sm:col-span-2 flex flex-wrap items-center justify-center gap-2\">\n            {/* Oficiais */}\n            {officers?.officerName && (\n              <div className=\"flex items-center space-x-1 bg-blue-600/20 px-2 py-1 rounded border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">üëÆ‚Äç‚ôÇÔ∏è</span>\n                <span className=\"text-white font-bold text-xs\">{officers.officerName}</span>\n              </div>\n            )}\n            {officers?.masterName && (\n              <div className=\"flex items-center space-x-1 bg-blue-600/20 px-2 py-1 rounded border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">‚öì</span>\n                <span className=\"text-white font-bold text-xs\">{officers.masterName}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Segunda Linha Mobile */}\n          <div className=\"flex items-center justify-center\">\n            {temperature && (\n              <div className=\"flex items-center space-x-2 bg-slate-600/20 px-2 py-1 rounded border border-slate-400/30\">\n                <span className=\"text-slate-300 text-xs\">üå°Ô∏è {temperature.temp}¬∞C</span>\n                {temperature.rainChance !== undefined && (\n                  <div className=\"flex items-center space-x-1\">\n                    <span className=\"text-sm\">\n                      {temperature.rainChance >= 80 ? 'üåßÔ∏è' : \n                       temperature.rainChance >= 60 ? '‚õàÔ∏è' : \n                       temperature.rainChance >= 40 ? 'üå¶Ô∏è' : \n                       temperature.rainChance >= 20 ? 'üå§Ô∏è' : '‚òÄÔ∏è'}\n                    </span>\n                    <span className=\"text-blue-300 text-xs\">{temperature.rainChance}%</span>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Terceira Linha Mobile */}\n          <div className=\"flex items-center justify-center\">\n            <div className=\"flex items-center space-x-3 bg-green-600/20 px-2 py-1 rounded border border-green-400/30\">\n              <span className=\"text-green-300 text-xs\">üìÖ {currentDate.weekday}, {new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' })}</span>\n              <span className=\"text-purple-300 text-xs\">‚è∞ {currentTime}</span>\n              <span className=\"text-amber-300 text-xs\">üåÖ {sunsetTime}</span>\n            </div>\n          </div>\n          \n        </div>\n        \n      </div>\n\n      {/* Main Content - Espa√ßo calculado descontando header + status + footer */}\n      <div className=\"flex-1 flex flex-col lg:flex-row gap-2 p-2 overflow-hidden\">\n        \n        {/* PLASA - Ocupa espa√ßo dispon√≠vel */}\n        <div className=\"w-full lg:w-3/5 flex-1 lg:flex-none lg:h-full\">\n          <div className=\"h-full bg-gradient-to-br from-white/5 via-blue-900/20 to-white/5 backdrop-blur-sm rounded-lg border border-blue-400/25 shadow-xl hover:border-blue-400/40 transition-all duration-500 overflow-hidden\">\n            <PDFViewer\n              documentType={currentMainDocType}\n              title={mainDocTitle}\n              scrollSpeed={scrollSpeed}\n              autoRestartDelay={autoRestartDelay}\n              onScrollComplete={handleScrollComplete}\n            />\n          </div>\n        </div>\n\n        {/* Lado direito - Escala e Avisos */}\n        <div className=\"w-full lg:w-2/5 flex flex-col gap-2 flex-1 lg:flex-none lg:h-full\">\n          \n          {/* Escala de Servi√ßo - 65% da altura dispon√≠vel */}\n          <div className=\"flex-1 lg:h-[65%]\">\n            <div className=\"h-full bg-gradient-to-br from-white/5 via-blue-900/20 to-white/5 backdrop-blur-sm rounded-lg border border-blue-400/25 shadow-xl hover:border-blue-400/40 transition-all duration-500 overflow-hidden\">\n              <PDFViewer\n                documentType=\"escala\"\n                title={activeEscalaDoc?.title || \"Escala de Servi√ßo Semanal\"}\n              />\n            </div>\n          </div>\n\n          {/* Avisos Importantes - 35% da altura dispon√≠vel */}\n          <div className=\"flex-1 lg:h-[35%]\">\n            <div className=\"h-full bg-gradient-to-br from-amber-900/20 to-orange-900/20 backdrop-blur-sm rounded-lg border border-amber-400/30 shadow-xl hover:border-amber-400/50 transition-all duration-500 overflow-hidden\">\n              <NoticeDisplay />\n            </div>\n          </div>\n          \n        </div>\n      </div>\n\n      {/* Footer - Rodap√© fixo */}\n      <footer className=\"flex-shrink-0 bg-gradient-to-r from-slate-800/70 to-blue-900/70 backdrop-blur-xl shadow-xl border-t border-blue-400/25 py-2 px-4 text-center\">\n        <p className=\"text-xs text-blue-200/80 font-medium\">\n          &copy; {new Date().getFullYear()} Marinha do Brasil - PAPEM \n        </p>\n      </footer>\n    </div>\n  );\n};\n\nexport default Index;","size_bytes":16097},"README-PACOTE-SIMPLES.md":{"content":"# Sistema Display Marinha - Pacote Offline SIMPLES\n\n## Situa√ß√£o\n\n‚úÖ **Sistema funcionando perfeitamente no Replit**\n- Hor√°rio p√¥r do sol: 17:18 (Rio de Janeiro)\n- Layout responsivo completo\n- PLASA com scroll autom√°tico\n- Escalas alternando a cada 30s\n- Todas as 335 depend√™ncias instaladas\n\n## Solu√ß√£o √öNICA\n\n**UM SCRIPT S√ì** ‚Üí `pacote-offline-final.sh`\n\n### Como usar:\n\n1. **Copie este c√≥digo do Replit para sua m√°quina local**\n2. **Execute o script:**\n   ```bash\n   chmod +x pacote-offline-final.sh\n   ./pacote-offline-final.sh\n   ```\n3. **Resultado:** `sistema-marinha-offline.tar.gz`\n\n### Instala√ß√£o no Oracle Linux:\n\n```bash\ntar -xzf sistema-marinha-offline.tar.gz\ncd sistema-marinha-offline\nsudo ./instalar.sh\n```\n\n**Pronto!** Sistema rodando em `http://localhost:5000`\n\n## O que o script faz:\n\n1. Baixa Node.js para Linux\n2. Copia todo o c√≥digo fonte  \n3. Instala todas as 335 depend√™ncias\n4. Cria instalador autom√°tico\n5. Compacta tudo em um arquivo\n\n## Comandos no Oracle Linux:\n\n```bash\n# Status\nsystemctl status display-marinha\n\n# Logs  \njournalctl -u display-marinha -f\n\n# Reiniciar\nsystemctl restart display-marinha\n```\n\n**Fim.** Sem complica√ß√£o, sem arquivos extras.","size_bytes":1203},"README-USUARIO.md":{"content":"# Sistema de Visualiza√ß√£o Naval - Guia do Usu√°rio\n\n## üìã √çndice\n1. [Vis√£o Geral](#vis√£o-geral)\n2. [Acesso ao Sistema](#acesso-ao-sistema)\n3. [Interface Principal](#interface-principal)\n4. [Painel Administrativo](#painel-administrativo)\n5. [Gerenciamento de Documentos](#gerenciamento-de-documentos)\n6. [Sistema de Avisos](#sistema-de-avisos)\n7. [Militares de Servi√ßo](#militares-de-servi√ßo)\n8. [Configura√ß√µes do Sistema](#configura√ß√µes-do-sistema)\n9. [Solu√ß√µes de Problemas](#solu√ß√µes-de-problemas)\n\n---\n\n## üéØ Vis√£o Geral\n\nO Sistema de Visualiza√ß√£o Naval foi desenvolvido para exibir documentos navais importantes como PLASA, BONO, Escalas e Card√°pios de forma automatizada e organizada. O sistema oferece:\n\n- **Exibi√ß√£o Autom√°tica**: Documentos s√£o exibidos automaticamente com rota√ß√£o entre diferentes tipos\n- **Scroll Inteligente**: PLASAs e BONOs rolam automaticamente para leitura completa\n- **Avisos Priorit√°rios**: Sistema de avisos com n√≠veis de prioridade (alta, m√©dia, baixa)\n- **Informa√ß√µes Meteorol√≥gicas**: Temperatura atual e alertas meteorol√≥gicos do Rio de Janeiro\n- **Gerenciamento de Oficiais**: Controle dos oficiais e contrames de servi√ßo\n\n---\n\n## üîê Acesso ao Sistema\n\n### Tela Principal (Visualiza√ß√£o)\n- **URL**: `http://seu-servidor:5000/`\n- **Descri√ß√£o**: Interface p√∫blica para visualiza√ß√£o dos documentos\n- **Acesso**: Aberto para todos os usu√°rios\n\n### Painel Administrativo\n- **URL**: `http://seu-servidor:5000/admin`\n- **Descri√ß√£o**: Interface para gerenciamento do sistema\n- **Acesso**: Restrito aos administradores\n\n---\n\n## üñ•Ô∏è Interface Principal\n\n### Elementos da Tela\n\n#### Cabe√ßalho\n- **Logo**: Identifica√ß√£o do sistema com logo da Marinha\n- **Temperatura**: Exibe temperatura atual do Rio de Janeiro\n- **Oficiais de Servi√ßo**: Mostra oficial do dia e contramestre atual\n- **Data/Hora**: Informa√ß√µes atualizadas em tempo real\n\n#### √Årea de Conte√∫do\n- **Documentos**: Exibi√ß√£o rotativa de PLASA, BONO, Escalas e Card√°pios\n- **Avisos**: Notifica√ß√µes importantes exibidas em destaque\n- **Frase do Dia**: Frase motivacional naval renovada diariamente\n\n#### Rodap√©\n- **Informa√ß√µes do Sistema**: Vers√£o e status operacional\n- **Indicadores**: Status de conex√£o e √∫ltima atualiza√ß√£o\n\n---\n\n## ‚öôÔ∏è Painel Administrativo\n\n### Acesso √†s Funcionalidades\n\nO painel administrativo est√° organizado em 4 abas principais:\n\n1. **üìÑ Documentos**: Gerenciamento de PDFs\n2. **üì¢ Avisos**: Sistema de comunica√ß√µes\n3. **üëÆ Militares**: Controle de oficiais de servi√ßo\n4. **üîß Sistema**: Configura√ß√µes e manuten√ß√£o\n\n---\n\n## üìÑ Gerenciamento de Documentos\n\n### Upload de Documentos\n\n1. **Acesse** a aba \"Documentos\" no painel administrativo\n2. **Clique** em \"Adicionar Documento\"\n3. **Preencha** as informa√ß√µes:\n   - **T√≠tulo**: Nome descritivo do documento\n   - **Tipo**: Selecione entre PLASA, BONO, Escala ou Card√°pio\n   - **Arquivo**: Selecione o arquivo PDF ou imagem\n4. **Clique** em \"Salvar Documento\"\n\n### Tipos de Documentos\n\n#### PLASA (Plano de Adestramento)\n- **Comportamento**: Scroll autom√°tico vertical\n- **Dura√ß√£o**: Baseada no conte√∫do do documento\n- **Uso**: Documentos longos que requerem leitura completa\n\n#### BONO (Boletim de Opera√ß√µes Navais)\n- **Comportamento**: Scroll autom√°tico vertical\n- **Dura√ß√£o**: Baseada no conte√∫do do documento\n- **Uso**: Boletins oficiais e comunica√ß√µes importantes\n- **Automa√ß√£o**: Download autom√°tico dispon√≠vel\n\n#### Escala de Servi√ßo\n- **Comportamento**: Exibi√ß√£o est√°tica\n- **Dura√ß√£o**: 30 segundos (configur√°vel)\n- **Uso**: Escalas de pessoal e hor√°rios\n- **Rota√ß√£o**: Alterna entre m√∫ltiplas escalas\n\n#### Card√°pio\n- **Comportamento**: Exibi√ß√£o est√°tica\n- **Dura√ß√£o**: 30 segundos (configur√°vel)\n- **Uso**: Card√°pios do refeit√≥rio e programa√ß√£o alimentar\n\n### Gerenciamento de Documentos\n\n#### Editar Documento\n1. **Localize** o documento na lista\n2. **Clique** no bot√£o \"Editar\" (√≠cone de l√°pis)\n3. **Modifique** as informa√ß√µes necess√°rias\n4. **Salve** as altera√ß√µes\n\n#### Ativar/Desativar Documento\n- **Ativo**: Documento aparece na rota√ß√£o de exibi√ß√£o\n- **Inativo**: Documento fica salvo mas n√£o √© exibido\n- **Toggle**: Clique no interruptor para alternar o status\n\n#### Excluir Documento\n1. **Clique** no bot√£o \"Excluir\" (√≠cone de lixeira)\n2. **Confirme** a exclus√£o\n3. **Aten√ß√£o**: Esta a√ß√£o √© irrevers√≠vel\n\n---\n\n## üì¢ Sistema de Avisos\n\n### Cria√ß√£o de Avisos\n\n1. **Acesse** a aba \"Avisos\"\n2. **Preencha** o formul√°rio:\n   - **T√≠tulo**: T√≠tulo do aviso (obrigat√≥rio)\n   - **Conte√∫do**: Texto do aviso (obrigat√≥rio)\n   - **Prioridade**: Alta, M√©dia ou Baixa\n   - **Data de In√≠cio**: Quando o aviso deve come√ßar a aparecer\n   - **Data de Fim**: Quando o aviso deve parar de aparecer\n   - **Status**: Ativo ou Inativo\n3. **Clique** em \"Salvar Aviso\"\n\n### N√≠veis de Prioridade\n\n#### Alta Prioridade (Vermelha)\n- **Apar√™ncia**: Fundo vermelho com texto branco\n- **Uso**: Emerg√™ncias, alertas cr√≠ticos\n- **Exemplo**: \"ATEN√á√ÉO: Exerc√≠cio de abandono √†s 15:00h\"\n\n#### M√©dia Prioridade (Amarela)\n- **Apar√™ncia**: Fundo amarelo com texto escuro\n- **Uso**: Informa√ß√µes importantes\n- **Exemplo**: \"Reuni√£o de oficial √†s 14:00h no Comando\"\n\n#### Baixa Prioridade (Azul)\n- **Apar√™ncia**: Fundo azul claro com texto escuro\n- **Uso**: Informa√ß√µes gerais\n- **Exemplo**: \"Card√°pio especial dispon√≠vel no refeit√≥rio\"\n\n### Per√≠odo de Validade\n\n- **Configur√°vel**: Defina data/hora de in√≠cio e fim\n- **Autom√°tico**: Avisos s√£o exibidos/ocultados automaticamente\n- **Flex√≠vel**: Pode ser ativado/desativado manualmente\n\n---\n\n## üëÆ Militares de Servi√ßo\n\n### Configura√ß√£o de Oficiais\n\n1. **Acesse** a aba \"Militares\"\n2. **Preencha** os campos:\n   - **Oficial do Dia**: Nome completo com gradua√ß√£o\n   - **Contramestre**: Nome completo com gradua√ß√£o\n3. **Exemplo de Formato**:\n   - \"1¬∫ Tenente KARINE\"\n   - \"Capit√£o-Tenente SILVA\"\n   - \"1¬∫ Sargento RAFAELA\"\n4. **Clique** em \"Salvar Oficiais\"\n\n### Dicas Importantes\n\n- **Gradua√ß√£o**: Sempre inclua a gradua√ß√£o completa\n- **Formato**: \"Gradua√ß√£o NOME\" (ex: \"1¬∫ Tenente MARIA\")\n- **Persist√™ncia**: Dados s√£o salvos no banco de dados\n- **Atualiza√ß√£o**: Informa√ß√µes aparecem automaticamente na tela principal\n\n---\n\n## üîß Configura√ß√µes do Sistema\n\n### Aba Sistema\n\n#### Configura√ß√µes de Exibi√ß√£o\n- **Velocidade de Scroll**: Lenta, Normal ou R√°pida\n- **Intervalo de Altern√¢ncia**: Tempo entre escalas (segundos)\n- **Delay de Rein√≠cio**: Pausa no final do PLASA\n\n#### Automa√ß√£o BONO\n- **Status**: Ativo/Inativo\n- **URL Personalizada**: Configure URL espec√≠fica\n- **Download Manual**: For√ßa download imediato\n- **Agendamento**: Download autom√°tico di√°rio\n\n#### Ferramentas de Manuten√ß√£o\n- **Limpar Cache**: Remove arquivos tempor√°rios\n- **Informa√ß√µes do Sistema**: Dados t√©cnicos\n- **Logs**: Hist√≥rico de opera√ß√µes\n\n### Alertas Meteorol√≥gicos\n\n- **Autom√°tico**: Alertas do Rio de Janeiro\n- **Configur√°vel**: Tipos de alertas (chuva, vento, tempestade)\n- **Tempo Real**: Atualiza√ß√£o constante\n\n---\n\n## üîß Solu√ß√µes de Problemas\n\n### Problemas Comuns\n\n#### Documento n√£o aparece na tela\n**Causas poss√≠veis:**\n- Documento est√° inativo\n- Arquivo corrompido\n- Problema de upload\n\n**Solu√ß√µes:**\n1. Verifique se o documento est√° ativo\n2. Tente fazer novo upload\n3. Verifique o formato do arquivo (PDF, JPG, PNG)\n\n#### Avisos n√£o s√£o exibidos\n**Causas poss√≠veis:**\n- Aviso est√° inativo\n- Per√≠odo de validade expirado\n- Problema de conex√£o\n\n**Solu√ß√µes:**\n1. Verifique o status do aviso\n2. Confirme as datas de in√≠cio/fim\n3. Teste a conex√£o com o servidor\n\n#### Temperatura n√£o atualiza\n**Causas poss√≠veis:**\n- Problema de conex√£o com API\n- Chave de API inv√°lida\n- Servidor offline\n\n**Solu√ß√µes:**\n1. Verifique conex√£o com internet\n2. Recarregue a p√°gina\n3. Contate o administrador\n\n#### Oficiais n√£o aparecem\n**Causas poss√≠veis:**\n- Nomes n√£o salvos\n- Problema de conex√£o com banco\n- Formato incorreto\n\n**Solu√ß√µes:**\n1. Verifique se os nomes foram salvos\n2. Confirme o formato \"Gradua√ß√£o NOME\"\n3. Teste a conex√£o com o servidor\n\n### Limpeza de Cache\n\n#### Quando usar:\n- Sistema lento\n- Documentos antigos aparecem\n- Erros de carregamento\n\n#### Como limpar:\n1. **Acesse** Sistema > Manuten√ß√£o\n2. **Clique** em \"Limpar Cache\"\n3. **Aguarde** confirma√ß√£o\n4. **Recarregue** a p√°gina\n\n### Reinicializa√ß√£o do Sistema\n\n#### Rein√≠cio Suave:\n1. Recarregue a p√°gina (F5)\n2. Limpe cache do navegador\n3. Feche e abra o navegador\n\n#### Rein√≠cio Completo:\n1. Acesse o painel administrativo\n2. Use ferramentas de manuten√ß√£o\n3. Limpe cache do servidor\n4. Reinicie o servi√ßo\n\n---\n\n## üìû Suporte T√©cnico\n\n### Contatos\n- **Administrador do Sistema**: [Inserir contato]\n- **Suporte T√©cnico**: [Inserir contato]\n- **Emerg√™ncia**: [Inserir contato]\n\n### Informa√ß√µes √öteis\n- **Vers√£o do Sistema**: Navy Display v2.0\n- **√öltima Atualiza√ß√£o**: Julho 2025\n- **Documenta√ß√£o T√©cnica**: Dispon√≠vel em `README.md`\n\n### Logs e Diagn√≥stico\n- **Console do Navegador**: F12 para ver logs\n- **Informa√ß√µes do Sistema**: Painel Admin > Sistema\n- **Status do Servidor**: Verifica√ß√£o autom√°tica\n\n---\n\n## üìù Notas Importantes\n\n### Seguran√ßa\n- Mantenha o painel administrativo seguro\n- Use senhas fortes quando aplic√°vel\n- Monitore acessos ao sistema\n\n### Backup\n- Documentos s√£o salvos no servidor\n- Configura√ß√µes ficam no banco de dados\n- Fa√ßa backups regulares\n\n### Performance\n- Limite de 10MB por documento\n- Cache autom√°tico para otimiza√ß√£o\n- Limpeza peri√≥dica recomendada\n\n### Compatibilidade\n- Navegadores modernos (Chrome, Firefox, Safari)\n- Resolu√ß√£o m√≠nima: 1024x768\n- Suporte a dispositivos m√≥veis\n\n---\n\n*Desenvolvido para a Marinha do Brasil - Sistema de Visualiza√ß√£o Naval v2.0*","size_bytes":9878},"README.md":{"content":"# Sistema de Display da Marinha v2.0\n\nSistema completo de visualiza√ß√£o para documentos PLASA e Escalas de Servi√ßo da Marinha do Brasil com melhorias significativas de responsividade e funcionalidades autom√°ticas.\n\n## üöÄ Vers√£o 2.0 - Novas Funcionalidades\n\n- üåÖ **Hor√°rio do P√¥r do Sol**: Atualiza√ß√£o di√°ria autom√°tica para Rio de Janeiro\n- üì± **Layout Totalmente Responsivo**: Adapta-se perfeitamente a todos os dispositivos\n- ‚ö° **Performance Otimizada**: Cache inteligente e processamento melhorado\n- üîÑ **Auto-restart**: Rein√≠cio autom√°tico ap√≥s conclus√£o do scroll\n- üìä **Sistema Robusto**: Tratamento de erros aprimorado e logs detalhados\n\n## üìã Funcionalidades Principais\n\n- üìÑ **Exibi√ß√£o PLASA**: Visualiza√ß√£o autom√°tica com scroll suave de documentos do Plano de Servi√ßo Semanal\n- üìã **Exibi√ß√£o Escala**: Rota√ß√£o autom√°tica entre escalas de servi√ßo a cada 30 segundos\n- üì¢ **Avisos Importantes**: Sistema de notifica√ß√µes em tempo real com prioridades\n- üïê **Data/Hora Din√¢mica**: Exibi√ß√£o cont√≠nua com hor√°rio do p√¥r do sol atualizado\n- üîß **Painel Admin Completo**: Gerenciamento de documentos, avisos e configura√ß√µes\n\n## üåê Acesso ao Sistema\n\n- **Interface Principal**: http://localhost:5000\n- **Painel Administrativo**: http://localhost:5000/admin\n\n## ‚ö° Como usar\n\n1. **Executar**: `npm run dev`\n2. **Acessar**: http://localhost:5000\n3. **Gerenciar**: Use /admin para upload de documentos e configura√ß√µes\n\n## üì± Design Responsivo\n\n- **Desktop**: Layout com PLASA (60%) e Escala/Avisos (40%)\n- **Tablet**: Adapta√ß√£o autom√°tica das propor√ß√µes\n- **Mobile**: Layout em coluna √∫nica otimizado\n\n## üìÅ Estrutura do Sistema\n\n```\n/\n‚îú‚îÄ‚îÄ client/          # Frontend React + TypeScript\n‚îÇ   ‚îú‚îÄ‚îÄ src/pages/   # P√°ginas (Index, Admin)\n‚îÇ   ‚îú‚îÄ‚îÄ src/components/ # Componentes (PDFViewer, NoticeDisplay)\n‚îÇ   ‚îî‚îÄ‚îÄ src/utils/   # Utilit√°rios (sunsetUtils, pdfUtils)\n‚îú‚îÄ‚îÄ server/          # Backend Express + Node.js\n‚îÇ   ‚îú‚îÄ‚îÄ routes.ts    # API endpoints\n‚îÇ   ‚îî‚îÄ‚îÄ storage.ts   # Gerenciamento de dados\n‚îú‚îÄ‚îÄ shared/          # Tipos TypeScript compartilhados\n‚îú‚îÄ‚îÄ uploads/         # Arquivos PDF enviados\n‚îî‚îÄ‚îÄ logs/           # Logs do sistema\n```\n\n## üõ†Ô∏è Tecnologias\n\n- **Frontend**: React + TypeScript + Vite + Tailwind CSS\n- **Backend**: Express + Node.js + Multer\n- **Processamento**: PDF.js para convers√£o autom√°tica\n- **Styling**: shadcn/ui + Framer Motion\n- **Build**: Vite com HMR\n\n## üì¶ Instala√ß√£o\n\n### Instala√ß√£o R√°pida (Online)\n```bash\nnpm install\nnpm run dev\n```\n\n### Instala√ß√£o Offline (Oracle Linux)\n```bash\n# 1. Preparar pacote (m√°quina com internet)\n./empacotamento-offline.sh\n\n# 2. Transferir e instalar (m√°quina de destino)\ntar -xzf sistema-display-marinha-offline.tar.gz\ncd sistema-display-offline-temp\nsudo ./instalar-offline.sh\n```\n\n## üìñ Documenta√ß√£o\n\n- **Instala√ß√£o Local**: [INSTALACAO-LOCAL.md](INSTALACAO-LOCAL.md)\n- **Compatibilidade**: [COMPATIBILIDADE-LIBS.md](COMPATIBILIDADE-LIBS.md)\n- **Resumo de Melhorias**: [RESUMO-MELHORIAS.md](RESUMO-MELHORIAS.md)\n\n## üß™ Testes\n\n```bash\n# Testes automatizados\nnode test.js\n\n# Testes espec√≠ficos\n./teste.sh\n```\n\n## üîß Configura√ß√£o\n\nO sistema funciona sem configura√ß√£o adicional. Para personaliza√ß√µes avan√ßadas, consulte o arquivo `.env.example`.\n\n## üìà Performance\n\n- **Startup**: < 3 segundos\n- **Scroll**: 60fps suave\n- **Altern√¢ncia**: Transi√ß√µes de 500ms\n- **Cache**: Otimiza√ß√£o autom√°tica de PDFs\n\n## üõ°Ô∏è Seguran√ßa\n\n- Valida√ß√£o completa de uploads\n- Sanitiza√ß√£o de dados\n- Prote√ß√£o contra XSS\n- Limites de tamanho de arquivo\n\n## üìû Suporte\n\nPara instala√ß√£o em Oracle Linux sem internet ou d√∫vidas t√©cnicas, consulte a documenta√ß√£o em `INSTALACAO-LOCAL.md`.\n\n## üîÑ Changelog v2.0\n\n### Melhorias Implementadas\n- ‚úÖ Hor√°rio do p√¥r do sol corrigido para 17:18 (Rio de Janeiro)\n- ‚úÖ Layout responsivo completo para todos os dispositivos\n- ‚úÖ Breakpoints otimizados (mobile, tablet, desktop, xl)\n- ‚úÖ Cache inteligente para PDFs convertidos\n- ‚úÖ Auto-restart do scroll ap√≥s completar documento\n- ‚úÖ Tratamento de erros robusto\n- ‚úÖ Logs detalhados para debugging\n- ‚úÖ Script de empacotamento offline atualizado\n- ‚úÖ Documenta√ß√£o completa para Oracle Linux\n- ‚úÖ Testes automatizados atualizados\n\n### Recursos T√©cnicos\n- API externa para hor√°rio do p√¥r do sol (sunrise-sunset.org)\n- Fallback local para c√°lculo quando API indispon√≠vel\n- Timer autom√°tico para atualiza√ß√£o √† meia-noite\n- Responsividade com viewport units (vh/vw)\n- Transi√ß√µes suaves entre estados\n- Gerenciamento de estado otimizado","size_bytes":4683},"REMOVER-REFERENCIAS-REPLIT.md":{"content":"# üö® REFER√äNCIAS DO REPLIT PARA REMOVER DO C√ìDIGO\n\n## ARQUIVOS QUE PRECISAM SER LIMPOS\n\n### 1. **replit.md** - RENOMEAR E LIMPAR\n```\nA√á√ÉO: Renomear para \"SISTEMA-DOCUMENTACAO.md\" ou \"README-SISTEMA.md\"\nREMOVER: T√≠tulo \"Navy Display System - Replit Configuration\"\nALTERAR PARA: \"Navy Display System - Documenta√ß√£o T√©cnica\"\n```\n\n### 2. **public/index.html** - LINHA 7\n```html\n<!-- REMOVER ESTA LINHA COMPLETAMENTE: -->\n<script type=\"text/javascript\" src=\"https://replit.com/public/js/replit-dev-banner.js\"></script>\n```\n\n### 3. **client/index.html** - LINHA 9\n```html\n<!-- REMOVER ESTA LINHA COMPLETAMENTE: -->\n<script type=\"text/javascript\" src=\"https://replit.com/public/js/replit-dev-banner.js\"></script>\n```\n\n### 4. **client/src/components/PDFViewer copy.tsx** - LINHAS 8-20\n```javascript\n// SUBSTITUIR TODA A FUN√á√ÉO getBackendUrl:\nconst getBackendUrl = (path: string): string => {\n  if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n    return path;\n  }\n  \n  // REMOVER: Detectar se estamos no Replit ou desenvolvimento local\n  // REMOVER: const isReplit = window.location.hostname.includes('replit.dev') || window.location.hostname.includes('replit.co');\n  \n  // SIMPLIFICAR PARA:\n  const currentHost = window.location.hostname;\n  \n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n    // Produ√ß√£o - usar porta 5000\n    if (path.startsWith('/')) {\n      return `http://${currentHost}:5000${path}`;\n    }\n    return `http://${currentHost}:5000/${path}`;\n  }\n  \n  // Desenvolvimento local\n  if (path.startsWith('/')) {\n    return `http://localhost:5000${path}`;\n  }\n  return `http://localhost:5000/${path}`;\n};\n```\n\n### 5. **client/src/context/DisplayContext.tsx** - LINHAS 50-80\n```javascript\n// SUBSTITUIR TODA A FUN√á√ÉO getBackendUrl:\nconst getBackendUrl = (path: string): string => {\n  if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n    return path;\n  }\n  \n  const currentHost = window.location.hostname;\n  \n  // REMOVER TODAS as refer√™ncias a Replit:\n  // REMOVER: const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n  // REMOVER: console.log(`üåê DisplayContext Backend URL (Replit): ${currentOrigin}`);\n  \n  // SIMPLIFICAR PARA:\n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n    console.log(`üåê DisplayContext: Detectado acesso via rede: ${currentHost}`);\n    \n    if (path.startsWith('/')) {\n      return `http://${currentHost}:5000${path}`;\n    }\n    return `http://${currentHost}:5000/${path}`;\n  }\n  \n  console.log(`üåê DisplayContext Backend URL (Local): localhost:5000`);\n  \n  if (path.startsWith('/')) {\n    return `http://localhost:5000${path}`;\n  }\n  return `http://localhost:5000/${path}`;\n};\n```\n\n### 6. **client/src/pages/Admin.tsx** - M√öLTIPLAS LINHAS\n```javascript\n// LOCALIZAR E SUBSTITUIR:\n\n// LINHA ~50: getBackendUrl function\n// REMOVER: console.log('üåê Admin: Detectado Replit, usando mesmo origin:', currentOrigin);\n// REMOVER: const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n\n// SIMPLIFICAR PARA detec√ß√£o simples de ambiente local vs produ√ß√£o\n```\n\n### 7. **package.json** - LINHAS 75-76\n```json\n// REMOVER ESTAS DEPEND√äNCIAS:\n\"@replit/vite-plugin-cartographer\": \"^0.2.7\",\n\"@replit/vite-plugin-runtime-error-modal\": \"^0.0.3\",\n```\n\n### 8. **INSTRUCOES-PACOTE-OFFLINE.md** - M√öLTIPLAS REFER√äNCIAS\n```markdown\n// SUBSTITUIR todas as men√ß√µes:\n\"Sistema est√° totalmente funcional no Replit\" \nPARA: \n\"Sistema est√° totalmente funcional em ambiente de desenvolvimento\"\n\n\"Baixar c√≥digo fonte completo do Replit\"\nPARA:\n\"Baixar c√≥digo fonte completo do reposit√≥rio\"\n```\n\n### 9. **gerar-pacote-completo.sh** - LINHA 4\n```bash\n# SUBSTITUIR:\n# Vers√£o otimizada para Replit com TODAS as depend√™ncias\n# PARA:\n# Vers√£o otimizada para produ√ß√£o com TODAS as depend√™ncias\n```\n\n## ARQUIVOS QUE EST√ÉO LIMPOS\n‚úÖ `vite.config.ts` - N√£o cont√©m refer√™ncias diretas\n‚úÖ `server/` - Backend est√° limpo\n‚úÖ `shared/` - Schemas est√£o limpos\n‚úÖ Demais componentes React est√£o limpos\n\n## PR√ìXIMOS PASSOS\n\n1. **EXECUTAR LIMPEZA**: Remover todas as refer√™ncias listadas acima\n2. **TESTAR LOCALMENTE**: Verificar se sistema funciona sem refer√™ncias Replit\n3. **RENOMEAR ARQUIVOS**: \n   - `replit.md` ‚Üí `DOCUMENTACAO-SISTEMA.md`\n   - `.replit` ‚Üí pode ser removido (arquivo de configura√ß√£o Replit)\n4. **ATUALIZAR T√çTULOS**: Remover \"Replit\" de todos os cabe√ßalhos e coment√°rios\n5. **VERIFICAR LOGS**: Garantir que console.log n√£o menciona \"Replit\"\n\n## RESULTADO FINAL\nSistema completamente limpo, pronto para entrega/auditoria sem rastros de plataforma de desenvolvimento online.","size_bytes":4732},"RESUMO-MELHORIAS.md":{"content":"# Sistema de Visualiza√ß√£o da Marinha do Brasil\n## Resumo das Melhorias Implementadas\n\n**Autor: 2SG Bruna Rocha**  \n**Marinha do Brasil**\n\n---\n\n## ‚úÖ 1. Empacotamento Offline para Oracle Linux\n\n### Scripts Criados:\n- `criar-pacote-offline.sh` - Script simplificado para criar pacote offline\n- `empacotamento-offline.sh` - Script completo com todas as depend√™ncias\n- `instalar.sh` - Script de instala√ß√£o autom√°tica no servidor\n\n### Conte√∫do do Pacote:\n- **Node.js 20.x** para Oracle Linux\n- **Depend√™ncias npm** completas empacotadas\n- **RPMs do sistema** (git, curl, nginx, firewalld, etc.)\n- **Google Chrome e ChromeDriver** para testes\n- **Bibliotecas Python** (selenium, requests)\n- **Scripts de configura√ß√£o** autom√°tica\n\n### Uso:\n```bash\n# Com internet (criar pacote)\n./criar-pacote-offline.sh\n\n# Sem internet (instalar)\ntar -xzf sistema-marinha-offline-*.tar.gz\ncd pacote-offline-marinha\nsudo ./instalar.sh\n```\n\n---\n\n## ‚úÖ 2. Remo√ß√£o de Refer√™ncias Externas\n\n### Assinatura da 2SG Bruna Rocha Adicionada:\n- **README.md** - Autoria claramente identificada\n- **server/index.ts** - Cabe√ßalho com autoria\n- **client/src/pages/Admin.tsx** - Coment√°rios de autoria\n- **client/src/pages/Index.tsx** - Cr√©ditos na interface\n- **Todos os scripts** - Assinatura da autora\n\n### Refer√™ncias Removidas:\n- Eliminadas men√ß√µes a plataformas externas\n- C√≥digo limpo sem evid√™ncias de outras ferramentas\n- Documenta√ß√£o focada exclusivamente na Marinha\n\n---\n\n## ‚úÖ 3. Interface de Data/Hora Melhorada + P√¥r do Sol\n\n### Melhorias Implementadas:\n- **Data completa** em portugu√™s (dia da semana + data completa)\n- **Hor√°rio oficial** com segundos em tempo real\n- **Hor√°rio do p√¥r do sol** preciso via API confi√°vel\n- **Design aprimorado** com container estilizado\n- **Separador visual** elegante entre data e hora\n- **Responsividade** mantida para diferentes telas\n\n### API do P√¥r do Sol:\n- **Fonte**: sunrise-sunset.org (API gratuita e precisa)\n- **Localiza√ß√£o**: Rio de Janeiro (-22.9068, -43.1729)\n- **Atualiza√ß√£o**: Autom√°tica di√°ria com cache\n- **Fallback**: C√°lculo local em caso de falha na API\n\n### Componentes:\n```jsx\n// Data completa\n{new Date().toLocaleDateString('pt-BR', { \n  weekday: 'long',\n  day: '2-digit', \n  month: 'long', \n  year: 'numeric' \n})}\n\n// Hor√°rio com segundos\n{new Date().toLocaleTimeString('pt-BR', { \n  hour: '2-digit', \n  minute: '2-digit',\n  second: '2-digit',\n  hour12: false \n})}\n```\n\n---\n\n## üìÅ Estrutura Final do Projeto\n\n```\nsistema-marinha/\n‚îú‚îÄ‚îÄ client/                    # Frontend React\n‚îú‚îÄ‚îÄ server/                    # Backend Express  \n‚îú‚îÄ‚îÄ shared/                    # Esquemas compartilhados\n‚îú‚îÄ‚îÄ README.md                  # Documenta√ß√£o completa\n‚îú‚îÄ‚îÄ criar-pacote-offline.sh    # Empacotamento simples\n‚îú‚îÄ‚îÄ empacotamento-offline.sh   # Empacotamento completo\n‚îú‚îÄ‚îÄ setup-oracle-linux.sh     # Instala√ß√£o produ√ß√£o\n‚îú‚îÄ‚îÄ teste.sh                   # Testes automatizados\n‚îú‚îÄ‚îÄ teste_selenium.py          # Testes UI\n‚îî‚îÄ‚îÄ RESUMO-MELHORIAS.md       # Este arquivo\n```\n\n---\n\n## üîß Funcionalidades Principais Mantidas\n\n- ‚úÖ **Exibi√ß√£o autom√°tica** de documentos PLASA e Escalas\n- ‚úÖ **Processamento PDF** otimizado \n- ‚úÖ **Sistema de avisos** com prioridades\n- ‚úÖ **Painel administrativo** com cores da Marinha\n- ‚úÖ **Testes automatizados** em portugu√™s\n- ‚úÖ **Instala√ß√£o offline** para Oracle Linux\n- ‚úÖ **Documenta√ß√£o completa** em portugu√™s\n\n---\n\n## üöÄ Pr√≥ximos Passos\n\n1. **Testar instala√ß√£o offline** no ambiente Oracle Linux\n2. **Validar funcionalidades** com documentos reais\n3. **Configurar ambiente** de produ√ß√£o\n4. **Treinar usu√°rios** no painel administrativo\n\n---\n\n## üìû Suporte T√©cnico\n\nPara d√∫vidas ou problemas:\n1. Consultar `README.md` para documenta√ß√£o completa\n2. Executar `./teste.sh` para diagn√≥sticos\n3. Verificar logs: `journalctl -u sistema-marinha -f`\n\n---\n\n**Sistema desenvolvido por 2SG Bruna Rocha**  \n**Marinha do Brasil - PAPEM**","size_bytes":4016},"criar_estrutura.sh":{"content":"#!/bin/bash\nset -e\n\n# Criar estrutura tempor√°ria\nTEMP=\"temp_package\"\nmkdir -p \"$TEMP\"/{src,runtime,install}\n\n# Copiar c√≥digo fonte\necho \"Copiando c√≥digo fonte...\"\ncp package*.json \"$TEMP/src/\"\nfor item in *.md *.js *.ts *.config.* .env.example .gitignore; do\n    [[ -f \"$item\" ]] && cp \"$item\" \"$TEMP/src/\" 2>/dev/null || true\ndone\n\n# Copiar diret√≥rios (m√©todo seguro)\n[[ -d \"client\" ]] && tar -cf - client | tar -xf - -C \"$TEMP/src/\"\n[[ -d \"server\" ]] && tar -cf - server | tar -xf - -C \"$TEMP/src/\"\n[[ -d \"shared\" ]] && tar -cf - shared | tar -xf - -C \"$TEMP/src/\"\n[[ -d \"uploads\" ]] && tar -cf - uploads | tar -xf - -C \"$TEMP/src/\" || mkdir -p \"$TEMP/src/uploads\"\n\n# Download Node.js\necho \"Baixando Node.js...\"\ncd \"$TEMP/runtime\"\ncurl -fsSL https://nodejs.org/dist/v18.20.4/node-v18.20.4-linux-x64.tar.xz -o node.tar.xz\ntar -xf node.tar.xz --strip-components=1\nrm node.tar.xz\ncd ../..\n\n# Script de instala√ß√£o\ncat > \"$TEMP/install/install.sh\" << 'INSTALLEOF'\n#!/bin/bash\nset -e\n\necho \"=== INSTALADOR Sistema Display Marinha ===\"\n\n[[ $EUID -ne 0 ]] && { echo \"Execute como root: sudo ./install.sh\"; exit 1; }\n\nDEST=\"/opt/display-marinha\"\nUSER=\"display-marinha\"\n\necho \"Instalando em $DEST\"\nrm -rf \"$DEST\" 2>/dev/null || true\nmkdir -p \"$DEST\"\n\nif ! id \"$USER\" &>/dev/null; then\n    useradd -r -s /bin/false -d \"$DEST\" \"$USER\"\nfi\n\necho \"Copiando arquivos...\"\ncp -r runtime/* \"$DEST/\"\ncp -r src/* \"$DEST/\"\nchmod +x \"$DEST/bin/\"*\n\ncd \"$DEST\"\necho \"Instalando depend√™ncias...\"\nexport PATH=\"$DEST/bin:$PATH\"\nnpm install --production --no-optional\n\nchown -R \"$USER:$USER\" \"$DEST\"\n\ncat > start.sh << 'STARTSCRIPT'\n#!/bin/bash\nexport PATH=\"/opt/display-marinha/bin:$PATH\"\ncd /opt/display-marinha\nnpm run dev\nSTARTSCRIPT\n\nchmod +x start.sh\nchown \"$USER:$USER\" start.sh\n\n[[ -f .env.example && ! -f .env ]] && {\n    cp .env.example .env\n    chown \"$USER:$USER\" .env\n}\n\ncat > /etc/systemd/system/display-marinha.service << 'SERVICEEOF'\n[Unit]\nDescription=Sistema Display Marinha\nAfter=network.target\n\n[Service]\nType=simple\nUser=display-marinha\nWorkingDirectory=/opt/display-marinha\nEnvironment=PATH=/opt/display-marinha/bin:/usr/bin:/bin\nExecStart=/opt/display-marinha/start.sh\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nSERVICEEOF\n\nif command -v firewall-cmd &>/dev/null; then\n    firewall-cmd --permanent --add-port=5000/tcp &>/dev/null || true\n    firewall-cmd --reload &>/dev/null || true\nfi\n\nsystemctl daemon-reload\nsystemctl enable display-marinha\nsystemctl start display-marinha\n\nsleep 8\nif systemctl is-active --quiet display-marinha; then\n    echo \"‚úÖ Instala√ß√£o conclu√≠da!\"\n    echo \"üåê Interface: http://localhost:5000\"\n    echo \"üîß Admin: http://localhost:5000/admin\"\nelse\n    echo \"‚ùå Falha na inicializa√ß√£o\"\n    echo \"Logs: journalctl -u display-marinha -f\"\n    exit 1\nfi\nINSTALLEOF\n\nchmod +x \"$TEMP/install/install.sh\"\n\n# README\ncat > \"$TEMP/README.txt\" << 'READMEEOF'\nSISTEMA DISPLAY MARINHA - PACOTE OFFLINE\n\nINSTALA√á√ÉO:\n1. tar -xzf sistema-display-marinha-offline.tar.gz\n2. cd temp_package\n3. sudo ./install/install.sh\n\nACESSO:\n- Interface: http://localhost:5000\n- Admin: http://localhost:5000/admin\n\nCOMANDOS:\n- Status: systemctl status display-marinha\n- Logs: journalctl -u display-marinha -f\n- Restart: systemctl restart display-marinha\n\nCONTE√öDO:\n‚úÖ C√≥digo fonte completo\n‚úÖ Node.js 18.20.4 para Linux\n‚úÖ Scripts de instala√ß√£o autom√°tica\n‚úÖ Suporte para Oracle Linux offline\nREADMEEOF\n\n# Criar pacote final\necho \"Criando pacote final...\"\ntar -czf sistema-display-marinha-offline.tar.gz \"$TEMP\"\nrm -rf \"$TEMP\"\n\nSIZE=$(du -h sistema-display-marinha-offline.tar.gz | cut -f1)\necho \"\"\necho \"‚úÖ PACOTE CRIADO: sistema-display-marinha-offline.tar.gz\"\necho \"üìè Tamanho: $SIZE\"\necho \"\"\necho \"INSTALA√á√ÉO NO ORACLE LINUX:\"\necho \"1. tar -xzf sistema-display-marinha-offline.tar.gz\"\necho \"2. cd temp_package\"\necho \"3. sudo ./install/install.sh\"\necho \"\"\necho \"‚úÖ PRONTO PARA USO OFFLINE!\"\n","size_bytes":3945},"demo-edicao-inline.md":{"content":"# Demonstra√ß√£o: Edi√ß√£o Inline de Militares\n\n## Como Funcionaria a Edi√ß√£o Inline\n\n### Sistema Atual (Somente Adi√ß√£o/Remo√ß√£o)\n```\n[   1¬∫ Tenente JO√ÉO SILVA    ] [üóëÔ∏è]\n[   1¬∫ Sargento MARIA COSTA  ] [üóëÔ∏è]\n```\n\n### Sistema com Edi√ß√£o Inline\n```\n[   1¬∫ Tenente JO√ÉO SILVA    ] [‚úèÔ∏è] [üóëÔ∏è]\n[   1¬∫ Sargento MARIA COSTA  ] [‚úèÔ∏è] [üóëÔ∏è]\n```\n\n### Durante a Edi√ß√£o\nQuando clicar no ‚úèÔ∏è, o nome vira um campo edit√°vel:\n```\n[ Input: JO√ÉO SILVA          ] [‚úÖ] [‚ùå]\n[   1¬∫ Sargento MARIA COSTA  ] [‚úèÔ∏è] [üóëÔ∏è]\n```\n\n### Funcionalidades\n- ‚úèÔ∏è = Iniciar edi√ß√£o\n- ‚úÖ = Salvar altera√ß√£o no banco PostgreSQL\n- ‚ùå = Cancelar edi√ß√£o\n- üóëÔ∏è = Remover militar\n\n### Vantagens da Edi√ß√£o Inline\n1. **Praticidade**: Edita direto na lista, sem abrir janelas\n2. **Velocidade**: Mudan√ßas r√°pidas de nomes\n3. **Persist√™ncia**: Salva automaticamente no banco PostgreSQL\n4. **Visual**: V√™ todos os militares enquanto edita um\n\n### Status Atual\n- ‚úÖ Sistema de banco PostgreSQL funcionando\n- ‚úÖ Adi√ß√£o de militares persistindo\n- ‚úÖ Remo√ß√£o de militares funcionando\n- üîÑ Edi√ß√£o inline em implementa√ß√£o\n\nA edi√ß√£o inline tornaria o sistema mais √°gil para corre√ß√µes e atualiza√ß√µes de nomes dos militares.","size_bytes":1260},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"ecosystem.config.js":{"content":"module.exports = {\n  apps: [{\n    name: 'papem-digital',\n    script: 'dist/index.js',\n    env: {\n      DATABASE_URL: 'postgresql://postgres:suasenha123@localhost:5432/marinha_papem',\n      PORT: 5000,\n      NODE_ENV: 'production',\n      VITE_OPENWEATHER_API_KEY: 'f8f44e0ebe16dbd77aad8ba878ea97e9',\n      http_proxy: 'http://11111062:BruN%402025GlowUp@proxy-1dn.mb:6060',\n      https_proxy: 'http://11111062:BruN%402025GlowUp@proxy-1dn.mb:6060',\n      NODE_TLS_REJECT_UNAUTHORIZED: '0',\n      REQUEST_TIMEOUT: '30000',\n      WEATHER_CACHE_DURATION: '30',\n      DOCUMENT_CACHE_DURATION: '60'\n    }\n  }]\n};\n","size_bytes":605},"gerar-pacote-completo.sh":{"content":"#!/bin/bash\n\n# Sistema Display Marinha - Gerador de Pacote Offline Completo\n# Vers√£o otimizada para Replit com TODAS as depend√™ncias\n\nset -e\n\necho \"=== GERADOR DE PACOTE OFFLINE COMPLETO ===\"\necho \"Sistema Display Marinha com todas as depend√™ncias npm\"\n\n# Configura√ß√µes\nPACOTE_DIR=\"marinha-display-offline\"\nPACOTE_FINAL=\"sistema-marinha-completo-offline.tar.gz\"\n\n# Limpeza\necho \"üßπ Limpando arquivos anteriores...\"\nrm -rf \"$PACOTE_DIR\" \"$PACOTE_FINAL\" 2>/dev/null || true\n\n# Verificar se depend√™ncias est√£o instaladas\nif [[ ! -d \"node_modules\" ]] || [[ $(ls node_modules 2>/dev/null | wc -l) -lt 50 ]]; then\n    echo \"üì¶ Instalando depend√™ncias primeiro...\"\n    npm install\nfi\n\n# Contar depend√™ncias\nDEPS_COUNT=$(ls node_modules 2>/dev/null | wc -l)\necho \"‚úÖ Depend√™ncias dispon√≠veis: $DEPS_COUNT pacotes\"\n\n# Criar estrutura do pacote\necho \"üìÅ Criando estrutura do pacote...\"\nmkdir -p \"$PACOTE_DIR\"/{sistema,nodejs,scripts,docs}\n\n# Copiar aplica√ß√£o COMPLETA\necho \"üì¶ Copiando aplica√ß√£o com todas as depend√™ncias...\"\ncp -r package.json package-lock.json \"$PACOTE_DIR/sistema/\"\ncp -r client server shared \"$PACOTE_DIR/sistema/\"\ncp -r node_modules \"$PACOTE_DIR/sistema/\" 2>/dev/null || echo \"‚ö†Ô∏è  node_modules ser√° instalado no destino\"\ncp *.md *.js *.ts *.config.* \"$PACOTE_DIR/sistema/\" 2>/dev/null || true\ncp .env.example \"$PACOTE_DIR/sistema/\" 2>/dev/null || true\ncp .gitignore \"$PACOTE_DIR/sistema/\" 2>/dev/null || true\n\n# Criar diret√≥rio uploads\nmkdir -p \"$PACOTE_DIR/sistema/uploads\"\n[[ -d \"uploads\" ]] && cp -r uploads/* \"$PACOTE_DIR/sistema/uploads/\" 2>/dev/null || true\n\n# Download Node.js compat√≠vel\necho \"üì• Baixando Node.js para Linux...\"\ncd \"$PACOTE_DIR/nodejs\"\n\n# Usar vers√£o est√°vel compat√≠vel com Oracle Linux\nNODE_VER=\"18.20.4\"\nNODE_PKG=\"node-v${NODE_VER}-linux-x64.tar.xz\"\n\nif curl -fsSL \"https://nodejs.org/dist/v${NODE_VER}/${NODE_PKG}\" -o \"$NODE_PKG\"; then\n    echo \"üì¶ Extraindo Node.js...\"\n    \n    # M√©todo simples de extra√ß√£o\n    if command -v xz >/dev/null 2>&1; then\n        xz -d \"$NODE_PKG\"\n        tar -xf \"node-v${NODE_VER}-linux-x64.tar\"\n        mv \"node-v${NODE_VER}-linux-x64\"/* .\n        rm -rf \"node-v${NODE_VER}-linux-x64\" \"node-v${NODE_VER}-linux-x64.tar\"\n    else\n        # Fallback se xz n√£o estiver dispon√≠vel\n        echo \"‚ö†Ô∏è  xz n√£o dispon√≠vel, usando extra√ß√£o alternativa...\"\n        tar -xJf \"$NODE_PKG\" 2>/dev/null || {\n            echo \"‚ùå N√£o foi poss√≠vel extrair Node.js\"\n            cd ../..\n            rm -rf \"$PACOTE_DIR\"\n            exit 1\n        }\n        mv \"node-v${NODE_VER}-linux-x64\"/* .\n        rm -rf \"node-v${NODE_VER}-linux-x64\" \"$NODE_PKG\"\n    fi\n    \n    echo \"‚úÖ Node.js extra√≠do com sucesso\"\nelse\n    echo \"‚ùå Falha ao baixar Node.js\"\n    cd ../..\n    rm -rf \"$PACOTE_DIR\"\n    exit 1\nfi\n\ncd ../..\n\n# Verificar se Node.js foi extra√≠do corretamente\nif [[ ! -f \"$PACOTE_DIR/nodejs/bin/node\" ]]; then\n    echo \"‚ùå Node.js n√£o foi extra√≠do corretamente\"\n    rm -rf \"$PACOTE_DIR\"\n    exit 1\nfi\n\n# Criar script de instala√ß√£o robusto\necho \"üìù Criando script de instala√ß√£o...\"\n\ncat > \"$PACOTE_DIR/scripts/instalar.sh\" << 'EOF'\n#!/bin/bash\n\n# Instalador Sistema Display Marinha - Offline\nset -e\n\necho \"=== INSTALADOR OFFLINE - Sistema Display Marinha ===\"\n\n# Verificar root\nif [[ $EUID -ne 0 ]]; then\n    echo \"‚ùå Execute como root: sudo ./instalar.sh\"\n    exit 1\nfi\n\n# Configura√ß√µes\nDESTINO=\"/opt/display-marinha\"\nUSUARIO=\"display-marinha\"\n\necho \"üìÅ Instalando em $DESTINO\"\nmkdir -p \"$DESTINO\"\n\n# Criar usu√°rio do sistema\necho \"üë§ Configurando usu√°rio do sistema\"\nif ! id \"$USUARIO\" &>/dev/null; then\n    useradd -r -s /bin/false -d \"$DESTINO\" \"$USUARIO\"\nfi\n\n# Copiar Node.js\necho \"üì¶ Instalando Node.js\"\ncp -r nodejs/* \"$DESTINO/\"\nchmod +x \"$DESTINO/bin/\"*\n\n# Copiar sistema\necho \"üìÅ Instalando aplica√ß√£o\"\ncp -r sistema/* \"$DESTINO/\"\n\n# Verificar e instalar depend√™ncias se necess√°rio\necho \"üì¶ Verificando depend√™ncias\"\ncd \"$DESTINO\"\n\nif [[ ! -d \"node_modules\" ]] || [[ $(ls node_modules 2>/dev/null | wc -l) -lt 20 ]]; then\n    echo \"üì• Instalando depend√™ncias...\"\n    export PATH=\"$DESTINO/bin:$PATH\"\n    npm install --production --no-optional 2>/dev/null || {\n        echo \"‚ö†Ô∏è  Usando depend√™ncias do pacote...\"\n    }\nfi\n\n# Configurar permiss√µes\nchown -R \"$USUARIO:$USUARIO\" \"$DESTINO\"\n\n# Criar script de inicializa√ß√£o\ncat > \"$DESTINO/iniciar.sh\" << 'INICEOF'\n#!/bin/bash\nexport PATH=\"/opt/display-marinha/bin:$PATH\"\ncd /opt/display-marinha\n\necho \"Iniciando Sistema Display Marinha...\"\nnpm run dev\nINICEOF\n\nchmod +x \"$DESTINO/iniciar.sh\"\nchown \"$USUARIO:$USUARIO\" \"$DESTINO/iniciar.sh\"\n\n# Configurar arquivo .env\nif [[ -f \"$DESTINO/.env.example\" && ! -f \"$DESTINO/.env\" ]]; then\n    cp \"$DESTINO/.env.example\" \"$DESTINO/.env\"\n    chown \"$USUARIO:$USUARIO\" \"$DESTINO/.env\"\nfi\n\n# Criar servi√ßo systemd\necho \"üîß Configurando servi√ßo\"\ncat > /etc/systemd/system/display-marinha.service << 'SERVEOF'\n[Unit]\nDescription=Sistema Display Marinha\nAfter=network.target\n\n[Service]\nType=simple\nUser=display-marinha\nWorkingDirectory=/opt/display-marinha\nEnvironment=PATH=/opt/display-marinha/bin:/usr/local/bin:/usr/bin:/bin\nEnvironment=NODE_ENV=production\nExecStart=/opt/display-marinha/iniciar.sh\nRestart=always\nRestartSec=15\nStandardOutput=journal\nStandardError=journal\n\n[Install]\nWantedBy=multi-user.target\nSERVEOF\n\n# Configurar firewall se dispon√≠vel\necho \"üî• Configurando firewall\"\nif command -v firewall-cmd &>/dev/null; then\n    firewall-cmd --permanent --add-port=5000/tcp &>/dev/null || true\n    firewall-cmd --reload &>/dev/null || true\nfi\n\n# Configurar SELinux se ativo\nif command -v setsebool &>/dev/null; then\n    setsebool -P httpd_can_network_connect 1 &>/dev/null || true\nfi\n\n# Ativar e iniciar servi√ßo\necho \"üöÄ Iniciando servi√ßo\"\nsystemctl daemon-reload\nsystemctl enable display-marinha\nsystemctl start display-marinha\n\n# Aguardar inicializa√ß√£o\necho \"‚è≥ Aguardando inicializa√ß√£o...\"\nsleep 10\n\n# Verificar status\nif systemctl is-active --quiet display-marinha; then\n    echo \"‚úÖ Instala√ß√£o conclu√≠da com sucesso!\"\n    echo \"\"\n    echo \"üåê Acesso: http://localhost:5000\"\n    echo \"üîß Admin: http://localhost:5000/admin\"\n    echo \"\"\n    echo \"üìã Comandos √∫teis:\"\n    echo \"   Status: systemctl status display-marinha\"\n    echo \"   Logs: journalctl -u display-marinha -f\"\n    echo \"   Restart: systemctl restart display-marinha\"\n    echo \"   Stop: systemctl stop display-marinha\"\nelse\n    echo \"‚ùå Falha na inicializa√ß√£o do servi√ßo\"\n    echo \"Verifique os logs: journalctl -u display-marinha -f\"\n    exit 1\nfi\nEOF\n\nchmod +x \"$PACOTE_DIR/scripts/instalar.sh\"\n\n# Script de teste\ncat > \"$PACOTE_DIR/scripts/testar.sh\" << 'EOF'\n#!/bin/bash\n\necho \"=== TESTE DO SISTEMA ===\"\n\n# Verificar servi√ßo\nif systemctl is-active --quiet display-marinha; then\n    echo \"‚úÖ Servi√ßo ativo\"\nelse\n    echo \"‚ùå Servi√ßo inativo\"\n    echo \"Iniciar: systemctl start display-marinha\"\n    exit 1\nfi\n\n# Testar conectividade\necho \"üåê Testando conectividade...\"\nfor i in {1..15}; do\n    if curl -s http://localhost:5000/health >/dev/null 2>&1; then\n        echo \"‚úÖ Sistema respondendo\"\n        break\n    fi\n    if [[ $i -eq 15 ]]; then\n        echo \"‚ùå Sistema n√£o responde ap√≥s 15 tentativas\"\n        echo \"Verifique: journalctl -u display-marinha -f\"\n        exit 1\n    fi\n    echo \"Tentativa $i/15...\"\n    sleep 3\ndone\n\n# Verificar depend√™ncias\nDEPS=$(ls /opt/display-marinha/node_modules 2>/dev/null | wc -l)\nif [[ $DEPS -gt 30 ]]; then\n    echo \"‚úÖ Depend√™ncias: $DEPS pacotes\"\nelse\n    echo \"‚ö†Ô∏è  Poucas depend√™ncias: $DEPS pacotes\"\nfi\n\necho \"‚úÖ Teste conclu√≠do\"\necho \"üåê Acesse: http://localhost:5000\"\nEOF\n\nchmod +x \"$PACOTE_DIR/scripts/testar.sh\"\n\n# Documenta√ß√£o\necho \"üìñ Copiando documenta√ß√£o...\"\n[[ -f \"README.md\" ]] && cp README.md \"$PACOTE_DIR/docs/\"\n[[ -f \"INSTALACAO-LOCAL.md\" ]] && cp INSTALACAO-LOCAL.md \"$PACOTE_DIR/docs/\"\n\n# README de instala√ß√£o\ncat > \"$PACOTE_DIR/LEIA-ME.txt\" << 'EOF'\n=== SISTEMA DISPLAY MARINHA - PACOTE OFFLINE COMPLETO ===\n\nEste pacote cont√©m TUDO necess√°rio para funcionar offline:\n- Sistema completo com depend√™ncias\n- Node.js para Linux\n- Scripts de instala√ß√£o autom√°tica\n\nINSTALA√á√ÉO SIMPLES:\n\n1. Extrair o pacote:\n   tar -xzf sistema-marinha-completo-offline.tar.gz\n\n2. Entrar no diret√≥rio:\n   cd marinha-display-offline\n\n3. Instalar (como root):\n   sudo ./scripts/instalar.sh\n\n4. Testar:\n   ./scripts/testar.sh\n\nACESSO:\n- Interface: http://localhost:5000\n- Painel Admin: http://localhost:5000/admin\n\nGERENCIAMENTO:\n- Status: systemctl status display-marinha\n- Logs: journalctl -u display-marinha -f\n- Reiniciar: systemctl restart display-marinha\n- Parar: systemctl stop display-marinha\n\nCARACTER√çSTICAS:\n‚úÖ Funcionamento 100% offline\n‚úÖ Todas as depend√™ncias inclu√≠das\n‚úÖ Instala√ß√£o autom√°tica\n‚úÖ Servi√ßo systemd\n‚úÖ Configura√ß√£o de firewall\n‚úÖ Suporte SELinux\n\nSUPORTE:\nConsulte docs/INSTALACAO-LOCAL.md para detalhes.\nEOF\n\n# Verifica√ß√£o final\necho \"üîç Verifica√ß√£o final do pacote...\"\n\n# Verificar Node.js\nif [[ ! -f \"$PACOTE_DIR/nodejs/bin/node\" ]]; then\n    echo \"‚ùå Node.js n√£o encontrado\"\n    rm -rf \"$PACOTE_DIR\"\n    exit 1\nfi\n\n# Verificar aplica√ß√£o\nif [[ ! -f \"$PACOTE_DIR/sistema/package.json\" ]]; then\n    echo \"‚ùå Aplica√ß√£o n√£o copiada\"\n    rm -rf \"$PACOTE_DIR\"\n    exit 1\nfi\n\n# Verificar scripts\nif [[ ! -x \"$PACOTE_DIR/scripts/instalar.sh\" ]]; then\n    echo \"‚ùå Script de instala√ß√£o inv√°lido\"\n    rm -rf \"$PACOTE_DIR\"\n    exit 1\nfi\n\necho \"‚úÖ Verifica√ß√£o passou\"\n\n# Criar pacote final\necho \"üì¶ Criando pacote final...\"\ntar -czf \"$PACOTE_FINAL\" \"$PACOTE_DIR\"\n\n# Limpeza\nrm -rf \"$PACOTE_DIR\"\n\n# Resultado\nTAMANHO=$(du -h \"$PACOTE_FINAL\" | cut -f1)\n\necho \"\"\necho \"‚úÖ PACOTE OFFLINE COMPLETO CRIADO!\"\necho \"\"\necho \"üì¶ Arquivo: $PACOTE_FINAL\"\necho \"üìè Tamanho: $TAMANHO\"\necho \"üì¶ Depend√™ncias: $DEPS_COUNT pacotes inclu√≠dos\"\necho \"\"\necho \"üöÄ PARA INSTALAR NO ORACLE LINUX (SEM INTERNET):\"\necho \"   1. Transferir: $PACOTE_FINAL\"\necho \"   2. Extrair: tar -xzf $PACOTE_FINAL\"\necho \"   3. Instalar: cd marinha-display-offline && sudo ./scripts/instalar.sh\"\necho \"   4. Testar: ./scripts/testar.sh\"\necho \"\"\necho \"üåê Ap√≥s instala√ß√£o: http://localhost:5000\"\necho \"\"\necho \"‚úÖ SISTEMA PRONTO PARA ORACLE LINUX OFFLINE!\"","size_bytes":10316},"network-test.js":{"content":"import os from 'os';\nimport net from 'net';\n\nconsole.log('üîç DIAGN√ìSTICO DE REDE\\n');\n\n// 1. Mostrar todos os IPs\nconsole.log('üì° IPs da M√°quina:');\nconst interfaces = os.networkInterfaces();\nObject.keys(interfaces).forEach((name) => {\n  const networkInterface = interfaces[name];\n  if (networkInterface) {\n    networkInterface.forEach((netInterface) => {\n      if (netInterface.family === 'IPv4') {\n        console.log(`   ${name}: ${netInterface.address} ${netInterface.internal ? '(interno)' : '(rede)'}`);\n      }\n    });\n  }\n});\n\n// 2. Testar se a porta est√° livre\nconsole.log('\\nüîç Testando Porta 5000:');\nconst server = net.createServer();\n\nserver.listen(5000, '0.0.0.0', () => {\n  console.log('‚úÖ Porta 5000 est√° dispon√≠vel');\n  server.close();\n});\n\nserver.on('error', (err) => {\n  if (err.code === 'EADDRINUSE') {\n    console.log('‚ö†Ô∏è  Porta 5000 j√° est√° em uso (isso √© normal se o servidor estiver rodando)');\n  } else {\n    console.log('‚ùå Erro na porta 5000:', err.message);\n  }\n});\n\n// 3. Mostrar informa√ß√µes do sistema\nconsole.log('\\nüíª Informa√ß√µes do Sistema:');\nconsole.log(`   OS: ${os.type()} ${os.release()}`);\nconsole.log(`   Hostname: ${os.hostname()}`);\nconsole.log(`   Platform: ${os.platform()}`);\nconsole.log(`   Arch: ${os.arch()}`);\n\n// 4. Comandos √∫teis\nconsole.log('\\nüõ†Ô∏è  Comandos √öteis:');\nconsole.log('   Linux:');\nconsole.log('   - Verificar porta: netstat -an | grep :5000');\nconsole.log('   - Liberar firewall: sudo ufw allow 5000');\nconsole.log('   - Ver IP: ifconfig ou ip addr show');\nconsole.log('   - Verificar processo: ps aux | grep node');\nconsole.log('\\n   Windows:');\nconsole.log('   - Verificar porta: netstat -an | findstr :5000');\nconsole.log('   - Liberar firewall: New-NetFirewallRule -DisplayName \"Node 5000\" -Direction Inbound -Protocol TCP -LocalPort 5000 -Action Allow');\nconsole.log('   - Ver IP: ipconfig');\n\nconsole.log('\\nüìù Pr√≥ximos Passos:');\nconsole.log('   1. Execute: npm run dev');\nconsole.log('   2. Teste local: http://localhost:5000');\nconsole.log('   3. Teste rede: use um dos IPs de rede listados acima');\nconsole.log('   4. Se n√£o funcionar, verifique firewall');\n\n// 5. Detectar sistema e mostrar comandos espec√≠ficos\nconst platform = os.platform();\nconsole.log(`\\nüîß Comandos para ${platform}:`);\n\nif (platform === 'linux') {\n  console.log('   # Liberar porta no firewall:');\n  console.log('   sudo ufw allow 5000');\n  console.log('   sudo ufw status');\n  console.log('\\n   # Verificar se porta est√° em uso:');\n  console.log('   netstat -tulpn | grep :5000');\n  console.log('\\n   # Ver IPs da m√°quina:');\n  console.log('   ip addr show');\n} else if (platform === 'win32') {\n  console.log('   # Liberar porta no firewall (PowerShell como Admin):');\n  console.log('   New-NetFirewallRule -DisplayName \"Node.js 5000\" -Direction Inbound -Protocol TCP -LocalPort 5000 -Action Allow');\n  console.log('\\n   # Verificar se porta est√° em uso:');\n  console.log('   netstat -an | findstr :5000');\n  console.log('\\n   # Ver IPs da m√°quina:');\n  console.log('   ipconfig');\n} else if (platform === 'darwin') {\n  console.log('   # Verificar se porta est√° em uso:');\n  console.log('   netstat -an | grep :5000');\n  console.log('   lsof -i :5000');\n  console.log('\\n   # Ver IPs da m√°quina:');\n  console.log('   ifconfig');\n}\n","size_bytes":3326},"pacote-offline-final.sh":{"content":"#!/bin/bash\n\n# UM SCRIPT SIMPLES - Sistema Display Marinha Offline\n# Execute este script em qualquer m√°quina Linux com internet\n\nset -e\n\necho \"=== CRIANDO PACOTE OFFLINE √öNICO ===\"\n\n# Limpar arquivos antigos\nrm -rf sistema-marinha-offline* temp* offline* 2>/dev/null || true\n\necho \"Baixando Node.js...\"\ncurl -fsSL https://nodejs.org/dist/v18.20.4/node-v18.20.4-linux-x64.tar.xz -o node.tar.xz\n\necho \"Criando estrutura...\"\nmkdir -p sistema-marinha-offline/{app,node}\n\necho \"Extraindo Node.js...\"\ntar -xf node.tar.xz -C sistema-marinha-offline/node --strip-components=1\nrm node.tar.xz\n\necho \"Copiando aplica√ß√£o...\"\ncp -r package*.json client server shared uploads *.md *.js *.ts *.config.* .env.example sistema-marinha-offline/app/ 2>/dev/null || true\n\necho \"Instalando depend√™ncias...\"\ncd sistema-marinha-offline/app\n../node/bin/npm install --production\ncd ../..\n\necho \"Criando instalador...\"\ncat > sistema-marinha-offline/instalar.sh << 'EOF'\n#!/bin/bash\nset -e\n\n[[ $EUID -ne 0 ]] && { echo \"Execute: sudo ./instalar.sh\"; exit 1; }\n\nDEST=\"/opt/display-marinha\"\nrm -rf \"$DEST\" 2>/dev/null || true\nmkdir -p \"$DEST\"\n\nif ! id display-marinha &>/dev/null; then\n    useradd -r -s /bin/false display-marinha\nfi\n\ncp -r node/* \"$DEST/\"\ncp -r app/* \"$DEST/\"\nchown -R display-marinha:display-marinha \"$DEST\"\n\ncat > \"$DEST/start.sh\" << 'STARTEOF'\n#!/bin/bash\ncd /opt/display-marinha\nexport PATH=\"/opt/display-marinha/bin:$PATH\"\nnpm run dev\nSTARTEOF\n\nchmod +x \"$DEST/start.sh\"\n\ncat > /etc/systemd/system/display-marinha.service << 'SERVICEEOF'\n[Unit]\nDescription=Display Marinha\nAfter=network.target\n\n[Service]\nUser=display-marinha\nWorkingDirectory=/opt/display-marinha\nEnvironment=PATH=/opt/display-marinha/bin:/usr/bin\nExecStart=/opt/display-marinha/start.sh\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nSERVICEEOF\n\nsystemctl daemon-reload\nsystemctl enable display-marinha\nsystemctl start display-marinha\n\necho \"‚úÖ Instalado! Acesse: http://localhost:5000\"\nEOF\n\nchmod +x sistema-marinha-offline/instalar.sh\n\necho \"Compactando...\"\ntar -czf sistema-marinha-offline.tar.gz sistema-marinha-offline\nrm -rf sistema-marinha-offline\n\nSIZE=$(du -h sistema-marinha-offline.tar.gz | cut -f1)\n\necho \"\"\necho \"‚úÖ PRONTO: sistema-marinha-offline.tar.gz ($SIZE)\"\necho \"\"\necho \"INSTALA√á√ÉO NO ORACLE LINUX:\"\necho \"1. tar -xzf sistema-marinha-offline.tar.gz\"  \necho \"2. cd sistema-marinha-offline\"\necho \"3. sudo ./instalar.sh\"\necho \"4. Acesse: http://localhost:5000\"\necho \"\"\necho \"FIM - S√≥ isso!\"","size_bytes":2484},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Navy Display System - Documenta√ß√£o T√©cnica\n\n## Overview\n\nThe Navy Display System is a PDF document display platform for the Brazilian Navy, designed for automated display of PLASA (Weekly Service Plan) and Escala (Service Schedule) documents. It features intelligent scrolling, notice management, and a responsive design. The system aims to streamline the display of critical military documents and information, enhancing operational efficiency and communication within the Navy.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### UI/UX Decisions\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite\n- **UI Library**: Radix UI components with shadcn/ui design system\n- **Styling**: Tailwind CSS for responsive design\n- **State Management**: React Context API\n- **PDF Rendering**: PDF.js for browser-based PDF display\n- **Routing**: Wouter for client-side routing\n\n### Technical Implementations\n- **Backend**: Node.js with Express.js (TypeScript, ES modules)\n- **API Design**: RESTful with structured error handling\n- **Middleware**: Multer for file uploads, CORS configuration\n- **Database**: PostgreSQL with Drizzle ORM for type-safe operations, connection pooling\n- **In-Memory Storage**: MemStorage for development/demo\n- **File Storage**: Local filesystem for PDF uploads\n- **Session Management**: Connect-pg-simple for PostgreSQL session storage\n- **Cache Management**: File system cache for PDF page processing\n\n### Feature Specifications\n- **PDF Display Engine**: Automatic document rotation (PLASA, Escala), smooth continuous scrolling with configurable speeds, auto-restart, real-time PDF processing and caching, multi-page support, mobile-responsive viewport.\n- **Military Personnel Management**: Complete rank and specialty system for Brazilian Navy, dynamic officer and master personnel selection, support for 47 personnel (12 officers, 35 masters), military insignia display, duty officer assignment with formatted display, real-time updates.\n- **Weather Integration**: Multi-source temperature verification (wttr.in + open-meteo.com), real-time weather for Rio de Janeiro with Portuguese translations, smart rain prediction with future-time validation, 15-minute automatic updates.\n- **Notice Management**: Priority-based notice rotation, date range validation, rich text content, visual priority indicators, seamless integration with main display.\n- **Administrative Interface**:\n    - **Document Management**: Multi-file PDF upload (drag-and-drop), automatic categorization (PLASA, Escala, Card√°pio), real-time processing, rotation control, preview, file size validation.\n    - **Personnel Administration**: Dynamic military personnel CRUD, real-time combobox population, officer and master classification with automatic rank validation, specialty assignment, immediate synchronization.\n    - **System Configuration**: Cache management, system information display, weather monitoring dashboard, database connection status, maintenance tools.\n\n### System Design Choices\n- **Data Flow**: PDF files uploaded, processed (pages to images), cached, then rendered by frontend. Notices are created, validated, stored, and displayed based on active status.\n- **Real-time Updates**: Polling mechanism for document and notice updates, automatic refresh on configuration changes.\n- **Security**: Zod schema validation, restricted PDF file uploads, parameterized queries, CORS configuration.\n- **Offline Deployment**: Bundled Node.js and Oracle Linux support for isolated deployment.\n\n## External Dependencies\n\n- **React Ecosystem**: `react`, `react-dom`, `@types/react`\n- **UI Framework**: `@radix-ui/components`, `lucide-react`\n- **Styling**: `tailwindcss`, `autoprefixer`, `postcss`\n- **Build Tools**: `vite`, `@vitejs/plugin-react`, `typescript`\n- **Backend**: `express`, `multer`, `drizzle-orm`\n- **Database**: `@neondatabase/serverless`, `connect-pg-simple`\n- **Utilities**: `date-fns`, `clsx`, `class-variance-authority`\n- **External APIs**:\n    - `wttr.in` (weather data)\n    - `open-meteo.com` (weather data for cross-validation)\n    - `PDF.js CDN` (browser-based PDF rendering)\n    - `Sunrise-Sunset API` (fetches daily sunset times)","size_bytes":4222},"script-conf-postgresql.sh":{"content":"#!/bin/bash\n# setup-postgres.sh - Script para ativar PostgreSQL no sistema\n\necho \"üîß Configurando PostgreSQL para persist√™ncia de avisos...\"\n\n# 1. Criar arquivo .env\necho \"üìù Criando arquivo .env...\"\necho \"DATABASE_URL=postgresql://postgres@localhost:5432/marinha_display\" > .env\necho \"‚úÖ Arquivo .env criado\"\n\n# 2. Verificar se PostgreSQL est√° rodando\necho \"üîç Verificando PostgreSQL...\"\nif sudo systemctl is-active --quiet postgresql; then\n    echo \"‚úÖ PostgreSQL est√° rodando\"\nelse\n    echo \"‚ùå PostgreSQL n√£o est√° rodando - iniciando...\"\n    sudo systemctl start postgresql\n    sudo systemctl enable postgresql\nfi\n\n# 3. Testar conex√£o com banco\necho \"üß™ Testando conex√£o com banco...\"\nif sudo -u postgres psql -d marinha_display -c \"SELECT COUNT(*) FROM notices;\" > /dev/null 2>&1; then\n    echo \"‚úÖ Conex√£o com banco funcionando\"\nelse\n    echo \"‚ùå Erro na conex√£o com banco - verificar configura√ß√£o\"\n    exit 1\nfi\n\n# 4. Verificar depend√™ncias Node.js\necho \"üì¶ Verificando depend√™ncias...\"\nif [ ! -d \"node_modules\" ]; then\n    echo \"üì¶ Instalando depend√™ncias...\"\n    npm install\nfi\n\n# 5. Backup do storage.ts original\necho \"üíæ Fazendo backup do storage.ts...\"\nif [ ! -f \"server/storage.ts.backup\" ]; then\n    cp server/storage.ts server/storage.ts.backup\n    echo \"‚úÖ Backup criado: server/storage.ts.backup\"\nfi\n\necho \"\"\necho \"üéâ Configura√ß√£o completa!\"\necho \"\"\necho \"üìã Pr√≥ximos passos:\"\necho \"   1. Substituir server/db-storage.ts pelo c√≥digo corrigido\"\necho \"   2. Alterar server/storage.ts para usar createStorage()\"\necho \"   3. Reiniciar servidor: npm start\"\necho \"\"\necho \"üîç Para verificar:\"\necho \"   ‚Ä¢ Logs devem mostrar: 'DATABASE_URL detectada - usando PostgreSQL'\"\necho \"   ‚Ä¢ Avisos criados devem persistir ap√≥s restart\"\necho \"\"\necho \"üìä Status atual:\"\necho \"   ‚Ä¢ PostgreSQL: $(sudo systemctl is-active postgresql)\"\necho \"   ‚Ä¢ Banco: marinha_display\"\necho \"   ‚Ä¢ Arquivo .env: $([ -f .env ] && echo \"‚úÖ Existe\" || echo \"‚ùå N√£o existe\")\"\necho \"   ‚Ä¢ Backup storage: $([ -f server/storage.ts.backup ] && echo \"‚úÖ Criado\" || echo \"‚ùå N√£o criado\")\"\n","size_bytes":2123},"setup-oracle-linux.sh":{"content":"#!/bin/bash\n\n# Navy Display System - Oracle Linux Setup Script\n# Complete environment setup for production deployment\n\nset -e\n\n# Colors for output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nCYAN='\\033[0;36m'\nNC='\\033[0m' # No Color\n\n# Configuration\nNODE_VERSION=\"20\"\nAPP_USER=\"navydisplay\"\nAPP_DIR=\"/opt/navy-display\"\nSERVICE_NAME=\"navy-display\"\nNGINX_AVAILABLE=\"/etc/nginx/sites-available\"\nNGINX_ENABLED=\"/etc/nginx/sites-enabled\"\n\n# Function to print colored output\nlog() {\n    local color=$1\n    local message=$2\n    echo -e \"${color}${message}${NC}\"\n}\n\n# Function to check if running as root\ncheck_root() {\n    if [[ $EUID -ne 0 ]]; then\n        log $RED \"This script must be run as root (use sudo)\"\n        exit 1\n    fi\n}\n\n# Function to detect Oracle Linux version\ndetect_os() {\n    if [[ -f /etc/oracle-release ]]; then\n        local version=$(cat /etc/oracle-release | grep -oP '\\d+\\.\\d+')\n        log $GREEN \"Detected Oracle Linux $version\"\n        return 0\n    elif [[ -f /etc/redhat-release ]]; then\n        log $YELLOW \"Detected RHEL-compatible system\"\n        return 0\n    else\n        log $RED \"This script is designed for Oracle Linux/RHEL systems\"\n        exit 1\n    fi\n}\n\n# Function to update system packages\nupdate_system() {\n    log $BLUE \"Updating system packages...\"\n    dnf update -y\n    dnf install -y epel-release\n    dnf groupinstall -y \"Development Tools\"\n}\n\n# Function to install Node.js\ninstall_nodejs() {\n    log $BLUE \"Installing Node.js $NODE_VERSION...\"\n    \n    # Install NodeSource repository\n    curl -fsSL https://rpm.nodesource.com/setup_${NODE_VERSION}.x | bash -\n    \n    # Install Node.js\n    dnf install -y nodejs\n    \n    # Verify installation\n    local node_version=$(node --version)\n    local npm_version=$(npm --version)\n    \n    log $GREEN \"Node.js installed: $node_version\"\n    log $GREEN \"npm installed: $npm_version\"\n    \n    # Install global packages\n    npm install -g pm2\n}\n\n# Function to install system dependencies\ninstall_dependencies() {\n    log $BLUE \"Installing system dependencies...\"\n    \n    dnf install -y \\\n        git \\\n        curl \\\n        wget \\\n        unzip \\\n        nginx \\\n        firewalld \\\n        policycoreutils-python-utils \\\n        python3 \\\n        python3-pip \\\n        google-chrome-stable \\\n        chromedriver\n    \n    # Install Python packages for testing\n    pip3 install selenium requests\n}\n\n# Function to install Chrome for testing\ninstall_chrome() {\n    log $BLUE \"Installing Google Chrome for testing...\"\n    \n    # Add Google Chrome repository\n    cat > /etc/yum.repos.d/google-chrome.repo << 'EOF'\n[google-chrome]\nname=google-chrome\nbaseurl=http://dl.google.com/linux/chrome/rpm/stable/x86_64\nenabled=1\ngpgcheck=1\ngpgkey=https://dl.google.com/linux/linux_signing_key.pub\nEOF\n    \n    dnf install -y google-chrome-stable\n    \n    # Install ChromeDriver\n    CHROME_VERSION=$(google-chrome --version | grep -oP '\\d+\\.\\d+\\.\\d+')\n    CHROMEDRIVER_VERSION=$(curl -s \"https://chromedriver.storage.googleapis.com/LATEST_RELEASE_${CHROME_VERSION%.*}\")\n    \n    wget -O /tmp/chromedriver.zip \"https://chromedriver.storage.googleapis.com/${CHROMEDRIVER_VERSION}/chromedriver_linux64.zip\"\n    unzip /tmp/chromedriver.zip -d /tmp/\n    mv /tmp/chromedriver /usr/local/bin/\n    chmod +x /usr/local/bin/chromedriver\n    \n    log $GREEN \"Chrome and ChromeDriver installed\"\n}\n\n# Function to create application user\ncreate_app_user() {\n    log $BLUE \"Creating application user...\"\n    \n    if ! id \"$APP_USER\" &>/dev/null; then\n        useradd -r -s /bin/false -d $APP_DIR $APP_USER\n        log $GREEN \"Created user: $APP_USER\"\n    else\n        log $YELLOW \"User $APP_USER already exists\"\n    fi\n}\n\n# Function to setup application directory\nsetup_app_directory() {\n    log $BLUE \"Setting up application directory...\"\n    \n    mkdir -p $APP_DIR\n    chown $APP_USER:$APP_USER $APP_DIR\n    chmod 755 $APP_DIR\n    \n    log $GREEN \"Application directory created: $APP_DIR\"\n}\n\n# Function to configure firewall\nconfigure_firewall() {\n    log $BLUE \"Configuring firewall...\"\n    \n    systemctl enable firewalld\n    systemctl start firewalld\n    \n    # Open required ports\n    firewall-cmd --permanent --add-port=5000/tcp  # Application port\n    firewall-cmd --permanent --add-port=80/tcp    # HTTP\n    firewall-cmd --permanent --add-port=443/tcp   # HTTPS\n    firewall-cmd --permanent --add-service=ssh\n    \n    firewall-cmd --reload\n    \n    log $GREEN \"Firewall configured\"\n}\n\n# Function to configure Nginx\nconfigure_nginx() {\n    log $BLUE \"Configuring Nginx...\"\n    \n    # Create nginx configuration\n    cat > /etc/nginx/conf.d/navy-display.conf << 'EOF'\nserver {\n    listen 80;\n    server_name _;\n    \n    client_max_body_size 100M;\n    \n    location / {\n        proxy_pass http://localhost:5000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n        proxy_read_timeout 300s;\n        proxy_connect_timeout 75s;\n    }\n    \n    # Static files caching\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg)$ {\n        proxy_pass http://localhost:5000;\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n    }\n}\nEOF\n    \n    # Test nginx configuration\n    nginx -t\n    \n    # Enable and start nginx\n    systemctl enable nginx\n    systemctl restart nginx\n    \n    log $GREEN \"Nginx configured and started\"\n}\n\n# Function to create systemd service\ncreate_systemd_service() {\n    log $BLUE \"Creating systemd service...\"\n    \n    cat > /etc/systemd/system/${SERVICE_NAME}.service << EOF\n[Unit]\nDescription=Navy Display System\nAfter=network.target\n\n[Service]\nType=simple\nUser=$APP_USER\nWorkingDirectory=$APP_DIR\nEnvironment=NODE_ENV=production\nEnvironment=PORT=5000\nExecStart=/usr/bin/npm run start\nRestart=on-failure\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=$SERVICE_NAME\n\n[Install]\nWantedBy=multi-user.target\nEOF\n    \n    systemctl daemon-reload\n    systemctl enable $SERVICE_NAME\n    \n    log $GREEN \"Systemd service created: $SERVICE_NAME\"\n}\n\n# Function to setup log rotation\nsetup_logging() {\n    log $BLUE \"Setting up log rotation...\"\n    \n    mkdir -p /var/log/navy-display\n    chown $APP_USER:$APP_USER /var/log/navy-display\n    \n    cat > /etc/logrotate.d/navy-display << 'EOF'\n/var/log/navy-display/*.log {\n    daily\n    missingok\n    rotate 52\n    compress\n    delaycompress\n    notifempty\n    create 644 navydisplay navydisplay\n    postrotate\n        systemctl reload navy-display\n    endscript\n}\nEOF\n    \n    log $GREEN \"Log rotation configured\"\n}\n\n# Function to configure SELinux\nconfigure_selinux() {\n    log $BLUE \"Configuring SELinux...\"\n    \n    # Allow nginx to connect to backend\n    setsebool -P httpd_can_network_connect 1\n    \n    # Allow nginx to serve files from app directory\n    semanage fcontext -a -t httpd_exec_t \"$APP_DIR(/.*)?\"\n    restorecon -R $APP_DIR\n    \n    log $GREEN \"SELinux configured\"\n}\n\n# Function to create deployment script\ncreate_deployment_script() {\n    log $BLUE \"Creating deployment script...\"\n    \n    cat > /usr/local/bin/deploy-navy-display << EOF\n#!/bin/bash\n\n# Navy Display System Deployment Script\n\nset -e\n\nAPP_DIR=\"$APP_DIR\"\nSERVICE_NAME=\"$SERVICE_NAME\"\nAPP_USER=\"$APP_USER\"\nBACKUP_DIR=\"/var/backups/navy-display\"\n\nlog() {\n    echo \"\\$(date '+%Y-%m-%d %H:%M:%S') - \\$1\"\n}\n\n# Create backup\ncreate_backup() {\n    log \"Creating backup...\"\n    mkdir -p \\$BACKUP_DIR\n    if [ -d \"\\$APP_DIR\" ]; then\n        tar -czf \"\\$BACKUP_DIR/backup-\\$(date +%Y%m%d-%H%M%S).tar.gz\" -C \\$APP_DIR .\n    fi\n}\n\n# Deploy application\ndeploy() {\n    local repo_url=\\$1\n    \n    if [ -z \"\\$repo_url\" ]; then\n        log \"Usage: deploy-navy-display <git_repository_url>\"\n        exit 1\n    fi\n    \n    log \"Starting deployment...\"\n    \n    # Stop service\n    systemctl stop \\$SERVICE_NAME || true\n    \n    # Create backup\n    create_backup\n    \n    # Clone or update repository\n    if [ -d \"\\$APP_DIR/.git\" ]; then\n        log \"Updating existing repository...\"\n        cd \\$APP_DIR\n        git pull origin main\n    else\n        log \"Cloning repository...\"\n        rm -rf \\$APP_DIR/*\n        git clone \\$repo_url \\$APP_DIR\n        cd \\$APP_DIR\n    fi\n    \n    # Install dependencies\n    log \"Installing dependencies...\"\n    npm ci --production\n    \n    # Build application\n    log \"Building application...\"\n    npm run build\n    \n    # Set permissions\n    chown -R \\$APP_USER:\\$APP_USER \\$APP_DIR\n    \n    # Start service\n    log \"Starting service...\"\n    systemctl start \\$SERVICE_NAME\n    systemctl status \\$SERVICE_NAME\n    \n    log \"Deployment completed successfully!\"\n}\n\n# Run deployment\ndeploy \"\\$1\"\nEOF\n    \n    chmod +x /usr/local/bin/deploy-navy-display\n    \n    log $GREEN \"Deployment script created: /usr/local/bin/deploy-navy-display\"\n}\n\n# Function to create monitoring script\ncreate_monitoring_script() {\n    log $BLUE \"Creating monitoring script...\"\n    \n    cat > /usr/local/bin/monitor-navy-display << 'EOF'\n#!/bin/bash\n\n# Navy Display System Monitoring Script\n\nSERVICE_NAME=\"navy-display\"\nAPP_URL=\"http://localhost:5000\"\nLOG_FILE=\"/var/log/navy-display/monitor.log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a $LOG_FILE\n}\n\ncheck_service() {\n    if systemctl is-active --quiet $SERVICE_NAME; then\n        return 0\n    else\n        return 1\n    fi\n}\n\ncheck_health() {\n    if curl -s \"$APP_URL/api/health\" >/dev/null; then\n        return 0\n    else\n        return 1\n    fi\n}\n\nrestart_service() {\n    log \"Restarting service: $SERVICE_NAME\"\n    systemctl restart $SERVICE_NAME\n    sleep 10\n}\n\n# Main monitoring logic\nif ! check_service; then\n    log \"Service is not running, starting...\"\n    systemctl start $SERVICE_NAME\n    sleep 10\nfi\n\nif ! check_health; then\n    log \"Health check failed, restarting service...\"\n    restart_service\n    \n    if check_health; then\n        log \"Service recovered successfully\"\n    else\n        log \"Service failed to recover, manual intervention required\"\n        exit 1\n    fi\nelse\n    log \"Service is healthy\"\nfi\nEOF\n    \n    chmod +x /usr/local/bin/monitor-navy-display\n    \n    # Create cron job for monitoring\n    cat > /etc/cron.d/navy-display-monitor << 'EOF'\n# Monitor Navy Display System every 5 minutes\n*/5 * * * * root /usr/local/bin/monitor-navy-display\nEOF\n    \n    log $GREEN \"Monitoring script created with cron job\"\n}\n\n# Function to run tests\nrun_tests() {\n    log $BLUE \"Running system tests...\"\n    \n    # Make test scripts executable\n    chmod +x test.sh\n    chmod +x test_selenium.py\n    \n    # Run bash tests\n    log $YELLOW \"Running bash tests...\"\n    ./test.sh\n    \n    # Run Python/Selenium tests\n    log $YELLOW \"Running Selenium tests...\"\n    python3 test_selenium.py\n    \n    log $GREEN \"All tests completed\"\n}\n\n# Function to display summary\ndisplay_summary() {\n    log $GREEN \"============================================\"\n    log $GREEN \"Navy Display System Setup Complete!\"\n    log $GREEN \"============================================\"\n    echo\n    log $CYAN \"System Information:\"\n    echo \"  ‚Ä¢ Application Directory: $APP_DIR\"\n    echo \"  ‚Ä¢ Service Name: $SERVICE_NAME\"\n    echo \"  ‚Ä¢ Application User: $APP_USER\"\n    echo \"  ‚Ä¢ Web Port: 80 (proxied to 5000)\"\n    echo\n    log $CYAN \"Management Commands:\"\n    echo \"  ‚Ä¢ Deploy: /usr/local/bin/deploy-navy-display <git_url>\"\n    echo \"  ‚Ä¢ Monitor: /usr/local/bin/monitor-navy-display\"\n    echo \"  ‚Ä¢ Service: systemctl {start|stop|restart|status} $SERVICE_NAME\"\n    echo \"  ‚Ä¢ Logs: journalctl -u $SERVICE_NAME -f\"\n    echo\n    log $CYAN \"Testing Commands:\"\n    echo \"  ‚Ä¢ Bash Tests: ./test.sh\"\n    echo \"  ‚Ä¢ Selenium Tests: python3 test_selenium.py\"\n    echo\n    log $YELLOW \"Next Steps:\"\n    echo \"  1. Deploy your application: deploy-navy-display <your_git_repo>\"\n    echo \"  2. Configure your domain in nginx\"\n    echo \"  3. Set up SSL certificate (recommended)\"\n    echo \"  4. Configure monitoring alerts\"\n    echo\n}\n\n# Main execution function\nmain() {\n    log $BLUE \"Starting Navy Display System setup for Oracle Linux...\"\n    \n    check_root\n    detect_os\n    update_system\n    install_nodejs\n    install_dependencies\n    install_chrome\n    create_app_user\n    setup_app_directory\n    configure_firewall\n    configure_nginx\n    create_systemd_service\n    setup_logging\n    configure_selinux\n    create_deployment_script\n    create_monitoring_script\n    \n    display_summary\n    \n    log $GREEN \"Setup completed successfully!\"\n}\n\n# Parse command line arguments\ncase \"${1:-}\" in\n    --help|-h)\n        echo \"Usage: $0 [options]\"\n        echo \"Options:\"\n        echo \"  --help, -h     Show this help message\"\n        echo \"  --test-only    Run tests only (requires existing setup)\"\n        exit 0\n        ;;\n    --test-only)\n        run_tests\n        exit 0\n        ;;\nesac\n\n# Run main function\nmain \"$@\"","size_bytes":13078},"setup-sistema-completo.sh":{"content":"#!/bin/bash\n\n# Script de Setup Completo do Sistema de Visualiza√ß√£o da Marinha\n# Execute este script para configurar banco e depend√™ncias automaticamente\n\necho \"üöÄ Iniciando setup completo do sistema...\"\n\n# Cores para output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # No Color\n\n# Fun√ß√£o para imprimir mensagens coloridas\nprint_status() {\n    echo -e \"${BLUE}[INFO]${NC} $1\"\n}\n\nprint_success() {\n    echo -e \"${GREEN}[OK]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[AVISO]${NC} $1\"\n}\n\nprint_error() {\n    echo -e \"${RED}[ERRO]${NC} $1\"\n}\n\n# Verificar se PostgreSQL est√° dispon√≠vel\ncheck_postgres() {\n    print_status \"Verificando PostgreSQL...\"\n    \n    if [ -n \"$DATABASE_URL\" ]; then\n        print_success \"DATABASE_URL encontrada: usando banco configurado\"\n        return 0\n    fi\n    \n    if command -v psql &> /dev/null; then\n        print_success \"PostgreSQL encontrado no sistema\"\n        return 0\n    else\n        print_error \"PostgreSQL n√£o encontrado\"\n        print_warning \"Configure a vari√°vel DATABASE_URL ou instale PostgreSQL\"\n        return 1\n    fi\n}\n\n# Configurar banco de dados\nsetup_database() {\n    print_status \"Configurando banco de dados...\"\n    \n    if [ -n \"$DATABASE_URL\" ]; then\n        print_status \"Executando script SQL no banco remoto...\"\n        psql \"$DATABASE_URL\" -f setup-database.sql\n    else\n        print_status \"Configurando banco local...\"\n        sudo -u postgres psql -f setup-database.sql\n    fi\n    \n    if [ $? -eq 0 ]; then\n        print_success \"Banco de dados configurado com sucesso\"\n    else\n        print_error \"Falha na configura√ß√£o do banco\"\n        return 1\n    fi\n}\n\n# Instalar depend√™ncias Node.js\ninstall_dependencies() {\n    print_status \"Instalando depend√™ncias...\"\n    \n    if [ ! -f \"package.json\" ]; then\n        print_error \"package.json n√£o encontrado\"\n        return 1\n    fi\n    \n    npm install\n    \n    if [ $? -eq 0 ]; then\n        print_success \"Depend√™ncias instaladas\"\n    else\n        print_error \"Falha na instala√ß√£o de depend√™ncias\"\n        return 1\n    fi\n}\n\n# Executar migrations Drizzle\nrun_migrations() {\n    print_status \"Executando migrations do Drizzle...\"\n    \n    npm run db:push\n    \n    if [ $? -eq 0 ]; then\n        print_success \"Migrations executadas\"\n    else\n        print_warning \"Falha nas migrations - pode n√£o ser cr√≠tico\"\n    fi\n}\n\n# Criar diret√≥rios necess√°rios\ncreate_directories() {\n    print_status \"Criando diret√≥rios necess√°rios...\"\n    \n    mkdir -p uploads\n    mkdir -p cache/pdf-pages\n    mkdir -p logs\n    \n    chmod 755 uploads cache logs\n    chmod 755 cache/pdf-pages\n    \n    print_success \"Diret√≥rios criados\"\n}\n\n# Configurar vari√°veis de ambiente\nsetup_env() {\n    print_status \"Verificando vari√°veis de ambiente...\"\n    \n    if [ ! -f \".env\" ]; then\n        print_status \"Criando arquivo .env...\"\n        cp .env.example .env\n        print_warning \"Configure as vari√°veis em .env conforme necess√°rio\"\n    fi\n    \n    # Verificar vari√°veis cr√≠ticas\n    if [ -z \"$DATABASE_URL\" ] && [ -z \"$PGHOST\" ]; then\n        print_warning \"Nenhuma configura√ß√£o de banco encontrada\"\n        print_warning \"Configure DATABASE_URL ou vari√°veis PG* no .env\"\n    fi\n}\n\n# Verificar portas dispon√≠veis\ncheck_ports() {\n    print_status \"Verificando portas...\"\n    \n    if lsof -Pi :5000 -sTCP:LISTEN -t >/dev/null ; then\n        print_warning \"Porta 5000 em uso - pare o servi√ßo antes de continuar\"\n    else\n        print_success \"Porta 5000 dispon√≠vel\"\n    fi\n}\n\n# Fun√ß√£o principal\nmain() {\n    echo \"\"\n    print_status \"=== SETUP SISTEMA MARINHA ===\"\n    echo \"\"\n    \n    # Verificar se estamos no diret√≥rio correto\n    if [ ! -f \"package.json\" ] || [ ! -f \"drizzle.config.ts\" ]; then\n        print_error \"Execute este script no diret√≥rio raiz do projeto\"\n        exit 1\n    fi\n    \n    # Executar verifica√ß√µes e setup\n    check_postgres || exit 1\n    setup_env\n    create_directories\n    install_dependencies || exit 1\n    setup_database || exit 1\n    run_migrations\n    check_ports\n    \n    echo \"\"\n    print_success \"=== SETUP CONCLU√çDO ===\"\n    echo \"\"\n    print_status \"Para iniciar o sistema:\"\n    print_status \"  npm run dev\"\n    echo \"\"\n    print_status \"URLs de acesso:\"\n    print_status \"  - Interface principal: http://localhost:5000\"\n    print_status \"  - Painel admin: http://localhost:5000/admin\"\n    echo \"\"\n    print_status \"Usu√°rio padr√£o: admin / admin123\"\n    echo \"\"\n}\n\n# Executar apenas se chamado diretamente\nif [[ \"${BASH_SOURCE[0]}\" == \"${0}\" ]]; then\n    main \"$@\"\nfi","size_bytes":4588},"start-papem.sh":{"content":"#!/bin/bash\ncd /var/www/html/papem-digital2\nnpm run dev\n","size_bytes":56},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"test.js":{"content":"#!/usr/bin/env node\n\n/**\n * Automated Test Suite for Navy Display System v2.0\n * Tests API endpoints, data validation, system functionality, and new features\n * Last updated: 20/06/2025\n */\n\nimport { spawn } from 'child_process';\nimport { setTimeout } from 'timers/promises';\n\nconst BASE_URL = 'http://localhost:5000';\nconst API_BASE = `${BASE_URL}/api`;\n\n// ANSI color codes for terminal output\nconst colors = {\n  reset: '\\x1b[0m',\n  red: '\\x1b[31m',\n  green: '\\x1b[32m',\n  yellow: '\\x1b[33m',\n  blue: '\\x1b[34m',\n  magenta: '\\x1b[35m',\n  cyan: '\\x1b[36m',\n  white: '\\x1b[37m'\n};\n\n// Test result tracking\nlet testResults = {\n  passed: 0,\n  failed: 0,\n  total: 0\n};\n\n/**\n * Utility functions\n */\nfunction log(message, color = 'white') {\n  console.log(`${colors[color]}${message}${colors.reset}`);\n}\n\nfunction logTest(testName, status, details = '') {\n  const symbol = status === 'PASS' ? '‚úì' : '‚úó';\n  const color = status === 'PASS' ? 'green' : 'red';\n  log(`${symbol} ${testName}${details ? ' - ' + details : ''}`, color);\n  \n  testResults.total++;\n  if (status === 'PASS') {\n    testResults.passed++;\n  } else {\n    testResults.failed++;\n  }\n}\n\nasync function makeRequest(method, endpoint, data = null) {\n  const url = endpoint.startsWith('http') ? endpoint : `${API_BASE}${endpoint}`;\n  \n  const options = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n  }\n\n  try {\n    const response = await fetch(url);\n    const responseData = response.headers.get('content-type')?.includes('application/json')\n      ? await response.json()\n      : await response.text();\n    \n    return {\n      status: response.status,\n      data: responseData,\n      ok: response.ok\n    };\n  } catch (error) {\n    return {\n      status: 0,\n      data: error.message,\n      ok: false,\n      error: true\n    };\n  }\n}\n\n/**\n * Test suites\n */\nasync function testHealthCheck() {\n  log('\\nüîç Testing Health Check...', 'cyan');\n  \n  const response = await makeRequest('GET', '/health');\n  \n  if (response.ok && response.data && typeof response.data === 'object') {\n    logTest('Health check endpoint', 'PASS');\n  } else {\n    logTest('Health check endpoint', 'FAIL', `Status: ${response.status}`);\n  }\n}\n\nasync function testNoticesCRUD() {\n  log('\\nüìã Testing Notices CRUD Operations...', 'cyan');\n  \n  // Test GET empty notices\n  let response = await makeRequest('GET', '/notices');\n  if (response.ok && Array.isArray(response.data)) {\n    logTest('GET notices (empty)', 'PASS');\n  } else {\n    logTest('GET notices (empty)', 'FAIL', `Status: ${response.status}`);\n  }\n\n  // Test POST notice\n  const newNotice = {\n    title: 'Test Notice - Sistema v2.0',\n    content: 'Teste automatizado do sistema atualizado com p√¥r do sol e layout responsivo',\n    priority: 'high',\n    startDate: new Date().toISOString(),\n    endDate: new Date(Date.now() + 86400000).toISOString(),\n    active: true\n  };\n\n  response = await makeRequest('POST', '/notices', newNotice);\n  if (response.ok && response.data.id) {\n    logTest('POST notice', 'PASS');\n    \n    const noticeId = response.data.id;\n    \n    // Test GET specific notice\n    response = await makeRequest('GET', `/notices`);\n    if (response.ok && response.data.length > 0) {\n      logTest('GET notices (with data)', 'PASS');\n    } else {\n      logTest('GET notices (with data)', 'FAIL');\n    }\n\n    // Test PUT notice\n    const updatedNotice = { ...response.data[0], title: 'Updated Test Notice' };\n    response = await makeRequest('PUT', `/notices/${noticeId}`, updatedNotice);\n    if (response.ok && response.data.title === 'Updated Test Notice') {\n      logTest('PUT notice', 'PASS');\n    } else {\n      logTest('PUT notice', 'FAIL');\n    }\n\n    // Test DELETE notice\n    response = await makeRequest('DELETE', `/notices/${noticeId}`);\n    if (response.ok && response.data.success) {\n      logTest('DELETE notice', 'PASS');\n    } else {\n      logTest('DELETE notice', 'FAIL');\n    }\n  } else {\n    logTest('POST notice', 'FAIL', `Status: ${response.status}`);\n  }\n}\n\nasync function testDocumentsCRUD() {\n  log('\\nüìÑ Testing Documents CRUD Operations...', 'cyan');\n  \n  // Test GET empty documents\n  let response = await makeRequest('GET', '/documents');\n  if (response.ok && Array.isArray(response.data)) {\n    logTest('GET documents (empty)', 'PASS');\n  } else {\n    logTest('GET documents (empty)', 'FAIL', `Status: ${response.status}`);\n  }\n\n  // Test POST document\n  const newDocument = {\n    title: 'Test Document',\n    url: '/test/document.pdf',\n    type: 'plasa',\n    category: 'oficial',\n    active: true\n  };\n\n  response = await makeRequest('POST', '/documents', newDocument);\n  if (response.ok && response.data.id) {\n    logTest('POST document', 'PASS');\n    \n    const documentId = response.data.id;\n    \n    // Test GET specific document\n    response = await makeRequest('GET', `/documents`);\n    if (response.ok && response.data.length > 0) {\n      logTest('GET documents (with data)', 'PASS');\n    } else {\n      logTest('GET documents (with data)', 'FAIL');\n    }\n\n    // Test PUT document\n    const updatedDocument = { ...response.data[0], title: 'Updated Test Document' };\n    response = await makeRequest('PUT', `/documents/${documentId}`, updatedDocument);\n    if (response.ok && response.data.title === 'Updated Test Document') {\n      logTest('PUT document', 'PASS');\n    } else {\n      logTest('PUT document', 'FAIL');\n    }\n\n    // Test DELETE document\n    response = await makeRequest('DELETE', `/documents/${documentId}`);\n    if (response.ok && response.data.success) {\n      logTest('DELETE document', 'PASS');\n    } else {\n      logTest('DELETE document', 'FAIL');\n    }\n  } else {\n    logTest('POST document', 'FAIL', `Status: ${response.status}`);\n  }\n}\n\nasync function testDataValidation() {\n  log('\\n‚úÖ Testing Data Validation...', 'cyan');\n  \n  // Test invalid notice data\n  const invalidNotice = {\n    title: '', // Empty title\n    content: 'Test content',\n    priority: 'invalid_priority', // Invalid priority\n    startDate: 'invalid_date', // Invalid date\n    endDate: new Date().toISOString(),\n    active: true\n  };\n\n  let response = await makeRequest('POST', '/notices', invalidNotice);\n  if (!response.ok && response.status === 400) {\n    logTest('Notice validation (invalid data)', 'PASS');\n  } else {\n    logTest('Notice validation (invalid data)', 'FAIL', 'Should reject invalid data');\n  }\n\n  // Test invalid document data\n  const invalidDocument = {\n    title: 'Test',\n    url: '/test.pdf',\n    type: 'invalid_type', // Invalid type\n    active: true\n  };\n\n  response = await makeRequest('POST', '/documents', invalidDocument);\n  if (!response.ok && response.status === 400) {\n    logTest('Document validation (invalid data)', 'PASS');\n  } else {\n    logTest('Document validation (invalid data)', 'FAIL', 'Should reject invalid data');\n  }\n}\n\nasync function testFrontendAccessibility() {\n  log('\\nüåê Testing Frontend Accessibility...', 'cyan');\n  \n  // Test main page\n  let response = await makeRequest('GET', BASE_URL);\n  if (response.ok) {\n    logTest('Main page loads', 'PASS');\n  } else {\n    logTest('Main page loads', 'FAIL', `Status: ${response.status}`);\n  }\n\n  // Test admin page\n  response = await makeRequest('GET', `${BASE_URL}/admin`);\n  if (response.ok) {\n    logTest('Admin page loads', 'PASS');\n  } else {\n    logTest('Admin page loads', 'FAIL', `Status: ${response.status}`);\n  }\n}\n\nasync function testErrorHandling() {\n  log('\\nüö® Testing Error Handling...', 'cyan');\n  \n  // Test 404 for non-existent notice\n  let response = await makeRequest('GET', '/notices/99999');\n  if (response.status === 404) {\n    logTest('404 handling (notice)', 'PASS');\n  } else {\n    logTest('404 handling (notice)', 'FAIL', `Expected 404, got ${response.status}`);\n  }\n\n  // Test 404 for non-existent document\n  response = await makeRequest('GET', '/documents/99999');\n  if (response.status === 404) {\n    logTest('404 handling (document)', 'PASS');\n  } else {\n    logTest('404 handling (document)', 'FAIL', `Expected 404, got ${response.status}`);\n  }\n\n  // Test invalid endpoint\n  response = await makeRequest('GET', '/invalid-endpoint');\n  if (response.status === 404) {\n    logTest('404 handling (invalid endpoint)', 'PASS');\n  } else {\n    logTest('404 handling (invalid endpoint)', 'FAIL', `Expected 404, got ${response.status}`);\n  }\n}\n\nasync function waitForServer() {\n  log('‚è≥ Waiting for server to start...', 'yellow');\n  \n  for (let i = 0; i < 30; i++) {\n    try {\n      const response = await makeRequest('GET', '/health');\n      if (response.ok) {\n        log('‚úÖ Server is ready!', 'green');\n        return true;\n      }\n    } catch (error) {\n      // Server not ready yet\n    }\n    await setTimeout(1000);\n  }\n  \n  log('‚ùå Server failed to start within 30 seconds', 'red');\n  return false;\n}\n\nasync function runAllTests() {\n  log('üß™ Navy Display System - Automated Test Suite', 'magenta');\n  log('================================================', 'magenta');\n  \n  // Wait for server to be ready\n  const serverReady = await waitForServer();\n  if (!serverReady) {\n    process.exit(1);\n  }\n\n  // Run all test suites\n  await testHealthCheck();\n  await testNoticesCRUD();\n  await testDocumentsCRUD();\n  await testDataValidation();\n  await testFrontendAccessibility();\n  await testErrorHandling();\n\n  // Display results\n  log('\\nüìä Test Results Summary', 'magenta');\n  log('======================', 'magenta');\n  log(`Total Tests: ${testResults.total}`, 'white');\n  log(`Passed: ${testResults.passed}`, 'green');\n  log(`Failed: ${testResults.failed}`, testResults.failed > 0 ? 'red' : 'green');\n  log(`Success Rate: ${((testResults.passed / testResults.total) * 100).toFixed(1)}%`, \n    testResults.failed === 0 ? 'green' : 'yellow');\n\n  if (testResults.failed === 0) {\n    log('\\nüéâ All tests passed! System is working correctly.', 'green');\n    process.exit(0);\n  } else {\n    log('\\n‚ö†Ô∏è  Some tests failed. Please check the issues above.', 'red');\n    process.exit(1);\n  }\n}\n\n// Run tests if this script is executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  runAllTests().catch((error) => {\n    log(`‚ùå Test suite failed: ${error.message}`, 'red');\n    process.exit(1);\n  });\n}\n\nexport { runAllTests, testResults };","size_bytes":10332},"test.sh":{"content":"#!/bin/bash\n\n# Navy Display System - Automated Test Script\n# Comprehensive testing suite for Oracle Linux and other environments\n\nset -e\n\n# Colors for output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # No Color\n\n# Test counters\nTOTAL_TESTS=0\nPASSED_TESTS=0\nFAILED_TESTS=0\n\n# Function to print colored output\nlog() {\n    local color=$1\n    local message=$2\n    echo -e \"${color}${message}${NC}\"\n}\n\n# Function to run a test\nrun_test() {\n    local test_name=$1\n    local test_command=$2\n    local expected_status=${3:-0}\n    \n    TOTAL_TESTS=$((TOTAL_TESTS + 1))\n    \n    echo -n \"Testing ${test_name}... \"\n    \n    if eval \"$test_command\" >/dev/null 2>&1; then\n        if [ $? -eq $expected_status ]; then\n            log $GREEN \"PASS\"\n            PASSED_TESTS=$((PASSED_TESTS + 1))\n        else\n            log $RED \"FAIL (unexpected exit code)\"\n            FAILED_TESTS=$((FAILED_TESTS + 1))\n        fi\n    else\n        log $RED \"FAIL\"\n        FAILED_TESTS=$((FAILED_TESTS + 1))\n    fi\n}\n\n# Function to test API endpoint\ntest_api() {\n    local endpoint=$1\n    local method=${2:-GET}\n    local expected_status=${3:-200}\n    local data=${4:-\"\"}\n    \n    local curl_cmd=\"curl -s -w '%{http_code}' -o /dev/null\"\n    \n    if [ \"$method\" = \"POST\" ] && [ -n \"$data\" ]; then\n        curl_cmd=\"$curl_cmd -X POST -H 'Content-Type: application/json' -d '$data'\"\n    elif [ \"$method\" = \"PUT\" ] && [ -n \"$data\" ]; then\n        curl_cmd=\"$curl_cmd -X PUT -H 'Content-Type: application/json' -d '$data'\"\n    elif [ \"$method\" = \"DELETE\" ]; then\n        curl_cmd=\"$curl_cmd -X DELETE\"\n    fi\n    \n    local response_code=$(eval \"$curl_cmd http://localhost:5000/api$endpoint\")\n    \n    if [ \"$response_code\" = \"$expected_status\" ]; then\n        return 0\n    else\n        return 1\n    fi\n}\n\n# Function to wait for server\nwait_for_server() {\n    log $YELLOW \"Waiting for server to start...\"\n    \n    local max_attempts=30\n    local attempt=0\n    \n    while [ $attempt -lt $max_attempts ]; do\n        if curl -s http://localhost:5000/api/health >/dev/null 2>&1; then\n            log $GREEN \"Server is ready!\"\n            return 0\n        fi\n        \n        attempt=$((attempt + 1))\n        sleep 1\n    done\n    \n    log $RED \"Server failed to start within 30 seconds\"\n    return 1\n}\n\n# Function to check prerequisites\ncheck_prerequisites() {\n    log $BLUE \"Checking prerequisites...\"\n    \n    # Check Node.js\n    if ! command -v node >/dev/null 2>&1; then\n        log $RED \"Node.js is not installed. Please install Node.js 18+ first.\"\n        exit 1\n    fi\n    \n    local node_version=$(node --version | cut -d'v' -f2 | cut -d'.' -f1)\n    if [ \"$node_version\" -lt 18 ]; then\n        log $RED \"Node.js version 18+ required. Current version: $(node --version)\"\n        exit 1\n    fi\n    \n    # Check npm\n    if ! command -v npm >/dev/null 2>&1; then\n        log $RED \"npm is not installed.\"\n        exit 1\n    fi\n    \n    # Check curl\n    if ! command -v curl >/dev/null 2>&1; then\n        log $RED \"curl is not installed. Please install curl first.\"\n        exit 1\n    fi\n    \n    log $GREEN \"All prerequisites satisfied\"\n}\n\n# Function to install dependencies\ninstall_dependencies() {\n    log $BLUE \"Installing dependencies...\"\n    \n    if [ ! -d \"node_modules\" ]; then\n        npm install\n    else\n        log $GREEN \"Dependencies already installed\"\n    fi\n}\n\n# Function to start server in background\nstart_server() {\n    log $BLUE \"Starting server...\"\n    \n    # Kill any existing server on port 5000\n    pkill -f \"npm run dev\" 2>/dev/null || true\n    pkill -f \"tsx server/index.ts\" 2>/dev/null || true\n    \n    # Start server in background\n    npm run dev > server.log 2>&1 &\n    SERVER_PID=$!\n    \n    # Wait for server to be ready\n    wait_for_server\n}\n\n# Function to stop server\nstop_server() {\n    if [ -n \"$SERVER_PID\" ]; then\n        log $BLUE \"Stopping server...\"\n        kill $SERVER_PID 2>/dev/null || true\n        pkill -f \"npm run dev\" 2>/dev/null || true\n        pkill -f \"tsx server/index.ts\" 2>/dev/null || true\n    fi\n}\n\n# Function to run all tests\nrun_all_tests() {\n    log $BLUE \"Running comprehensive test suite...\"\n    \n    # Health check tests\n    log $YELLOW \"Testing health endpoint...\"\n    run_test \"Health check\" \"test_api '/health'\"\n    \n    # Notices CRUD tests\n    log $YELLOW \"Testing notices API...\"\n    run_test \"GET notices\" \"test_api '/notices'\"\n    \n    local notice_data='{\"title\":\"Test Notice\",\"content\":\"Test content\",\"priority\":\"high\",\"startDate\":\"2025-01-01T00:00:00.000Z\",\"endDate\":\"2025-01-02T00:00:00.000Z\",\"active\":true}'\n    run_test \"POST notice\" \"test_api '/notices' 'POST' '200' '$notice_data'\"\n    \n    # Documents CRUD tests\n    log $YELLOW \"Testing documents API...\"\n    run_test \"GET documents\" \"test_api '/documents'\"\n    \n    local doc_data='{\"title\":\"Test Doc\",\"url\":\"/test.pdf\",\"type\":\"plasa\",\"active\":true}'\n    run_test \"POST document\" \"test_api '/documents' 'POST' '200' '$doc_data'\"\n    \n    # Frontend tests\n    log $YELLOW \"Testing frontend pages...\"\n    run_test \"Main page\" \"curl -s http://localhost:5000 | grep -q 'Marinha do Brasil'\"\n    run_test \"Admin page\" \"curl -s http://localhost:5000/admin | grep -q 'html'\"\n    \n    # Error handling tests\n    log $YELLOW \"Testing error handling...\"\n    run_test \"404 handling\" \"test_api '/invalid-endpoint' 'GET' '404'\"\n    \n    # Display test results\n    echo\n    log $BLUE \"Test Results Summary\"\n    log $BLUE \"====================\"\n    echo \"Total Tests: $TOTAL_TESTS\"\n    echo \"Passed: $PASSED_TESTS\"\n    echo \"Failed: $FAILED_TESTS\"\n    \n    local success_rate=$((PASSED_TESTS * 100 / TOTAL_TESTS))\n    echo \"Success Rate: ${success_rate}%\"\n    \n    if [ $FAILED_TESTS -eq 0 ]; then\n        log $GREEN \"All tests passed! System is working correctly.\"\n        return 0\n    else\n        log $RED \"Some tests failed. Check server.log for details.\"\n        return 1\n    fi\n}\n\n# Cleanup function\ncleanup() {\n    stop_server\n    rm -f server.log\n}\n\n# Trap to ensure cleanup on exit\ntrap cleanup EXIT\n\n# Main execution\nmain() {\n    log $BLUE \"Navy Display System - Automated Test Suite\"\n    log $BLUE \"==========================================\"\n    \n    check_prerequisites\n    install_dependencies\n    start_server\n    \n    if run_all_tests; then\n        exit 0\n    else\n        exit 1\n    fi\n}\n\n# Parse command line arguments\ncase \"${1:-}\" in\n    --help|-h)\n        echo \"Usage: $0 [options]\"\n        echo \"Options:\"\n        echo \"  --help, -h     Show this help message\"\n        echo \"  --quick, -q    Run quick tests only\"\n        echo \"  --verbose, -v  Verbose output\"\n        exit 0\n        ;;\n    --quick|-q)\n        log $YELLOW \"Running quick tests...\"\n        # Add quick test implementation here\n        ;;\n    --verbose|-v)\n        set -x\n        ;;\nesac\n\n# Run main function\nmain \"$@\"","size_bytes":6828},"test_selenium.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nNavy Display System - Selenium UI Testing Suite\nComprehensive browser automation testing for the display system\n\"\"\"\n\nimport os\nimport sys\nimport time\nimport json\nimport subprocess\nimport requests\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.common.exceptions import TimeoutException, NoSuchElementException\n\nclass Colors:\n    RED = '\\033[91m'\n    GREEN = '\\033[92m'\n    YELLOW = '\\033[93m'\n    BLUE = '\\033[94m'\n    CYAN = '\\033[96m'\n    WHITE = '\\033[97m'\n    BOLD = '\\033[1m'\n    END = '\\033[0m'\n\nclass TestResults:\n    def __init__(self):\n        self.total = 0\n        self.passed = 0\n        self.failed = 0\n        self.results = []\n\n    def add_result(self, test_name, passed, details=\"\"):\n        self.total += 1\n        if passed:\n            self.passed += 1\n            status = \"PASS\"\n            color = Colors.GREEN\n        else:\n            self.failed += 1\n            status = \"FAIL\"\n            color = Colors.RED\n        \n        symbol = \"‚úì\" if passed else \"‚úó\"\n        message = f\"{color}{symbol} {test_name}{Colors.END}\"\n        if details:\n            message += f\" - {details}\"\n        \n        print(message)\n        self.results.append({\n            'test': test_name,\n            'status': status,\n            'details': details\n        })\n\n    def print_summary(self):\n        print(f\"\\n{Colors.BLUE}Test Results Summary{Colors.END}\")\n        print(f\"{Colors.BLUE}{'='*20}{Colors.END}\")\n        print(f\"Total Tests: {self.total}\")\n        print(f\"{Colors.GREEN}Passed: {self.passed}{Colors.END}\")\n        print(f\"{Colors.RED}Failed: {self.failed}{Colors.END}\")\n        \n        success_rate = (self.passed / self.total * 100) if self.total > 0 else 0\n        color = Colors.GREEN if self.failed == 0 else Colors.YELLOW\n        print(f\"Success Rate: {color}{success_rate:.1f}%{Colors.END}\")\n\nclass NavyDisplayTester:\n    def __init__(self, base_url=\"http://localhost:5000\"):\n        self.base_url = base_url\n        self.api_url = f\"{base_url}/api\"\n        self.driver = None\n        self.results = TestResults()\n        self.server_process = None\n\n    def setup_driver(self):\n        \"\"\"Setup Chrome driver with appropriate options\"\"\"\n        chrome_options = Options()\n        chrome_options.add_argument(\"--headless\")\n        chrome_options.add_argument(\"--no-sandbox\")\n        chrome_options.add_argument(\"--disable-dev-shm-usage\")\n        chrome_options.add_argument(\"--disable-gpu\")\n        chrome_options.add_argument(\"--window-size=1920,1080\")\n        \n        try:\n            self.driver = webdriver.Chrome(options=chrome_options)\n            self.driver.implicitly_wait(10)\n            return True\n        except Exception as e:\n            print(f\"{Colors.RED}Failed to setup Chrome driver: {e}{Colors.END}\")\n            return False\n\n    def wait_for_server(self, timeout=30):\n        \"\"\"Wait for the server to be ready\"\"\"\n        print(f\"{Colors.YELLOW}Waiting for server to start...{Colors.END}\")\n        \n        for i in range(timeout):\n            try:\n                response = requests.get(f\"{self.api_url}/health\", timeout=2)\n                if response.status_code == 200:\n                    print(f\"{Colors.GREEN}Server is ready!{Colors.END}\")\n                    return True\n            except requests.exceptions.RequestException:\n                pass\n            time.sleep(1)\n        \n        print(f\"{Colors.RED}Server failed to start within {timeout} seconds{Colors.END}\")\n        return False\n\n    def start_server(self):\n        \"\"\"Start the application server\"\"\"\n        try:\n            print(f\"{Colors.BLUE}Starting server...{Colors.END}\")\n            self.server_process = subprocess.Popen(\n                [\"npm\", \"run\", \"dev\"],\n                stdout=subprocess.PIPE,\n                stderr=subprocess.PIPE,\n                cwd=os.getcwd()\n            )\n            return self.wait_for_server()\n        except Exception as e:\n            print(f\"{Colors.RED}Failed to start server: {e}{Colors.END}\")\n            return False\n\n    def stop_server(self):\n        \"\"\"Stop the application server\"\"\"\n        if self.server_process:\n            self.server_process.terminate()\n            self.server_process.wait()\n\n    def test_api_health(self):\n        \"\"\"Test API health endpoint\"\"\"\n        try:\n            response = requests.get(f\"{self.api_url}/health\")\n            passed = response.status_code == 200 and 'status' in response.json()\n            self.results.add_result(\"API Health Check\", passed)\n        except Exception as e:\n            self.results.add_result(\"API Health Check\", False, str(e))\n\n    def test_main_page_load(self):\n        \"\"\"Test main display page loads correctly\"\"\"\n        try:\n            self.driver.get(self.base_url)\n            \n            # Check for Brazilian Navy title\n            title_present = WebDriverWait(self.driver, 10).until(\n                EC.presence_of_element_located((By.XPATH, \"//*[contains(text(), 'Marinha do Brasil')]\"))\n            )\n            \n            # Check for time display\n            time_display = self.driver.find_element(By.CLASS_NAME, \"font-mono\")\n            \n            passed = title_present and time_display\n            self.results.add_result(\"Main Page Load\", passed)\n        except Exception as e:\n            self.results.add_result(\"Main Page Load\", False, str(e))\n\n    def test_admin_page_access(self):\n        \"\"\"Test admin page accessibility\"\"\"\n        try:\n            self.driver.get(f\"{self.base_url}/admin\")\n            \n            # Look for admin-specific elements\n            admin_tabs = WebDriverWait(self.driver, 10).until(\n                EC.presence_of_element_located((By.XPATH, \"//*[contains(text(), 'Avisos') or contains(text(), 'Documentos')]\"))\n            )\n            \n            passed = admin_tabs is not None\n            self.results.add_result(\"Admin Page Access\", passed)\n        except Exception as e:\n            self.results.add_result(\"Admin Page Access\", False, str(e))\n\n    def test_notice_creation(self):\n        \"\"\"Test notice creation in admin panel\"\"\"\n        try:\n            self.driver.get(f\"{self.base_url}/admin\")\n            \n            # Click on Avisos tab\n            avisos_tab = WebDriverWait(self.driver, 10).until(\n                EC.element_to_be_clickable((By.XPATH, \"//*[contains(text(), 'Avisos')]\"))\n            )\n            avisos_tab.click()\n            \n            # Fill notice form\n            title_input = self.driver.find_element(By.NAME, \"title\")\n            title_input.send_keys(\"Test Notice from Selenium\")\n            \n            content_input = self.driver.find_element(By.NAME, \"content\")\n            content_input.send_keys(\"This is a test notice created by automated testing\")\n            \n            # Submit form\n            submit_button = self.driver.find_element(By.XPATH, \"//button[contains(text(), 'Criar')]\")\n            submit_button.click()\n            \n            # Wait for success feedback\n            time.sleep(2)\n            \n            passed = True  # If no exception thrown, consider it passed\n            self.results.add_result(\"Notice Creation\", passed)\n        except Exception as e:\n            self.results.add_result(\"Notice Creation\", False, str(e))\n\n    def test_document_display_cycling(self):\n        \"\"\"Test document display cycling functionality\"\"\"\n        try:\n            self.driver.get(self.base_url)\n            \n            # Wait for initial load\n            time.sleep(3)\n            \n            # Check for PDF viewer or document display\n            pdf_viewer = self.driver.find_elements(By.CLASS_NAME, \"pdf-viewer\")\n            document_container = self.driver.find_elements(By.XPATH, \"//*[contains(@class, 'document') or contains(@class, 'plasa') or contains(@class, 'escala')]\")\n            \n            passed = len(pdf_viewer) > 0 or len(document_container) > 0\n            self.results.add_result(\"Document Display\", passed)\n        except Exception as e:\n            self.results.add_result(\"Document Display\", False, str(e))\n\n    def test_responsive_design(self):\n        \"\"\"Test responsive design at different screen sizes\"\"\"\n        try:\n            # Test mobile size\n            self.driver.set_window_size(375, 667)\n            self.driver.get(self.base_url)\n            time.sleep(2)\n            \n            # Check if page is still functional\n            mobile_title = self.driver.find_element(By.XPATH, \"//*[contains(text(), 'Marinha do Brasil')]\")\n            \n            # Test tablet size\n            self.driver.set_window_size(768, 1024)\n            time.sleep(1)\n            \n            # Test desktop size\n            self.driver.set_window_size(1920, 1080)\n            time.sleep(1)\n            \n            passed = mobile_title is not None\n            self.results.add_result(\"Responsive Design\", passed)\n        except Exception as e:\n            self.results.add_result(\"Responsive Design\", False, str(e))\n\n    def test_api_endpoints(self):\n        \"\"\"Test API endpoints functionality\"\"\"\n        endpoints = [\n            (\"/health\", \"GET\", 200),\n            (\"/notices\", \"GET\", 200),\n            (\"/documents\", \"GET\", 200),\n        ]\n        \n        for endpoint, method, expected_status in endpoints:\n            try:\n                if method == \"GET\":\n                    response = requests.get(f\"{self.api_url}{endpoint}\")\n                \n                passed = response.status_code == expected_status\n                test_name = f\"API {method} {endpoint}\"\n                self.results.add_result(test_name, passed, f\"Status: {response.status_code}\")\n            except Exception as e:\n                self.results.add_result(test_name, False, str(e))\n\n    def test_error_handling(self):\n        \"\"\"Test error handling for invalid URLs\"\"\"\n        try:\n            self.driver.get(f\"{self.base_url}/invalid-page\")\n            \n            # Check if 404 page is displayed or redirected properly\n            current_url = self.driver.current_url\n            page_source = self.driver.page_source\n            \n            # Should either show 404 or redirect to home\n            passed = \"404\" in page_source or current_url == f\"{self.base_url}/\"\n            self.results.add_result(\"Error Handling (404)\", passed)\n        except Exception as e:\n            self.results.add_result(\"Error Handling (404)\", False, str(e))\n\n    def run_all_tests(self):\n        \"\"\"Run the complete test suite\"\"\"\n        print(f\"{Colors.CYAN}Navy Display System - Selenium Test Suite{Colors.END}\")\n        print(f\"{Colors.CYAN}{'='*45}{Colors.END}\")\n        \n        # Setup\n        if not self.setup_driver():\n            print(f\"{Colors.RED}Failed to setup test environment{Colors.END}\")\n            return False\n        \n        if not self.start_server():\n            print(f\"{Colors.RED}Failed to start server{Colors.END}\")\n            return False\n        \n        try:\n            # Run tests\n            self.test_api_health()\n            self.test_main_page_load()\n            self.test_admin_page_access()\n            self.test_document_display_cycling()\n            self.test_responsive_design()\n            self.test_api_endpoints()\n            self.test_error_handling()\n            # self.test_notice_creation()  # Commented out as it requires specific UI elements\n            \n            # Print results\n            self.results.print_summary()\n            \n            # Return success status\n            return self.results.failed == 0\n            \n        finally:\n            # Cleanup\n            if self.driver:\n                self.driver.quit()\n            self.stop_server()\n\ndef main():\n    \"\"\"Main function\"\"\"\n    if len(sys.argv) > 1 and sys.argv[1] in ['--help', '-h']:\n        print(\"Usage: python3 test_selenium.py [base_url]\")\n        print(\"Default base_url: http://localhost:5000\")\n        return\n    \n    base_url = sys.argv[1] if len(sys.argv) > 1 else \"http://localhost:5000\"\n    \n    tester = NavyDisplayTester(base_url)\n    success = tester.run_all_tests()\n    \n    if success:\n        print(f\"\\n{Colors.GREEN}All tests passed! System is working correctly.{Colors.END}\")\n        sys.exit(0)\n    else:\n        print(f\"\\n{Colors.RED}Some tests failed. Please check the issues above.{Colors.END}\")\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()","size_bytes":12583},"teste.sh":{"content":"#!/bin/bash\n\n# =============================================================================\n# SISTEMA DE VISUALIZA√á√ÉO DA MARINHA DO BRASIL - TESTES AUTOMATIZADOS\n# =============================================================================\n# \n# Este script executa uma bateria completa de testes para verificar se o\n# sistema est√° funcionando corretamente. Os testes incluem:\n#\n# 1. VERIFICA√á√ÉO DE PR√â-REQUISITOS\n#    - Node.js vers√£o 18 ou superior\n#    - npm para gerenciamento de pacotes\n#    - curl para testes de API\n#\n# 2. TESTES DE API (Backend)\n#    - Endpoint de sa√∫de do sistema (/api/health)\n#    - CRUD completo de avisos (Create, Read, Update, Delete)\n#    - CRUD completo de documentos\n#    - Tratamento adequado de erros\n#\n# 3. TESTES DE FRONTEND\n#    - Carregamento correto da p√°gina principal\n#    - Acesso √† interface administrativa\n#    - Presen√ßa de elementos da Marinha do Brasil\n#\n# 4. TESTES DE INTEGRA√á√ÉO\n#    - Comunica√ß√£o entre frontend e backend\n#    - Persist√™ncia de dados\n#    - Funcionalidades espec√≠ficas do sistema naval\n#\n# USO:\n#   ./teste.sh           - Executa todos os testes\n#   ./teste.sh --rapido  - Executa apenas testes essenciais\n#   ./teste.sh --verboso - Mostra todos os comandos executados\n#   ./teste.sh --help    - Mostra ajuda detalhada\n#\n# =============================================================================\n\nset -e\n\n# Cores para output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # Sem Cor\n\n# Contadores de teste\nTOTAL_TESTES=0\nTESTES_PASSOU=0\nTESTES_FALHOU=0\n\n# Fun√ß√£o para imprimir output colorido\nlog() {\n    local cor=$1\n    local mensagem=$2\n    echo -e \"${cor}${mensagem}${NC}\"\n}\n\n# Fun√ß√£o para executar um teste individual\n# Par√¢metros:\n#   $1 - Nome descritivo do teste\n#   $2 - Comando a ser executado\n#   $3 - C√≥digo de sa√≠da esperado (padr√£o: 0)\nexecutar_teste() {\n    local nome_teste=$1\n    local comando_teste=$2\n    local status_esperado=${3:-0}\n    \n    TOTAL_TESTES=$((TOTAL_TESTES + 1))\n    \n    echo -n \"Testando ${nome_teste}... \"\n    \n    # Executa o comando e captura o c√≥digo de sa√≠da\n    if eval \"$comando_teste\" >/dev/null 2>&1; then\n        if [ $? -eq $status_esperado ]; then\n            log $GREEN \"PASSOU\"\n            TESTES_PASSOU=$((TESTES_PASSOU + 1))\n        else\n            log $RED \"FALHOU (c√≥digo de sa√≠da inesperado)\"\n            TESTES_FALHOU=$((TESTES_FALHOU + 1))\n        fi\n    else\n        log $RED \"FALHOU\"\n        TESTES_FALHOU=$((TESTES_FALHOU + 1))\n    fi\n}\n\n# Fun√ß√£o para testar endpoints da API REST\n# Esta fun√ß√£o automatiza testes de todos os m√©todos HTTP necess√°rios\n# Par√¢metros:\n#   $1 - Endpoint da API (ex: /health, /notices)\n#   $2 - M√©todo HTTP (GET, POST, PUT, DELETE) - padr√£o: GET\n#   $3 - C√≥digo de status esperado (200, 404, etc.) - padr√£o: 200\n#   $4 - Dados JSON para envio (apenas POST/PUT)\ntestar_api() {\n    local endpoint=$1\n    local metodo=${2:-GET}\n    local status_esperado=${3:-200}\n    local dados=${4:-\"\"}\n    \n    # Constr√≥i comando curl baseado no m√©todo HTTP\n    local curl_cmd=\"curl -s -w '%{http_code}' -o /dev/null\"\n    \n    if [ \"$metodo\" = \"POST\" ] && [ -n \"$dados\" ]; then\n        curl_cmd=\"$curl_cmd -X POST -H 'Content-Type: application/json' -d '$dados'\"\n    elif [ \"$metodo\" = \"PUT\" ] && [ -n \"$dados\" ]; then\n        curl_cmd=\"$curl_cmd -X PUT -H 'Content-Type: application/json' -d '$dados'\"\n    elif [ \"$metodo\" = \"DELETE\" ]; then\n        curl_cmd=\"$curl_cmd -X DELETE\"\n    fi\n    \n    # Executa requisi√ß√£o e captura c√≥digo de resposta\n    local codigo_resposta=$(eval \"$curl_cmd http://localhost:5000/api$endpoint\")\n    \n    # Verifica se o c√≥digo de resposta corresponde ao esperado\n    if [ \"$codigo_resposta\" = \"$status_esperado\" ]; then\n        return 0\n    else\n        return 1\n    fi\n}\n\n# Fun√ß√£o para aguardar o servidor\naguardar_servidor() {\n    log $YELLOW \"Aguardando o servidor iniciar...\"\n    \n    local max_tentativas=30\n    local tentativa=0\n    \n    while [ $tentativa -lt $max_tentativas ]; do\n        if curl -s http://localhost:5000/api/health >/dev/null 2>&1; then\n            log $GREEN \"Servidor est√° pronto!\"\n            return 0\n        fi\n        \n        tentativa=$((tentativa + 1))\n        sleep 1\n    done\n    \n    log $RED \"Servidor falhou ao iniciar em 30 segundos\"\n    return 1\n}\n\n# Fun√ß√£o para verificar pr√©-requisitos\nverificar_prerequisitos() {\n    log $BLUE \"Verificando pr√©-requisitos...\"\n    \n    # Verificar Node.js\n    if ! command -v node >/dev/null 2>&1; then\n        log $RED \"Node.js n√£o est√° instalado. Por favor, instale Node.js 18+ primeiro.\"\n        exit 1\n    fi\n    \n    local versao_node=$(node --version | cut -d'v' -f2 | cut -d'.' -f1)\n    if [ \"$versao_node\" -lt 18 ]; then\n        log $RED \"Node.js vers√£o 18+ necess√°ria. Vers√£o atual: $(node --version)\"\n        exit 1\n    fi\n    \n    # Verificar npm\n    if ! command -v npm >/dev/null 2>&1; then\n        log $RED \"npm n√£o est√° instalado.\"\n        exit 1\n    fi\n    \n    # Verificar curl\n    if ! command -v curl >/dev/null 2>&1; then\n        log $RED \"curl n√£o est√° instalado. Por favor, instale curl primeiro.\"\n        exit 1\n    fi\n    \n    log $GREEN \"Todos os pr√©-requisitos satisfeitos\"\n}\n\n# Fun√ß√£o para instalar depend√™ncias\ninstalar_dependencias() {\n    log $BLUE \"Instalando depend√™ncias...\"\n    \n    if [ ! -d \"node_modules\" ]; then\n        npm install\n    else\n        log $GREEN \"Depend√™ncias j√° instaladas\"\n    fi\n}\n\n# Fun√ß√£o para iniciar servidor em background\niniciar_servidor() {\n    log $BLUE \"Iniciando servidor...\"\n    \n    # Matar qualquer servidor existente na porta 5000\n    pkill -f \"npm run dev\" 2>/dev/null || true\n    pkill -f \"tsx server/index.ts\" 2>/dev/null || true\n    \n    # Iniciar servidor em background\n    npm run dev > servidor.log 2>&1 &\n    SERVIDOR_PID=$!\n    \n    # Aguardar servidor ficar pronto\n    aguardar_servidor\n}\n\n# Fun√ß√£o para parar servidor\nparar_servidor() {\n    if [ -n \"$SERVIDOR_PID\" ]; then\n        log $BLUE \"Parando servidor...\"\n        kill $SERVIDOR_PID 2>/dev/null || true\n        pkill -f \"npm run dev\" 2>/dev/null || true\n        pkill -f \"tsx server/index.ts\" 2>/dev/null || true\n    fi\n}\n\n# Fun√ß√£o para executar todos os testes\nexecutar_todos_testes() {\n    log $BLUE \"Executando suite de testes abrangente...\"\n    \n    # Testes de verifica√ß√£o de sa√∫de\n    log $YELLOW \"Testando endpoint de sa√∫de...\"\n    executar_teste \"Verifica√ß√£o de sa√∫de\" \"testar_api '/health'\"\n    \n    # Testes CRUD de avisos\n    log $YELLOW \"Testando API de avisos...\"\n    executar_teste \"GET avisos\" \"testar_api '/notices'\"\n    \n    local dados_aviso='{\"title\":\"Aviso de Teste\",\"content\":\"Conte√∫do de teste\",\"priority\":\"high\",\"startDate\":\"2025-01-01T00:00:00.000Z\",\"endDate\":\"2025-01-02T00:00:00.000Z\",\"active\":true}'\n    executar_teste \"POST aviso\" \"testar_api '/notices' 'POST' '200' '$dados_aviso'\"\n    \n    # Testes CRUD de documentos\n    log $YELLOW \"Testando API de documentos...\"\n    executar_teste \"GET documentos\" \"testar_api '/documents'\"\n    \n    local dados_doc='{\"title\":\"Doc de Teste\",\"url\":\"/teste.pdf\",\"type\":\"plasa\",\"active\":true}'\n    executar_teste \"POST documento\" \"testar_api '/documents' 'POST' '200' '$dados_doc'\"\n    \n    # Testes do frontend\n    log $YELLOW \"Testando p√°ginas do frontend...\"\n    executar_teste \"P√°gina principal\" \"curl -s http://localhost:5000 | grep -q 'Marinha do Brasil'\"\n    executar_teste \"P√°gina admin\" \"curl -s http://localhost:5000/admin | grep -q 'html'\"\n    \n    # Testes de tratamento de erro\n    log $YELLOW \"Testando tratamento de erros...\"\n    executar_teste \"Tratamento 404\" \"testar_api '/endpoint-invalido' 'GET' '404'\"\n    \n    # Exibir resultados dos testes\n    echo\n    log $BLUE \"Resumo dos Resultados dos Testes\"\n    log $BLUE \"================================\"\n    echo \"Total de Testes: $TOTAL_TESTES\"\n    echo \"Passou: $TESTES_PASSOU\"\n    echo \"Falhou: $TESTES_FALHOU\"\n    \n    local taxa_sucesso=$((TESTES_PASSOU * 100 / TOTAL_TESTES))\n    echo \"Taxa de Sucesso: ${taxa_sucesso}%\"\n    \n    if [ $TESTES_FALHOU -eq 0 ]; then\n        log $GREEN \"Todos os testes passaram! Sistema est√° funcionando corretamente.\"\n        return 0\n    else\n        log $RED \"Alguns testes falharam. Verifique servidor.log para detalhes.\"\n        return 1\n    fi\n}\n\n# Fun√ß√£o de limpeza\nlimpeza() {\n    parar_servidor\n    rm -f servidor.log\n}\n\n# Trap para garantir limpeza na sa√≠da\ntrap limpeza EXIT\n\n# Execu√ß√£o principal\nmain() {\n    log $BLUE \"Sistema de Visualiza√ß√£o da Marinha - Suite de Testes Automatizada\"\n    log $BLUE \"================================================================\"\n    \n    verificar_prerequisitos\n    instalar_dependencias\n    iniciar_servidor\n    \n    if executar_todos_testes; then\n        exit 0\n    else\n        exit 1\n    fi\n}\n\n# Analisar argumentos da linha de comando\ncase \"${1:-}\" in\n    --help|-h)\n        echo \"Uso: $0 [op√ß√µes]\"\n        echo \"Op√ß√µes:\"\n        echo \"  --help, -h     Mostrar esta mensagem de ajuda\"\n        echo \"  --rapido, -r   Executar apenas testes r√°pidos\"\n        echo \"  --verboso, -v  Sa√≠da verbosa\"\n        exit 0\n        ;;\n    --rapido|-r)\n        log $YELLOW \"Executando testes r√°pidos...\"\n        # Adicionar implementa√ß√£o de teste r√°pido aqui\n        ;;\n    --verboso|-v)\n        set -x\n        ;;\nesac\n\n# Executar fun√ß√£o principal\nmain \"$@\"","size_bytes":9406},"teste_selenium.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nSistema de Visualiza√ß√£o da Marinha - Suite de Testes Selenium\nTestes abrangentes de automa√ß√£o de navegador para o sistema de visualiza√ß√£o\n\"\"\"\n\nimport os\nimport sys\nimport time\nimport json\nimport subprocess\nimport requests\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.common.exceptions import TimeoutException, NoSuchElementException\n\nclass Cores:\n    VERMELHO = '\\033[91m'\n    VERDE = '\\033[92m'\n    AMARELO = '\\033[93m'\n    AZUL = '\\033[94m'\n    CIANO = '\\033[96m'\n    BRANCO = '\\033[97m'\n    NEGRITO = '\\033[1m'\n    FIM = '\\033[0m'\n\nclass ResultadosTeste:\n    def __init__(self):\n        self.total = 0\n        self.passou = 0\n        self.falhou = 0\n        self.resultados = []\n\n    def adicionar_resultado(self, nome_teste, passou, detalhes=\"\"):\n        self.total += 1\n        if passou:\n            self.passou += 1\n            status = \"PASSOU\"\n            cor = Cores.VERDE\n        else:\n            self.falhou += 1\n            status = \"FALHOU\"\n            cor = Cores.VERMELHO\n        \n        simbolo = \"‚úì\" if passou else \"‚úó\"\n        mensagem = f\"{cor}{simbolo} {nome_teste}{Cores.FIM}\"\n        if detalhes:\n            mensagem += f\" - {detalhes}\"\n        \n        print(mensagem)\n        self.resultados.append({\n            'teste': nome_teste,\n            'status': status,\n            'detalhes': detalhes\n        })\n\n    def imprimir_resumo(self):\n        print(f\"\\n{Cores.AZUL}Resumo dos Resultados dos Testes{Cores.FIM}\")\n        print(f\"{Cores.AZUL}{'='*35}{Cores.FIM}\")\n        print(f\"Total de Testes: {self.total}\")\n        print(f\"{Cores.VERDE}Passou: {self.passou}{Cores.FIM}\")\n        print(f\"{Cores.VERMELHO}Falhou: {self.falhou}{Cores.FIM}\")\n        \n        taxa_sucesso = (self.passou / self.total * 100) if self.total > 0 else 0\n        cor = Cores.VERDE if self.falhou == 0 else Cores.AMARELO\n        print(f\"Taxa de Sucesso: {cor}{taxa_sucesso:.1f}%{Cores.FIM}\")\n\nclass TestadorVisualizacaoMarinha:\n    def __init__(self, url_base=\"http://localhost:5000\"):\n        self.url_base = url_base\n        self.url_api = f\"{url_base}/api\"\n        self.driver = None\n        self.resultados = ResultadosTeste()\n        self.processo_servidor = None\n\n    def configurar_driver(self):\n        \"\"\"Configurar driver Chrome com op√ß√µes apropriadas\"\"\"\n        opcoes_chrome = Options()\n        opcoes_chrome.add_argument(\"--headless\")\n        opcoes_chrome.add_argument(\"--no-sandbox\")\n        opcoes_chrome.add_argument(\"--disable-dev-shm-usage\")\n        opcoes_chrome.add_argument(\"--disable-gpu\")\n        opcoes_chrome.add_argument(\"--window-size=1920,1080\")\n        \n        try:\n            self.driver = webdriver.Chrome(options=opcoes_chrome)\n            self.driver.implicitly_wait(10)\n            return True\n        except Exception as e:\n            print(f\"{Cores.VERMELHO}Falha ao configurar driver Chrome: {e}{Cores.FIM}\")\n            return False\n\n    def aguardar_servidor(self, timeout=30):\n        \"\"\"Aguardar o servidor estar pronto\"\"\"\n        print(f\"{Cores.AMARELO}Aguardando servidor iniciar...{Cores.FIM}\")\n        \n        for i in range(timeout):\n            try:\n                response = requests.get(f\"{self.url_api}/health\", timeout=2)\n                if response.status_code == 200:\n                    print(f\"{Cores.VERDE}Servidor est√° pronto!{Cores.FIM}\")\n                    return True\n            except requests.exceptions.RequestException:\n                pass\n            time.sleep(1)\n        \n        print(f\"{Cores.VERMELHO}Servidor falhou ao iniciar em {timeout} segundos{Cores.FIM}\")\n        return False\n\n    def iniciar_servidor(self):\n        \"\"\"Iniciar o servidor da aplica√ß√£o\"\"\"\n        try:\n            print(f\"{Cores.AZUL}Iniciando servidor...{Cores.FIM}\")\n            self.processo_servidor = subprocess.Popen(\n                [\"npm\", \"run\", \"dev\"],\n                stdout=subprocess.PIPE,\n                stderr=subprocess.PIPE,\n                cwd=os.getcwd()\n            )\n            return self.aguardar_servidor()\n        except Exception as e:\n            print(f\"{Cores.VERMELHO}Falha ao iniciar servidor: {e}{Cores.FIM}\")\n            return False\n\n    def parar_servidor(self):\n        \"\"\"Parar o servidor da aplica√ß√£o\"\"\"\n        if self.processo_servidor:\n            self.processo_servidor.terminate()\n            self.processo_servidor.wait()\n\n    def testar_saude_api(self):\n        \"\"\"Testar endpoint de sa√∫de da API\"\"\"\n        try:\n            response = requests.get(f\"{self.url_api}/health\")\n            passou = response.status_code == 200 and 'status' in response.json()\n            self.resultados.adicionar_resultado(\"Verifica√ß√£o de Sa√∫de da API\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Verifica√ß√£o de Sa√∫de da API\", False, str(e))\n\n    def testar_carregamento_pagina_principal(self):\n        \"\"\"Testar se a p√°gina principal de visualiza√ß√£o carrega corretamente\"\"\"\n        try:\n            self.driver.get(self.url_base)\n            \n            # Verificar t√≠tulo da Marinha do Brasil\n            titulo_presente = WebDriverWait(self.driver, 10).until(\n                EC.presence_of_element_located((By.XPATH, \"//*[contains(text(), 'Marinha do Brasil')]\"))\n            )\n            \n            # Verificar exibi√ß√£o de hor√°rio\n            display_horario = self.driver.find_element(By.CLASS_NAME, \"font-mono\")\n            \n            passou = titulo_presente and display_horario\n            self.resultados.adicionar_resultado(\"Carregamento da P√°gina Principal\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Carregamento da P√°gina Principal\", False, str(e))\n\n    def testar_acesso_pagina_admin(self):\n        \"\"\"Testar acessibilidade da p√°gina admin\"\"\"\n        try:\n            self.driver.get(f\"{self.url_base}/admin\")\n            \n            # Procurar elementos espec√≠ficos do admin\n            abas_admin = WebDriverWait(self.driver, 10).until(\n                EC.presence_of_element_located((By.XPATH, \"//*[contains(text(), 'Avisos') or contains(text(), 'Documentos')]\"))\n            )\n            \n            passou = abas_admin is not None\n            self.resultados.adicionar_resultado(\"Acesso √† P√°gina Admin\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Acesso √† P√°gina Admin\", False, str(e))\n\n    def testar_ciclagem_documentos(self):\n        \"\"\"Testar funcionalidade de ciclagem de documentos\"\"\"\n        try:\n            self.driver.get(self.url_base)\n            \n            # Aguardar carregamento inicial\n            time.sleep(3)\n            \n            # Verificar visualizador de PDF ou container de documento\n            visualizador_pdf = self.driver.find_elements(By.CLASS_NAME, \"pdf-viewer\")\n            container_documento = self.driver.find_elements(By.XPATH, \"//*[contains(@class, 'document') or contains(@class, 'plasa') or contains(@class, 'escala')]\")\n            \n            passou = len(visualizador_pdf) > 0 or len(container_documento) > 0\n            self.resultados.adicionar_resultado(\"Exibi√ß√£o de Documentos\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Exibi√ß√£o de Documentos\", False, str(e))\n\n    def testar_design_responsivo(self):\n        \"\"\"Testar design responsivo em diferentes tamanhos de tela\"\"\"\n        try:\n            # Testar tamanho mobile\n            self.driver.set_window_size(375, 667)\n            self.driver.get(self.url_base)\n            time.sleep(2)\n            \n            # Verificar se a p√°gina ainda √© funcional\n            titulo_mobile = self.driver.find_element(By.XPATH, \"//*[contains(text(), 'Marinha do Brasil')]\")\n            \n            # Testar tamanho tablet\n            self.driver.set_window_size(768, 1024)\n            time.sleep(1)\n            \n            # Testar tamanho desktop\n            self.driver.set_window_size(1920, 1080)\n            time.sleep(1)\n            \n            passou = titulo_mobile is not None\n            self.resultados.adicionar_resultado(\"Design Responsivo\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Design Responsivo\", False, str(e))\n\n    def testar_endpoints_api(self):\n        \"\"\"Testar funcionalidade dos endpoints da API\"\"\"\n        endpoints = [\n            (\"/health\", \"GET\", 200),\n            (\"/notices\", \"GET\", 200),\n            (\"/documents\", \"GET\", 200),\n        ]\n        \n        for endpoint, metodo, status_esperado in endpoints:\n            try:\n                if metodo == \"GET\":\n                    response = requests.get(f\"{self.url_api}{endpoint}\")\n                \n                passou = response.status_code == status_esperado\n                nome_teste = f\"API {metodo} {endpoint}\"\n                self.resultados.adicionar_resultado(nome_teste, passou, f\"Status: {response.status_code}\")\n            except Exception as e:\n                self.resultados.adicionar_resultado(nome_teste, False, str(e))\n\n    def testar_tratamento_erro(self):\n        \"\"\"Testar tratamento de erro para URLs inv√°lidas\"\"\"\n        try:\n            self.driver.get(f\"{self.url_base}/pagina-invalida\")\n            \n            # Verificar se p√°gina 404 √© exibida ou redirecionada adequadamente\n            url_atual = self.driver.current_url\n            codigo_pagina = self.driver.page_source\n            \n            # Deve mostrar 404 ou redirecionar para home\n            passou = \"404\" in codigo_pagina or url_atual == f\"{self.url_base}/\"\n            self.resultados.adicionar_resultado(\"Tratamento de Erro (404)\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Tratamento de Erro (404)\", False, str(e))\n\n    def testar_funcionalidade_avisos(self):\n        \"\"\"Testar funcionalidade de exibi√ß√£o de avisos\"\"\"\n        try:\n            self.driver.get(self.url_base)\n            \n            # Aguardar poss√≠vel exibi√ß√£o de avisos\n            time.sleep(5)\n            \n            # Verificar se h√° elementos de aviso na p√°gina\n            elementos_aviso = self.driver.find_elements(By.XPATH, \"//*[contains(@class, 'notice') or contains(@class, 'aviso')]\")\n            \n            # Mesmo sem avisos ativos, o sistema deve funcionar\n            passou = True  # Sistema deve funcionar independente de avisos\n            self.resultados.adicionar_resultado(\"Funcionalidade de Avisos\", passou)\n        except Exception as e:\n            self.resultados.adicionar_resultado(\"Funcionalidade de Avisos\", False, str(e))\n\n    def executar_todos_testes(self):\n        \"\"\"Executar a suite completa de testes\"\"\"\n        print(f\"{Cores.CIANO}Sistema de Visualiza√ß√£o da Marinha - Suite de Testes Selenium{Cores.FIM}\")\n        print(f\"{Cores.CIANO}{'='*65}{Cores.FIM}\")\n        \n        # Configura√ß√£o\n        if not self.configurar_driver():\n            print(f\"{Cores.VERMELHO}Falha ao configurar ambiente de teste{Cores.FIM}\")\n            return False\n        \n        if not self.iniciar_servidor():\n            print(f\"{Cores.VERMELHO}Falha ao iniciar servidor{Cores.FIM}\")\n            return False\n        \n        try:\n            # Executar testes\n            self.testar_saude_api()\n            self.testar_carregamento_pagina_principal()\n            self.testar_acesso_pagina_admin()\n            self.testar_ciclagem_documentos()\n            self.testar_design_responsivo()\n            self.testar_endpoints_api()\n            self.testar_tratamento_erro()\n            self.testar_funcionalidade_avisos()\n            \n            # Imprimir resultados\n            self.resultados.imprimir_resumo()\n            \n            # Retornar status de sucesso\n            return self.resultados.falhou == 0\n            \n        finally:\n            # Limpeza\n            if self.driver:\n                self.driver.quit()\n            self.parar_servidor()\n\ndef main():\n    \"\"\"Fun√ß√£o principal\"\"\"\n    if len(sys.argv) > 1 and sys.argv[1] in ['--help', '-h', '--ajuda']:\n        print(\"Uso: python3 teste_selenium.py [url_base]\")\n        print(\"URL base padr√£o: http://localhost:5000\")\n        print()\n        print(\"Op√ß√µes:\")\n        print(\"  --help, -h, --ajuda    Mostrar esta mensagem de ajuda\")\n        return\n    \n    url_base = sys.argv[1] if len(sys.argv) > 1 else \"http://localhost:5000\"\n    \n    testador = TestadorVisualizacaoMarinha(url_base)\n    sucesso = testador.executar_todos_testes()\n    \n    if sucesso:\n        print(f\"\\n{Cores.VERDE}Todos os testes passaram! Sistema est√° funcionando corretamente.{Cores.FIM}\")\n        sys.exit(0)\n    else:\n        print(f\"\\n{Cores.VERMELHO}Alguns testes falharam. Verifique os problemas acima.{Cores.FIM}\")\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()","size_bytes":13052},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport { fileURLToPath } from 'url';\n\n// Compatibilidade para Node.js 18\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(__dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(__dirname, \"shared\"),\n      \"@assets\": path.resolve(__dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(__dirname, \"client\"),\n  build: {\n    outDir: path.resolve(__dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: '0.0.0.0',\n    port: 5173,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:5000',\n        changeOrigin: true,\n        secure: false,\n      },\n    },\n  },\n});\n","size_bytes":858},"client/network-test.js":{"content":"const os = require('os');\nconst net = require('net');\n\nconsole.log('üîç DIAGN√ìSTICO DE REDE\\n');\n\n// 1. Mostrar todos os IPs\nconsole.log('üì° IPs da M√°quina:');\nconst interfaces = os.networkInterfaces();\nObject.keys(interfaces).forEach((name) => {\n  const networkInterface = interfaces[name];\n  if (networkInterface) {\n    networkInterface.forEach((netInterface) => {\n      if (netInterface.family === 'IPv4') {\n        console.log(`   ${name}: ${netInterface.address} ${netInterface.internal ? '(interno)' : '(rede)'}`);\n      }\n    });\n  }\n});\n\n// 2. Testar se a porta est√° livre\nconsole.log('\\nüîç Testando Porta 5000:');\nconst server = net.createServer();\n\nserver.listen(5000, '0.0.0.0', () => {\n  console.log('‚úÖ Porta 5000 est√° dispon√≠vel');\n  server.close();\n});\n\nserver.on('error', (err) => {\n  if (err.code === 'EADDRINUSE') {\n    console.log('‚ö†Ô∏è  Porta 5000 j√° est√° em uso (isso √© normal se o servidor estiver rodando)');\n  } else {\n    console.log('‚ùå Erro na porta 5000:', err.message);\n  }\n});\n\n// 3. Mostrar informa√ß√µes do sistema\nconsole.log('\\nüíª Informa√ß√µes do Sistema:');\nconsole.log(`   OS: ${os.type()} ${os.release()}`);\nconsole.log(`   Hostname: ${os.hostname()}`);\nconsole.log(`   Platform: ${os.platform()}`);\nconsole.log(`   Arch: ${os.arch()}`);\n\n// 4. Comandos √∫teis\nconsole.log('\\nüõ†Ô∏è  Comandos √öteis:');\nconsole.log('   Windows:');\nconsole.log('   - Verificar porta: netstat -an | findstr :5000');\nconsole.log('   - Liberar firewall: New-NetFirewallRule -DisplayName \"Node 5000\" -Direction Inbound -Protocol TCP -LocalPort 5000 -Action Allow');\nconsole.log('   - Ver IP: ipconfig');\nconsole.log('\\n   Linux/Mac:');\nconsole.log('   - Verificar porta: netstat -an | grep :5000');\nconsole.log('   - Liberar firewall: sudo ufw allow 5000');\nconsole.log('   - Ver IP: ifconfig ou ip addr show');\n\nconsole.log('\\nüìù Pr√≥ximos Passos:');\nconsole.log('   1. Execute: npm run dev');\nconsole.log('   2. Teste local: http://localhost:5000');\nconsole.log('   3. Teste rede: use um dos IPs de rede listados acima');\nconsole.log('   4. Se n√£o funcionar, verifique firewall');","size_bytes":2122},"server/db-storage.ts":{"content":"// server/db-storage.ts - VERS√ÉO CORRIGIDA PARA TIPOS\nimport { Pool } from 'pg';\nimport { IStorage } from \"./storage\";\nimport { \n  type User, type InsertUser, \n  type Notice, type InsertNotice,\n  type PDFDocument, type InsertDocument,\n  type DutyOfficers, type InsertDutyOfficers,\n  type MilitaryPersonnel, type InsertMilitaryPersonnel\n} from \"@shared/schema\";\n\nexport class DatabaseStorage implements IStorage {\n  private pool: Pool;\n\n  constructor() {\n    if (!process.env.DATABASE_URL) {\n      throw new Error('DATABASE_URL must be set in environment variables');\n    }\n\n    this.pool = new Pool({\n      connectionString: process.env.DATABASE_URL,\n      ssl: false, // Para desenvolvimento local\n      max: 20,\n      idleTimeoutMillis: 30000,\n      connectionTimeoutMillis: 2000,\n    });\n\n    console.log('üîó PostgreSQL DatabaseStorage initialized');\n    console.log('üìä Connected to:', process.env.DATABASE_URL.replace(/:[^:]*@/, ':***@'));\n  }\n\n  // ===== USERS =====\n  async getUser(id: number): Promise<User | undefined> {\n    const result = await this.pool.query('SELECT * FROM users WHERE id = $1', [id]);\n    const row = result.rows[0];\n    return row ? {\n      id: row.id,\n      username: row.username,\n      password: row.password\n    } : undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await this.pool.query('SELECT * FROM users WHERE username = $1', [username]);\n    const row = result.rows[0];\n    return row ? {\n      id: row.id,\n      username: row.username,\n      password: row.password\n    } : undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const result = await this.pool.query(\n      'INSERT INTO users (username, password) VALUES ($1, $2) RETURNING *',\n      [insertUser.username, insertUser.password]\n    );\n    const row = result.rows[0];\n    return {\n      id: row.id,\n      username: row.username,\n      password: row.password\n    };\n  }\n\n  // ===== NOTICES =====\n  async getNotices(): Promise<Notice[]> {\n    console.log('üì¢ PostgreSQL: Buscando avisos...');\n    \n    try {\n      const result = await this.pool.query('SELECT * FROM notices ORDER BY created_at DESC');\n      \n      const notices: Notice[] = result.rows.map(row => ({\n        id: row.id,\n        title: row.title,\n        content: row.content,\n        priority: row.priority as \"high\" | \"medium\" | \"low\",\n        startDate: new Date(row.start_date),\n        endDate: new Date(row.end_date),\n        active: row.active,\n        createdAt: row.created_at ? new Date(row.created_at) : null,\n        updatedAt: row.updated_at ? new Date(row.updated_at) : null\n      }));\n\n      console.log(`üì¢ PostgreSQL: ${notices.length} avisos encontrados`);\n      return notices;\n      \n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao buscar avisos:', error);\n      throw error;\n    }\n  }\n\n  async getNotice(id: number): Promise<Notice | undefined> {\n    try {\n      const result = await this.pool.query('SELECT * FROM notices WHERE id = $1', [id]);\n      const row = result.rows[0];\n      \n      return row ? {\n        id: row.id,\n        title: row.title,\n        content: row.content,\n        priority: row.priority as \"high\" | \"medium\" | \"low\",\n        startDate: new Date(row.start_date),\n        endDate: new Date(row.end_date),\n        active: row.active,\n        createdAt: row.created_at ? new Date(row.created_at) : null,\n        updatedAt: row.updated_at ? new Date(row.updated_at) : null\n      } : undefined;\n      \n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao buscar aviso ${id}:`, error);\n      return undefined;\n    }\n  }\n\n  async createNotice(insertNotice: InsertNotice): Promise<Notice> {\n    console.log('üì¢ PostgreSQL: Criando aviso:', insertNotice.title);\n    \n    try {\n      const result = await this.pool.query(\n        `INSERT INTO notices (title, content, priority, start_date, end_date, active) \n         VALUES ($1, $2, $3, $4, $5, $6) \n         RETURNING *`,\n        [\n          insertNotice.title,\n          insertNotice.content,\n          insertNotice.priority,\n          insertNotice.startDate,\n          insertNotice.endDate,\n          insertNotice.active\n        ]\n      );\n\n      const row = result.rows[0];\n      const notice: Notice = {\n        id: row.id,\n        title: row.title,\n        content: row.content,\n        priority: row.priority as \"high\" | \"medium\" | \"low\",\n        startDate: new Date(row.start_date),\n        endDate: new Date(row.end_date),\n        active: row.active,\n        createdAt: row.created_at ? new Date(row.created_at) : null,\n        updatedAt: row.updated_at ? new Date(row.updated_at) : null\n      };\n\n      console.log(`‚úÖ PostgreSQL: Aviso ${notice.id} criado com sucesso`);\n      return notice;\n      \n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao criar aviso:', error);\n      throw error;\n    }\n  }\n\n  async updateNotice(notice: Notice): Promise<Notice> {\n    console.log(`üìù PostgreSQL: Atualizando aviso ${notice.id}`);\n    \n    try {\n      const result = await this.pool.query(\n        `UPDATE notices \n         SET title = $1, content = $2, priority = $3, start_date = $4, end_date = $5, active = $6, updated_at = NOW()\n         WHERE id = $7 \n         RETURNING *`,\n        [\n          notice.title,\n          notice.content,\n          notice.priority,\n          notice.startDate,\n          notice.endDate,\n          notice.active,\n          notice.id\n        ]\n      );\n\n      if (result.rows.length === 0) {\n        throw new Error(`Notice with id ${notice.id} not found`);\n      }\n\n      const row = result.rows[0];\n      const updated: Notice = {\n        id: row.id,\n        title: row.title,\n        content: row.content,\n        priority: row.priority as \"high\" | \"medium\" | \"low\",\n        startDate: new Date(row.start_date),\n        endDate: new Date(row.end_date),\n        active: row.active,\n        createdAt: row.created_at ? new Date(row.created_at) : null,\n        updatedAt: row.updated_at ? new Date(row.updated_at) : null\n      };\n\n      console.log(`‚úÖ PostgreSQL: Aviso ${notice.id} atualizado`);\n      return updated;\n      \n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao atualizar aviso ${notice.id}:`, error);\n      throw error;\n    }\n  }\n\n  async deleteNotice(id: number): Promise<boolean> {\n    console.log(`üóëÔ∏è PostgreSQL: Deletando aviso ${id}`);\n    \n    try {\n      const result = await this.pool.query('DELETE FROM notices WHERE id = $1', [id]);\n      const deleted = (result.rowCount || 0) > 0;\n      \n      if (deleted) {\n        console.log(`‚úÖ PostgreSQL: Aviso ${id} deletado`);\n      } else {\n        console.log(`‚ö†Ô∏è PostgreSQL: Aviso ${id} n√£o encontrado`);\n      }\n      \n      return deleted;\n      \n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao deletar aviso ${id}:`, error);\n      return false;\n    }\n  }\n\n  // ===== DOCUMENTS =====\n  async getDocuments(): Promise<PDFDocument[]> {\n    try {\n      const result = await this.pool.query('SELECT * FROM documents ORDER BY upload_date DESC');\n      \n      return result.rows.map(row => ({\n        id: row.id,\n        title: row.title,\n        url: row.url,\n        type: row.type as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\",\n        category: row.category as \"oficial\" | \"praca\" | null,\n        active: row.active,\n        uploadDate: new Date(row.upload_date)\n      }));\n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao buscar documentos:', error);\n      return [];\n    }\n  }\n\n  async getDocument(id: number): Promise<PDFDocument | undefined> {\n    try {\n      const result = await this.pool.query('SELECT * FROM documents WHERE id = $1', [id]);\n      const row = result.rows[0];\n      \n      return row ? {\n        id: row.id,\n        title: row.title,\n        url: row.url,\n        type: row.type as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\",\n        category: row.category as \"oficial\" | \"praca\" | null,\n        active: row.active,\n        uploadDate: new Date(row.upload_date)\n      } : undefined;\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao buscar documento ${id}:`, error);\n      return undefined;\n    }\n  }\n\n  async createDocument(insertDocument: InsertDocument): Promise<PDFDocument> {\n    try {\n      const result = await this.pool.query(\n        `INSERT INTO documents (title, url, type, category, active) \n         VALUES ($1, $2, $3, $4, $5) \n         RETURNING *`,\n        [\n          insertDocument.title,\n          insertDocument.url,\n          insertDocument.type,\n          insertDocument.category,\n          insertDocument.active\n        ]\n      );\n\n      const row = result.rows[0];\n      return {\n        id: row.id,\n        title: row.title,\n        url: row.url,\n        type: row.type as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\",\n        category: row.category as \"oficial\" | \"praca\" | null,\n        active: row.active,\n        uploadDate: new Date(row.upload_date)\n      };\n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao criar documento:', error);\n      throw error;\n    }\n  }\n\n  async updateDocument(document: PDFDocument): Promise<PDFDocument> {\n    try {\n      const result = await this.pool.query(\n        `UPDATE documents \n         SET title = $1, url = $2, type = $3, category = $4, active = $5\n         WHERE id = $6 \n         RETURNING *`,\n        [\n          document.title,\n          document.url,\n          document.type,\n          document.category,\n          document.active,\n          document.id\n        ]\n      );\n\n      const row = result.rows[0];\n      return {\n        id: row.id,\n        title: row.title,\n        url: row.url,\n        type: row.type as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\",\n        category: row.category as \"oficial\" | \"praca\" | null,\n        active: row.active,\n        uploadDate: new Date(row.upload_date)\n      };\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao atualizar documento ${document.id}:`, error);\n      throw error;\n    }\n  }\n\n  async deleteDocument(id: number): Promise<boolean> {\n    try {\n      const result = await this.pool.query('DELETE FROM documents WHERE id = $1', [id]);\n      return (result.rowCount || 0) > 0;\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao deletar documento ${id}:`, error);\n      return false;\n    }\n  }\n\n  // ===== DUTY OFFICERS =====\n  async getDutyOfficers(): Promise<DutyOfficers | null> {\n    console.log('üëÆ PostgreSQL: Buscando oficiais de servi√ßo (sistema unificado)...');\n    \n    try {\n      // üî• NOVO SISTEMA: Buscar militares marcados como duty_role\n      const result = await this.pool.query(`\n        SELECT \n          id,\n          name,\n          rank,\n          specialty,\n          type,\n          duty_role,\n          updated_at\n        FROM military_personnel \n        WHERE duty_role IS NOT NULL\n        ORDER BY type DESC, rank ASC\n      `);\n      \n      if (result.rows.length === 0) {\n        console.log('üëÆ PostgreSQL: Nenhum oficial de servi√ßo encontrado');\n        return null;\n      }\n\n      const officer = result.rows.find(row => row.duty_role === 'officer');\n      const master = result.rows.find(row => row.duty_role === 'master');\n      \n      // Formatar nomes no padr√£o: \"1T (RM2-T) KARINE\"\n      const officerName = officer ? \n        `${officer.rank.toUpperCase()}${officer.specialty ? ` (${officer.specialty.toUpperCase()})` : ''} ${officer.name}` : '';\n      \n      const masterName = master ?\n        `${master.rank.toUpperCase()}${master.specialty ? ` (${master.specialty.toUpperCase()})` : ''} ${master.name}` : '';\n\n      console.log('üëÆ PostgreSQL: Oficiais encontrados (sistema unificado):', {\n        officerName,\n        masterName\n      });\n      \n      return {\n        id: 1, // ID fixo para compatibilidade\n        officerName,\n        masterName,\n        updatedAt: new Date()\n      };\n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao buscar oficiais de servi√ßo:', error);\n      return null;\n    }\n  }\n\n  async updateDutyOfficers(officers: InsertDutyOfficers): Promise<DutyOfficers> {\n    console.log('üìù PostgreSQL: Atualizando oficiais de servi√ßo (sistema unificado):', officers);\n    \n    try {\n      // üî• NOVO SISTEMA: Limpar duty_role de todos os militares\n      await this.pool.query('UPDATE military_personnel SET duty_role = NULL');\n      \n      // Extrair informa√ß√µes dos nomes formatados (ex: \"1T (RM2-T) KARINE\")\n      const parseOfficerName = (formattedName: string) => {\n        if (!formattedName) return null;\n        \n        // Regex para extrair: \"1T (RM2-T) KARINE\" -> rank: \"1T\", specialty: \"RM2-T\", name: \"KARINE\"\n        const match = formattedName.match(/^(\\w+)(?:\\s*\\(([^)]+)\\))?\\s+(.+)$/);\n        if (!match) return null;\n        \n        return {\n          rank: match[1].toLowerCase(),\n          specialty: match[2] || null,\n          name: match[3]\n        };\n      };\n      \n      let updatedOfficer = null;\n      let updatedMaster = null;\n      \n      // Processar oficial\n      if (officers.officerName) {\n        const officerInfo = parseOfficerName(officers.officerName);\n        if (officerInfo) {\n          // üî• MELHORADO: Buscar por nome parcial se n√£o encontrar exato\n          let result = await this.pool.query(\n            `UPDATE military_personnel \n             SET duty_role = 'officer' \n             WHERE UPPER(name) = UPPER($1) AND rank = $2 \n             RETURNING *`,\n            [officerInfo.name, officerInfo.rank]\n          );\n          \n          if (result.rows.length === 0) {\n            // Tentar busca por nome parcial (ex: \"ALEXANDRIA\" encontra \"ALEXANDRIA TESTE\")\n            console.log(`üîç Buscando oficial por nome parcial: ${officerInfo.name}`);\n            result = await this.pool.query(\n              `UPDATE military_personnel \n               SET duty_role = 'officer' \n               WHERE UPPER(name) LIKE '%' || UPPER($1) || '%' AND rank = $2 \n               RETURNING *`,\n              [officerInfo.name, officerInfo.rank]\n            );\n          }\n          \n          if (result.rows.length > 0) {\n            updatedOfficer = result.rows[0];\n            console.log(`‚úÖ Oficial definido: ${officerInfo.rank.toUpperCase()} ${updatedOfficer.name}`);\n          } else {\n            console.log(`‚ùå Oficial n√£o encontrado: ${officerInfo.rank.toUpperCase()} ${officerInfo.name}`);\n          }\n        }\n      }\n      \n      // Processar contramestre\n      if (officers.masterName) {\n        const masterInfo = parseOfficerName(officers.masterName);\n        if (masterInfo) {\n          // üî• MELHORADO: Buscar por nome parcial se n√£o encontrar exato\n          let result = await this.pool.query(\n            `UPDATE military_personnel \n             SET duty_role = 'master' \n             WHERE UPPER(name) = UPPER($1) AND rank = $2 \n             RETURNING *`,\n            [masterInfo.name, masterInfo.rank]\n          );\n          \n          if (result.rows.length === 0) {\n            // Tentar busca por nome parcial\n            console.log(`üîç Buscando contramestre por nome parcial: ${masterInfo.name}`);\n            result = await this.pool.query(\n              `UPDATE military_personnel \n               SET duty_role = 'master' \n               WHERE UPPER(name) LIKE '%' || UPPER($1) || '%' AND rank = $2 \n               RETURNING *`,\n              [masterInfo.name, masterInfo.rank]\n            );\n          }\n          \n          if (result.rows.length > 0) {\n            updatedMaster = result.rows[0];\n            console.log(`‚úÖ Contramestre definido: ${masterInfo.rank.toUpperCase()} ${updatedMaster.name}`);\n          } else {\n            console.log(`‚ùå Contramestre n√£o encontrado: ${masterInfo.rank.toUpperCase()} ${masterInfo.name}`);\n          }\n        }\n      }\n      \n      console.log('‚úÖ PostgreSQL: Sistema unificado atualizado com sucesso');\n      \n      return {\n        id: 1,\n        officerName: officers.officerName,\n        masterName: officers.masterName,\n        updatedAt: new Date()\n      };\n      \n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao atualizar oficiais de servi√ßo:', error);\n      throw error;\n    }\n  }\n\n  // ===== MILITARY PERSONNEL (implementa√ß√£o b√°sica) =====\nasync getMilitaryPersonnel(): Promise<MilitaryPersonnel[]> {\n    try {\n      console.log('üéñÔ∏è PostgreSQL: Buscando pessoal militar...');\n      const result = await this.pool.query('SELECT * FROM military_personnel WHERE active = true ORDER BY type, rank, name');\n      \n      const personnel = result.rows.map(row => ({\n        id: row.id,\n        name: row.name,\n        type: row.type as \"officer\" | \"master\",\n        rank: row.rank as \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\" | \"1sg\" | \"2sg\" | \"3sg\",\n        specialty: row.specialty || null,\n        fullRankName: row.full_rank_name,\n        active: row.active,\n        createdAt: new Date(row.created_at),\n        updatedAt: new Date(row.updated_at)\n      }));\n\n      console.log(`üéñÔ∏è PostgreSQL: ${personnel.length} militares encontrados`);\n      return personnel;\n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao buscar militares:', error);\n      return [];\n    }\n  }\n\n\n \n  async getMilitaryPersonnelByType(type: \"officer\" | \"master\"): Promise<MilitaryPersonnel[]> {\n    try {\n      console.log(`üéñÔ∏è PostgreSQL: Buscando ${type}s...`);\n      const result = await this.pool.query(\n        'SELECT * FROM military_personnel WHERE type = $1 AND active = true ORDER BY rank, name',\n        [type]\n      );\n      \n      const personnel = result.rows.map(row => ({\n        id: row.id,\n        name: row.name,\n        type: row.type as \"officer\" | \"master\",\n        rank: row.rank as \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\" | \"1sg\" | \"2sg\" | \"3sg\",\n        specialty: row.specialty || null,\n        fullRankName: row.full_rank_name,\n        active: row.active,\n        createdAt: new Date(row.created_at),\n        updatedAt: new Date(row.updated_at)\n      }));\n\n      console.log(`üéñÔ∏è PostgreSQL: ${personnel.length} ${type}s encontrados`);\n      return personnel;\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao buscar ${type}s:`, error);\n      return [];\n    }\n  }\n\n async createMilitaryPersonnel(personnel: InsertMilitaryPersonnel): Promise<MilitaryPersonnel> {\n    try {\n      console.log(`üéñÔ∏è PostgreSQL: Criando ${personnel.type}:`, personnel.name);\n      \n      const result = await this.pool.query(\n        `INSERT INTO military_personnel (name, type, rank, specialty, full_rank_name, active) \n         VALUES ($1, $2, $3, $4, $5, $6) \n         RETURNING *`,\n        [\n          personnel.name,\n          personnel.type,\n          personnel.rank,\n          personnel.specialty,\n          personnel.fullRankName,\n          personnel.active !== false\n        ]\n      );\n\n      const row = result.rows[0];\n      const created = {\n        id: row.id,\n        name: row.name,\n        type: row.type as \"officer\" | \"master\",\n        rank: row.rank as \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\" | \"1sg\" | \"2sg\" | \"3sg\",\n        specialty: row.specialty || null,\n        fullRankName: row.full_rank_name,\n        active: row.active,\n        createdAt: new Date(row.created_at),\n        updatedAt: new Date(row.updated_at)\n      };\n\n      console.log(`‚úÖ PostgreSQL: ${personnel.type} ${created.id} criado`);\n      return created;\n    } catch (error) {\n      console.error('‚ùå PostgreSQL: Erro ao criar militar:', error);\n      throw error;\n    }\n  }\n\n async updateMilitaryPersonnel(personnel: MilitaryPersonnel): Promise<MilitaryPersonnel> {\n    try {\n      console.log(`üéñÔ∏è PostgreSQL: Atualizando ${personnel.type} ${personnel.id}`);\n      \n      const result = await this.pool.query(\n        `UPDATE military_personnel \n         SET name = $1, type = $2, rank = $3, specialty = $4, full_rank_name = $5, active = $6, updated_at = NOW()\n         WHERE id = $7 \n         RETURNING *`,\n        [\n          personnel.name,\n          personnel.type,\n          personnel.rank,\n          personnel.specialty,\n          personnel.fullRankName,\n          personnel.active,\n          personnel.id\n        ]\n      );\n\n      if (result.rows.length === 0) {\n        throw new Error(`Military personnel with id ${personnel.id} not found`);\n      }\n\n      const row = result.rows[0];\n      const updated = {\n        id: row.id,\n        name: row.name,\n        type: row.type as \"officer\" | \"master\",\n        rank: row.rank as \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\" | \"1sg\" | \"2sg\" | \"3sg\",\n        specialty: row.specialty || null,\n        fullRankName: row.full_rank_name,\n        active: row.active,\n        createdAt: new Date(row.created_at),\n        updatedAt: new Date(row.updated_at)\n      };\n\n      console.log(`‚úÖ PostgreSQL: ${personnel.type} ${personnel.id} atualizado`);\n      return updated;\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao atualizar militar ${personnel.id}:`, error);\n      throw error;\n    }\n  }\n\n   async deleteMilitaryPersonnel(id: number): Promise<boolean> {\n    try {\n      console.log(`üéñÔ∏è PostgreSQL: Removendo militar ${id}`);\n      \n      // Soft delete - marcar como inativo em vez de deletar\n      const result = await this.pool.query(\n        'UPDATE military_personnel SET active = false, updated_at = NOW() WHERE id = $1',\n        [id]\n      );\n      \n      const deleted = (result.rowCount || 0) > 0;\n      \n      if (deleted) {\n        console.log(`‚úÖ PostgreSQL: Militar ${id} removido (soft delete)`);\n      } else {\n        console.log(`‚ö†Ô∏è PostgreSQL: Militar ${id} n√£o encontrado`);\n      }\n      \n      return deleted;\n    } catch (error) {\n      console.error(`‚ùå PostgreSQL: Erro ao remover militar ${id}:`, error);\n      return false;\n    }\n  }\n}","size_bytes":21788},"server/db.ts":{"content":"import { Pool } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ \n  connectionString: process.env.DATABASE_URL,\n  // Configura√ß√µes adicionais para PostgreSQL local\n  ssl: false, // Desabilita SSL para conex√µes locais\n  max: 20,    // M√°ximo de conex√µes no pool\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n});\n\nexport const db = drizzle(pool, { schema });\n","size_bytes":599},"server/index copy.ts":{"content":"/*\n * Sistema de Visualiza√ß√£o da Marinha do Brasil\n * Servidor Principal\n * \n * Autor: 2SG Bruna Rocha\n * Marinha do Brasil\n */\n\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\n// CORS configuration for local development with detailed logging\n// Enhanced CORS configuration for network access\napp.use((req, res, next) => {\n  const origin = req.get('Origin') || req.get('Referer') || 'unknown';\n  console.log(`üåê CORS Request: ${req.method} ${req.url} from ${origin}`);\n  \n  // Allow all origins for network access\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS, HEAD');\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Cache-Control, Pragma, Expires, If-Modified-Since, If-None-Match, Range');\n  res.header('Access-Control-Expose-Headers', 'Content-Length, Content-Range, Accept-Ranges, Content-Type, Cache-Control, Last-Modified, ETag');\n  res.header('Access-Control-Allow-Credentials', 'false');\n  res.header('Access-Control-Max-Age', '86400');\n  \n  if (req.method === 'OPTIONS') {\n    console.log(`‚úÖ CORS Preflight handled for ${req.url}`);\n    res.sendStatus(200);\n  } else {\n    next();\n  }\n});\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`üöÄ Server running on:`);\n    log(`   Local:    http://localhost:${port}`);\n    log(`   Network:  http://10.1.128.93:${port}`);\n    log(`   All IPs:  http://0.0.0.0:${port}`);\n    log(`üîó Admin panel: /admin`);\n    log(`üì° API status: /api/status`);\n  });\n})();\n","size_bytes":3349},"server/index.ts":{"content":"/*\n * Sistema de Visualiza√ß√£o da Marinha do Brasil\n * Servidor Principal - VERS√ÉO SUPER ABERTA (SEM RESTRI√á√ïES)\n */\nimport dotenv from 'dotenv';\ndotenv.config();\n\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nimport os from \"os\";\n\nconst app = express();\n\n// Fun√ß√£o para obter todos os IPs da m√°quina\nfunction getNetworkIPs(): string[] {\n  const interfaces = os.networkInterfaces();\n  const ips: string[] = [];\n  \n  Object.keys(interfaces).forEach((name) => {\n    const networkInterface = interfaces[name];\n    if (networkInterface) {\n      networkInterface.forEach((netInterface) => {\n        if (netInterface.family === 'IPv4' && !netInterface.internal) {\n          ips.push(netInterface.address);\n        }\n      });\n    }\n  });\n  \n  return ips;\n}\n\n// CORS SUPER PERMISSIVO - PERMITE TUDO\napp.use((req, res, next) => {\n  const origin = req.get('Origin') || req.get('Referer') || 'unknown';\n  const clientIP = req.ip || req.connection.remoteAddress || req.headers['x-forwarded-for'];\n  \n  console.log(`üåê ACESSO: ${req.method} ${req.url} | Cliente: ${clientIP} | Origem: ${origin}`);\n  \n  // HEADERS SUPER PERMISSIVOS - PERMITE TUDO DE TODOS OS LUGARES\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Access-Control-Allow-Methods', '*');\n  res.header('Access-Control-Allow-Headers', '*');\n  res.header('Access-Control-Expose-Headers', '*');\n  res.header('Access-Control-Allow-Credentials', 'true');\n  res.header('Access-Control-Max-Age', '86400');\n  \n  // Headers de seguran√ßa permissivos\n  res.header('Cross-Origin-Resource-Policy', 'cross-origin');\n  res.header('Cross-Origin-Embedder-Policy', 'unsafe-none');\n  res.header('Cross-Origin-Opener-Policy', 'unsafe-none');\n  res.header('X-Frame-Options', 'ALLOWALL');\n  res.header('Content-Security-Policy', ''); // Remover CSP\n  \n  // Headers para cache\n  res.header('Cache-Control', 'public, max-age=0');\n  res.header('Pragma', 'no-cache');\n  res.header('Expires', '0');\n  \n  if (req.method === 'OPTIONS') {\n    console.log(`‚úÖ CORS Preflight ACEITO: ${req.url} | Cliente: ${clientIP}`);\n    res.sendStatus(200);\n  } else {\n    next();\n  }\n});\n\napp.use(express.json({ limit: '100mb' }));\napp.use(express.urlencoded({ extended: true, limit: '100mb' }));\n\n// Middleware de logging\napp.use((req, res, next) => {\n  const start = Date.now();\n  const clientIP = req.ip || req.connection.remoteAddress || req.headers['x-forwarded-for'];\n  \n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    const status = res.statusCode >= 400 ? '‚ùå' : '‚úÖ';\n    console.log(`${status} ${req.method} ${req.path} ${res.statusCode} em ${duration}ms | Cliente: ${clientIP}`);\n  });\n\n  next();\n});\n\n// Middleware para desabilitar cache completamente\napp.use((req, res, next) => {\n  res.set({\n    'Cache-Control': 'no-cache, no-store, must-revalidate',\n    'Pragma': 'no-cache',\n    'Expires': '0'\n  });\n  next();\n});\n\n(async () => {\n  try {\n    const server = await registerRoutes(app);\n\n    app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n      const status = err.status || err.statusCode || 500;\n      const message = err.message || \"Internal Server Error\";\n      \n      console.log(`‚ùå ERRO: ${status} - ${message}`);\n      res.status(status).json({ message });\n    });\n\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  const port = 5000;\n  const networkIPs = getNetworkIPs();\n  \n  // ESCUTAR EM TODAS AS INTERFACES POSS√çVEIS\n  server.listen({\n    port,\n    host: \"0.0.0.0\", // TODAS as interfaces\n    reusePort: true,\n    backlog: 511 // M√°ximo de conex√µes pendentes\n  }, () => {\n    console.log('\\nüîì ========================================');\n    console.log('   MARINHA DO BRASIL - SERVIDOR ABERTO');\n    console.log('   üö® MODO SEM RESTRI√á√ïES ATIVO üö®');\n    console.log('========================================');\n    console.log(`üì° Servidor rodando na porta ${port}`);\n    console.log('üîì CORS: COMPLETAMENTE ABERTO');\n    console.log('üîì Firewall: DESABILITADO');\n    console.log('üîì Cache: DESABILITADO');\n    console.log('\\nüåê ACESSE DE QUALQUER LUGAR:');\n    console.log(`   Local:      http://localhost:${port}`);\n    console.log(`   Local IP:   http://127.0.0.1:${port}`);\n    \n    networkIPs.forEach(ip => {\n      console.log(`   Rede:       http://${ip}:${port}`);\n      console.log(`   Admin:      http://${ip}:${port}/admin`);\n    });\n    \n    console.log('\\nüì± TESTE EM QUALQUER DISPOSITIVO:');\n    console.log('   ‚Ä¢ Computadores na rede');\n    console.log('   ‚Ä¢ Celulares no WiFi');\n    console.log('   ‚Ä¢ Tablets');\n    console.log('   ‚Ä¢ Qualquer navegador');\n    \n    console.log('\\nüîß URLs DE TESTE:');\n    networkIPs.forEach(ip => {\n      console.log(`   http://${ip}:${port}/ping`);\n    });\n      \n    console.log('\\n‚ö†Ô∏è  AVISO: Modo de desenvolvimento');\n    console.log('   Todas as restri√ß√µes foram removidas');\n    console.log('   Use apenas em redes confi√°veis');\n    console.log('========================================\\n');\n\n    // Sistema BONO autom√°tico removido por problemas de renderiza√ß√£o\n    console.log('üöÄ Sistema iniciado com sucesso');\n  });\n  } catch (error) {\n    console.error('‚ùå Erro:', error);\n  }\n})();","size_bytes":5397},"server/routes.ts":{"content":"import express, { type Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertNoticeSchema, insertDocumentSchema, insertDutyOfficersSchema, insertMilitaryPersonnelSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { promisify } from \"util\";\n\n// üî• NOVO: Sistema de classifica√ß√£o inteligente de documentos\ninterface DocumentClassification {\n  type: 'plasa' | 'bono' | 'escala' | 'cardapio';\n  category?: 'oficial' | 'praca';\n  unit?: 'EAGM' | '1DN';\n  tags: string[];\n}\n\n// Cache para classifica√ß√µes (otimiza√ß√£o em runtime)\nconst classificationCache = new Map<string, DocumentClassification>();\n\n// Fun√ß√£o para extrair o nome original do arquivo salvo\nfunction getOriginalFromSaved(savedFilename: string): string {\n  // Formato: document-timestamp-random-originalname\n  const parts = savedFilename.split('-');\n  if (parts.length >= 4 && parts[0] === 'document') {\n    return parts.slice(3).join('-');\n  }\n  return savedFilename;\n}\n\n// Fun√ß√£o para normalizar strings (remover acentos, mai√∫sculas)\nfunction normalizeString(str: string): string {\n  return str\n    .toUpperCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '') // Remove diacr√≠ticos\n    .replace(/[^A-Z0-9\\s]/g, ' ') // Remove caracteres especiais\n    .replace(/\\s+/g, ' ') // Normaliza espa√ßos\n    .trim();\n}\n\n// Fun√ß√£o principal para extrair classifica√ß√£o\nfunction extractClassification(originalName: string, title?: string, bodyType?: string): DocumentClassification {\n  // ‚úÖ CORRE√á√ÉO: Se tipo manual √© fornecido, SEMPRE use-o (n√£o cache)\n  if (bodyType && ['plasa', 'bono', 'escala', 'cardapio'].includes(bodyType)) {\n    console.log(`‚úÖ TIPO MANUAL fornecido: ${bodyType} - pulando cache`);\n    // N√£o usar cache quando temos sele√ß√£o manual\n  } else {\n    // Cache baseado apenas no nome original para garantir consist√™ncia\n    const cacheKey = normalizeString(originalName);\n    \n    // Verificar cache apenas quando N√ÉO h√° tipo manual\n    if (classificationCache.has(cacheKey)) {\n      console.log(`üì¶ Usando classifica√ß√£o do cache para: ${originalName}`);\n      return classificationCache.get(cacheKey)!;\n    }\n  }\n\n  // ESTRAT√âGIA DE CLASSIFICA√á√ÉO ROBUSTA:\n  // 1. Se bodyType √© fornecido (upload), use-o como definitivo\n  // 2. Sen√£o, analise o nome original do arquivo (sempre dispon√≠vel)\n  // 3. Use t√≠tulo apenas como informa√ß√£o complementar\n  \n  const normalizedName = normalizeString(originalName);\n  const normalizedTitle = title ? normalizeString(title) : '';\n  \n  // Use nome original como base principal da an√°lise\n  const primaryText = normalizedName;\n  const secondaryText = normalizedTitle;\n  const fullText = `${primaryText} ${secondaryText}`.trim();\n\n  console.log(`üîç Classificando documento: \"${originalName}\" -> \"${fullText}\"`);\n\n  // ‚úÖ CLASSIFICA√á√ÉO MANUAL: Priorizar SEMPRE o tipo selecionado no combobox\n  let type: DocumentClassification['type'];\n  \n  if (bodyType && ['plasa', 'bono', 'escala', 'cardapio'].includes(bodyType)) {\n    // ‚úÖ TIPO MANUAL: Usar exatamente o que foi selecionado no combobox\n    type = bodyType as DocumentClassification['type'];\n    console.log(`‚úÖ Usando tipo MANUAL selecionado: ${bodyType}`);\n  } else {\n    // ‚ö†Ô∏è FALLBACK: S√≥ quando n√£o h√° sele√ß√£o manual (arquivos antigos)\n    console.log(`‚ö†Ô∏è Tipo n√£o fornecido, tentando detectar automaticamente...`);\n    type = 'escala'; // default fallback\n    if (primaryText.includes('PLASA')) {\n      type = 'plasa';\n    } else if (primaryText.includes('BONO')) {\n      type = 'bono';\n    } else if (primaryText.includes('CARDAPIO') || primaryText.includes('CARD')) {\n      type = 'cardapio';\n    } else if (primaryText.includes('ESCALA')) {\n      type = 'escala';\n    }\n  }\n\n  // Detectar categoria para escala (OFICIAIS/PRA√áAS) - use texto completo\n  let category: DocumentClassification['category'] | undefined;\n  if (type === 'escala') {\n    if (fullText.includes('OFICIA') || fullText.includes('OFICIAL') || fullText.includes(' OF ')) {\n      category = 'oficial';\n    } else if (fullText.includes('PRACA') || fullText.includes('PRAC') || fullText.includes('PRC')) {\n      category = 'praca';\n    }\n  }\n\n  // Detectar unidade - SEMPRE analise o nome original primeiro (mais confi√°vel)\n  let unit: DocumentClassification['unit'] | undefined;\n  if (type === 'cardapio') {\n    // Prioridade 1: Nome original do arquivo\n    if (primaryText.includes('1DN') || primaryText.includes('DN 1') || primaryText.includes('DN-1')) {\n      unit = '1DN';\n    } else if (primaryText.includes('EAGM') || primaryText.includes('EAGS')) {\n      unit = 'EAGM';\n    }\n    // Prioridade 2: T√≠tulo (se dispon√≠vel e unidade n√£o foi encontrada)\n    else if (secondaryText && !unit) {\n      if (secondaryText.includes('1DN') || secondaryText.includes('DN 1') || secondaryText.includes('DN-1')) {\n        unit = '1DN';\n      } else if (secondaryText.includes('EAGM') || secondaryText.includes('EAGS')) {\n        unit = 'EAGM';\n      }\n    }\n  }\n\n  // Extrair todas as tags importantes - SEMPRE use nome original como base\n  const tags: string[] = [];\n  \n  // Tags espec√≠ficas por tipo\n  if (type === 'escala') {\n    if (category === 'oficial') tags.push('OFICIAIS');\n    if (category === 'praca') tags.push('PRA√áAS');\n  }\n  \n  if (type === 'cardapio') {\n    if (unit === '1DN') tags.push('1DN');\n    if (unit === 'EAGM') tags.push('EAGM');\n  }\n\n  // Tags gerais - SEMPRE analise o nome original\n  if (primaryText.includes('PLASA')) tags.push('PLASA');\n  if (primaryText.includes('BONO')) tags.push('BONO');\n  if (primaryText.includes('ESCALA')) tags.push('ESCALA');\n  if (primaryText.includes('CARDAPIO') || primaryText.includes('CARD')) tags.push('CARD√ÅPIO');\n\n  const classification: DocumentClassification = {\n    type,\n    category,\n    unit,\n    tags\n  };\n\n  console.log(`‚úÖ Classifica√ß√£o detectada:`, classification);\n\n  // ‚úÖ CACHE SEGURO: S√≥ salvar no cache quando N√ÉO h√° tipo manual\n  if (!bodyType) {\n    const normalizedKey = normalizeString(originalName);\n    classificationCache.set(normalizedKey, classification);\n    console.log(`üíæ Cache autom√°tico salvo para: ${originalName}`);\n  } else {\n    console.log(`‚ö†Ô∏è Tipo manual (${bodyType}) - n√£o salvando no cache autom√°tico`);\n  }\n  \n  return classification;\n}\n\n\n// Promisify fs functions for async/await\nconst writeFile = promisify(fs.writeFile);\nconst readFile = promisify(fs.readFile);\nconst mkdir = promisify(fs.mkdir);\nconst readdir = promisify(fs.readdir);\nconst unlink = promisify(fs.unlink);\nconst access = promisify(fs.access);\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Create uploads directory if it doesn't exist\n  const uploadsDir = path.join(process.cwd(), 'uploads');\n  if (!fs.existsSync(uploadsDir)) {\n    fs.mkdirSync(uploadsDir, { recursive: true });\n  }\n\n  // üî• NOVO: Criar diret√≥rios de cache e organiza√ß√£o\n  const plasaPagesDir = path.join(uploadsDir, 'plasa-pages');\n  const escalaCacheDir = path.join(uploadsDir, 'escala-cache');\n  const cardapioCacheDir = path.join(uploadsDir, 'cardapio-cache');\n  \n  // üìÅ ORGANIZA√á√ÉO: Criar subpastas para documentos por tipo\n  const plasaDir = path.join(uploadsDir, 'plasa');\n  const escalaDir = path.join(uploadsDir, 'escala');\n  const cardapioDir = path.join(uploadsDir, 'cardapio');\n  const outrosDir = path.join(uploadsDir, 'outros');\n  \n  [plasaPagesDir, escalaCacheDir, cardapioCacheDir, plasaDir, escalaDir, cardapioDir, outrosDir].forEach(dir => {\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n      console.log(`üìÅ Diret√≥rio criado: ${dir}`);\n    }\n  });\n\n  // Multer configuration for file uploads\n  const storage_config = multer.diskStorage({\n    destination: (req, file, cb) => {\n      // üîß CORRE√á√ÉO: Usar uploads tempor√°rio (body ainda n√£o processado aqui)\n      cb(null, uploadsDir);\n    },\n    filename: (req, file, cb) => {\n      const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n      \n      // üîí SEGURAN√áA: Mapear mimetype para extens√£o segura (previne XSS)\n      const safeExt = (() => {\n        switch(file.mimetype) {\n          case 'application/pdf': return '.pdf';\n          case 'image/jpeg': return '.jpg';\n          case 'image/png': return '.png';\n          case 'image/gif': return '.gif';\n          case 'image/webp': return '.webp';\n          default: return '.bin'; // Extens√£o segura para outros tipos\n        }\n      })();\n      \n      // Base name sanitizado (sem extens√£o)\n      const safeBaseName = file.originalname\n        .replace(/\\.[^/.]+$/, '') // Remove extens√£o original\n        .replace(/[^a-zA-Z0-9._-]/g, '_') // Remove caracteres perigosos\n        .substring(0, 50); // Limita tamanho\n      \n      cb(null, 'document-' + uniqueSuffix + '-' + safeBaseName + safeExt);\n    }\n  });\n\n  const upload = multer({\n    storage: storage_config,\n    limits: {\n      fileSize: 50 * 1024 * 1024, // 50MB limit\n    },\n    fileFilter: (req, file, cb) => {\n      const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png', 'image/jpg'];\n      if (allowedTypes.includes(file.mimetype)) {\n        cb(null, true);\n      } else {\n        cb(new Error('INVALID_FILE: Only PDF and image files are allowed'));\n      }\n    }\n  });\n\n  // üî• NOVO: Multer para cache (mem√≥ria)\n  const cacheUpload = multer({\n    storage: multer.memoryStorage(),\n    limits: {\n      fileSize: 10 * 1024 * 1024, // 10MB limit para imagens de cache\n    },\n    fileFilter: (req, file, cb) => {\n      const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg'];\n      if (allowedTypes.includes(file.mimetype)) {\n        cb(null, true);\n      } else {\n        cb(new Error('INVALID_CACHE_FILE: Only image files are allowed for cache'));\n      }\n    }\n  });\n\n  // File upload route\n  app.post('/api/upload-pdf', upload.single('pdf'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ \n          success: false, \n          error: 'MISSING_FILE: No file uploaded' \n        });\n      }\n\n      const { title, type, category } = req.body;\n      \n      if (!title || !type) {\n        return res.status(400).json({ \n          success: false, \n          error: 'MISSING_FIELDS: Title and type are required' \n        });\n      }\n\n      // ‚úÖ VALIDA√á√ÉO: Tipos obrigat√≥rios (agora que body foi processado)\n      const typeToDir = {\n        'plasa': plasaDir,\n        'escala': escalaDir,\n        'cardapio': cardapioDir\n      };\n      \n      if (!(type in typeToDir)) {\n        const validTypes = Object.keys(typeToDir).join(', ');\n        console.error(`‚ùå HANDLER: Tipo inv√°lido \"${type}\". Tipos v√°lidos: ${validTypes}`);\n        \n        // Limpar arquivo tempor√°rio\n        if (req.file.path && fs.existsSync(req.file.path)) {\n          fs.unlinkSync(req.file.path);\n        }\n        \n        return res.status(400).json({\n          success: false,\n          error: `INVALID_TYPE: Tipo deve ser um de: ${validTypes}`\n        });\n      }\n\n      // üîÑ MOVER ARQUIVO: Do uploads tempor√°rio para pasta correta\n      const tempFilePath = req.file.path;\n      const targetDir = typeToDir[type as keyof typeof typeToDir];\n      const targetFilePath = path.join(targetDir, req.file.filename);\n      \n      // Mover arquivo para pasta correta\n      fs.renameSync(tempFilePath, targetFilePath);\n      \n      console.log(`üìÅ Arquivo movido: ${path.basename(tempFilePath)} ‚Üí ${path.basename(targetDir)}/`);\n      \n      // üìÅ ORGANIZA√á√ÉO: Criar URL correto com subpasta\n      const relativePath = path.relative(path.join(process.cwd(), 'uploads'), targetFilePath);\n      const fileUrl = `/uploads/${relativePath.replace(/\\\\/g, '/')}`;\n      \n      // üî• NOVO: Aplicar classifica√ß√£o inteligente\n      const classification = extractClassification(req.file.originalname, title, type);\n      \n      console.log(`üìÑ Upload processado: ${req.file.originalname}`);\n      console.log(`üîó URL gerada: ${fileUrl}`);\n      console.log(`üè∑Ô∏è Classifica√ß√£o aplicada:`, classification);\n      \n      // ‚úÖ CLASSIFICA√á√ÉO CONCLU√çDA: Tipo manual sempre respeitado\n      console.log(`‚úÖ Upload processado com tipo MANUAL: ${type}`);\n      \n      res.json({\n        success: true,\n        data: {\n          filename: req.file.filename,\n          originalname: req.file.originalname,\n          size: req.file.size,\n          url: fileUrl,\n          title: title,\n          type: classification.type, // Usar classifica√ß√£o detectada\n          category: classification.category || category,\n          unit: classification.unit,\n          tags: classification.tags,\n          classification: classification // Incluir classifica√ß√£o completa\n        }\n      });\n    } catch (error) {\n      console.error('Upload error:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'SERVER_ERROR: Failed to process upload' \n      });\n    }\n  });\n\n  // üî• NOVO: 1. ENDPOINT - Upload de p√°gina do PLASA\n  app.post('/api/upload-plasa-page', cacheUpload.single('file'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ \n          success: false, \n          error: 'Nenhum arquivo enviado' \n        });\n      }\n\n      const pageNumber = req.body.pageNumber;\n      const rawDocumentId = req.body.documentId || 'default';\n      \n      // üîí SEGURAN√áA: Sanitizar documentId para prevenir path traversal\n      const documentId = rawDocumentId.replace(/[^a-zA-Z0-9_-]/g, '').substring(0, 50);\n      if (!documentId || !pageNumber || !/^\\d+$/.test(pageNumber)) {\n        return res.status(400).json({\n          success: false,\n          error: 'documentId ou pageNumber inv√°lidos'\n        });\n      }\n      \n      // Criar nome do arquivo baseado no documento e p√°gina\n      const filename = `${documentId}-page-${pageNumber}.jpg`;\n      const filePath = path.join(plasaPagesDir, filename);\n      const fileUrl = `/uploads/plasa-pages/${filename}`;\n\n      // Salvar arquivo\n      await writeFile(filePath, req.file.buffer);\n\n      console.log(`üíæ P√°gina PLASA ${pageNumber} salva: ${filename}`);\n\n      res.json({\n        success: true,\n        data: {\n          url: fileUrl,\n          filename: filename,\n          pageNumber: parseInt(pageNumber),\n          documentId: documentId\n        }\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao salvar p√°gina PLASA:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao salvar p√°gina no servidor' \n      });\n    }\n  });\n\n  // üî• NOVO: 2. ENDPOINT - Verificar p√°ginas existentes do PLASA\n  app.post('/api/check-plasa-pages', async (req, res) => {\n    try {\n      const { totalPages, documentId } = req.body;\n      \n      if (!totalPages || !documentId) {\n        return res.status(400).json({\n          success: false,\n          error: 'totalPages e documentId s√£o obrigat√≥rios'\n        });\n      }\n      \n      // üîí SEGURAN√áA: Sanitizar documentId para prevenir path traversal\n      if (!/^[a-zA-Z0-9_-]+$/.test(documentId) || documentId.length > 100) {\n        return res.status(400).json({\n          success: false,\n          error: 'documentId inv√°lido'\n        });\n      }\n\n      // Verificar se todas as p√°ginas existem\n      const pageUrls = [];\n      let allExist = true;\n\n      for (let i = 1; i <= totalPages; i++) {\n        const filename = `${documentId}-page-${i}.jpg`;\n        const filePath = path.join(plasaPagesDir, filename);\n        \n        try {\n          await access(filePath);\n          pageUrls.push(`/uploads/plasa-pages/${filename}`);\n        } catch {\n          allExist = false;\n          break;\n        }\n      }\n\n      console.log(`üîç Verifica√ß√£o PLASA ${documentId}: ${allExist ? 'todas' : 'algumas'} p√°ginas existem`);\n\n      res.json({\n        success: true,\n        allPagesExist: allExist,\n        pageUrls: allExist ? pageUrls : [],\n        totalPages: allExist ? totalPages : 0,\n        documentId: documentId\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao verificar p√°ginas PLASA:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao verificar p√°ginas' \n      });\n    }\n  });\n\n  // üî• NOVO: 3. ENDPOINT - Salvar cache de escala\n  app.post('/api/save-escala-cache', async (req, res) => {\n    try {\n      const { escalId: rawEscalId, imageData } = req.body;\n      \n      // üîí SEGURAN√áA: Sanitizar escalId para prevenir path traversal\n      const escalId = rawEscalId ? rawEscalId.replace(/[^a-zA-Z0-9_-]/g, '').substring(0, 50) : '';\n      \n      if (!escalId || !imageData) {\n        return res.status(400).json({\n          success: false,\n          error: 'escalId e imageData s√£o obrigat√≥rios'\n        });\n      }\n\n      // Converter base64 para arquivo\n      const base64Data = imageData.replace(/^data:image\\/\\w+;base64,/, '');\n      const buffer = Buffer.from(base64Data, 'base64');\n      \n      const filename = `${escalId}.jpg`;\n      const filePath = path.join(escalaCacheDir, filename);\n      const fileUrl = `/uploads/escala-cache/${filename}`;\n\n      await writeFile(filePath, buffer);\n\n      console.log(`üíæ Cache de escala salvo: ${filename}`);\n\n      res.json({\n        success: true,\n        data: {\n          url: fileUrl,\n          filename: filename,\n          escalId: escalId\n        }\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao salvar cache de escala:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao salvar cache de escala' \n      });\n    }\n  });\n\n  // üî• NOVO: 4. ENDPOINT - Verificar cache de escala\n  app.get('/api/check-escala-cache/:escalId', async (req, res) => {\n    try {\n      const { escalId } = req.params;\n      \n      // üîí SEGURAN√áA: Sanitizar escalId para prevenir path traversal\n      if (!escalId || !/^[a-zA-Z0-9_-]+$/.test(escalId) || escalId.length > 100) {\n        return res.status(400).json({\n          success: false,\n          error: 'escalId inv√°lido'\n        });\n      }\n      \n      const filename = `${escalId}.jpg`;\n      const filePath = path.join(escalaCacheDir, filename);\n      const fileUrl = `/uploads/escala-cache/${filename}`;\n\n      try {\n        await access(filePath);\n        \n        console.log(`‚úÖ Cache de escala encontrado: ${filename}`);\n        \n        res.json({\n          success: true,\n          cached: true,\n          url: fileUrl,\n          escalId: escalId\n        });\n      } catch {\n        res.json({\n          success: true,\n          cached: false,\n          escalId: escalId\n        });\n      }\n\n    } catch (error) {\n      console.error('‚ùå Erro ao verificar cache de escala:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao verificar cache' \n      });\n    }\n  });\n\n  // üî• NOVO: 5. ENDPOINT - Limpar cache do PLASA\n  app.delete('/api/clear-plasa-pages', async (req, res) => {\n    try {\n      let deletedCount = 0;\n      \n      try {\n        const files = await readdir(plasaPagesDir);\n        \n        for (const file of files) {\n          if (file.endsWith('.jpg')) {\n            const filePath = path.join(plasaPagesDir, file);\n            await unlink(filePath);\n            deletedCount++;\n          }\n        }\n      } catch (err) {\n        // Diret√≥rio n√£o existe ou est√° vazio\n      }\n\n      console.log(`üßπ Cache PLASA limpo: ${deletedCount} arquivos removidos`);\n\n      res.json({\n        success: true,\n        deletedCount: deletedCount,\n        message: `${deletedCount} p√°ginas PLASA removidas do cache`\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao limpar cache PLASA:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao limpar cache' \n      });\n    }\n  });\n\n  // üî• NOVO: 6. ENDPOINT - Limpar cache de escalas\n  app.delete('/api/clear-escala-cache', async (req, res) => {\n    try {\n      let deletedCount = 0;\n      \n      try {\n        const files = await readdir(escalaCacheDir);\n        \n        for (const file of files) {\n          if (file.endsWith('.jpg')) {\n            const filePath = path.join(escalaCacheDir, file);\n            await unlink(filePath);\n            deletedCount++;\n          }\n        }\n      } catch (err) {\n        // Diret√≥rio n√£o existe ou est√° vazio\n      }\n\n      console.log(`üßπ Cache de escalas limpo: ${deletedCount} arquivos removidos`);\n\n      res.json({\n        success: true,\n        deletedCount: deletedCount,\n        message: `${deletedCount} caches de escala removidos`\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao limpar cache de escalas:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao limpar cache de escalas' \n      });\n    }\n  });\n\n  // üî• NOVO: 7. ENDPOINT - Status do cache\n  app.get('/api/cache-status', async (req, res) => {\n    try {\n      let plasaCount = 0;\n      let escalaCount = 0;\n\n      // Contar arquivos PLASA\n      try {\n        const plasaFiles = await readdir(plasaPagesDir);\n        plasaCount = plasaFiles.filter(f => f.endsWith('.jpg')).length;\n      } catch {\n        // Diret√≥rio n√£o existe\n      }\n\n      // Contar arquivos de escala\n      try {\n        const escalaFiles = await readdir(escalaCacheDir);\n        escalaCount = escalaFiles.filter(f => f.endsWith('.jpg')).length;\n      } catch {\n        // Diret√≥rio n√£o existe\n      }\n\n      res.json({\n        success: true,\n        cache: {\n          plasa: {\n            count: plasaCount,\n            directory: '/uploads/plasa-pages/'\n          },\n          escala: {\n            count: escalaCount,\n            directory: '/uploads/escala-cache/'\n          },\n          total: plasaCount + escalaCount\n        },\n        timestamp: new Date().toISOString()\n      });\n\n    } catch (error) {\n      console.error('‚ùå Erro ao verificar status do cache:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Erro ao verificar status do cache' \n      });\n    }\n  });\n\n  // Serve uploaded files with comprehensive CORS headers\n  app.use('/uploads', (req, res, next) => {\n    console.log(`üìÅ Serving file: ${req.path} to ${req.get('Origin') || 'direct'}`);\n    \n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Methods', 'GET, HEAD, OPTIONS');\n    res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization, Cache-Control, Pragma, Expires, If-Modified-Since, If-None-Match, Range');\n    res.header('Access-Control-Expose-Headers', 'Content-Length, Content-Range, Accept-Ranges, Content-Type, Cache-Control, Last-Modified, ETag, Accept-Ranges');\n    res.header('Cache-Control', 'public, max-age=31536000');\n    res.header('Access-Control-Max-Age', '86400');\n    \n    if (req.method === 'OPTIONS') {\n      console.log(`‚úÖ CORS Preflight for file: ${req.path}`);\n      res.sendStatus(200);\n    } else {\n      next();\n    }\n  });\n\n  // üìÅ MIDDLEWARE: Buscar arquivos nas subpastas se n√£o encontrados na raiz\n  app.use('/uploads', (req, res, next) => {\n    const filePath = req.url.slice(1); // Remove leading slash\n    const rootFilePath = path.join(process.cwd(), 'uploads', filePath);\n\n    // Se arquivo existe na raiz, servir normalmente\n    if (fs.existsSync(rootFilePath)) {\n      return next();\n    }\n\n    // Se arquivo n√£o existe na raiz, buscar nas subpastas\n    const subfolders = ['plasa', 'escala', 'cardapio', 'outros'];\n    for (const subfolder of subfolders) {\n      const subfolderFilePath = path.join(process.cwd(), 'uploads', subfolder, filePath);\n      if (fs.existsSync(subfolderFilePath)) {\n        console.log(`üìÅ Redirecionando \"${filePath}\" de raiz para \"${subfolder}/\"`);\n        return res.redirect(301, `/uploads/${subfolder}/${filePath}`);\n      }\n    }\n\n    // Se n√£o encontrado em lugar nenhum, continuar (ser√° 404)\n    next();\n  });\n\n  app.use('/uploads', express.static(path.join(process.cwd(), 'uploads'), {\n    setHeaders: (res, filePath) => {\n      console.log(`üìÑ Setting headers for: ${path.basename(filePath)}`);\n      res.set('Cross-Origin-Resource-Policy', 'cross-origin');\n      res.set('Cross-Origin-Embedder-Policy', 'unsafe-none');\n    }\n  }));\n\n  /// ‚úÖ CORRE√á√ÉO: Notice routes com melhor tratamento de erro\n  app.get('/api/notices', async (req, res) => {\n    try {\n      console.log('üì¢ GET /api/notices - Buscando avisos...');\n      const notices = await storage.getNotices();\n      console.log(`üì¢ Encontrados ${notices.length} avisos`);\n      \n      res.json({ \n        success: true, \n        notices: notices,\n        count: notices.length,\n        timestamp: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error('‚ùå Erro ao buscar avisos:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Failed to fetch notices',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n // ‚úÖ CORRE√á√ÉO: POST notices com valida√ß√£o melhorada\n  app.post('/api/notices', async (req, res) => {\n    try {\n      console.log('üì¢ POST /api/notices - Dados recebidos:', req.body);\n      \n      // ‚úÖ Valida√ß√£o manual dos campos obrigat√≥rios primeiro\n      const { title, content, priority, startDate, endDate, active } = req.body;\n      \n      if (!title || typeof title !== 'string' || title.trim() === '') {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Title is required and must be a non-empty string',\n          field: 'title',\n          received: title\n        });\n      }\n      \n      if (!content || typeof content !== 'string' || content.trim() === '') {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Content is required and must be a non-empty string',\n          field: 'content',\n          received: content\n        });\n      }\n      \n      if (!priority || !['high', 'medium', 'low'].includes(priority)) {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Priority must be high, medium, or low',\n          field: 'priority',\n          received: priority\n        });\n      }\n      \n      // ‚úÖ Valida√ß√£o de datas melhorada\n      let parsedStartDate: Date;\n      let parsedEndDate: Date;\n      \n      try {\n        parsedStartDate = new Date(startDate);\n        if (isNaN(parsedStartDate.getTime())) {\n          throw new Error('Invalid start date');\n        }\n      } catch (error) {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Invalid start date format',\n          field: 'startDate',\n          received: startDate\n        });\n      }\n      \n      try {\n        parsedEndDate = new Date(endDate);\n        if (isNaN(parsedEndDate.getTime())) {\n          throw new Error('Invalid end date');\n        }\n      } catch (error) {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Invalid end date format',\n          field: 'endDate',\n          received: endDate\n        });\n      }\n      \n      // ‚úÖ Verificar se a data de in√≠cio √© anterior √† data de fim\n      if (parsedStartDate >= parsedEndDate) {\n        return res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Start date must be before end date',\n          startDate: parsedStartDate.toISOString(),\n          endDate: parsedEndDate.toISOString()\n        });\n      }\n      \n      // ‚úÖ Criar objeto validado manualmente\n      const validatedData = {\n        title: title.trim(),\n        content: content.trim(),\n        priority: priority as \"high\" | \"medium\" | \"low\",\n        startDate: parsedStartDate,\n        endDate: parsedEndDate,\n        active: active !== false // Default para true se n√£o especificado\n      };\n      \n      console.log('üì¢ Dados validados:', validatedData);\n      \n      // ‚úÖ Tentar criar o aviso\n      const notice = await storage.createNotice(validatedData);\n      console.log('‚úÖ Aviso criado com sucesso:', notice);\n      \n      res.json({ \n        success: true, \n        notice: notice,\n        message: 'Notice created successfully'\n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao criar aviso:', error);\n      \n      if (error instanceof z.ZodError) {\n        console.error('‚ùå Erro de valida√ß√£o Zod:', error.errors);\n        res.status(400).json({ \n          success: false, \n          error: 'VALIDATION_ERROR: Invalid data format', \n          details: error.errors,\n          zodError: true\n        });\n      } else {\n        res.status(500).json({ \n          success: false, \n          error: 'SERVER_ERROR: Failed to create notice',\n          details: error instanceof Error ? error.message : 'Unknown error'\n        });\n      }\n    }\n  });\n\n// ‚úÖ CORRE√á√ÉO: PUT notices com valida√ß√£o\n  app.put('/api/notices/:id', async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      console.log(`üìù PUT /api/notices/${id} - Atualizando aviso...`);\n      \n      if (isNaN(id)) {\n        return res.status(400).json({ \n          success: false,\n          error: 'VALIDATION_ERROR: Invalid notice ID',\n          receivedId: req.params.id\n        });\n      }\n      \n      const existingNotice = await storage.getNotice(id);\n      \n      if (!existingNotice) {\n        return res.status(404).json({ \n          success: false,\n          error: 'NOT_FOUND: Notice not found',\n          id: id\n        });\n      }\n\n      // ‚úÖ Validar dados de atualiza√ß√£o\n      const updateData = { ...req.body };\n      \n      // Converter datas se necess√°rio\n      if (updateData.startDate) {\n        updateData.startDate = new Date(updateData.startDate);\n      }\n      if (updateData.endDate) {\n        updateData.endDate = new Date(updateData.endDate);\n      }\n\n      const updatedNotice = await storage.updateNotice({ \n        ...existingNotice, \n        ...updateData,\n        id: id // Garantir que o ID n√£o mude\n      });\n      \n      console.log('‚úÖ Aviso atualizado:', updatedNotice);\n      \n      res.json({\n        success: true,\n        notice: updatedNotice,\n        message: 'Notice updated successfully'\n      });\n    } catch (error) {\n      console.error(`‚ùå Erro ao atualizar aviso ${req.params.id}:`, error);\n      res.status(500).json({ \n        success: false,\n        error: 'SERVER_ERROR: Failed to update notice',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // ‚úÖ CORRE√á√ÉO: DELETE notices\n  app.delete('/api/notices/:id', async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      console.log(`üóëÔ∏è DELETE /api/notices/${id} - Deletando aviso...`);\n      \n      if (isNaN(id)) {\n        return res.status(400).json({ \n          success: false,\n          error: 'VALIDATION_ERROR: Invalid notice ID',\n          receivedId: req.params.id\n        });\n      }\n      \n      const deleted = await storage.deleteNotice(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ \n          success: false,\n          error: 'NOT_FOUND: Notice not found',\n          id: id\n        });\n      }\n\n      console.log(`‚úÖ Aviso ${id} deletado com sucesso`);\n      \n      res.json({ \n        success: true,\n        message: 'Notice deleted successfully',\n        deletedId: id\n      });\n    } catch (error) {\n      console.error(`‚ùå Erro ao deletar aviso ${req.params.id}:`, error);\n      res.status(500).json({ \n        success: false,\n        error: 'SERVER_ERROR: Failed to delete notice',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Document routes\n  app.get('/api/documents', async (req, res) => {\n    try {\n      const documents = await storage.getDocuments();\n      res.json(documents);\n    } catch (error) {\n      res.status(500).json({ error: 'Failed to fetch documents' });\n    }\n  });\n\n  app.post('/api/documents', async (req, res) => {\n    try {\n      const validatedData = insertDocumentSchema.parse(req.body);\n      const document = await storage.createDocument(validatedData);\n      res.json(document);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: 'Invalid data', details: error.errors });\n      } else {\n        res.status(500).json({ error: 'Failed to create document' });\n      }\n    }\n  });\n\n  app.put('/api/documents/:id', async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const existingDoc = await storage.getDocument(id);\n      \n      if (!existingDoc) {\n        return res.status(404).json({ error: 'Document not found' });\n      }\n\n      const updatedDoc = await storage.updateDocument({ ...existingDoc, ...req.body });\n      res.json(updatedDoc);\n    } catch (error) {\n      res.status(500).json({ error: 'Failed to update document' });\n    }\n  });\n\n  app.delete('/api/documents/:id', async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteDocument(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: 'Document not found' });\n      }\n\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: 'Failed to delete document' });\n    }\n  });\n\n  // List uploaded PDFs route\n  app.get('/api/list-pdfs', (req, res) => {\n    try {\n      const uploadsDir = path.join(process.cwd(), 'uploads');\n      \n      if (!fs.existsSync(uploadsDir)) {\n        return res.json({ documents: [] });\n      }\n\n      const documents: any[] = [];\n      const typeSubfolders = ['plasa', 'escala', 'cardapio'];\n      \n      console.log(`üìÅ Verificando subpastas em: ${uploadsDir}`);\n      \n      // üìÅ Ler documentos das subpastas organizadas\n      typeSubfolders.forEach(subfolder => {\n        const subfolderPath = path.join(uploadsDir, subfolder);\n        \n        console.log(`üìÅ Verificando pasta: ${subfolderPath}`);\n        if (fs.existsSync(subfolderPath)) {\n          const subFiles = fs.readdirSync(subfolderPath);\n          console.log(`üìÅ Encontrados ${subFiles.length} arquivos em ${subfolder}`);\n          console.log(`üìÅ Arquivos: ${subFiles.join(', ')}`);\n          \n          subFiles\n            .filter(file => file.endsWith('.pdf') || file.endsWith('.jpg') || file.endsWith('.png'))\n            .forEach(file => {\n              const filePath = path.join(subfolderPath, file);\n              const stats = fs.statSync(filePath);\n              \n              // Extrair nome original e classificar\n              const originalName = getOriginalFromSaved(file);\n              \n              // ‚úÖ Determinar tipo pela pasta (mais confi√°vel)\n              let docType = subfolder as 'plasa' | 'escala' | 'cardapio';\n              \n              // Aplicar classifica√ß√£o baseada no tipo da pasta\n              let classification: DocumentClassification = {\n                type: docType as any,\n                tags: []\n              };\n              \n              // Adicionar classifica√ß√£o espec√≠fica baseada no nome\n              if (docType === 'escala') {\n                if (originalName.toLowerCase().includes('oficial')) {\n                  classification.category = 'oficial';\n                  classification.tags.push('OFICIAIS');\n                } else if (originalName.toLowerCase().includes('pra√ßa')) {\n                  classification.category = 'praca';\n                  classification.tags.push('PRA√áAS');\n                }\n                classification.tags.push('ESCALA');\n              } else if (docType === 'cardapio') {\n                if (originalName.toLowerCase().includes('eagm')) {\n                  classification.unit = 'EAGM';\n                  classification.tags.push('EAGM');\n                } else if (originalName.toLowerCase().includes('1dn')) {\n                  classification.unit = '1DN';\n                  classification.tags.push('1DN');\n                }\n                classification.tags.push('CARD√ÅPIO');\n              } else if (docType === 'plasa') {\n                classification.tags.push('PLASA');\n              }\n              \n              console.log(`üìã Listando documento: ${subfolder}/${file} -> Tipo: ${classification.type}, Tags: [${classification.tags.join(', ')}]`);\n              \n              documents.push({\n                filename: file,\n                url: `/uploads/${subfolder}/${file}`,\n                created: stats.birthtime,\n                size: stats.size,\n                type: classification.type,\n                category: classification.category,\n                unit: classification.unit,\n                tags: classification.tags,\n                classification: classification,\n                originalname: getOriginalFromSaved(file)\n              });\n            });\n        }\n      });\n\n      // Ordenar por data de cria√ß√£o (mais recente primeiro)\n      documents.sort((a, b) => b.created.getTime() - a.created.getTime());\n\n      console.log(`üìÇ Listando ${documents.length} documentos com classifica√ß√£o inteligente das subpastas`);\n      res.json({ documents });\n    } catch (error) {\n      console.error('Error listing PDFs:', error);\n      res.status(500).json({ error: 'Failed to list documents' });\n    }\n  });\n\n  // ‚úÖ ATUALIZADO: Check escala image cache route (agora funcional)\n  app.get('/api/check-escala-image/:id', async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      const filename = `${id}.jpg`;\n      const filePath = path.join(escalaCacheDir, filename);\n      const fileUrl = `/uploads/escala-cache/${filename}`;\n\n      try {\n        await access(filePath);\n        res.json({ \n          exists: true, \n          id, \n          url: fileUrl,\n          cached: true\n        });\n      } catch {\n        res.json({ \n          exists: false, \n          id,\n          cached: false\n        });\n      }\n    } catch (error) {\n      res.status(500).json({ error: 'Failed to check cache' });\n    }\n  });\n\n  // Delete uploaded file route\n  app.delete('/api/delete-pdf/:filename', (req, res) => {\n    try {\n      const { filename } = req.params;\n      const filePath = path.join(process.cwd(), 'uploads', filename);\n      \n      if (fs.existsSync(filePath)) {\n        fs.unlinkSync(filePath);\n        console.log(`üóëÔ∏è Arquivo deletado: ${filename}`);\n        res.json({ success: true, message: 'File deleted successfully' });\n      } else {\n        res.status(404).json({ success: false, error: 'File not found' });\n      }\n    } catch (error) {\n      console.error('Delete error:', error);\n      res.status(500).json({ success: false, error: 'Failed to delete file' });\n    }\n  });\n\n  // PDF Proxy route to handle CORS issues\n  app.get('/api/proxy-pdf', async (req, res) => {\n    try {\n      const { url } = req.query;\n      \n      if (!url || typeof url !== 'string') {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n      \n      console.log(`üîÑ Proxying PDF request: ${url}`);\n      \n      if (url.includes('/uploads/')) {\n        const filename = url.split('/uploads/')[1];\n        const filePath = path.join(process.cwd(), 'uploads', filename);\n        \n        if (fs.existsSync(filePath)) {\n          console.log(`üìÅ Serving local file via proxy: ${filename}`);\n          \n          res.setHeader('Access-Control-Allow-Origin', '*');\n          res.setHeader('Content-Type', 'application/pdf');\n          res.setHeader('Cache-Control', 'public, max-age=31536000');\n          \n          return res.sendFile(filePath);\n        }\n      }\n      \n      res.status(404).json({ error: 'File not found' });\n      \n    } catch (error) {\n      console.error('Proxy error:', error);\n      res.status(500).json({ error: 'Proxy request failed' });\n    }\n  });\n\n  // Network status and system info\n  app.get('/api/status', (req, res) => {\n    const clientIP = req.ip || req.connection.remoteAddress || req.headers['x-forwarded-for'];\n    res.json({ \n      status: 'online', \n      timestamp: new Date().toISOString(),\n      version: '2.0',\n      clientIP: clientIP,\n      serverHost: req.get('host'),\n      origin: req.get('origin') || 'direct',\n      userAgent: req.get('user-agent'),\n      method: req.method,\n      cors: 'enabled',\n      environment: process.env.NODE_ENV || 'development'\n    });\n  });\n\n  app.get('/api/health', (req, res) => {\n    res.json({ \n      status: 'ok', \n      timestamp: new Date().toISOString(),\n      message: 'Marinha do Brasil - Sistema funcionando corretamente'\n    });\n  });\n\n  // üî• NOVO: System info com informa√ß√µes de cache\n  // Duty Officers API\n  app.get('/api/duty-officers', async (req, res) => {\n    try {\n      console.log('üëÆ GET /api/duty-officers - Buscando oficiais de servi√ßo...');\n      \n      const officers = await storage.getDutyOfficers();\n      \n      const result = {\n        success: true,\n        officers: officers,\n        timestamp: new Date().toISOString()\n      };\n      \n      console.log('üëÆ Oficiais de servi√ßo encontrados:', officers ? 'dados dispon√≠veis' : 'dados n√£o encontrados');\n      res.json(result);\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao buscar oficiais de servi√ßo:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Failed to get duty officers',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  app.put('/api/duty-officers', async (req, res) => {\n    try {\n      console.log('üëÆ PUT /api/duty-officers - Atualizando oficiais de servi√ßo...');\n      console.log('üìù Dados recebidos:', req.body);\n      \n      // Validar dados de entrada\n      const validatedData = insertDutyOfficersSchema.parse(req.body);\n      \n      const updatedOfficers = await storage.updateDutyOfficers(validatedData);\n      \n      const result = {\n        success: true,\n        officers: updatedOfficers,\n        message: 'Oficiais de servi√ßo atualizados com sucesso',\n        timestamp: new Date().toISOString()\n      };\n      \n      console.log('‚úÖ Oficiais de servi√ßo atualizados:', updatedOfficers);\n      res.json(result);\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao atualizar oficiais de servi√ßo:', error);\n      \n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          success: false, \n          error: 'Validation error',\n          details: error.errors \n        });\n      }\n      \n      res.status(500).json({ \n        success: false, \n        error: 'Failed to update duty officers',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Military Personnel endpoints\n  app.get('/api/military-personnel', async (req, res) => {\n    try {\n      console.log('üéñÔ∏è GET /api/military-personnel - Buscando pessoal militar...');\n      \n      const { type } = req.query;\n      \n      let personnel;\n      if (type && (type === 'officer' || type === 'master')) {\n        personnel = await storage.getMilitaryPersonnelByType(type);\n      } else {\n        personnel = await storage.getMilitaryPersonnel();\n      }\n      \n      console.log(`üéñÔ∏è Encontrados ${personnel.length} militares`);\n      \n      res.json({ \n        success: true, \n        data: personnel \n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao buscar pessoal militar:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Failed to fetch military personnel',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  app.post('/api/military-personnel', async (req, res) => {\n    try {\n      console.log('üéñÔ∏è POST /api/military-personnel - Criando militar...');\n      \n      const validatedData = insertMilitaryPersonnelSchema.parse(req.body);\n      const personnel = await storage.createMilitaryPersonnel(validatedData);\n      \n      console.log(`üéñÔ∏è Militar criado: ${personnel.name} (${personnel.type})`);\n      \n      res.json({ \n        success: true, \n        data: personnel \n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao criar militar:', error);\n      \n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          success: false, \n          error: 'Validation error',\n          details: error.errors \n        });\n      }\n      \n      res.status(500).json({ \n        success: false, \n        error: 'Failed to create military personnel',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  app.put('/api/military-personnel/:id', async (req, res) => {\n    try {\n      console.log(`üéñÔ∏è PUT /api/military-personnel/${req.params.id} - Atualizando militar...`);\n      \n      const id = parseInt(req.params.id);\n      const existingPersonnel = await storage.getMilitaryPersonnel();\n      const personnel = existingPersonnel.find(p => p.id === id);\n      \n      if (!personnel) {\n        return res.status(404).json({ \n          success: false, \n          error: 'Military personnel not found' \n        });\n      }\n      \n      const updateData = req.body;\n      const updatedPersonnel = await storage.updateMilitaryPersonnel({ \n        ...personnel, \n        ...updateData \n      });\n      \n      console.log(`üéñÔ∏è Militar atualizado: ${updatedPersonnel.name}`);\n      \n      res.json({ \n        success: true, \n        data: updatedPersonnel \n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao atualizar militar:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Failed to update military personnel',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  app.delete('/api/military-personnel/:id', async (req, res) => {\n    try {\n      console.log(`üéñÔ∏è DELETE /api/military-personnel/${req.params.id} - Removendo militar...`);\n      \n      const id = parseInt(req.params.id);\n      const success = await storage.deleteMilitaryPersonnel(id);\n      \n      if (!success) {\n        return res.status(404).json({ \n          success: false, \n          error: 'Military personnel not found' \n        });\n      }\n      \n      console.log(`üéñÔ∏è Militar removido: ID ${id}`);\n      \n      res.json({ \n        success: true, \n        message: 'Military personnel deleted successfully' \n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao remover militar:', error);\n      res.status(500).json({ \n        success: false, \n        error: 'Failed to delete military personnel',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  app.get('/api/system-info', async (req, res) => {\n    try {\n      const uploadsDir = path.join(process.cwd(), 'uploads');\n      \n      // Contar arquivos por tipo\n      let totalUploads = 0;\n      let pdfCount = 0;\n      let imageCount = 0;\n      let totalSize = 0;\n      \n      try {\n        const files = fs.readdirSync(uploadsDir);\n        \n        for (const file of files) {\n          const filePath = path.join(uploadsDir, file);\n          const stats = fs.statSync(filePath);\n          \n          if (fs.statSync(filePath).isFile()) {\n            totalUploads++;\n            totalSize += stats.size;\n            \n            if (file.endsWith('.pdf')) pdfCount++;\n            if (file.endsWith('.jpg') || file.endsWith('.png') || file.endsWith('.jpeg')) imageCount++;\n          }\n        }\n      } catch (err) {\n        // Diret√≥rio n√£o existe\n      }\n\n      // Informa√ß√µes de cache\n      let plasaCacheCount = 0;\n      let escalaCacheCount = 0;\n      \n      try {\n        const plasaFiles = await readdir(plasaPagesDir);\n        plasaCacheCount = plasaFiles.filter(f => f.endsWith('.jpg')).length;\n      } catch {}\n      \n      try {\n        const escalaFiles = await readdir(escalaCacheDir);\n        escalaCacheCount = escalaFiles.filter(f => f.endsWith('.jpg')).length;\n      } catch {}\n\n      const systemInfo = {\n        server: {\n          status: 'online',\n          version: '2.0-cache',\n          timestamp: new Date().toISOString(),\n          uptime: process.uptime(),\n          nodeVersion: process.version,\n          platform: process.platform\n        },\n        storage: {\n          uploads: {\n            total: totalUploads,\n            pdfs: pdfCount,\n            images: imageCount,\n            totalSizeMB: Math.round(totalSize / 1024 / 1024 * 100) / 100\n          },\n          cache: {\n            plasa: {\n              pages: plasaCacheCount,\n              directory: 'uploads/plasa-pages/'\n            },\n            escala: {\n              cached: escalaCacheCount,\n              directory: 'uploads/escala-cache/'\n            },\n            total: plasaCacheCount + escalaCacheCount\n          }\n        },\n        features: {\n          notices: 'enabled',\n          documents: 'enabled',\n          cache: 'enabled',\n          cors: 'enabled',\n          upload: 'enabled'\n        }\n      };\n\n      res.json(systemInfo);\n\n    } catch (error) {\n      console.error('‚ùå Erro ao obter informa√ß√µes do sistema:', error);\n      res.status(500).json({ \n        error: 'Failed to get system info',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // =================== BONO AUTOMATION REMOVIDO ===================\n  // Sistema BONO autom√°tico removido por problemas de renderiza√ß√£o\n\n  // Rota para limpar cache do sistema\n  app.post('/api/clear-cache', async (req, res) => {\n    try {\n      console.log('üßπ POST /api/clear-cache - Limpando cache do sistema...');\n      \n      const fs = await import('fs/promises');\n      const path = await import('path');\n      \n      let filesRemoved = 0;\n      \n      // Limpar cache de p√°ginas PDF\n      const cacheDirectories = [\n        path.resolve('./cache/pdf-pages'),\n        path.resolve('./uploads/plasa-pages'),\n        path.resolve('./uploads/escala-cache')\n      ];\n      \n      for (const cacheDir of cacheDirectories) {\n        try {\n          const files = await fs.readdir(cacheDir);\n          for (const file of files) {\n            await fs.unlink(path.join(cacheDir, file));\n            filesRemoved++;\n          }\n          console.log(`üóëÔ∏è ${files.length} arquivos removidos de ${cacheDir}`);\n        } catch (error) {\n          console.log(`üìÅ Diret√≥rio ${cacheDir} n√£o existe ou vazio`);\n        }\n      }\n      \n      res.json({\n        success: true,\n        message: 'Cache limpo com sucesso',\n        filesRemoved: filesRemoved,\n        directoriesChecked: cacheDirectories.length,\n        timestamp: new Date().toISOString()\n      });\n      \n    } catch (error) {\n      console.error('‚ùå Erro ao limpar cache:', error);\n      res.status(500).json({\n        success: false,\n        error: 'Erro ao limpar cache',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}","size_bytes":51223},"server/storage.ts":{"content":"import { users, notices, documents, dutyOfficers, militaryPersonnel, type User, type InsertUser, type Notice, type InsertNotice, type PDFDocument, type InsertDocument, type DutyOfficers, type InsertDutyOfficers, type MilitaryPersonnel, type InsertMilitaryPersonnel } from \"@shared/schema\";\nimport { DatabaseStorage } from \"./db-storage\";\n\nexport interface IStorage {\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Notice methods\n  getNotices(): Promise<Notice[]>;\n  getNotice(id: number): Promise<Notice | undefined>;\n  createNotice(notice: InsertNotice): Promise<Notice>;\n  updateNotice(notice: Notice): Promise<Notice>;\n  deleteNotice(id: number): Promise<boolean>;\n  \n  // Document methods\n  getDocuments(): Promise<PDFDocument[]>;\n  getDocument(id: number): Promise<PDFDocument | undefined>;\n  createDocument(document: InsertDocument): Promise<PDFDocument>;\n  updateDocument(document: PDFDocument): Promise<PDFDocument>;\n  deleteDocument(id: number): Promise<boolean>;\n  \n  // Duty Officers methods\n  getDutyOfficers(): Promise<DutyOfficers | null>;\n  updateDutyOfficers(officers: InsertDutyOfficers): Promise<DutyOfficers>;\n  \n  // Military Personnel methods\n  getMilitaryPersonnel(): Promise<MilitaryPersonnel[]>;\n  getMilitaryPersonnelByType(type: \"officer\" | \"master\"): Promise<MilitaryPersonnel[]>;\n  createMilitaryPersonnel(personnel: InsertMilitaryPersonnel): Promise<MilitaryPersonnel>;\n  updateMilitaryPersonnel(personnel: MilitaryPersonnel): Promise<MilitaryPersonnel>;\n  deleteMilitaryPersonnel(id: number): Promise<boolean>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<number, User>;\n  private notices: Map<number, Notice>;\n  private documents: Map<number, PDFDocument>;\n  private dutyOfficers: DutyOfficers | null;\n  private militaryPersonnel: Map<number, MilitaryPersonnel>;\n  private currentUserId: number;\n  private currentNoticeId: number;\n  private currentDocumentId: number;\n  private currentMilitaryPersonnelId: number;\n\n  constructor() {\n    this.users = new Map();\n    this.notices = new Map();\n    this.documents = new Map();\n    this.dutyOfficers = null; // Inicializar como null, ser√° criado quando necess√°rio\n    this.militaryPersonnel = new Map();\n    this.currentUserId = 1;\n    this.currentNoticeId = 1;\n    this.currentDocumentId = 1;\n    this.currentMilitaryPersonnelId = 1;\n      console.log('üíæ MemStorage initialized'); \n  }\n\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = this.currentUserId++;\n    const user: User = { ...insertUser, id };\n    this.users.set(id, user);\n    return user;\n  }\n\n\n\n\n/*\n  // Notice methods\n  async getNotices(): Promise<Notice[]> {\n    return Array.from(this.notices.values());\n  }\n\n  async getNotice(id: number): Promise<Notice | undefined> {\n    return this.notices.get(id);\n  }\n\n  // ‚úÖ CORRE√á√ÉO: CreateNotice com valida√ß√£o melhorada\n  async createNotice(insertNotice: InsertNotice): Promise<Notice> {\n    try {\n      const id = this.currentNoticeId++;\n      const now = new Date();\n      \n      console.log('üì¢ Storage: Criando aviso:', {\n        id,\n        title: insertNotice.title,\n        priority: insertNotice.priority,\n        startDate: insertNotice.startDate,\n        endDate: insertNotice.endDate,\n        active: insertNotice.active\n      });\n      \n      // ‚úÖ Valida√ß√£o adicional de dados\n      if (!insertNotice.title || insertNotice.title.trim() === '') {\n        throw new Error('Title is required and cannot be empty');\n      }\n      \n      if (!insertNotice.content || insertNotice.content.trim() === '') {\n        throw new Error('Content is required and cannot be empty');\n      }\n      \n      if (!['high', 'medium', 'low'].includes(insertNotice.priority)) {\n        throw new Error('Priority must be high, medium, or low');\n      }\n      \n      // ‚úÖ Valida√ß√£o de datas\n      let startDate: Date;\n      let endDate: Date;\n      \n      if (insertNotice.startDate instanceof Date) {\n        startDate = insertNotice.startDate;\n      } else if (typeof insertNotice.startDate === 'string') {\n        startDate = new Date(insertNotice.startDate);\n      } else {\n        throw new Error('Invalid startDate format');\n      }\n      \n      if (insertNotice.endDate instanceof Date) {\n        endDate = insertNotice.endDate;\n      } else if (typeof insertNotice.endDate === 'string') {\n        endDate = new Date(insertNotice.endDate);\n      } else {\n        throw new Error('Invalid endDate format');\n      }\n      \n      if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {\n        throw new Error('Invalid date format');\n      }\n      \n      if (startDate >= endDate) {\n        throw new Error('Start date must be before end date');\n      }\n      \n      const notice: Notice = { \n        id,\n        title: insertNotice.title.trim(),\n        content: insertNotice.content.trim(),\n        priority: insertNotice.priority as \"high\" | \"medium\" | \"low\",\n        startDate: startDate,\n        endDate: endDate,\n        active: insertNotice.active !== false, // Default para true\n        createdAt: now, \n        updatedAt: now\n      };\n      \n      this.notices.set(id, notice);\n      \n      console.log(`‚úÖ Storage: Aviso ${id} criado com sucesso:`, {\n        id: notice.id,\n        title: notice.title,\n        priority: notice.priority,\n        active: notice.active,\n        startDate: notice.startDate.toISOString(),\n        endDate: notice.endDate.toISOString()\n      });\n      \n      return notice;\n    } catch (error) {\n      console.error('‚ùå Storage: Erro ao criar aviso:', error);\n      throw error;\n    }\n  }\n\n// ‚úÖ CORRE√á√ÉO: UpdateNotice com valida√ß√£o\n  async updateNotice(notice: Notice): Promise<Notice> {\n    try {\n      console.log(`üìù Storage: Atualizando aviso ${notice.id}`);\n      \n      if (!this.notices.has(notice.id)) {\n        throw new Error(`Notice with id ${notice.id} not found`);\n      }\n      \n      // ‚úÖ Validar dados b√°sicos\n      if (!notice.title || notice.title.trim() === '') {\n        throw new Error('Title is required and cannot be empty');\n      }\n      \n      if (!notice.content || notice.content.trim() === '') {\n        throw new Error('Content is required and cannot be empty');\n      }\n      \n      const updatedNotice = { \n        ...notice, \n        title: notice.title.trim(),\n        content: notice.content.trim(),\n        updatedAt: new Date() \n      };\n      \n      this.notices.set(notice.id, updatedNotice);\n      \n      console.log(`‚úÖ Storage: Aviso ${notice.id} atualizado com sucesso`);\n      return updatedNotice;\n    } catch (error) {\n      console.error(`‚ùå Storage: Erro ao atualizar aviso ${notice.id}:`, error);\n      throw error;\n    }\n  }\n\n\n   // ‚úÖ CORRE√á√ÉO: DeleteNotice com logging\n  async deleteNotice(id: number): Promise<boolean> {\n    try {\n      console.log(`üóëÔ∏è Storage: Deletando aviso ${id}`);\n      \n      const existed = this.notices.has(id);\n      const deleted = this.notices.delete(id);\n      \n      if (deleted) {\n        console.log(`‚úÖ Storage: Aviso ${id} deletado com sucesso`);\n      } else {\n        console.log(`‚ö†Ô∏è Storage: Aviso ${id} n√£o encontrado para deletar`);\n      }\n      \n      return deleted;\n    } catch (error) {\n      console.error(`‚ùå Storage: Erro ao deletar aviso ${id}:`, error);\n      return false;\n    }\n  }\n*/\n// ‚úÖ Notice methods - VERS√ÉO CORRIGIDA COMPLETA\n  async getNotices(): Promise<Notice[]> {\n    const noticesList = Array.from(this.notices.values());\n    console.log(`üì¢ Storage: Retornando ${noticesList.length} avisos`);\n    return noticesList;\n  }\n\n  async getNotice(id: number): Promise<Notice | undefined> {\n    const notice = this.notices.get(id);\n    console.log(`üì¢ Storage: Buscando aviso ${id} - ${notice ? 'encontrado' : 'n√£o encontrado'}`);\n    return notice;\n  }\n\n  async createNotice(insertNotice: InsertNotice): Promise<Notice> {\n    try {\n      const id = this.currentNoticeId++;\n      const now = new Date();\n      \n      console.log('üì¢ Storage: Criando aviso:', {\n        id,\n        title: insertNotice.title,\n        priority: insertNotice.priority,\n        startDate: insertNotice.startDate,\n        endDate: insertNotice.endDate,\n        active: insertNotice.active\n      });\n      \n      // ‚úÖ Valida√ß√£o adicional de dados\n      if (!insertNotice.title || insertNotice.title.trim() === '') {\n        throw new Error('Title is required and cannot be empty');\n      }\n      \n      if (!insertNotice.content || insertNotice.content.trim() === '') {\n        throw new Error('Content is required and cannot be empty');\n      }\n      \n      if (!['high', 'medium', 'low'].includes(insertNotice.priority)) {\n        throw new Error('Priority must be high, medium, or low');\n      }\n      \n      // ‚úÖ Valida√ß√£o de datas\n      let startDate: Date;\n      let endDate: Date;\n      \n      if (insertNotice.startDate instanceof Date) {\n        startDate = insertNotice.startDate;\n      } else if (typeof insertNotice.startDate === 'string') {\n        startDate = new Date(insertNotice.startDate);\n      } else {\n        throw new Error('Invalid startDate format');\n      }\n      \n      if (insertNotice.endDate instanceof Date) {\n        endDate = insertNotice.endDate;\n      } else if (typeof insertNotice.endDate === 'string') {\n        endDate = new Date(insertNotice.endDate);\n      } else {\n        throw new Error('Invalid endDate format');\n      }\n      \n      if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {\n        throw new Error('Invalid date format');\n      }\n      \n      if (startDate >= endDate) {\n        throw new Error('Start date must be before end date');\n      }\n      \n      const notice: Notice = { \n        id,\n        title: insertNotice.title.trim(),\n        content: insertNotice.content.trim(),\n        priority: insertNotice.priority as \"high\" | \"medium\" | \"low\",\n        startDate: startDate,\n        endDate: endDate,\n        active: insertNotice.active !== false, // Default para true\n        createdAt: now, \n        updatedAt: now\n      };\n      \n      this.notices.set(id, notice);\n      \n      console.log(`‚úÖ Storage: Aviso ${id} criado com sucesso:`, {\n        id: notice.id,\n        title: notice.title,\n        priority: notice.priority,\n        active: notice.active,\n        startDate: notice.startDate.toISOString(),\n        endDate: notice.endDate.toISOString()\n      });\n      \n      return notice;\n    } catch (error) {\n      console.error('‚ùå Storage: Erro ao criar aviso:', error);\n      throw error;\n    }\n  }\n\n  async updateNotice(notice: Notice): Promise<Notice> {\n    try {\n      console.log(`üìù Storage: Atualizando aviso ${notice.id}`);\n      \n      if (!this.notices.has(notice.id)) {\n        throw new Error(`Notice with id ${notice.id} not found`);\n      }\n      \n      // ‚úÖ Validar dados b√°sicos\n      if (!notice.title || notice.title.trim() === '') {\n        throw new Error('Title is required and cannot be empty');\n      }\n      \n      if (!notice.content || notice.content.trim() === '') {\n        throw new Error('Content is required and cannot be empty');\n      }\n      \n      const updatedNotice = { \n        ...notice, \n        title: notice.title.trim(),\n        content: notice.content.trim(),\n        updatedAt: new Date() \n      };\n      \n      this.notices.set(notice.id, updatedNotice);\n      \n      console.log(`‚úÖ Storage: Aviso ${notice.id} atualizado com sucesso`);\n      return updatedNotice;\n    } catch (error) {\n      console.error(`‚ùå Storage: Erro ao atualizar aviso ${notice.id}:`, error);\n      throw error;\n    }\n  }\n\n  async deleteNotice(id: number): Promise<boolean> {\n    try {\n      console.log(`üóëÔ∏è Storage: Deletando aviso ${id}`);\n      \n      const existed = this.notices.has(id);\n      const deleted = this.notices.delete(id);\n      \n      if (deleted) {\n        console.log(`‚úÖ Storage: Aviso ${id} deletado com sucesso`);\n      } else {\n        console.log(`‚ö†Ô∏è Storage: Aviso ${id} n√£o encontrado para deletar`);\n      }\n      \n      return deleted;\n    } catch (error) {\n      console.error(`‚ùå Storage: Erro ao deletar aviso ${id}:`, error);\n      return false;\n    }\n  }\n  // Document methods\n  async getDocuments(): Promise<PDFDocument[]> {\n    return Array.from(this.documents.values());\n  }\n\n  async getDocument(id: number): Promise<PDFDocument | undefined> {\n    return this.documents.get(id);\n  }\n\n  async createDocument(insertDocument: InsertDocument): Promise<PDFDocument> {\n    const id = this.currentDocumentId++;\n    const document: PDFDocument = { \n      id,\n      title: insertDocument.title,\n      url: insertDocument.url,\n      type: insertDocument.type as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\",\n      category: (insertDocument.category as \"oficial\" | \"praca\") ?? null,\n      active: insertDocument.active ?? true,\n      uploadDate: new Date()\n    };\n    this.documents.set(id, document);\n    return document;\n  }\n\n  async updateDocument(document: PDFDocument): Promise<PDFDocument> {\n    this.documents.set(document.id, document);\n    return document;\n  }\n\n  async deleteDocument(id: number): Promise<boolean> {\n    return this.documents.delete(id);\n  }\n\n  // Duty Officers methods\n  async getDutyOfficers(): Promise<DutyOfficers | null> {\n    return this.dutyOfficers;\n  }\n\n  async updateDutyOfficers(officers: InsertDutyOfficers): Promise<DutyOfficers> {\n    const updatedOfficers: DutyOfficers = {\n      id: 1, // Sempre ID 1 pois s√≥ temos um registro\n      officerName: officers.officerName || \"\",\n      masterName: officers.masterName || \"\",\n      updatedAt: new Date()\n    };\n\n    this.dutyOfficers = updatedOfficers;\n    console.log('üëÆ Oficiais de servi√ßo atualizados:', {\n      oficial: updatedOfficers.officerName,\n      contramestre: updatedOfficers.masterName\n    });\n    \n    return updatedOfficers;\n  }\n\n  // Military Personnel methods\n  async getMilitaryPersonnel(): Promise<MilitaryPersonnel[]> {\n    return Array.from(this.militaryPersonnel.values());\n  }\n\n  async getMilitaryPersonnelByType(type: \"officer\" | \"master\"): Promise<MilitaryPersonnel[]> {\n    return Array.from(this.militaryPersonnel.values()).filter(p => p.type === type);\n  }\n\n  async createMilitaryPersonnel(personnel: InsertMilitaryPersonnel): Promise<MilitaryPersonnel> {\n    const id = this.currentMilitaryPersonnelId++;\n    const newPersonnel: MilitaryPersonnel = {\n      id,\n      name: personnel.name,\n      type: personnel.type as \"officer\" | \"master\",\n      rank: personnel.rank as \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\" | \"1sg\" | \"2sg\" | \"3sg\",\n      specialty: personnel.specialty || null,\n      fullRankName: personnel.fullRankName,\n      active: personnel.active ?? true,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    this.militaryPersonnel.set(id, newPersonnel);\n    return newPersonnel;\n  }\n\n  async updateMilitaryPersonnel(personnel: MilitaryPersonnel): Promise<MilitaryPersonnel> {\n    const updatedPersonnel = { ...personnel, updatedAt: new Date() };\n    this.militaryPersonnel.set(personnel.id, updatedPersonnel);\n    return updatedPersonnel;\n  }\n\n  async deleteMilitaryPersonnel(id: number): Promise<boolean> {\n    return this.militaryPersonnel.delete(id);\n  }\n}\n\nfunction createStorage(): IStorage {\n  console.log('üîç Verificando configura√ß√£o de storage...');\n  \n  // Verificar vari√°vel de ambiente\n  const dbUrl = process.env.DATABASE_URL;\n  console.log('üìä DATABASE_URL:', dbUrl ? 'ENCONTRADA' : 'N√ÉO ENCONTRADA');\n  \n  if (dbUrl) {\n    try {\n      console.log('üîó DATABASE_URL detectada - usando PostgreSQL');\n      console.log('üìä URL:', dbUrl.replace(/:[^:]*@/, ':***@'));\n      return new DatabaseStorage();\n    } catch (error) {\n      console.error('‚ùå Erro ao conectar PostgreSQL:', error);\n      console.log('üîÑ Voltando para MemStorage');\n    }\n  } else {\n    console.log('‚ö†Ô∏è DATABASE_URL n√£o encontrada');\n    console.log('üíæ Usando MemStorage (dados ser√£o perdidos ao reiniciar)');\n  }\n  \n  return new MemStorage();\n}\n\n// FOR√áAR PostgreSQL (para teste)\nexport const storage = new DatabaseStorage();","size_bytes":16445},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        process.cwd(), \"papem-digital\",\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(process.cwd(), \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2259},"shared/insigniaData.ts":{"content":"/**\n * Sistema de Ins√≠gnias Militares\n * Mapeia gradua√ß√µes e especialidades para suas respectivas imagens de ins√≠gnias\n */\n\nexport interface Insignia {\n  id: number;\n  descricao: string;\n  imagem: string;\n  rank: string;\n  specialty: string;\n}\n\n// Base de dados das ins√≠gnias dispon√≠veis\nexport const INSIGNIA_DATABASE: Insignia[] = [\n  // Capit√£o de Mar e Guerra\n  { id: 1, descricao: \"CMG (IM)\", imagem: \"uploads/insignias/cmg_im.png\", rank: \"cmg\", specialty: \"im\" },\n  { id: 15, descricao: \"CMG (RM1-T)\", imagem: \"uploads/insignias/CMG_T_RM1.png\", rank: \"cmg\", specialty: \"rm1-t\" },\n  \n  // Capit√£o de Fragata\n  { id: 2, descricao: \"CF (IM)\", imagem: \"uploads/insignias/cf_im.png\", rank: \"cf\", specialty: \"im\" },\n  { id: 3, descricao: \"CF (T)\", imagem: \"uploads/insignias/cf_t.png\", rank: \"cf\", specialty: \"t\" },\n  { id: 16, descricao: \"CF (RM1-T)\", imagem: \"uploads/insignias/CF_T_RM1.png\", rank: \"cf\", specialty: \"rm1-t\" },\n  \n  // Capit√£o de Corveta\n  { id: 4, descricao: \"CC (T)\", imagem: \"uploads/insignias/cc_t.png\", rank: \"cc\", specialty: \"t\" },\n  { id: 5, descricao: \"CC (IM)\", imagem: \"uploads/insignias/cc_im.png\", rank: \"cc\", specialty: \"im\" },\n  { id: 17, descricao: \"CC (RM1-T)\", imagem: \"uploads/insignias/CC_T_RM1.png\", rank: \"cc\", specialty: \"rm1-t\" },\n  \n  // Capit√£o-Tenente\n  { id: 6, descricao: \"CT (T)\", imagem: \"uploads/insignias/ct_t.png\", rank: \"ct\", specialty: \"t\" },\n  { id: 7, descricao: \"CT (IM)\", imagem: \"uploads/insignias/ct_im.png\", rank: \"ct\", specialty: \"im\" },\n  { id: 8, descricao: \"CT (QC-IM)\", imagem: \"uploads/insignias/ct_qc_im.png\", rank: \"ct\", specialty: \"qc-im\" },\n  { id: 9, descricao: \"CT (RM2-T)\", imagem: \"uploads/insignias/ct_rm2_t.png\", rank: \"ct\", specialty: \"rm2-t\" },\n  \n  // Primeiro-Tenente\n  { id: 10, descricao: \"1T (RM2-T)\", imagem: \"uploads/insignias/1t_c.png\", rank: \"1t\", specialty: \"rm2-t\" },\n  { id: 11, descricao: \"1T (T)\", imagem: \"uploads/insignias/1t_t.png\", rank: \"1t\", specialty: \"t\" },\n  { id: 12, descricao: \"1T (IM)\", imagem: \"uploads/insignias/1t_im.png\", rank: \"1t\", specialty: \"im\" },\n  { id: 18, descricao: \"1T (QC-IM)\", imagem: \"uploads/insignias/1t_qc_im.png\", rank: \"1t\", specialty: \"qc-im\" },\n  { id: 19, descricao: \"1T (AA)\", imagem: \"uploads/insignias/1t_aa.png\", rank: \"1t\", specialty: \"aa\" },\n  \n  // Segundo-Tenente\n  { id: 13, descricao: \"2T (RM2-T)\", imagem: \"uploads/insignias/2t_c.png\", rank: \"2t\", specialty: \"rm2-t\" },\n  { id: 14, descricao: \"2T (AA)\", imagem: \"uploads/insignias/2t_aa.png\", rank: \"2t\", specialty: \"aa\" },\n  { id: 20, descricao: \"2T (IM)\", imagem: \"uploads/insignias/2t_im.png\", rank: \"2t\", specialty: \"im\" },\n  \n  // Sargentos\n  { id: 21, descricao: \"1SG (PD)\", imagem: \"insignias/1sg_pd.png\", rank: \"1sg\", specialty: \"pd\" },\n  { id: 22, descricao: \"1SG (CL)\", imagem: \"insignias/1sg_cl.png\", rank: \"1sg\", specialty: \"cl\" },\n  { id: 23, descricao: \"1SG (ES)\", imagem: \"insignias/1sg_es.png\", rank: \"1sg\", specialty: \"es\" },\n  { id: 24, descricao: \"1SG (EP)\", imagem: \"insignias/1sg_ep.png\", rank: \"1sg\", specialty: \"ep\" },\n  { id: 25, descricao: \"1SG (PL)\", imagem: \"insignias/1sg_pl.png\", rank: \"1sg\", specialty: \"pl\" },\n  { id: 26, descricao: \"1SG (QI)\", imagem: \"insignias/1sg_qi.png\", rank: \"1sg\", specialty: \"qi\" },\n  \n  { id: 27, descricao: \"2SG (PD)\", imagem: \"insignias/2sg_pd.png\", rank: \"2sg\", specialty: \"pd\" },\n  { id: 28, descricao: \"2SG (CL)\", imagem: \"insignias/2sg_cl.png\", rank: \"2sg\", specialty: \"cl\" },\n  { id: 29, descricao: \"2SG (ES)\", imagem: \"insignias/2sg_es.png\", rank: \"2sg\", specialty: \"es\" },\n  \n  { id: 30, descricao: \"3SG (PD)\", imagem: \"insignias/3sg_pd.png\", rank: \"3sg\", specialty: \"pd\" },\n  { id: 31, descricao: \"3SG (CL)\", imagem: \"insignias/3sg_cl.png\", rank: \"3sg\", specialty: \"cl\" },\n  { id: 32, descricao: \"3SG (ES)\", imagem: \"insignias/3sg_es.png\", rank: \"3sg\", specialty: \"es\" }\n];\nexport function getMilitaryInsigniaImage(rank: string, specialty: string | null): string | null {\n  if (!rank) return null;\n  \n  const rankLower = rank.toLowerCase();\n  \n  // Se tem especialidade, usar: rank_specialty.png\n  if (specialty) {\n    const specialtyLower = specialty.toLowerCase();\n    return `/uploads/insignias/${rankLower}_${specialtyLower}.png`;\n  }\n  \n  // Se n√£o tem especialidade, tentar s√≥ com rank\n  // Pode usar uma especialidade padr√£o ou a primeira dispon√≠vel\n  const defaultSpecialties = {\n    '1t': 'im',\n    '2t': 'im', \n    'ct': 'im',\n    '1sg': 'cl',\n    '2sg': 'cl',\n    '3sg': 'cl'\n  };\n  \n  const defaultSpecialty = defaultSpecialties[rankLower as keyof typeof defaultSpecialties];\n  if (defaultSpecialty) {\n    return `/uploads/insignias/${rankLower}_${defaultSpecialty}.png`;\n  }\n  \n  return null;\n}\n\n/**\n * Obt√©m a descri√ß√£o da ins√≠gnia\n */\nexport function getMilitaryInsigniaDescription(rank: string, specialty: string | null): string | null {\n  if (!rank) return null;\n  \n  const rankUpper = rank.toUpperCase();\n  const specialtyUpper = specialty?.toUpperCase();\n  \n  if (specialtyUpper) {\n    return `${rankUpper} (${specialtyUpper})`;\n  }\n  \n  return rankUpper;\n}\n\n/**\n * Verifica se existe ins√≠gnia\n * Retorna true se conseguir gerar um caminho v√°lido\n */\nexport function hasInsignia(rank: string, specialty: string | null): boolean {\n  return getMilitaryInsigniaImage(rank, specialty) !== null;\n}\n\n// Opcional: Lista das imagens que voc√™ tem (para refer√™ncia)\nexport const AVAILABLE_INSIGNIAS = [\n  '1t_im.png',\n  '1t_c.png',\n  '1t_t.png',\n  '1t_qc_im.png',\n  'ct_im.png',\n  'ct_t.png',\n  'ct_qc_im.png',\n  'ct_rm2_t.png',\n  'cc_im.png',\n  'cc_t.png',\n  'cf_im.png',\n  'cf_t.png',\n  'cmg_im.png',\n  '1sg_es.png',\n  // Adicione outras conforme suas imagens\n];\n\n/**\n * Fun√ß√£o para testar se uma imagem espec√≠fica existe\n */\nexport function checkInsigniaExists(rank: string, specialty: string): boolean {\n  const filename = `${rank.toLowerCase()}_${specialty.toLowerCase()}.png`;\n  return AVAILABLE_INSIGNIAS.includes(filename);\n}","size_bytes":5927},"shared/officersData.ts":{"content":"// Dados dos oficiais baseados no sistema da Marinha\n// Extra√≠do do quadro de oficiais da Pagadoria de Pessoal da Marinha\n\nexport interface OfficerData {\n  name: string;\n  rank: \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\";\n  specialty?: string;\n  fullRankName: string;\n}\n\nexport interface MasterData {\n  name: string;\n  rank: \"3sg\" | \"2sg\" | \"1sg\";\n  specialty?: string;\n  fullRankName: string;\n}\n\n// Lista de oficiais dispon√≠veis para servi√ßo (OSE)\nexport const OFFICERS_LIST: OfficerData[] = [\n  // Capit√£es-Tenentes (CT)\n  { name: \"YAGO\", rank: \"ct\", specialty: \"IM\", fullRankName: \"Capit√£o-Tenente\" },\n  { name: \"MATEUS BARBOSA\", rank: \"ct\", specialty: \"IM\", fullRankName: \"Capit√£o-Tenente\" },\n  \n  // Primeiros-Tenentes (1T)\n  { name: \"LARISSA CASTRO\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"ALEXANDRIA\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"TAMIRES\", rank: \"1t\", specialty: \"QC-IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"KARINE\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"RONALD CHAVES\", rank: \"1t\", specialty: \"AA\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"PINA TRIGO\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"LEONARDO ANDRADE\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"ELIEZER\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  \n  // Segundos-Tenentes (2T)\n  { name: \"MARCIO MARTINS\", rank: \"2t\", specialty: \"AA\", fullRankName: \"Segundo-Tenente\" },\n  { name: \"MACHADO\", rank: \"2t\", specialty: \"AA\", fullRankName: \"Segundo-Tenente\" }\n];\n\n// Lista de contramestreS dispon√≠veis para servi√ßo\nexport const MASTERS_LIST: MasterData[] = [\n  // Primeiros-Sargentos (1SG)\n  { name: \"SALES\", rank: \"1sg\", specialty: \"PL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"LEANDRO\", rank: \"1sg\", specialty: \"EP\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"ELIANE\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"RAFAELA\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"SILVIA HELENA\", rank: \"1sg\", specialty: \"QI\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"DA SILVA\", rank: \"1sg\", specialty: \"ES\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"BEIRUTH\", rank: \"1sg\", specialty: \"PD\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"CARLA\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  \n  // Segundos-Sargentos (2SG)\n  { name: \"ALICE\", rank: \"2sg\", specialty: \"CL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"DIEGO\", rank: \"2sg\", specialty: \"ES\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"CANESCHE\", rank: \"2sg\", specialty: \"EL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"NIBI\", rank: \"2sg\", specialty: \"ES\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"MONIQUE\", rank: \"2sg\", specialty: \"PD\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"DAMASCENO\", rank: \"2sg\", specialty: \"CL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"SOUZA LIMA\", rank: \"2sg\", specialty: \"BA\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"SANT'ANNA\", rank: \"2sg\", specialty: \"MO\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"AFONSO\", rank: \"2sg\", specialty: \"SI\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"MEIRELES\", rank: \"2sg\", specialty: \"MR\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"BRUNA ROCHA\", rank: \"2sg\", specialty: \"PD\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"ARIANNE\", rank: \"2sg\", specialty: \"AD\", fullRankName: \"Segundo-Sargento\" },\n  \n  // Terceiros-Sargentos (3SG)\n  { name: \"MAYARA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"M√ÅRCIA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JUSTINO\", rank: \"3sg\", specialty: \"OS\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JONAS\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"THA√çS SILVA\", rank: \"3sg\", specialty: \"PD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"SABRINA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"TAIN√Å NEVES\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"AMANDA PAULINO\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"ANA BEATHRIZ\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"KEVIN\", rank: \"3sg\", specialty: \"MO\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JORGE\", rank: \"3sg\", specialty: \"CI\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"ALAN\", rank: \"3sg\", specialty: \"BA\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"HUGO\", rank: \"3sg\", specialty: \"EL\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"DA SILVA\", rank: \"3sg\", specialty: \"MR\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"FERNANDES\", rank: \"3sg\", specialty: \"AM\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"LUCAS SANTOS\", rank: \"3sg\", specialty: \"AM\", fullRankName: \"Terceiro-Sargento\" }\n];\n\n// Fun√ß√£o para obter dados completos de um oficial\nexport function getOfficerByName(name: string): OfficerData | undefined {\n  return OFFICERS_LIST.find(officer => \n    officer.name.toLowerCase().includes(name.toLowerCase()) ||\n    name.toLowerCase().includes(officer.name.toLowerCase())\n  );\n}\n\n// Fun√ß√£o para obter dados completos de um contramestre\nexport function getMasterByName(name: string): MasterData | undefined {\n  return MASTERS_LIST.find(master => \n    master.name.toLowerCase().includes(name.toLowerCase()) ||\n    name.toLowerCase().includes(master.name.toLowerCase())\n  );\n}\n\n// Fun√ß√£o para obter lista de oficiais por posto\nexport function getOfficersByRank(rank: string): OfficerData[] {\n  return OFFICERS_LIST.filter(officer => officer.rank === rank);\n}\n\n// Fun√ß√£o para obter lista de contramesters por gradua√ß√£o\nexport function getMastersByRank(rank: string): MasterData[] {\n  return MASTERS_LIST.filter(master => master.rank === rank);\n}\n\n// Mapas de tradu√ß√£o para exibi√ß√£o\nexport const RANK_DISPLAY_MAP = {\n  \"ct\": \"CT\",\n  \"cc\": \"CC\", \n  \"cf\": \"CMG\",\n  \"1t\": \"1¬∫ TEN\",\n  \"2t\": \"2¬∫ TEN\",\n  \"1sg\": \"1¬∫ SG\",\n  \"2sg\": \"2¬∫ SG\", \n  \"3sg\": \"3¬∫ SG\"\n};\n\nexport const RANK_FULL_NAME_MAP = {\n  \"ct\": \"Capit√£o-Tenente\",\n  \"cc\": \"Capit√£o-de-Corveta\",\n  \"cf\": \"Capit√£o-de-Mar-e-Guerra\", \n  \"1t\": \"Primeiro-Tenente\",\n  \"2t\": \"Segundo-Tenente\",\n  \"1sg\": \"Primeiro-Sargento\",\n  \"2sg\": \"Segundo-Sargento\",\n  \"3sg\": \"Terceiro-Sargento\"\n};","size_bytes":6503},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const notices = pgTable(\"notices\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  priority: text(\"priority\").notNull().$type<\"high\" | \"medium\" | \"low\">(),\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\").notNull(),\n  active: boolean(\"active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const documents = pgTable(\"documents\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  url: text(\"url\").notNull(),\n  type: text(\"type\").notNull().$type<\"plasa\" | \"escala\" | \"cardapio\">(),\n  category: text(\"category\").$type<\"oficial\" | \"praca\">(),\n  active: boolean(\"active\").notNull().default(true),\n  uploadDate: timestamp(\"upload_date\").defaultNow(),\n});\n\nexport const dutyOfficers = pgTable(\"duty_officers\", {\n  id: serial(\"id\").primaryKey(),\n  officerId: integer(\"officer_id\").references(() => militaryPersonnel.id),\n  masterId: integer(\"master_id\").references(() => militaryPersonnel.id),\n  // Campos legados para compatibilidade durante migra√ß√£o\n  officerName: text(\"officer_name\").default(\"\"),\n  masterName: text(\"master_name\").default(\"\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const militaryPersonnel = pgTable(\"military_personnel\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  rank: text(\"rank\").notNull().$type<\"cmg\" | \"cf\" | \"cc\" | \"ct\" | \"1t\" | \"2t\" | \"1sg\" | \"2sg\" | \"3sg\">(),\n  type: text(\"type\").notNull().$type<\"officer\" | \"master\">(),\n  specialty: text(\"specialty\"),\n  fullRankName: text(\"full_rank_name\").notNull(),\n  dutyRole: text(\"duty_role\").$type<\"officer\" | \"master\" | null>(), // üî• NOVO: Papel no servi√ßo (officer, master ou null)\n  active: boolean(\"active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport const insertNoticeSchema = createInsertSchema(notices).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertDocumentSchema = createInsertSchema(documents).omit({\n  id: true,\n  uploadDate: true,\n});\n\nexport const insertDutyOfficersSchema = createInsertSchema(dutyOfficers).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertMilitaryPersonnelSchema = createInsertSchema(militaryPersonnel).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type Notice = typeof notices.$inferSelect;\nexport type InsertNotice = z.infer<typeof insertNoticeSchema>;\nexport type PDFDocument = typeof documents.$inferSelect & {\n  tags?: string[]; // Tags geradas dinamicamente no backend\n  unit?: \"EAGM\" | \"1DN\"; // Unidade para card√°pios\n};\nexport type InsertDocument = z.infer<typeof insertDocumentSchema>;\nexport type DutyOfficers = typeof dutyOfficers.$inferSelect;\nexport type InsertDutyOfficers = z.infer<typeof insertDutyOfficersSchema>;\nexport type MilitaryPersonnel = typeof militaryPersonnel.$inferSelect;\nexport type InsertMilitaryPersonnel = z.infer<typeof insertMilitaryPersonnelSchema>;\n","size_bytes":3674},"client/src/App.css":{"content":"#root {\n  max-width: 1280px;\n  margin: 0 auto;\n  padding: 2rem;\n  text-align: center;\n}\n\n.logo {\n  height: 6em;\n  padding: 1.5em;\n  will-change: filter;\n  transition: filter 300ms;\n}\n.logo:hover {\n  filter: drop-shadow(0 0 2em #646cffaa);\n}\n.logo.react:hover {\n  filter: drop-shadow(0 0 2em #61dafbaa);\n}\n\n@keyframes logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  a:nth-of-type(2) .logo {\n    animation: logo-spin infinite 20s linear;\n  }\n}\n\n.card {\n  padding: 2em;\n}\n\n.read-the-docs {\n  color: #888;\n}\n","size_bytes":606},"client/src/App.tsx":{"content":"\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { Toaster as Sonner } from \"@/components/ui/sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { Router, Route, Switch } from \"wouter\";\nimport { DisplayProvider } from \"@/context/DisplayContext\";\nimport Index from \"./pages/Index\";\nimport Admin from \"./pages/Admin\";\nimport NotFound from \"./pages/NotFound\";\n\nconst queryClient = new QueryClient();\n\nconst App = () => (\n  <QueryClientProvider client={queryClient}>\n    <DisplayProvider>\n      <TooltipProvider>\n        <Toaster />\n        <Sonner />\n        <Router>\n          <Switch>\n            <Route path=\"/\" component={Index} />\n            <Route path=\"/admin\" component={Admin} />\n            <Route component={NotFound} />\n          </Switch>\n        </Router>\n      </TooltipProvider>\n    </DisplayProvider>\n  </QueryClientProvider>\n);\n\nexport default App;\n","size_bytes":972},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 84% 4.9%;\n\n    --card: 0 0% 100%;\n    --card-foreground: 222.2 84% 4.9%;\n\n    --popover: 0 0% 100%;\n    --popover-foreground: 222.2 84% 4.9%;\n\n    --primary: 220 47% 18%;\n    --primary-foreground: 210 40% 98%;\n\n    --secondary: 210 40% 96.1%;\n    --secondary-foreground: 222.2 47.4% 11.2%;\n\n    --muted: 210 40% 96.1%;\n    --muted-foreground: 215.4 16.3% 46.9%;\n\n    --accent: 210 40% 96.1%;\n    --accent-foreground: 222.2 47.4% 11.2%;\n\n    --destructive: 0 84.2% 60.2%;\n    --destructive-foreground: 210 40% 98%;\n\n    --border: 214.3 31.8% 91.4%;\n    --input: 214.3 31.8% 91.4%;\n    --ring: 220 47% 18%;\n\n    --radius: 0.5rem;\n\n    --sidebar-background: 0 0% 98%;\n\n    --sidebar-foreground: 240 5.3% 26.1%;\n\n    --sidebar-primary: 240 5.9% 10%;\n\n    --sidebar-primary-foreground: 0 0% 98%;\n\n    --sidebar-accent: 240 4.8% 95.9%;\n\n    --sidebar-accent-foreground: 240 5.9% 10%;\n\n    --sidebar-border: 220 13% 91%;\n\n    --sidebar-ring: 217.2 91.2% 59.8%;\n  }\n\n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n\n    --card: 222.2 84% 4.9%;\n    --card-foreground: 210 40% 98%;\n\n    --popover: 222.2 84% 4.9%;\n    --popover-foreground: 210 40% 98%;\n\n    --primary: 210 40% 98%;\n    --primary-foreground: 222.2 47.4% 11.2%;\n\n    --secondary: 217.2 32.6% 17.5%;\n    --secondary-foreground: 210 40% 98%;\n\n    --muted: 217.2 32.6% 17.5%;\n    --muted-foreground: 215 20.2% 65.1%;\n\n    --accent: 217.2 32.6% 17.5%;\n    --accent-foreground: 210 40% 98%;\n\n    --destructive: 0 62.8% 30.6%;\n    --destructive-foreground: 210 40% 98%;\n\n    --border: 217.2 32.6% 17.5%;\n    --input: 217.2 32.6% 17.5%;\n    --ring: 212.7 26.8% 83.9%;\n    --sidebar-background: 240 5.9% 10%;\n    --sidebar-foreground: 240 4.8% 95.9%;\n    --sidebar-primary: 224.3 76.3% 48%;\n    --sidebar-primary-foreground: 0 0% 100%;\n    --sidebar-accent: 240 3.7% 15.9%;\n    --sidebar-accent-foreground: 240 4.8% 95.9%;\n    --sidebar-border: 240 3.7% 15.9%;\n    --sidebar-ring: 217.2 91.2% 59.8%;\n  }\n}\n\n/* Cores da Marinha do Brasil */\n:root {\n  --navy-blue: 220 47% 18%;\n  --navy-light: 220 47% 28%;\n  --navy-dark: 220 47% 8%;\n  --navy-gold: 45 93% 58%;\n}\n\n/* Classes personalizadas da Marinha */\n@layer utilities {\n  .bg-navy {\n    background-color: hsl(var(--navy-blue));\n  }\n  \n  .bg-navy-light {\n    background-color: hsl(var(--navy-light));\n  }\n  \n  .bg-navy-dark {\n    background-color: hsl(var(--navy-dark));\n  }\n  \n  .text-navy {\n    color: hsl(var(--navy-blue));\n  }\n  \n  .border-navy {\n    border-color: hsl(var(--navy-blue));\n  }\n  \n  .hover\\:bg-navy-light:hover {\n    background-color: hsl(var(--navy-light));\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n  }\n}","size_bytes":2852},"client/src/main.tsx":{"content":"import { createRoot } from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":158},"client/src/vite-env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n    readonly VITE_BACKEND_HOST: string\n    readonly VITE_BACKEND_PORT: string\n  }\n  \n  interface ImportMeta {\n    readonly env: ImportMetaEnv\n  }","size_bytes":248},"client/src/components/DutyOfficersDisplay.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Users, AlertCircle, RefreshCw, Clock } from 'lucide-react';\nimport { MilitaryInsignia } from './MilitaryInsignia';\nimport { OFFICERS_LIST, MASTERS_LIST } from '../../../shared/officersData';\n\ninterface DutyOfficers {\n  id: number;\n  officerName: string; // Nome completo com gradua√ß√£o: \"1¬∫ Tenente KARINE\"\n  masterName: string; // Nome completo com gradua√ß√£o: \"1¬∫ Sargento RAFAELA\"\n  updatedAt: string;\n}\n\nexport const DutyOfficersDisplay = () => {\n  const [officers, setOfficers] = useState<DutyOfficers | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fun√ß√£o para converter nomes extensos para siglas\n  const convertToAbbreviation = (fullName: string): string => {\n    if (!fullName) return '';\n    \n    // Mapeamento de nomes extensos para siglas\n    const rankMapping = {\n      'Capit√£o-de-Mar-e-Guerra': 'CMG',\n      'Capit√£o-de-Fragata': 'CF', \n      'Capit√£o-de-Corveta': 'CC',\n      'Capit√£o-Tenente': 'CT',\n      'Primeiro-Tenente': '1T',\n      'Segundo-Tenente': '2T',\n      'Primeiro-Sargento': '1SG',\n      'Segundo-Sargento': '2SG',\n      'Terceiro-Sargento': '3SG'\n    };\n    \n    let convertedName = fullName;\n    \n    // Substituir nomes extensos por siglas\n    for (const [fullRank, abbrev] of Object.entries(rankMapping)) {\n      convertedName = convertedName.replace(fullRank, abbrev);\n    }\n    \n    return convertedName;\n  };\n\n  // Fun√ß√£o para extrair dados do militar do nome completo  \n  const extractMilitaryData = (fullName: string, type: 'officer' | 'master') => {\n    if (!fullName) return null;\n\n    \n    // Primeiro: Verificar se j√° est√° no formato correto (CT (IM) YAGO)\n    const regexAlreadyFormatted = /^([A-Z0-9]+)\\s*\\(([^)]+)\\)\\s+(.+)$/;\n    const matchFormatted = fullName.match(regexAlreadyFormatted);\n    \n    if (matchFormatted) {\n      const [, rank, specialty, name] = matchFormatted;\n      console.log('üéñÔ∏è J√° formatado corretamente:', { rank: rank.trim(), specialty: specialty.trim(), name: name.trim() });\n      return {\n        rank: rank.trim(),\n        specialty: specialty.trim(),\n        name: name.trim(),\n        fullName: fullName\n      };\n    }\n    \n    // Segundo: Converter de formato extenso e extrair nome para buscar na base\n    const convertedName = convertToAbbreviation(fullName);\n    \n    // Extrair apenas o nome do militar (√∫ltima palavra ou palavras)\n    const nameParts = convertedName.trim().split(' ');\n    let militaryName = '';\n    \n    // Se tem gradua√ß√£o no in√≠cio, pegar o resto como nome\n    if (nameParts[0].match(/^(CT|CF|CC|1T|2T|CMG|1SG|2SG|3SG)$/)) {\n      militaryName = nameParts.slice(1).join(' ');\n    } else {\n      // Caso n√£o tenha gradua√ß√£o reconhecida, usar o nome todo\n      militaryName = convertedName;\n    }\n    \n    \n    // Buscar dados completos nas listas\n    const militaryList = type === 'officer' ? OFFICERS_LIST : MASTERS_LIST;\n    const militaryData = militaryList.find(m => \n      m.name === militaryName || \n      m.name.includes(militaryName) || \n      militaryName.includes(m.name)\n    );\n    \n    if (militaryData) {\n      const rank = militaryData.rank.toUpperCase();\n      const specialty = militaryData.specialty;\n      const displayName = `${rank}${specialty ? ` (${specialty})` : ''} ${militaryData.name}`;\n      \n      console.log('üéñÔ∏è Dados encontrados na base:', { \n        rank, \n        specialty, \n        name: militaryData.name, \n        displayName \n      });\n      \n      return {\n        rank: rank,\n        specialty: specialty || null,\n        name: militaryData.name,\n        fullName: displayName\n      };\n    }\n    \n    console.log('üéñÔ∏è Militar n√£o encontrado na base, usando convers√£o simples');\n    \n    // Fallback: usar convers√£o simples se n√£o encontrar na base\n    const regexNoSpecialty = /^([A-Z0-9]+)\\s+([A-Z\\s]+)$/;\n    const matchNoSpecialty = convertedName.match(regexNoSpecialty);\n    \n    if (matchNoSpecialty) {\n      const [, rank, name] = matchNoSpecialty;\n      return {\n        rank: rank.trim(),\n        specialty: null,\n        name: name.trim(),\n        fullName: convertedName\n      };\n    }\n    \n    return {\n      rank: '',\n      specialty: null,\n      name: convertedName,\n      fullName: convertedName\n    };\n  };\n\n  // Detectar se estamos no Replit ou local\n  const getBackendUrl = (): string => {\n    const currentHost = window.location.hostname;\n    const currentOrigin = window.location.origin;\n\n    // Detectar Replit primeiro (mais espec√≠fico)\n    const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n    if (isReplit) {\n      console.log(`üåê DutyOfficers: Detectado Replit, usando mesmo origin: ${currentOrigin}`);\n      return `${currentOrigin}/api/duty-officers`;\n    }\n\n    // Ambiente local\n    if (currentHost === 'localhost' || currentHost === '127.0.0.1') {\n      console.log(`üåê DutyOfficers: Ambiente local, usando porta 5000`);\n      return `http://localhost:5000/api/duty-officers`;\n    }\n\n    // Fallback para outros ambientes (usar mesmo origin)\n    console.log(`üåê DutyOfficers: Outro ambiente, usando mesmo origin: ${currentOrigin}`);\n    return `${currentOrigin}/api/duty-officers`;\n  };\n\n  const loadOfficers = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const url = getBackendUrl();\n      console.log('üëÆ Carregando oficiais de servi√ßo...', url);\n      \n      const response = await fetch(url);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (data.success) {\n        setOfficers(data.officers);\n        console.log('üëÆ Oficiais carregados:', data.officers);\n      } else {\n        throw new Error(data.error || 'Erro desconhecido');\n      }\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Erro ao carregar oficiais';\n      setError(errorMsg);\n      console.error('‚ùå Erro ao carregar oficiais:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Carregar dados iniciais\n  useEffect(() => {\n    loadOfficers();\n  }, []);\n\n  // Auto-refresh a cada 5 minutos\n  useEffect(() => {\n    const interval = setInterval(() => {\n      loadOfficers();\n    }, 5 * 60 * 1000); // 5 minutos\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center gap-2 text-white/80\">\n        <Users className=\"w-4 h-4\" />\n        <span className=\"text-sm\">Carregando oficiais...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex items-center gap-2 text-white/80\">\n        <AlertCircle className=\"w-4 h-4\" />\n        <span className=\"text-sm\">Oficiais indispon√≠veis</span>\n        <button \n          onClick={loadOfficers}\n          className=\"p-1 hover:bg-white/10 rounded\"\n          disabled={loading}\n        >\n          <RefreshCw className={`w-3 h-3 ${loading ? 'animate-spin' : ''}`} />\n        </button>\n      </div>\n    );\n  }\n\n  if (!officers || (!officers.officerName && !officers.masterName)) {\n    return (\n      <div className=\"flex items-center gap-2 text-white/80\">\n        <Users className=\"w-4 h-4\" />\n        <span className=\"text-sm\">Oficiais n√£o definidos</span>\n        <button \n          onClick={loadOfficers}\n          className=\"p-1 hover:bg-white/10 rounded\"\n          title=\"Atualizar\"\n        >\n          <RefreshCw className=\"w-3 h-3\" />\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center gap-3 bg-gradient-to-r from-blue-800/20 to-blue-900/20 backdrop-blur-sm rounded-lg border border-blue-400/20 px-4 py-2 shadow-lg\">\n      {/* √çcone */}\n      <div className=\"p-1.5 bg-blue-500/20 rounded-full\">\n        <Users className=\"w-4 h-4 text-blue-300\" />\n      </div>\n      \n      {/* Informa√ß√µes dos oficiais */}\n      <div className=\"flex flex-col gap-1\">\n        {officers.officerName && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-blue-300 font-medium\">Oficial:</span>\n            {(() => {\n              const officerData = extractMilitaryData(officers.officerName, 'officer');\n              return officerData ? (\n                <div className=\"flex items-center gap-2\">\n                  <MilitaryInsignia \n                    rank={officerData.rank}\n                    specialty={officerData.specialty}\n                    size=\"sm\"\n                  />\n                  <span className=\"text-white font-semibold text-sm\">\n                    {officerData.fullName}\n                  </span>\n                </div>\n              ) : (\n                <span className=\"text-white font-semibold text-sm\">\n                  {officers.officerName}\n                </span>\n              );\n            })()}\n          </div>\n        )}\n        \n        {officers.masterName && (\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-blue-300 font-medium\">Contramestre:</span>\n            {(() => {\n              const masterData = extractMilitaryData(officers.masterName, 'master');\n              return masterData ? (\n                <div className=\"flex items-center gap-2\">\n                  <MilitaryInsignia \n                    rank={masterData.rank}\n                    specialty={masterData.specialty}\n                    size=\"sm\"\n                  />\n                  <span className=\"text-white font-semibold text-sm\">\n                    {masterData.fullName}\n                  </span>\n                </div>\n              ) : (\n                <span className=\"text-white font-semibold text-sm\">\n                  {officers.masterName}\n                </span>\n              );\n            })()}\n          </div>\n        )}\n      </div>\n      \n      {/* Bot√£o de refresh */}\n      <button \n        onClick={loadOfficers}\n        className=\"p-1.5 hover:bg-blue-500/20 rounded-full transition-all duration-200 hover:scale-110\"\n        title=\"Atualizar oficiais de servi√ßo\"\n        disabled={loading}\n      >\n        <RefreshCw className={`w-3 h-3 text-blue-300 ${loading ? 'animate-spin' : ''}`} />\n      </button>\n    </div>\n  );\n};","size_bytes":10273},"client/src/components/MenuDisplay.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useDisplay } from \"@/context/DisplayContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst MenuDisplay: React.FC = () => {\n  const { escalaDocuments } = useDisplay();\n  const [currentMenuIndex, setCurrentMenuIndex] = useState(0);\n\n  // Fun√ß√£o para filtrar apenas documentos de card√°pio\n  const getActiveMenus = () => {\n    return escalaDocuments.filter(doc => {\n      if (!doc.active) return false;\n      \n      // Detectar se √© card√°pio baseado no t√≠tulo ou URL\n      const isMenu = doc.title.toLowerCase().includes('card√°pio') || \n                    doc.title.toLowerCase().includes('cardapio') ||\n                    doc.url.toLowerCase().includes('card√°pio') ||\n                    doc.url.toLowerCase().includes('cardapio') ||\n                    doc.title.toLowerCase().includes('menu');\n      \n      console.log(`üìã MenuDisplay: Verificando documento \"${doc.title}\":`, {\n        active: doc.active,\n        isMenu: isMenu,\n        category: doc.category\n      });\n      \n      return isMenu;\n    });\n  };\n\n  const activeMenus = getActiveMenus();\n\n  // Log para debug\n  useEffect(() => {\n    console.log(\"üçΩÔ∏è MenuDisplay - Estado dos card√°pios:\", {\n      totalEscalaDocuments: escalaDocuments.length,\n      activeMenus: activeMenus.length,\n      currentMenuIndex: currentMenuIndex,\n      menus: activeMenus.map(m => ({\n        title: m.title,\n        url: m.url,\n        category: m.category\n      }))\n    });\n  }, [escalaDocuments, activeMenus.length, currentMenuIndex]);\n\n  // Alternar entre card√°pios automaticamente\n  useEffect(() => {\n    if (activeMenus.length > 1) {\n      const interval = setInterval(() => {\n        setCurrentMenuIndex(prevIndex => \n          (prevIndex + 1) % activeMenus.length\n        );\n      }, 15000); // 15 segundos entre card√°pios\n\n      return () => clearInterval(interval);\n    } else {\n      setCurrentMenuIndex(0);\n    }\n  }, [activeMenus.length]);\n\n  // Resetar √≠ndice se necess√°rio\n  useEffect(() => {\n    if (currentMenuIndex >= activeMenus.length) {\n      setCurrentMenuIndex(0);\n    }\n  }, [activeMenus.length, currentMenuIndex]);\n\n  // Fun√ß√£o para obter URL completa do backend\n  const getBackendUrl = (path: string): string => {\n    if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n      return path;\n    }\n    \n    const currentHost = window.location.hostname;\n    \n    if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n      if (path.startsWith('/')) {\n        return `http://${currentHost}:5000${path}`;\n      }\n      return `http://${currentHost}:5000/${path}`;\n    }\n    \n    const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n    \n    if (isReplit) {\n      const currentOrigin = window.location.origin;\n      if (path.startsWith('/')) {\n        return `${currentOrigin}${path}`;\n      }\n      return `${currentOrigin}/${path}`;\n    } else {\n      if (path.startsWith('/')) {\n        return `http://localhost:5000${path}`;\n      }\n      return `http://localhost:5000/${path}`;\n    }\n  };\n\n  if (activeMenus.length === 0) {\n    return (\n      <Card className=\"h-full border-orange-400\">\n        <CardHeader className=\"bg-gradient-to-r from-orange-600 to-amber-600 text-white py-1.5\">\n          <CardTitle className=\"text-center text-sm font-medium flex items-center justify-center gap-2\">\n            üçΩÔ∏è Card√°pio Semanal\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-full p-4\">\n          <div className=\"text-center text-gray-500\">\n            <div className=\"text-4xl mb-2\">üçΩÔ∏è</div>\n            <div className=\"text-sm\">Nenhum card√°pio dispon√≠vel</div>\n            <div className=\"text-xs mt-1 text-gray-400\">\n              Fa√ßa upload de um card√°pio no painel administrativo\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const currentMenu = activeMenus[currentMenuIndex];\n  \n  if (!currentMenu) {\n    console.warn(\"üçΩÔ∏è Card√°pio atual n√£o encontrado, resetando √≠ndice\");\n    if (currentMenuIndex !== 0) {\n      setCurrentMenuIndex(0);\n    }\n    return (\n      <Card className=\"h-full border-orange-400\">\n        <CardHeader className=\"bg-gradient-to-r from-orange-600 to-amber-600 text-white py-1.5\">\n          <CardTitle className=\"text-center text-sm font-medium\">\n            üçΩÔ∏è Card√°pio Semanal\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-full p-4\">\n          <div className=\"text-center text-gray-500\">\n            <div className=\"text-4xl mb-2\">‚ö†Ô∏è</div>\n            <div className=\"text-sm\">Erro ao carregar card√°pio</div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const menuUrl = getBackendUrl(currentMenu.url);\n\n  return (\n    <Card className=\"h-full border-orange-400 overflow-hidden\">\n      <CardHeader className=\"bg-gradient-to-r from-orange-600 to-amber-600 text-white py-1.5\">\n        <CardTitle className=\"text-center flex items-center justify-between text-sm\">\n          <span className=\"font-medium flex items-center gap-2\">\n            üçΩÔ∏è Card√°pio Semanal\n          </span>\n          <div className=\"flex items-center gap-2 text-xs\">\n            {activeMenus.length > 1 && (\n              <span className=\"opacity-75\">\n                {currentMenuIndex + 1}/{activeMenus.length}\n              </span>\n            )}\n            <span className=\"opacity-75\">üìÖ</span>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"p-0 h-[calc(100%-2.5rem)]\">\n        <div className=\"h-full flex flex-col\">\n          {/* Barra de t√≠tulo do card√°pio */}\n          <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 px-3 py-2 border-b border-orange-200\">\n            <div className=\"text-sm font-semibold text-orange-800 truncate\">\n              {currentMenu.title}\n            </div>\n            {currentMenu.category && (\n              <div className=\"text-xs text-orange-600 capitalize\">\n                {currentMenu.category === \"oficial\" ? \"Oficiais\" : \n                 currentMenu.category === \"praca\" ? \"Pra√ßas\" : \n                 currentMenu.category}\n              </div>\n            )}\n          </div>\n          \n          {/* Conte√∫do do card√°pio */}\n          <div className=\"flex-1 overflow-hidden bg-white\">\n            {menuUrl ? (\n              <div className=\"w-full h-full flex items-center justify-center p-2\">\n                <img\n                  src={menuUrl}\n                  alt={`Card√°pio - ${currentMenu.title}`}\n                  className=\"max-w-full max-h-full object-contain shadow-sm rounded\"\n                  onError={(e) => {\n                    console.error(\"‚ùå Erro ao carregar card√°pio:\", menuUrl);\n                    (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2ZlZjJlMiIvPjx0ZXh0IHg9IjIwMCIgeT0iMTMwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiIGZpbGw9IiNkOTc3MDYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXI8L3RleHQ+PHRleHQgeD0iMjAwIiB5PSIxNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2Q5NzcwNiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Y2FyZMOhcGlvPC90ZXh0Pjx0ZXh0IHg9IjIwMCIgeT0iMTgwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZpbGw9IiNkOTc3MDYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0c3BhbiB4PSIyMDAiIHk9IjE4MCI+8J+NvTwvdHNwYW4+PC90ZXh0Pjwvc3ZnPg==';\n                  }}\n                  onLoad={() => {\n                    console.log(`‚úÖ Card√°pio carregado com sucesso: ${currentMenu.title}`);\n                  }}\n                />\n              </div>\n            ) : (\n              <div className=\"flex items-center justify-center h-full text-center text-gray-500\">\n                <div>\n                  <div className=\"text-4xl mb-2\">üçΩÔ∏è</div>\n                  <div className=\"text-sm\">URL do card√°pio n√£o encontrada</div>\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Indicador de m√∫ltiplos card√°pios */}\n          {activeMenus.length > 1 && (\n            <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 px-3 py-2 border-t border-orange-200\">\n              <div className=\"flex justify-center space-x-1\">\n                {activeMenus.map((_, index) => (\n                  <div\n                    key={index}\n                    className={`w-2 h-2 rounded-full transition-colors ${\n                      index === currentMenuIndex \n                        ? \"bg-orange-500\"\n                        : \"bg-orange-200\"\n                    }`}\n                  />\n                ))}\n              </div>\n              <div className=\"text-xs text-center text-orange-600 mt-1\">\n                Pr√≥ximo card√°pio em 15 segundos\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default MenuDisplay;","size_bytes":9151},"client/src/components/MilitaryEditor.tsx":{"content":"import React, { useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport type { MilitaryPersonnel } from '../../../shared/schema';\n\ninterface MilitaryEditorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  military: MilitaryPersonnel | null;\n  onSave: (updatedMilitary: Partial<MilitaryPersonnel>) => Promise<void>;\n}\n\nconst RANKS = {\n  officer: [\n    { value: 'cmg', label: 'CMG - Capit√£o de Mar e Guerra' },\n    { value: 'cf', label: 'CF - Capit√£o de Fragata' },\n    { value: 'cc', label: 'CC - Capit√£o de Corveta' },\n    { value: 'ct', label: 'CT - Capit√£o-Tenente' },\n    { value: '1t', label: '1T - Primeiro-Tenente' },\n    { value: '2t', label: '2T - Segundo-Tenente' }\n  ],\n  master: [\n    { value: '1sg', label: '1SG - Primeiro-Sargento' },\n    { value: '2sg', label: '2SG - Segundo-Sargento' },\n    { value: '3sg', label: '3SG - Terceiro-Sargento' }\n  ]\n};\n\nconst SPECIALTIES = [\n  { value: 'IM', label: 'IM - Intend√™ncia da Marinha' },\n  { value: 'T', label: 'T - Transmiss√µes' },\n  { value: 'QC-IM', label: 'QC-IM - Quadro Complementar Intend√™ncia' },\n  { value: 'RM2-T', label: 'RM2-T - Reserva Mobiliz√°vel Transmiss√µes' },\n  { value: 'AA', label: 'AA - Administra√ß√£o' },\n  { value: 'PD', label: 'PD - Praticagem' },\n  { value: 'CL', label: 'CL - Comunica√ß√µes' },\n  { value: 'ES', label: 'ES - Eletr√¥nica' },\n  { value: 'EP', label: 'EP - Engenharia' },\n  { value: 'PL', label: 'PL - Pilotagem' },\n  { value: 'QI', label: 'QI - Qu√≠mica Industrial' }\n];\n\nexport function MilitaryEditor({ isOpen, onClose, military, onSave }: MilitaryEditorProps) {\n  const [formData, setFormData] = useState({\n    name: military?.name || '',\n    rank: military?.rank || '',\n    specialty: military?.specialty || 'none',\n    type: military?.type || 'officer' as 'officer' | 'master'\n  });\n  const [loading, setLoading] = useState(false);\n\n  React.useEffect(() => {\n    if (military) {\n      setFormData({\n        name: military.name,\n        rank: military.rank,\n        specialty: military.specialty || 'none',\n        type: military.type\n      });\n    }\n  }, [military]);\n\n  const handleSave = async () => {\n    if (!formData.name.trim() || !formData.rank) return;\n    \n    setLoading(true);\n    try {\n      const rankData = RANKS[formData.type].find(r => r.value === formData.rank);\n      \n      await onSave({\n        name: formData.name.trim().toUpperCase(),\n        rank: formData.rank as any,\n        specialty: formData.specialty === 'none' ? null : formData.specialty || null,\n        type: formData.type,\n        fullRankName: rankData?.label.split(' - ')[1] || formData.rank\n      });\n      \n      onClose();\n    } catch (error) {\n      console.error('Erro ao salvar militar:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const currentRankData = RANKS[formData.type].find(r => r.value === formData.rank);\n  const currentSpecialtyData = SPECIALTIES.find(s => s.value === formData.specialty);\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>\n            {military ? 'Editar Militar' : 'Novo Militar'}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          {/* Tipo */}\n          <div>\n            <Label>Tipo</Label>\n            <Select \n              value={formData.type} \n              onValueChange={(value: 'officer' | 'master') => {\n                setFormData({ ...formData, type: value, rank: '', specialty: '' });\n              }}\n            >\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"officer\">Oficial</SelectItem>\n                <SelectItem value=\"master\">Pra√ßa</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Nome */}\n          <div>\n            <Label>Nome</Label>\n            <Input\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"Ex: JO√ÉO SILVA\"\n            />\n          </div>\n\n          {/* Gradua√ß√£o */}\n          <div>\n            <Label>Gradua√ß√£o</Label>\n            <Select \n              value={formData.rank} \n              onValueChange={(value) => setFormData({ ...formData, rank: value })}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecione a gradua√ß√£o\" />\n              </SelectTrigger>\n              <SelectContent>\n                {RANKS[formData.type].map((rank) => (\n                  <SelectItem key={rank.value} value={rank.value}>\n                    {rank.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Especialidade */}\n          <div>\n            <Label>Especialidade (Opcional)</Label>\n            <Select \n              value={formData.specialty} \n              onValueChange={(value) => setFormData({ ...formData, specialty: value })}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecione a especialidade\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"none\">Sem especialidade</SelectItem>\n                {SPECIALTIES.map((spec) => (\n                  <SelectItem key={spec.value} value={spec.value}>\n                    {spec.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Preview */}\n          {formData.name && formData.rank && (\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-800 rounded\">\n              <Label className=\"text-sm font-medium\">Preview:</Label>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <Badge variant=\"outline\">\n                  {formData.rank.toUpperCase()}\n                  {formData.specialty && ` (${formData.specialty.toUpperCase()})`}\n                  {' '}\n                  {formData.name.toUpperCase()}\n                </Badge>\n              </div>\n            </div>\n          )}\n\n          {/* Bot√µes */}\n          <div className=\"flex gap-2 pt-4\">\n            <Button variant=\"outline\" onClick={onClose} className=\"flex-1\">\n              Cancelar\n            </Button>\n            <Button \n              onClick={handleSave} \n              disabled={!formData.name.trim() || !formData.rank || loading}\n              className=\"flex-1\"\n            >\n              {loading ? 'Salvando...' : 'Salvar'}\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":7075},"client/src/components/MilitaryInsignia.tsx":{"content":"import { getMilitaryInsigniaImage, getMilitaryInsigniaDescription, hasInsignia } from '@/../../shared/insigniaData';\n\ninterface MilitaryInsigniaProps {\n  rank: string;\n  specialty?: string | null;\n  name?: string;\n  size?: 'sm' | 'md' | 'lg';\n  showDescription?: boolean;\n  className?: string;\n}\n\nexport function MilitaryInsignia({\n  rank,\n  specialty,\n  name,\n  size = 'md',\n  showDescription = false,\n  className = ''\n}: MilitaryInsigniaProps) {\n  // üîß CORRE√á√ÉO: Converter undefined para null\n  const normalizedSpecialty = specialty === undefined ? null : specialty;\n  \n  const insigniaImage = getMilitaryInsigniaImage(rank, normalizedSpecialty);\n  const description = getMilitaryInsigniaDescription(rank, normalizedSpecialty);\n  \n  if (!hasInsignia(rank, normalizedSpecialty)) {\n    // üîß CORRE√á√ÉO: Mostrar debug quando n√£o encontrar ins√≠gnia\n    console.log('üéñÔ∏è Ins√≠gnia n√£o encontrada:', { rank, specialty: normalizedSpecialty });\n    return null; // N√£o exibe nada se n√£o houver ins√≠gnia\n  }\n\n  // üîß CORRE√á√ÉO: Debug quando encontrar ins√≠gnia\n  console.log('üéñÔ∏è Ins√≠gnia encontrada:', { \n    rank, \n    specialty: normalizedSpecialty, \n    imagePath: insigniaImage,\n    description \n  });\n\n  const sizeClasses = {\n    sm: 'w-6 h-6',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12'\n  };\n\n  return (\n    <div className={`flex items-center gap-2 ${className}`}>\n      {insigniaImage && (\n        <img\n          src={insigniaImage}\n          alt={description || `Ins√≠gnia ${rank}`}\n          className={`${sizeClasses[size]} object-contain`}\n          onError={(e) => {\n            // üîß CORRE√á√ÉO: Debug melhorado para erros de imagem\n            console.error('‚ùå Erro ao carregar ins√≠gnia:', {\n              rank,\n              specialty: normalizedSpecialty,\n              imagePath: insigniaImage,\n              error: 'Imagem n√£o carregou'\n            });\n            e.currentTarget.style.display = 'none';\n          }}\n          onLoad={() => {\n            // üîß CORRE√á√ÉO: Debug quando imagem carrega com sucesso\n            console.log('‚úÖ Ins√≠gnia carregada com sucesso:', {\n              rank,\n              specialty: normalizedSpecialty,\n              imagePath: insigniaImage\n            });\n          }}\n        />\n      )}\n\n      {showDescription && description && (\n        <span className=\"text-sm text-gray-600\">\n          {description}\n        </span>\n      )}\n\n      {name && (\n        <span className=\"font-medium\">\n          {name}\n        </span>\n      )}\n    </div>\n  );\n}\n\n// Componente espec√≠fico para exibir militar com ins√≠gnia\ninterface MilitaryWithInsigniaProps {\n  military: {\n    name: string;\n    rank: string;\n    specialty?: string | null;\n    fullRankName?: string;\n  };\n  size?: 'sm' | 'md' | 'lg';\n  showFullRank?: boolean;\n  className?: string;\n}\n\nexport function MilitaryWithInsignia({\n  military,\n  size = 'md',\n  showFullRank = false,\n  className = ''\n}: MilitaryWithInsigniaProps) {\n  const displayName = showFullRank && military.fullRankName\n    ? `${military.fullRankName} ${military.name}`\n    : military.name;\n\n  // üîß CORRE√á√ÉO: Normalizar specialty\n  const normalizedSpecialty = military.specialty === undefined ? null : military.specialty;\n\n  return (\n    <div className={`flex items-center gap-3 ${className}`}>\n      <MilitaryInsignia\n        rank={military.rank}\n        specialty={normalizedSpecialty}\n        size={size}\n      />\n      <div className=\"flex flex-col\">\n        <span className=\"font-medium text-gray-900\">\n          {displayName}\n        </span>\n        {normalizedSpecialty && (\n          <span className=\"text-xs text-gray-500 uppercase\">\n            {normalizedSpecialty}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Hook para buscar ins√≠gnia de um militar\nexport function useMilitaryInsignia(rank: string, specialty?: string | null) {\n  // üîß CORRE√á√ÉO: Normalizar specialty no hook tamb√©m\n  const normalizedSpecialty = specialty === undefined ? null : specialty;\n  \n  return {\n    hasInsignia: hasInsignia(rank, normalizedSpecialty),\n    imagePath: getMilitaryInsigniaImage(rank, normalizedSpecialty),\n    description: getMilitaryInsigniaDescription(rank, normalizedSpecialty)\n  };\n}","size_bytes":4225},"client/src/components/NoticeDisplay.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useDisplay, Notice } from \"@/context/DisplayContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst NoticeDisplay: React.FC = () => {\n  const { notices } = useDisplay();\n  const [currentNoticeIndex, setCurrentNoticeIndex] = useState(0);\n\n  // CORRE√á√ÉO: Fun√ß√£o melhorada para filtrar avisos ativos\n  const getActiveNotices = (): Notice[] => {\n    const now = new Date();\n    \n    return notices.filter(notice => {\n      try {\n        // CORRE√á√ÉO: Garantir que as datas sejam objetos Date v√°lidos\n        let startDate: Date;\n        let endDate: Date;\n        \n        if (notice.startDate instanceof Date) {\n          startDate = notice.startDate;\n        } else if (typeof notice.startDate === 'string') {\n          startDate = new Date(notice.startDate);\n        } else {\n          console.warn(\"üì¢ Aviso com startDate inv√°lida:\", notice.title);\n          return false;\n        }\n        \n        if (notice.endDate instanceof Date) {\n          endDate = notice.endDate;\n        } else if (typeof notice.endDate === 'string') {\n          endDate = new Date(notice.endDate);\n        } else {\n          console.warn(\"üì¢ Aviso com endDate inv√°lida:\", notice.title);\n          return false;\n        }\n        \n        // CORRE√á√ÉO: Verificar se as datas s√£o v√°lidas\n        if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {\n          console.warn(\"üì¢ Aviso com datas inv√°lidas:\", notice.title, {\n            startDate: notice.startDate,\n            endDate: notice.endDate\n          });\n          return false;\n        }\n        \n        // Verificar se est√° ativo e dentro do per√≠odo\n        const isActive = notice.active === true;\n        const isInPeriod = now >= startDate && now <= endDate;\n        \n        console.log(`üì¢ Verificando aviso \"${notice.title}\":`, {\n          active: isActive,\n          inPeriod: isInPeriod,\n          startDate: startDate.toISOString(),\n          endDate: endDate.toISOString(),\n          now: now.toISOString()\n        });\n        \n        return isActive && isInPeriod;\n        \n      } catch (error) {\n        console.error(\"‚ùå Erro ao processar aviso:\", notice.title, error);\n        return false;\n      }\n    });\n  };\n\n  const activeNotices = getActiveNotices();\n\n  // CORRE√á√ÉO: Log melhorado para debug\n  useEffect(() => {\n    console.log(\"üì¢ NoticeDisplay - Estado dos avisos:\", {\n      totalNotices: notices.length,\n      activeNotices: activeNotices.length,\n      currentIndex: currentNoticeIndex,\n      avisos: notices.map(n => ({\n        title: n.title,\n        active: n.active,\n        startDate: n.startDate,\n        endDate: n.endDate,\n        isStartDateValid: n.startDate instanceof Date || typeof n.startDate === 'string',\n        isEndDateValid: n.endDate instanceof Date || typeof n.endDate === 'string'\n      }))\n    });\n  }, [notices, activeNotices.length, currentNoticeIndex]);\n\n  // Alternar entre avisos automaticamente\n  useEffect(() => {\n    if (activeNotices.length > 1) {\n      const interval = setInterval(() => {\n        setCurrentNoticeIndex(prevIndex => \n          (prevIndex + 1) % activeNotices.length\n        );\n      }, 10000); // 10 segundos\n\n      return () => clearInterval(interval);\n    } else {\n      // Se h√° apenas um aviso ou nenhum, resetar √≠ndice\n      setCurrentNoticeIndex(0);\n    }\n  }, [activeNotices.length]);\n\n  // CORRE√á√ÉO: Resetar √≠ndice se necess√°rio\n  useEffect(() => {\n    if (currentNoticeIndex >= activeNotices.length) {\n      setCurrentNoticeIndex(0);\n    }\n  }, [activeNotices.length, currentNoticeIndex]);\n\n  const getPriorityColor = (priority: \"high\" | \"medium\" | \"low\") => {\n    switch (priority) {\n      case \"high\":\n        return \"bg-red-500 border-red-600\";\n      case \"medium\":\n        return \"bg-yellow-500 border-yellow-600\";\n      case \"low\":\n        return \"bg-green-500 border-green-600\";\n      default:\n        return \"bg-blue-500 border-blue-600\";\n    }\n  };\n\n  const getPriorityIcon = (priority: \"high\" | \"medium\" | \"low\") => {\n    switch (priority) {\n      case \"high\":\n        return \"üî¥\";\n      case \"medium\":\n        return \"üü°\";\n      case \"low\":\n        return \"üü¢\";\n      default:\n        return \"üîµ\";\n    }\n  };\n\n  if (activeNotices.length === 0) {\n    return (\n      <Card className=\"h-full border-navy\">\n        <CardHeader className=\"bg-navy text-white py-1.5\">\n          <CardTitle className=\"text-center text-sm font-medium\">\n            üì¢ Avisos Importantes\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-full p-4\">\n          <div className=\"text-center text-gray-500\">\n            <div className=\"text-4xl mb-2\">üì¢</div>\n            <div className=\"text-sm\">Nenhum aviso ativo</div>\n            <div className=\"text-xs mt-1 text-gray-400\">\n              Total de avisos: {notices.length}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const currentNotice = activeNotices[currentNoticeIndex];\n  \n  // CORRE√á√ÉO: Verifica√ß√£o adicional de seguran√ßa\n  if (!currentNotice) {\n    console.warn(\"üì¢ Aviso atual n√£o encontrado, resetando √≠ndice\");\n    if (currentNoticeIndex !== 0) {\n      setCurrentNoticeIndex(0);\n    }\n    return (\n      <Card className=\"h-full border-navy\">\n        <CardHeader className=\"bg-navy text-white py-1.5\">\n          <CardTitle className=\"text-center text-sm font-medium\">\n            üì¢ Avisos Importantes\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-full p-4\">\n          <div className=\"text-center text-gray-500\">\n            <div className=\"text-4xl mb-2\">‚ö†Ô∏è</div>\n            <div className=\"text-sm\">Erro ao carregar aviso</div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"h-full border-navy overflow-hidden\">\n      <CardHeader className=\"bg-navy text-white py-1.5\">\n        <CardTitle className=\"text-center flex items-center justify-between text-sm\">\n          <span className=\"font-medium\">üì¢ Avisos Importantes</span>\n          <div className=\"flex items-center gap-2 text-xs\">\n            {activeNotices.length > 1 && (\n              <span className=\"opacity-75\">\n                {currentNoticeIndex + 1}/{activeNotices.length}\n              </span>\n            )}\n            <span className=\"opacity-75\">\n              {getPriorityIcon(currentNotice.priority)}\n            </span>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"p-0 h-[calc(100%-2.5rem)]\">\n        <div className=\"h-full flex flex-col\">\n          {/* Barra de prioridade */}\n          <div \n            className={`h-1 ${getPriorityColor(currentNotice.priority)}`}\n          />\n          \n          {/* Conte√∫do do aviso */}\n          <div className=\"flex-1 p-3 overflow-y-auto\">\n            <div className=\"mb-2\">\n              <h3 className=\"font-bold text-sm text-navy mb-1 flex items-center gap-2\">\n                {getPriorityIcon(currentNotice.priority)}\n                {currentNotice.title}\n              </h3>\n              <div className=\"text-xs text-gray-500 mb-2\">\n                Prioridade: {\n                  currentNotice.priority === \"high\" ? \"üî¥ Alta\" :\n                  currentNotice.priority === \"medium\" ? \"üü° M√©dia\" : \"üü¢ Baixa\"\n                }\n              </div>\n            </div>\n            \n            <div className=\"text-sm text-gray-700 leading-relaxed\">\n              {currentNotice.content}\n            </div>\n            \n     \n          </div>\n          \n          {/* Indicador de m√∫ltiplos avisos */}\n          {activeNotices.length > 1 && (\n            <div className=\"bg-gray-50 px-3 py-2 border-t\">\n              <div className=\"flex justify-center space-x-1\">\n                {activeNotices.map((_, index) => (\n                  <div\n                    key={index}\n                    className={`w-2 h-2 rounded-full transition-colors ${\n                      index === currentNoticeIndex \n                        ? getPriorityColor(activeNotices[index].priority).split(' ')[0]\n                        : \"bg-gray-300\"\n                    }`}\n                  />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default NoticeDisplay;","size_bytes":8466},"client/src/components/PDFViewer copy.tsx":{"content":"import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useDisplay } from \"@/context/DisplayContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst IS_DEV_MODE = process.env.NODE_ENV === 'development';\n\n// Configurar PDF.js\ndeclare global {\n  interface Window {\n    pdfjsLib: any;\n  }\n}\n\ninterface PDFViewerProps {\n  documentType: \"plasa\" | \"escala\";\n  title: string;\n  scrollSpeed?: \"slow\" | \"normal\" | \"fast\";\n  autoRestartDelay?: number;\n}\n\n// Classe para controlar o scroll autom√°tico cont√≠nuo\nclass ContinuousAutoScroller {\n  private isScrolling: boolean = false;\n  private animationId: number | null = null;\n  private currentPosition: number = 0;\n  private speed: number = 1;\n  private container: HTMLElement | null = null;\n  private onCompleteCallback?: () => void;\n  private fixedMaxScroll: number = 0;\n\n  constructor(\n    container: HTMLElement,\n    speed: number = 1,\n    onComplete?: () => void\n  ) {\n    this.container = container;\n    this.speed = speed;\n    this.onCompleteCallback = onComplete;\n  }\n\n  start() {\n    if (!this.container || this.isScrolling) return;\n\n    this.isScrolling = true;\n    this.currentPosition = 0;\n    \n    this.fixedMaxScroll = this.container.scrollHeight - this.container.clientHeight;\n    \n    console.log(`üìú PLASA: Iniciando scroll - Total: ${this.container.scrollHeight}px, Vis√≠vel: ${this.container.clientHeight}px, Para rolar: ${this.fixedMaxScroll}px`);\n    \n    if (this.fixedMaxScroll <= 0) {\n      console.log(\"‚ö†Ô∏è PLASA: N√£o h√° conte√∫do suficiente para scroll\");\n      this.stop();\n      return;\n    }\n\n    this.container.scrollTop = 0;\n    this.currentPosition = 0;\n    this.scroll();\n  }\n\n  private scroll = () => {\n    if (!this.isScrolling || !this.container) return;\n\n    const maxScroll = this.fixedMaxScroll;\n    \n    if (this.currentPosition < maxScroll - 10) {\n      this.currentPosition += this.speed;\n      this.container.scrollTop = this.currentPosition;\n      this.animationId = requestAnimationFrame(this.scroll);\n    } else {\n      this.container.scrollTop = maxScroll;\n      console.log(`‚úÖ PLASA: Scroll completo at√© o final do documento`);\n      \n      setTimeout(() => {\n        this.stop();\n        this.onCompleteCallback?.();\n      }, 2000);\n    }\n  };\n\n  stop() {\n    this.isScrolling = false;\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n  }\n\n  reset() {\n    this.stop();\n    if (this.container) {\n      this.container.scrollTop = 0;\n      this.currentPosition = 0;\n    }\n  }\n\n  setSpeed(newSpeed: number) {\n    this.speed = newSpeed;\n  }\n\n  get isActive() {\n    return this.isScrolling;\n  }\n}\n\nconst PDFViewer: React.FC<PDFViewerProps> = ({ \n  documentType, \n  title, \n  scrollSpeed = \"normal\",\n  autoRestartDelay = 3\n}) => {\n  // CORRE√á√ÉO: Usar currentEscalaIndex do contexto\n  const { activeEscalaDoc, activePlasaDoc, currentEscalaIndex, escalaDocuments } = useDisplay();\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const [isAutomationPaused, setIsAutomationPaused] = useState(false);\n  const [savedPageUrls, setSavedPageUrls] = useState<string[]>([]);\n  const [loadingProgress, setLoadingProgress] = useState(0);\n  const [debugInfo, setDebugInfo] = useState<any>({});\n  const [escalaImageUrl, setEscalaImageUrl] = useState<string | null>(null);\n\n  const scrollerRef = useRef<ContinuousAutoScroller | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const restartTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Configura√ß√µes\n  const getScrollSpeed = () => {\n    switch (scrollSpeed) {\n      case \"slow\": return 1;\n      case \"fast\": return 5;\n      default: return 3; // normal\n    }\n  };\n\n  const SCROLL_SPEED = getScrollSpeed();\n  const RESTART_DELAY = autoRestartDelay * 1000;\n  const PDF_SCALE = 1.5;\n\n  // Fun√ß√£o para obter a URL completa do servidor backend - DETECTAR AMBIENTE\n  const getBackendUrl = (path: string): string => {\n    if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n      return path;\n    }\n    \n    // Detectar se estamos no Replit ou desenvolvimento local\n    const isReplit = window.location.hostname.includes('replit.dev') || window.location.hostname.includes('replit.co');\n    \n    if (isReplit) {\n      // No Replit, usar o mesmo dom√≠nio atual\n      const currentOrigin = window.location.origin;\n      \n      if (path.startsWith('/')) {\n        return `${currentOrigin}${path}`;\n      }\n      return `${currentOrigin}/${path}`;\n    } else {\n      // Desenvolvimento local - usar localhost:5000\n      const backendPort = '5000';\n      const backendHost = 'localhost';\n      \n      if (path.startsWith('/')) {\n        return `http://${backendHost}:${backendPort}${path}`;\n      }\n      return `http://${backendHost}:${backendPort}/${path}`;\n    }\n  };\n\n  // CORRE√á√ÉO: Fun√ß√£o para determinar a URL do documento com altern√¢ncia\n  const getDocumentUrl = () => {\n    if (documentType === \"plasa\") {\n      if (activePlasaDoc?.url) {\n        console.log(\"üìÑ PLASA: Usando documento do admin:\", activePlasaDoc.url);\n        return getBackendUrl(activePlasaDoc.url);\n      }\n      console.log(\"üìÑ PLASA: Nenhum documento ativo\");\n      return null;\n    } else if (documentType === \"escala\") {\n      // CORRE√á√ÉO: Usar a escala atual baseada no √≠ndice\n      const activeEscalas = escalaDocuments.filter(doc => doc.active);\n      \n      if (activeEscalas.length === 0) {\n        console.log(\"üìã ESCALA: Nenhuma escala ativa\");\n        return null;\n      }\n      \n      const currentEscala = activeEscalas[currentEscalaIndex % activeEscalas.length];\n      \n      if (currentEscala?.url) {\n        console.log(`üìã ESCALA: Usando escala ${currentEscalaIndex + 1}/${activeEscalas.length}:`, {\n          title: currentEscala.title,\n          category: currentEscala.category,\n          url: currentEscala.url\n        });\n        return getBackendUrl(currentEscala.url);\n      }\n      \n      console.log(\"üìã ESCALA: Escala atual sem URL v√°lida\");\n      return null;\n    }\n    return null;\n  };\n\n  // CORRE√á√ÉO: Obter documento da escala atual\n  const getCurrentEscalaDoc = () => {\n    const activeEscalas = escalaDocuments.filter(doc => doc.active);\n    if (activeEscalas.length === 0) return null;\n    return activeEscalas[currentEscalaIndex % activeEscalas.length] || null;\n  };\n\n  // Verificar se arquivo √© imagem\n  const isImageFile = (url: string) => {\n    return (\n      url.startsWith('data:image') ||\n      url.startsWith('blob:') ||\n      /\\.(jpg|jpeg|png|gif|webp)$/i.test(url)\n    );\n  };\n   \n\n0  // Carregar PDF.js APENAS quando necess√°rio\n  const loadPDFJS = async () => {\n    if (window.pdfjsLib) return window.pdfjsLib;\n\n    console.log(\"üìö Carregando PDF.js...\");\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';\n      script.onload = () => {\n        window.pdfjsLib.GlobalWorkerOptions.workerSrc = \n          'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';\n        window.pdfjsLib.GlobalWorkerOptions.verbosity = 0;\n        console.log(\"‚úÖ PDF.js carregado com sucesso\");\n        resolve(window.pdfjsLib);\n      };\n      script.onerror = () => {\n        console.error(\"‚ùå Erro ao carregar PDF.js\");\n        reject(new Error('Falha ao carregar PDF.js'));\n      };\n      document.head.appendChild(script);\n    });\n  };\n\n  // Fun√ß√£o melhorada para obter dados do PDF\n// Fun√ß√£o melhorada para obter dados do PDF com tratamento de CORS\n  const getPDFData = async (url: string): Promise<ArrayBuffer | Uint8Array> => {\n    console.log(\"üì• Obtendo dados do PDF:\", url);\n    \n    try {\n      if (url.startsWith('blob:')) {\n        console.log(\"üîó URL blob detectada\");\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(`Erro blob: ${response.status}`);\n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ Blob convertido: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n      }\n      \n      // Primeira tentativa com headers melhorados\n      try {\n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/pdf,*/*'\n          },\n          mode: 'cors',\n          cache: 'no-cache',\n          credentials: 'omit'\n        });\n        \n        if (!response.ok) throw new Error(`HTTP: ${response.status}`);\n        \n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ PDF carregado: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n        \n      } catch (corsError) {\n        console.warn(\"‚ö†Ô∏è Erro CORS, tentando proxy:\", corsError);\n        \n        // Fallback: usar proxy\n        const proxyUrl = getBackendUrl(`/api/proxy-pdf?url=${encodeURIComponent(url)}`);\n        console.log(\"üîÑ Usando proxy:\", proxyUrl);\n        \n        const response = await fetch(proxyUrl);\n        if (!response.ok) throw new Error(`Proxy: ${response.status}`);\n        \n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ PDF via proxy: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n      }\n      \n    } catch (error) {\n      console.error(\"‚ùå Erro ao obter PDF:\", error);\n      throw error;\n    }\n  };\n\n  // Fun√ß√£o para salvar p√°gina como imagem no servidor\n  const savePageAsImage = async (canvas: HTMLCanvasElement, pageNum: number): Promise<string> => {\n    return new Promise((resolve) => {\n      canvas.toBlob(async (blob) => {\n        if (!blob) {\n          console.error(`‚ùå Erro ao converter p√°gina ${pageNum} para blob`);\n          resolve(canvas.toDataURL('image/jpeg', 0.85));\n          return;\n        }\n\n        try {\n          const formData = new FormData();\n          formData.append('file', blob, `plasa-page-${pageNum}.jpg`);\n          formData.append('pageNumber', String(pageNum));\n          \n          const uploadUrl = getBackendUrl('/api/upload-plasa-page');\n          \n          const response = await fetch(uploadUrl, {\n            method: 'POST',\n            body: formData,\n          });\n\n          if (response.ok) {\n            const result = await response.json();\n            const savedUrl = result.data?.url || result.url || `/plasa-pages/plasa-page-${pageNum}.jpg`;\n            const fullSavedUrl = getBackendUrl(savedUrl);\n            console.log(`üíæ P√°gina ${pageNum} salva no servidor: ${fullSavedUrl}`);\n            resolve(fullSavedUrl);\n          } else {\n            throw new Error(`Erro no servidor: ${response.status}`);\n          }\n          \n        } catch (error) {\n          console.warn(`‚ö†Ô∏è Falha ao salvar p√°gina ${pageNum} no servidor, usando data URL:`, error);\n          resolve(canvas.toDataURL('image/jpeg', 0.85));\n        }\n      }, 'image/jpeg', 0.85);\n    });\n  };\n\n  // Verificar se p√°ginas j√° existem no servidor\n  const checkExistingPages = async (totalPages: number): Promise<string[]> => {\n    try {\n      const checkUrl = getBackendUrl('/api/check-plasa-pages');\n      \n      const response = await fetch(checkUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ totalPages }),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        if (result.allPagesExist) {\n          console.log(`üíæ Usando ${totalPages} p√°ginas j√° salvas no servidor`);\n          return result.pageUrls.map((url: string) => getBackendUrl(url));\n        }\n      }\n      \n      console.log(\"üÜï P√°ginas n√£o encontradas, gerando novas...\");\n      return [];\n      \n    } catch (error) {\n      console.log(`‚ö†Ô∏è Erro ao verificar p√°ginas existentes:`, error);\n      return [];\n    }\n  };\n\n  // FUN√á√ÉO PRINCIPAL: Converter PDF para imagens\n  const convertPDFToImages = async (pdfUrl: string) => {\n    try {\n      console.log(`üéØ INICIANDO CONVERS√ÉO PDF: ${pdfUrl}`);\n      setLoading(true);\n      setLoadingProgress(0);\n      setDebugInfo({});\n\n      if (!pdfUrl || pdfUrl === \"null\" || pdfUrl === \"undefined\") {\n        throw new Error(\"URL do PDF est√° vazia ou inv√°lida\");\n      }\n\n      const pdfjsLib = await loadPDFJS();\n      const pdfData = await getPDFData(pdfUrl);\n      \n      const uint8Array = new Uint8Array(pdfData);\n      const header = new TextDecoder().decode(uint8Array.slice(0, 8));\n      \n      if (!header.startsWith('%PDF')) {\n        console.log(\"‚ö†Ô∏è Arquivo n√£o √© PDF v√°lido, tentando como imagem\");\n        setSavedPageUrls([pdfUrl]);\n        setTotalPages(1);\n        setLoading(false);\n        return;\n      }\n      \n      console.log(\"‚úÖ PDF v√°lido detectado, iniciando processamento...\");\n      \n      const loadingTask = pdfjsLib.getDocument({\n        data: pdfData,\n        verbosity: 0,\n        disableAutoFetch: true,\n        disableStream: true,\n        disableRange: true,\n        stopAtErrors: false,\n        maxImageSize: 1024 * 1024 * 10,\n        isEvalSupported: false,\n        fontExtraProperties: false,\n        useSystemFonts: false,\n        standardFontDataUrl: null\n      });\n      \n      const pdf = await loadingTask.promise;\n      console.log(`üìÑ PDF carregado com sucesso: ${pdf.numPages} p√°ginas`);\n      setTotalPages(pdf.numPages);\n      \n      const existingPages = await checkExistingPages(pdf.numPages);\n      if (existingPages.length === pdf.numPages) {\n        console.log(`üíæ Usando ${pdf.numPages} p√°ginas j√° convertidas`);\n        setSavedPageUrls(existingPages);\n        setLoading(false);\n        pdf.destroy();\n        return;\n      }\n\n      console.log(\"üñºÔ∏è Convertendo p√°ginas para imagens...\");\n      const imageUrls: string[] = [];\n\n      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n        try {\n          console.log(`üìÑ Processando p√°gina ${pageNum}/${pdf.numPages}`);\n          \n          const page = await pdf.getPage(pageNum);\n          \n          const originalViewport = page.getViewport({ scale: 1.0 });\n          const scale = Math.min(PDF_SCALE, 2048 / Math.max(originalViewport.width, originalViewport.height));\n          const viewport = page.getViewport({ scale: scale });\n\n          console.log(`üìê P√°gina ${pageNum} - Original: ${originalViewport.width}x${originalViewport.height}, Escala: ${scale}, Final: ${viewport.width}x${viewport.height}`);\n\n          const canvas = document.createElement('canvas');\n          const context = canvas.getContext('2d', { \n            alpha: false,\n            willReadFrequently: false\n          })!;\n          \n          canvas.height = Math.floor(viewport.height);\n          canvas.width = Math.floor(viewport.width);\n          \n          context.fillStyle = '#FFFFFF';\n          context.fillRect(0, 0, canvas.width, canvas.height);\n\n          const renderContext = {\n            canvasContext: context,\n            viewport: viewport,\n            background: '#FFFFFF',\n            intent: 'display'\n          };\n\n          console.log(`üé® Renderizando p√°gina ${pageNum}...`);\n          \n          const renderPromise = page.render(renderContext).promise;\n          const timeoutPromise = new Promise((_, reject) => \n            setTimeout(() => reject(new Error('Timeout na renderiza√ß√£o')), 30000)\n          );\n          \n          await Promise.race([renderPromise, timeoutPromise]);\n          \n          console.log(`‚úÖ P√°gina ${pageNum} renderizada com sucesso`);\n          \n          const imageUrl = await savePageAsImage(canvas, pageNum);\n          imageUrls.push(imageUrl);\n          \n          console.log(`üíæ P√°gina ${pageNum} salva: ${imageUrl}`);\n          \n          setLoadingProgress(Math.round((pageNum / pdf.numPages) * 100));\n          \n          page.cleanup();\n          \n          if (pageNum < pdf.numPages) {\n            await new Promise(resolve => setTimeout(resolve, 200));\n          }\n          \n        } catch (pageError) {\n          console.error(`‚ùå Erro na p√°gina ${pageNum}:`, pageError);\n          \n          const errorCanvas = document.createElement('canvas');\n          errorCanvas.width = 800;\n          errorCanvas.height = 1100;\n          const ctx = errorCanvas.getContext('2d')!;\n          \n          ctx.fillStyle = '#FFFFFF';\n          ctx.fillRect(0, 0, errorCanvas.width, errorCanvas.height);\n          \n          ctx.fillStyle = '#dc2626';\n          ctx.font = 'bold 32px Arial, sans-serif';\n          ctx.textAlign = 'center';\n          ctx.fillText(`Erro na P√°gina ${pageNum}`, errorCanvas.width/2, 200);\n          \n          ctx.font = '24px Arial, sans-serif';\n          ctx.fillStyle = '#666666';\n          ctx.fillText('Falha ao processar esta p√°gina', errorCanvas.width/2, 250);\n          \n          ctx.font = '18px Arial, sans-serif';\n          ctx.fillStyle = '#999999';\n          ctx.fillText('O resto do documento ser√° exibido normalmente', errorCanvas.width/2, 300);\n          \n          ctx.fillStyle = '#dc2626';\n          ctx.font = '120px Arial, sans-serif';\n          ctx.fillText('‚ö†Ô∏è', errorCanvas.width/2, 450);\n          \n          const errorUrl = await savePageAsImage(errorCanvas, pageNum);\n          imageUrls.push(errorUrl);\n        }\n      }\n\n      console.log(`üéâ CONVERS√ÉO CONCLU√çDA: ${imageUrls.length}/${pdf.numPages} p√°ginas processadas!`);\n      \n      if (imageUrls.length > 0) {\n        setSavedPageUrls(imageUrls);\n        setLoading(false);\n      } else {\n        throw new Error('Nenhuma p√°gina foi convertida com sucesso');\n      }\n\n      pdf.destroy();\n      \n    } catch (error) {\n      console.error('‚ùå ERRO CR√çTICO NA CONVERS√ÉO:', error);\n      setLoading(false);\n      \n      let errorMessage = \"Erro ao processar o documento\";\n      let suggestion = \"Tente as seguintes solu√ß√µes:\";\n      let details = error.message;\n      \n      if (error.message?.includes(\"Invalid PDF\")) {\n        errorMessage = \"Arquivo PDF inv√°lido ou corrompido\";\n        suggestion = \"‚Ä¢ Verifique se o arquivo n√£o est√° corrompido\\n‚Ä¢ Tente salvar o PDF novamente\\n‚Ä¢ Use uma imagem (JPG/PNG) como alternativa\";\n      } else if (error.message?.includes(\"fetch\") || error.message?.includes(\"HTTP\") || error.message?.includes(\"NetworkError\")) {\n        errorMessage = \"Erro de conex√£o ou arquivo n√£o encontrado\";\n        suggestion = \"‚Ä¢ Verifique se o servidor backend est√° rodando\\n‚Ä¢ Confirme se o arquivo foi enviado corretamente\\n‚Ä¢ Tente fazer upload novamente\";\n      } else if (error.message?.includes(\"Timeout\")) {\n        errorMessage = \"Tempo limite excedido na convers√£o\";\n        suggestion = \"‚Ä¢ O PDF pode ser muito complexo\\n‚Ä¢ Tente um PDF mais simples\\n‚Ä¢ Use uma imagem como alternativa\";\n      } else if (error.message?.includes(\"ArrayBuffer\")) {\n        errorMessage = \"Erro ao ler o arquivo\";\n        suggestion = \"‚Ä¢ O arquivo pode estar corrompido\\n‚Ä¢ Verifique se √© um PDF v√°lido\\n‚Ä¢ Tente outro arquivo\";\n      }\n      \n      setDebugInfo({ \n        error: errorMessage,\n        suggestion: suggestion,\n        details: details,\n        timestamp: new Date().toLocaleTimeString(),\n        troubleshooting: [\n          \"1. Verifique se o servidor backend est√° funcionando\",\n          \"2. Confirme se o arquivo foi enviado corretamente\",\n          \"3. Tente usar uma imagem (JPG/PNG) ao inv√©s de PDF\",\n          \"4. Verifique o console do navegador (F12) para mais detalhes\"\n        ]\n      });\n    }\n  };\n\n  // Limpar timers\n  const clearAllTimers = useCallback(() => {\n    if (restartTimerRef.current) {\n      clearTimeout(restartTimerRef.current);\n      restartTimerRef.current = null;\n    }\n    \n    if (scrollerRef.current) {\n      scrollerRef.current.stop();\n      scrollerRef.current = null;\n    }\n    \n    setIsScrolling(false);\n  }, []);\n\n  // Callback quando scroll completa\n  const handleScrollComplete = useCallback(() => {\n    console.log(`‚úÖ PLASA: Documento visualizado completamente`);\n    setIsScrolling(false);\n    \n    if (!isAutomationPaused) {\n      restartTimerRef.current = setTimeout(() => {\n        if (!isAutomationPaused) {\n          startContinuousScroll();\n        }\n      }, RESTART_DELAY);\n    }\n  }, [isAutomationPaused, RESTART_DELAY]);\n\n  // Iniciar scroll cont√≠nuo\n  const startContinuousScroll = useCallback(() => {\n    if (documentType !== \"plasa\" || !containerRef.current || savedPageUrls.length === 0 || isAutomationPaused) {\n      return;\n    }\n\n    if (scrollerRef.current && scrollerRef.current.isActive) {\n      scrollerRef.current.stop();\n      scrollerRef.current = null;\n    }\n\n    const container = containerRef.current;\n    const maxScroll = container.scrollHeight - container.clientHeight;\n    \n    if (maxScroll <= 0) {\n      setTimeout(() => {\n        if (!isAutomationPaused) {\n          startContinuousScroll();\n        }\n      }, 2000);\n      return;\n    }\n\n    container.scrollTop = 0;\n    setIsScrolling(true);\n\n    scrollerRef.current = new ContinuousAutoScroller(\n      container,\n      SCROLL_SPEED,\n      handleScrollComplete\n    );\n\n    setTimeout(() => {\n      if (scrollerRef.current && !isAutomationPaused) {\n        scrollerRef.current.start();\n      }\n    }, 1000);\n  }, [documentType, savedPageUrls.length, isAutomationPaused, handleScrollComplete, SCROLL_SPEED]);\n\n  // Controles\n  const toggleAutomation = () => {\n    setIsAutomationPaused(!isAutomationPaused);\n    if (!isAutomationPaused) {\n      clearAllTimers();\n    } else {\n      setTimeout(startContinuousScroll, 500);\n    }\n  };\n\n  const restartScroll = () => {\n    clearAllTimers();\n    if (containerRef.current) {\n      containerRef.current.scrollTop = 0;\n    }\n    setTimeout(startContinuousScroll, 1000);\n  };\n\n  // CORRE√á√ÉO: INICIALIZAR PLASA com melhor verifica√ß√£o\n  useEffect(() => {\n    if (documentType === \"plasa\") {\n      console.log(\"üîÑ PLASA Effect triggered:\", {\n        isScrolling,\n        activePlasaDoc: activePlasaDoc?.id,\n        url: activePlasaDoc?.url\n      });\n\n      if (isScrolling) return;\n      \n      if (!activePlasaDoc || !activePlasaDoc.url) {\n        console.log(\"‚ùå PLASA: Nenhum documento PLASA ativo encontrado\");\n        setLoading(false);\n        setSavedPageUrls([]);\n        setDebugInfo({\n          error: \"Nenhum documento PLASA ativo\",\n          suggestion: \"Adicione um PLASA no painel administrativo.\"\n        });\n        return;\n      }\n      \n      setSavedPageUrls([]);\n      setIsAutomationPaused(false);\n      clearAllTimers();\n      setDebugInfo({});\n\n      const docUrl = getBackendUrl(activePlasaDoc.url);\n      console.log(\"üéØ PLASA: Processando documento:\", docUrl);\n      \n      if (isImageFile(docUrl) || (docUrl.startsWith('blob:') && activePlasaDoc.title.match(/\\.(jpg|jpeg|png|gif|webp)$/i))) {\n        console.log(\"üñºÔ∏è PLASA: Documento √© uma imagem, usando diretamente\");\n        setSavedPageUrls([docUrl]);\n        setTotalPages(1);\n        setLoading(false);\n      } else {\n        console.log(\"üìÑ PLASA: Documento √© um PDF, convertendo para imagens\");\n        convertPDFToImages(docUrl);\n      }\n    }\n\n    return () => {\n      if (documentType === \"plasa\") {\n        clearAllTimers();\n      }\n    };\n  }, [documentType, activePlasaDoc?.id, activePlasaDoc?.url]);\n\n  // CORRE√á√ÉO: Inicializar ESCALA com monitoramento do √≠ndice de altern√¢ncia\n  useEffect(() => {\n    if (documentType === \"escala\") {\n      const currentEscala = getCurrentEscalaDoc();\n      \n      console.log(\"üîÑ ESCALA Effect triggered:\", {\n        currentEscalaIndex,\n        totalActiveEscalas: escalaDocuments.filter(d => d.active).length,\n        currentEscala: currentEscala?.title,\n        category: currentEscala?.category,\n        url: currentEscala?.url,\n        id: currentEscala?.id \n      });\n      \n      setEscalaImageUrl(null);\n      setLoading(false);\n      setTotalPages(1);\n      \n      if (currentEscala?.url) {\n        const docUrl = getBackendUrl(currentEscala.url);\n        console.log(\"üñºÔ∏è ESCALA: Processando URL:\", docUrl);\n        \n        const isPDF = docUrl.toLowerCase().includes('.pdf') || currentEscala.title.toLowerCase().includes('.pdf');\n        \n        if (isPDF) {\n          console.log(\"üìÑ ESCALA: √â um PDF, convertendo para imagem...\");\n          convertEscalaPDFToImage(docUrl);\n        } else {\n          console.log(\"üñºÔ∏è ESCALA: √â uma imagem, usando diretamente\");\n          setLoading(false);\n        }\n      } else {\n        setLoading(false);\n      }\n    }\n  }, [documentType, currentEscalaIndex, escalaDocuments]);\n\n// ‚úÖ FUN√á√ÉO: Verificar se URL √© imagem (s√≥ adicione se n√£o existir)\nconst checkIfImageFile = async (url: string): Promise<boolean> => {\n  try {\n    const response = await fetch(url, { method: 'HEAD' });\n    const contentType = response.headers.get('content-type');\n    return contentType?.startsWith('image/') || false;\n  } catch {\n    return false;\n  }\n};\n  // NOVA FUN√á√ÉO: Converter PDF da escala para imagem\n  const convertEscalaPDFToImage = async (pdfUrl: string) => {\n    try {\n      // ‚úÖ NOVO: Obter documentId para o cache\n      const currentEscala = getCurrentEscalaDoc();\n      if (!currentEscala) {\n        console.log(\"‚ùå ESCALA: Nenhuma escala atual encontrada\");\n        setLoading(false);\n        return;\n      }\n      \n      const documentId = currentEscala.id;\n      \n      console.log(`üéØ ESCALA: Convertendo PDF: ${pdfUrl} (ID: ${documentId})`);\n      setLoading(true);\n      setLoadingProgress(0);\n  \n      // ‚úÖ NOVO: VERIFICAR CACHE PRIMEIRO\n      console.log(`üîç Verificando cache para escala: ${documentId}`);\n      \n      try {\n        const cacheResponse = await fetch(getBackendUrl(`/api/check-escala-image/${documentId}`));\n        const cacheResult = await cacheResponse.json();\n        \n        if (cacheResult.success && cacheResult.exists) {\n          console.log(`üíæ ESCALA: Usando imagem j√° convertida do cache`);\n          const cachedUrl = getBackendUrl(cacheResult.url);\n          setEscalaImageUrl(cachedUrl);\n          setLoading(false);\n          return; // ‚úÖ SAIR AQUI - USA CACHE\n        }\n      } catch (cacheError) {\n        console.log(`‚ö†Ô∏è Erro ao verificar cache, continuando com convers√£o...`, cacheError);\n      }\n      \n      console.log(`üÜï ESCALA: Cache n√£o encontrado, convertendo...`);\n  \n      // Verificar se n√£o √© imagem primeiro\n      if (await checkIfImageFile(pdfUrl)) {\n        console.log(\"üñºÔ∏è ESCALA: URL √© uma imagem, n√£o um PDF\");\n        setLoading(false);\n        return;\n      }\n  \n      const pdfjsLib = await loadPDFJS();\n      const pdfData = await getPDFData(pdfUrl);\n      \n      const uint8Array = new Uint8Array(pdfData);\n      const header = new TextDecoder().decode(uint8Array.slice(0, 8));\n      \n      if (!header.startsWith('%PDF')) {\n        console.log(\"‚ö†Ô∏è ESCALA: N√£o √© PDF v√°lido, usando como imagem\");\n        setEscalaImageUrl(pdfUrl);\n        setLoading(false);\n        console.log(\"‚úÖ Escala carregada com sucesso:\", pdfUrl);\n        return;\n      }\n      \n      console.log(\"‚úÖ ESCALA: PDF v√°lido, convertendo...\");\n      \n      const loadingTask = pdfjsLib.getDocument({\n        data: pdfData,\n        verbosity: 0,\n        disableAutoFetch: true,\n        disableStream: true,\n        disableRange: true,\n        stopAtErrors: false,\n        maxImageSize: 1024 * 1024 * 10,\n        isEvalSupported: false,\n        fontExtraProperties: false,\n        useSystemFonts: false,\n        standardFontDataUrl: null\n      });\n      \n      const pdf = await loadingTask.promise;\n      console.log(`üìÑ ESCALA: PDF carregado: ${pdf.numPages} p√°ginas`);\n      \n      const page = await pdf.getPage(1);\n      \n      const originalViewport = page.getViewport({ scale: 1.0 });\n      const scale = Math.min(1.5, 1024 / Math.max(originalViewport.width, originalViewport.height));\n      const viewport = page.getViewport({ scale: scale });\n  \n      console.log(`üìê ESCALA: P√°gina 1 - Escala: ${scale}, Final: ${viewport.width}x${viewport.height}`);\n  \n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d', { \n        alpha: false,\n        willReadFrequently: false\n      })!;\n      \n      canvas.height = Math.floor(viewport.height);\n      canvas.width = Math.floor(viewport.width);\n      \n      context.fillStyle = '#FFFFFF';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n  \n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n        background: '#FFFFFF',\n        intent: 'display'\n      };\n  \n      console.log(`üé® ESCALA: Renderizando...`);\n      \n      const renderPromise = page.render(renderContext).promise;\n      const timeoutPromise = new Promise((_, reject) => \n        setTimeout(() => reject(new Error('Timeout na renderiza√ß√£o')), 60000)\n      );\n      \n      await Promise.race([renderPromise, timeoutPromise]);\n      \n      console.log(`‚úÖ ESCALA: Renderizada com sucesso`);\n      \n      // ‚úÖ NOVO: SALVAR NO CACHE AP√ìS CONVERS√ÉO\n      try {\n        console.log(`üíæ Salvando escala ${documentId} no cache...`);\n        \n        // CORRE√á√ÉO: Tipagem correta para o Blob\n        const imageBlob = await new Promise<Blob | null>((resolve) => {\n          canvas.toBlob((blob) => {\n            resolve(blob);\n          }, 'image/jpeg', 0.85);\n        });\n        \n        if (!imageBlob) {\n          throw new Error('Falha ao converter canvas para blob');\n        }\n        \n        const formData = new FormData();\n        formData.append('file', imageBlob, `escala-${documentId}.jpg`);\n        formData.append('documentId', documentId);\n        \n        const saveResponse = await fetch(getBackendUrl('/api/upload-escala-image'), {\n          method: 'POST',\n          body: formData\n        });\n        \n        if (saveResponse.ok) {\n          const saveResult = await saveResponse.json();\n          console.log(`üíæ ESCALA: Imagem salva no cache: ${saveResult.url}`);\n          \n          // ‚úÖ Usar URL do servidor ao inv√©s de dataURL\n          const cachedUrl = getBackendUrl(saveResult.url);\n          setEscalaImageUrl(cachedUrl);\n        } else {\n          throw new Error('Falha ao salvar no servidor');\n        }\n      } catch (saveError) {\n        console.log(`‚ö†Ô∏è ESCALA: Falha ao salvar cache, usando dataURL:`, saveError);\n        // ‚úÖ Fallback: usar dataURL se n√£o conseguir salvar no servidor\n        const imageDataUrl = canvas.toDataURL('image/jpeg', 0.85);\n        setEscalaImageUrl(imageDataUrl);\n      }\n      \n      page.cleanup();\n      pdf.destroy();\n      \n      setLoading(false);\n      console.log(`üéâ ESCALA: Convers√£o conclu√≠da!`);\n      \n    } catch (error) {\n      console.error('‚ùå ESCALA: Erro na convers√£o:', error);\n      setLoading(false);\n    }\n  };\n\n  // Iniciar scroll quando p√°ginas estiverem prontas\n  useEffect(() => {\n    if (!loading && savedPageUrls.length > 0 && !isAutomationPaused && !isScrolling) {\n      const timer = setTimeout(() => {\n        if (!isAutomationPaused && savedPageUrls.length > 0 && !isScrolling) {\n          startContinuousScroll();\n        }\n      }, 3000);\n\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n  }, [loading, savedPageUrls.length, isAutomationPaused, isScrolling, startContinuousScroll]);\n\n  // CORRE√á√ÉO: Renderizar conte√∫do com melhor tratamento de erros\n  const renderContent = () => {\n    if (documentType === \"plasa\" && savedPageUrls.length > 0) {\n      return (\n        <div className=\"w-full\">\n          {savedPageUrls.map((pageUrl, index) => (\n            <div key={index} className=\"w-full mb-4\">\n              <img\n                src={pageUrl}\n                alt={`PLASA - P√°gina ${index + 1}`}\n                className=\"w-full h-auto block shadow-sm\"\n                style={{ maxWidth: '100%' }}\n                onError={(e) => {\n                  console.error(`‚ùå Erro ao carregar p√°gina ${index + 1}:`, pageUrl);\n                  (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgZmlsbD0iI2Y4ZjhmOCIvPjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXIgcMOhZ2luYSAke2luZGV4ICsgMX08L3RleHQ+PC9zdmc+';\n                }}\n                onLoad={() => {\n                  console.log(`‚úÖ P√°gina ${index + 1} carregada com sucesso`);\n                }}\n              />\n              {index < savedPageUrls.length - 1 && (\n                <div className=\"w-full h-4 bg-gradient-to-r from-blue-100 to-blue-200 flex items-center justify-center my-2\">\n                  <div className=\"text-xs text-blue-600 font-medium\">\n                    ‚Ä¢‚Ä¢‚Ä¢ P√°gina {index + 2} ‚Ä¢‚Ä¢‚Ä¢\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n          <div className=\"w-full h-20 bg-gradient-to-r from-navy/10 to-navy/20 flex items-center justify-center rounded-lg\">\n            <div className=\"text-center\">\n              <div className=\"text-navy font-bold text-lg\">üìÑ FIM DO PLASA</div>\n              <div className=\"text-navy/70 text-sm\">Reiniciando em {autoRestartDelay}s...</div>\n            </div>\n          </div>\n        </div>\n      );\n    } else if (documentType === \"escala\") {\n      const docUrl = getDocumentUrl();\n      const currentEscala = getCurrentEscalaDoc();\n      \n      console.log(\"üñºÔ∏è ESCALA: Renderizando\", {\n        docUrl,\n        escalaImageUrl: escalaImageUrl,\n        loading,\n        currentEscala: currentEscala?.title\n      });\n      \n      // ‚úÖ DEBUG: Verificar valor real\nconsole.log('üéØ ESCALA renderContent DEBUG:', {\n  escalaImageUrl,\n  typeof: typeof escalaImageUrl,\n  length: escalaImageUrl?.length,\n  isValid: !!escalaImageUrl && escalaImageUrl !== 'convertida' && escalaImageUrl !== 'nenhuma'\n});\n\nreturn (\n  <div className=\"w-full h-full flex items-center justify-center p-4\">\n    {escalaImageUrl && escalaImageUrl !== 'convertida' && escalaImageUrl !== 'nenhuma' ? (\n            <img\n              src={escalaImageUrl}\n              \n              className=\"max-w-full max-h-full object-contain shadow-lg\"\n              onLoad={() => {\n                console.log(`‚úÖ Escala convertida carregada com sucesso`);\n              }}\n            />\n          ) : docUrl ? (\n            <img\n              src={docUrl}\n              alt=\"Escala de Servi√ßo\"\n              className=\"max-w-full max-h-full object-contain shadow-lg\"\n              onError={(e) => {\n                console.error(\"‚ùå Erro ao carregar escala:\", docUrl);\n                (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjhmOCIvPjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXIgZXNjYWxhPC90ZXh0Pjwvc3ZnPg==';\n              }}\n              onLoad={() => {\n                console.log(`‚úÖ Escala carregada com sucesso: ${docUrl}`);\n              }}\n            />\n          ) : (\n            <div className=\"text-center text-gray-500\">\n              <div className=\"text-4xl mb-4\">üìã</div>\n              <div>Nenhuma escala ativa</div>\n              <div className=\"text-sm mt-2\">Adicione uma escala no painel administrativo</div>\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"w-full h-full flex items-center justify-center\">\n        <div className=\"text-center p-6 max-w-lg\">\n          {debugInfo.error ? (\n            <>\n              <div className=\"text-6xl mb-4\">‚ö†Ô∏è</div>\n              <div className=\"text-red-600 font-bold text-lg mb-3\">{debugInfo.error}</div>\n              <div className=\"text-sm text-gray-600 mb-4 whitespace-pre-line\">{debugInfo.suggestion}</div>\n              {debugInfo.details && (\n                <details className=\"text-xs text-gray-400 mb-4\">\n                  <summary className=\"cursor-pointer hover:text-gray-600\">Detalhes t√©cnicos</summary>\n                  <div className=\"mt-2 p-2 bg-gray-100 rounded font-mono text-left\">\n                    {debugInfo.details}\n                  </div>\n                </details>\n              )}\n              {debugInfo.troubleshooting && (\n                <details className=\"text-xs text-blue-600 mb-4\">\n                  <summary className=\"cursor-pointer hover:text-blue-800\">Guia de solu√ß√£o</summary>\n                  <div className=\"mt-2 text-left\">\n                    {debugInfo.troubleshooting.map((step, index) => (\n                      <div key={index} className=\"mb-1\">{step}</div>\n                    ))}\n                  </div>\n                </details>\n              )}\n              <div className=\"flex gap-2 justify-center\">\n                <button \n                  onClick={() => {\n                    setDebugInfo({});\n                    if (activePlasaDoc && activePlasaDoc.url) {\n                      const fullUrl = getBackendUrl(activePlasaDoc.url);\n                      if (isImageFile(fullUrl)) {\n                        setSavedPageUrls([fullUrl]);\n                        setLoading(false);\n                      } else {\n                        convertPDFToImages(fullUrl);\n                      }\n                    }\n                  }}\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm\"\n                >\n                  üîÑ Tentar Novamente\n                </button>\n                <button \n                  onClick={() => {\n                    setDebugInfo({});\n                    setSavedPageUrls([]);\n                  }}\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm\"\n                >\n                  ‚ùå Cancelar\n                </button>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"text-6xl mb-4\">üìÑ</div>\n              <div className=\"text-gray-600 text-lg\">\n                {documentType === \"plasa\" && !activePlasaDoc \n                  ? \"Nenhum documento PLASA ativo\" \n                  : loading\n                  ? \"Processando documento...\"\n                  : \"Preparando visualiza√ß√£o...\"}\n              </div>\n              {documentType === \"plasa\" && !activePlasaDoc && (\n                <div className=\"mt-4 text-sm text-gray-500\">\n                  V√° para o painel administrativo e fa√ßa upload de um documento PLASA\n                </div>\n              )}\n              {activePlasaDoc && (\n                <div className=\"mt-4 text-xs text-gray-400 bg-gray-50 p-3 rounded\">\n                  <div className=\"font-medium\">Documento ativo:</div>\n                  <div className=\"truncate\">{activePlasaDoc.title}</div>\n                  <div className=\"truncate font-mono\">{activePlasaDoc.url}</div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // CORRE√á√ÉO: T√≠tulo din√¢mico baseado na escala atual\n  const getCurrentTitle = () => {\n    if (documentType === \"escala\") {\n      const currentEscala = getCurrentEscalaDoc();\n      const activeEscalas = escalaDocuments.filter(doc => doc.active);\n      \n      if (currentEscala) {\n        const categorySubtitle = currentEscala.category\n          ? `(${currentEscala.category === \"oficial\" ? \"Oficiais\" : \"Pra√ßas\"})`\n          : \"\";\n        \n        if (activeEscalas.length > 1) {\n          return `${title} ${categorySubtitle} - ${currentEscalaIndex + 1}/${activeEscalas.length}`;\n        } else {\n          return `${title} ${categorySubtitle}`;\n        }\n      }\n    }\n    \n    return title;\n  };\n\n  const currentTitle = getCurrentTitle();\n  const currentEscala = getCurrentEscalaDoc();\n\n  return (\n    <Card className=\"h-full overflow-hidden border-0 shadow-none bg-transparent\">\n      {/* Header Estilizado com Gradiente */}\n      <CardHeader className=\"relative bg-gradient-to-r from-slate-700 via-blue-800 to-slate-700 text-white py-3 px-4 border-b border-blue-400/30\">\n        {/* Efeito de brilho */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/10 to-transparent\"></div>\n        \n        <CardTitle className=\"relative z-10 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            {/* √çcone do tipo de documento */}\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg\">\n              {documentType === \"plasa\" ? (\n                <span className=\"text-white text-sm font-bold\">üìã</span>\n              ) : (\n                <span className=\"text-white text-sm font-bold\">üìÖ</span>\n              )}\n            </div>\n            \n            {/* T√≠tulo principal */}\n            <div className=\"flex flex-col\">\n              <span className=\"font-bold text-sm bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent\">\n                {documentType === \"plasa\" ? (\n                  activePlasaDoc?.title || \"PLASA - Plano de Servi√ßo Semanal\"\n                ) : (\n                  currentEscala?.title || \"Escala de Servi√ßo Semanal\"\n                )}\n              </span>\n              \n              {/* Subt√≠tulo com categoria (apenas para escala) */}\n              {documentType === \"escala\" && currentEscala?.category && (\n                <span className=\"text-xs text-blue-200/80 font-medium\">\n                  {currentEscala.category === \"oficial\" ? \"Oficiais\" : \"Pra√ßas\"}\n                </span>\n              )}\n            </div>\n          </div>\n          \n          {/* Indicadores √† direita */}\n          <div className=\"flex items-center space-x-3\">\n            {/* Status de m√∫ltiplas escalas */}\n            {documentType === \"escala\" && escalaDocuments.filter(d => d.active).length > 1 && (\n              <div className=\"bg-blue-600/50 backdrop-blur-sm rounded-full px-3 py-1 border border-blue-400/30\">\n                <span className=\"text-xs font-medium text-blue-100\">\n                  {currentEscalaIndex + 1} de {escalaDocuments.filter(d => d.active).length}\n                </span>\n              </div>\n            )}\n            \n            {/* Indicador de status do PLASA */}\n            {documentType === \"plasa\" && savedPageUrls.length > 0 && (\n              <div className=\"bg-green-600/50 backdrop-blur-sm rounded-full px-3 py-1 border border-green-400/30\">\n                <span className=\"text-xs font-medium text-green-100\">\n                  {savedPageUrls.length} p√°ginas\n                </span>\n              </div>\n            )}\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"p-0 h-[calc(100%-2.5rem)] bg-white\">\n  {loading ? (\n    <div className=\"flex flex-col items-center justify-center h-full\">\n      <div className=\"w-16 h-16 border-4 border-navy border-t-transparent rounded-full animate-spin\"></div>\n      <p className=\"mt-4 text-navy text-sm font-medium\">\n        {documentType === \"plasa\" ? \"Processando documento...\" : \"Carregando...\"}\n      </p>\n    </div>\n  ) : (\n    <div\n      className=\"relative w-full h-full overflow-y-auto\"\n      ref={containerRef}\n      style={{ scrollBehavior: \"auto\" }}\n    >\n      {renderContent()}\n    </div>\n  )}\n</CardContent>\n  </Card>\n);\n// ‚ùå REMOVER/CONDICIONAR estes logs:\nconst log = (message: string, ...args: any[]) => {\n  if (IS_DEV_MODE) {\n    console.log(message, ...args);\n  \n}\n};\n};\nexport default PDFViewer;","size_bytes":43891},"client/src/components/PDFViewer.tsx":{"content":"import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useDisplay } from \"@/context/DisplayContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst IS_DEV_MODE = process.env.NODE_ENV === 'development';\n\n// Configurar PDF.js\ndeclare global {\n  interface Window {\n    pdfjsLib: any;\n  }\n}\n\n// Interface para debug info\ninterface DebugInfo {\n  error?: string;\n  suggestion?: string;\n  details?: string;\n  timestamp?: string;\n  troubleshooting?: string[];\n}\n\ninterface PDFViewerProps {\n  documentType: \"plasa\" | \"escala\" | \"cardapio\";\n  title: string;\n  scrollSpeed?: \"slow\" | \"normal\" | \"fast\";\n  autoRestartDelay?: number;\n  onScrollComplete?: () => void;\n}\n\n// Classe para controlar o scroll autom√°tico cont√≠nuo\nclass ContinuousAutoScroller {\n  private isScrolling: boolean = false;\n  private animationId: number | null = null;\n  private currentPosition: number = 0;\n  private speed: number = 1;\n  private container: HTMLElement | null = null;\n  private onCompleteCallback?: () => void;\n  private fixedMaxScroll: number = 0;\n\n  constructor(\n    container: HTMLElement,\n    speed: number = 1,\n    onComplete?: () => void\n  ) {\n    this.container = container;\n    this.speed = speed;\n    this.onCompleteCallback = onComplete;\n  }\n\n  start() {\n    if (!this.container || this.isScrolling) return;\n\n    this.isScrolling = true;\n    this.currentPosition = 0;\n    \n    this.fixedMaxScroll = this.container.scrollHeight - this.container.clientHeight;\n    \n    if (this.fixedMaxScroll <= 0) {\n      this.stop();\n      return;\n    }\n\n    this.container.scrollTop = 0;\n    this.currentPosition = 0;\n    this.scroll();\n  }\n\n  private scroll = () => {\n    if (!this.isScrolling || !this.container) return;\n\n    const maxScroll = this.fixedMaxScroll;\n    \n    if (this.currentPosition < maxScroll - 10) {\n      this.currentPosition += this.speed;\n      this.container.scrollTop = this.currentPosition;\n      this.animationId = requestAnimationFrame(this.scroll);\n    } else {\n      this.container.scrollTop = maxScroll;\n\n      \n      setTimeout(() => {\n        this.stop();\n        this.onCompleteCallback?.();\n      }, 2000);\n    }\n  };\n\n  stop() {\n    this.isScrolling = false;\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n  }\n\n  reset() {\n    this.stop();\n    if (this.container) {\n      this.container.scrollTop = 0;\n      this.currentPosition = 0;\n    }\n  }\n\n  setSpeed(newSpeed: number) {\n    this.speed = newSpeed;\n  }\n\n  get isActive() {\n    return this.isScrolling;\n  }\n}\n\nconst PDFViewer: React.FC<PDFViewerProps> = ({ \n  documentType, \n  title, \n  scrollSpeed = \"normal\",\n  autoRestartDelay = 3,\n  onScrollComplete\n}) => {\n  // CORRE√á√ÉO: Usar currentEscalaIndex do contexto\n  const { activeEscalaDoc, activePlasaDoc, activeCardapioDoc, currentEscalaIndex, escalaDocuments } = useDisplay();\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const [isAutomationPaused, setIsAutomationPaused] = useState(false);\n  const [savedPageUrls, setSavedPageUrls] = useState<string[]>([]);\n  const [loadingProgress, setLoadingProgress] = useState(0);\n  const [debugInfo, setDebugInfo] = useState<DebugInfo>({});\n  const [escalaImageUrl, setEscalaImageUrl] = useState<string | null>(null);\n\n  const scrollerRef = useRef<ContinuousAutoScroller | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const restartTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Configura√ß√µes\n  const getScrollSpeed = () => {\n    switch (scrollSpeed) {\n      case \"slow\": return 1;\n      case \"fast\": return 5;\n      default: return 3; // normal\n    }\n  };\n\n  const SCROLL_SPEED = getScrollSpeed();\n  const RESTART_DELAY = autoRestartDelay * 1000;\n  const PDF_SCALE = 1.5;\n\n  // Fun√ß√£o para obter a URL completa do servidor backend - DETECTAR AMBIENTE\n  const getBackendUrl = (path: string): string => {\n    if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n      return path;\n    }\n  \n  // üö® CORRE√á√ÉO: Usar IP real do servidor para acesso em rede\n  const currentHost = window.location.hostname;\n  const currentPort = window.location.port;\n  \n  // Detectar se estamos no Replit PRIMEIRO\n  const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n  \n  if (isReplit) {\n    const currentOrigin = window.location.origin;\n    if (path.startsWith('/')) {\n      return `${currentOrigin}${path}`;\n    }\n    return `${currentOrigin}/${path}`;\n  }\n  \n  // Se estamos acessando via IP da rede, usar o mesmo IP para backend\n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n    console.log(`üåê PDFViewer: Detectado acesso via rede: ${currentHost}`);\n    \n    if (path.startsWith('/')) {\n      return `http://${currentHost}:5000${path}`;\n    }\n    return `http://${currentHost}:5000/${path}`;\n  }\n  \n  // Desenvolvimento local\n  if (path.startsWith('/')) {\n    return `http://localhost:5000${path}`;\n  }\n  return `http://localhost:5000/${path}`;\n};\n\n  // CORRE√á√ÉO: Fun√ß√£o para determinar a URL do documento com altern√¢ncia\n const getDocumentUrl = () => {\n  if (documentType === \"plasa\") {\n    if (activePlasaDoc?.url) {\n      console.log(\"üìÑ PLASA: Usando documento do admin:\", activePlasaDoc.url);\n      return getBackendUrl(activePlasaDoc.url);\n    }\n    console.log(\"üìÑ PLASA: Nenhum documento ativo\");\n    return null;\n  } else if (documentType === \"escala\") {\n    // CORRE√á√ÉO: Usar a escala atual baseada no √≠ndice\n    const activeEscalas = escalaDocuments.filter(doc => doc.active && doc.type === \"escala\");\n    \n    if (activeEscalas.length === 0) {\n      console.log(\"üìã ESCALA: Nenhuma escala ativa\");\n      return null;\n    }\n    \n    const currentEscala = activeEscalas[currentEscalaIndex % activeEscalas.length];\n    \n    if (currentEscala?.url) {\n      console.log(`üìã ESCALA: Usando escala ${currentEscalaIndex + 1}/${activeEscalas.length}:`, {\n        title: currentEscala.title,\n        category: currentEscala.category,\n        url: currentEscala.url\n      });\n      return getBackendUrl(currentEscala.url);\n    }\n    \n    console.log(\"üìã ESCALA: Escala atual sem URL v√°lida\");\n    return null;\n  } else if (documentType === \"cardapio\") {\n    // CORRE√á√ÉO: Usar activeCardapioDoc diretamente do contexto\n    if (!activeCardapioDoc) {\n      console.log(\"üçΩÔ∏è CARD√ÅPIO: Nenhum card√°pio ativo\");\n      return null;\n    }\n    \n    console.log(\"üçΩÔ∏è CARD√ÅPIO: Usando card√°pio ativo:\", {\n      title: activeCardapioDoc.title,\n      url: activeCardapioDoc.url\n    });\n    return getBackendUrl(activeCardapioDoc.url);\n  }\n  \n  return null;\n};\n\n    \n  \n\n  // CORRE√á√ÉO: Obter documento da escala atual\n  const getCurrentEscalaDoc = () => {\n  const activeEscalas = escalaDocuments.filter(doc => doc.active && doc.type === \"escala\");\n    if (activeEscalas.length === 0) return null;\n    return activeEscalas[currentEscalaIndex % activeEscalas.length] || null;\n  };\n// CORRE√á√ÉO: Obter documento do card√°pio atual do contexto\nconst getCurrentCardapioDoc = () => {\n  return activeCardapioDoc;\n};\n\n  // Verificar se arquivo √© imagem\n  const isImageFile = (url: string) => {\n    return (\n      url.startsWith('data:image') ||\n      url.startsWith('blob:') ||\n      /\\.(jpg|jpeg|png|gif|webp)$/i.test(url)\n    );\n  };\n\n  // Carregar PDF.js APENAS quando necess√°rio\n  const loadPDFJS = async () => {\n    if (window.pdfjsLib) return window.pdfjsLib;\n\n    console.log(\"üìö Carregando PDF.js...\");\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';\n      script.onload = () => {\n        window.pdfjsLib.GlobalWorkerOptions.workerSrc = \n          'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';\n        window.pdfjsLib.GlobalWorkerOptions.verbosity = 0;\n        console.log(\"‚úÖ PDF.js carregado com sucesso\");\n        resolve(window.pdfjsLib);\n      };\n      script.onerror = () => {\n        console.error(\"‚ùå Erro ao carregar PDF.js\");\n        reject(new Error('Falha ao carregar PDF.js'));\n      };\n      document.head.appendChild(script);\n    });\n  };\n\n  // Fun√ß√£o melhorada para obter dados do PDF com tratamento de CORS\n  const getPDFData = async (url: string): Promise<ArrayBuffer | Uint8Array> => {\n    console.log(\"üì• Obtendo dados do PDF:\", url);\n    \n    try {\n      if (url.startsWith('blob:')) {\n        console.log(\"üîó URL blob detectada\");\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(`Erro blob: ${response.status}`);\n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ Blob convertido: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n      }\n      \n      // Primeira tentativa com headers melhorados\n      try {\n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/pdf,*/*'\n          },\n          mode: 'cors',\n          cache: 'no-cache',\n          credentials: 'omit'\n        });\n        \n        if (!response.ok) throw new Error(`HTTP: ${response.status}`);\n        \n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ PDF carregado: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n        \n      } catch (corsError) {\n        console.warn(\"‚ö†Ô∏è Erro CORS, tentando proxy:\", corsError);\n        \n        // Fallback: usar proxy\n        const proxyUrl = getBackendUrl(`/api/proxy-pdf?url=${encodeURIComponent(url)}`);\n        console.log(\"üîÑ Usando proxy:\", proxyUrl);\n        \n        const response = await fetch(proxyUrl);\n        if (!response.ok) throw new Error(`Proxy: ${response.status}`);\n        \n        const arrayBuffer = await response.arrayBuffer();\n        console.log(`‚úÖ PDF via proxy: ${arrayBuffer.byteLength} bytes`);\n        return arrayBuffer;\n      }\n      \n    } catch (error) {\n      console.error(\"‚ùå Erro ao obter PDF:\", error);\n      throw error;\n    }\n  };\n\n  // Fun√ß√£o para salvar p√°gina como imagem no servidor\n  const savePageAsImage = async (canvas: HTMLCanvasElement, pageNum: number, documentId: string): Promise<string> => {\n    return new Promise((resolve) => {\n      canvas.toBlob(async (blob) => {\n        if (!blob) {\n          console.error(`‚ùå Erro ao converter p√°gina ${pageNum} para blob`);\n          resolve(canvas.toDataURL('image/jpeg', 0.85));\n          return;\n        }\n\n        try {\n          const formData = new FormData();\n          formData.append('file', blob, `plasa-page-${pageNum}.jpg`);\n          formData.append('pageNumber', String(pageNum));\n          formData.append('documentId', documentId);\n          \n          const uploadUrl = getBackendUrl('/api/upload-plasa-page');\n          \n          const response = await fetch(uploadUrl, {\n            method: 'POST',\n            body: formData,\n          });\n\n          if (response.ok) {\n            const result = await response.json();\n            const savedUrl = result.data?.url || result.url || `/plasa-pages/plasa-page-${pageNum}.jpg`;\n            const fullSavedUrl = getBackendUrl(savedUrl);\n            console.log(`üíæ P√°gina ${pageNum} salva no servidor: ${fullSavedUrl}`);\n            resolve(fullSavedUrl);\n          } else {\n            throw new Error(`Erro no servidor: ${response.status}`);\n          }\n          \n        } catch (error) {\n          console.warn(`‚ö†Ô∏è Falha ao salvar p√°gina ${pageNum} no servidor, usando data URL:`, error);\n          resolve(canvas.toDataURL('image/jpeg', 0.85));\n        }\n      }, 'image/jpeg', 0.85);\n    });\n  };\n\n  // Fun√ß√£o para gerar ID √∫nico do documento baseado na URL\n  const generateDocumentId = (url: string): string => {\n    const urlParts = url.split(\"/\");\n    const filename = urlParts[urlParts.length - 1];\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substring(2, 8);\n    const cleanName = filename\n      .replace(/\\.[^/.]+$/, \"\")\n      .replace(/[^a-zA-Z0-9]/g, \"-\")\n      .toLowerCase()\n      .substring(0, 20);\n    return `${timestamp}-${cleanName}-${random}`;\n  };\n\n  // Verificar se p√°ginas j√° existem no servidor\n  const checkExistingPages = async (totalPages: number, documentId: string): Promise<string[]> => {\n    try {\n      const checkUrl = getBackendUrl('/api/check-plasa-pages');\n      \n      const response = await fetch(checkUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ totalPages, documentId }),\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        if (result.allPagesExist) {\n          console.log(`üíæ Usando ${totalPages} p√°ginas j√° salvas no servidor`);\n          return result.pageUrls.map((url: string) => getBackendUrl(url));\n        }\n      }\n      \n      console.log(\"üÜï P√°ginas n√£o encontradas, gerando novas...\");\n      return [];\n      \n    } catch (error) {\n      console.log(`‚ö†Ô∏è Erro ao verificar p√°ginas existentes:`, error);\n      return [];\n    }\n  };\n\n  // FUN√á√ÉO PRINCIPAL: Converter PDF para imagens\n  const convertPDFToImages = async (pdfUrl: string) => {\n    try {\n      console.log(`üéØ INICIANDO CONVERS√ÉO PDF: ${pdfUrl}`);\n      setLoading(true);\n      setLoadingProgress(0);\n      setDebugInfo({});\n\n      if (!pdfUrl || pdfUrl === \"null\" || pdfUrl === \"undefined\") {\n        throw new Error(\"URL do PDF est√° vazia ou inv√°lida\");\n      }\n\n      const pdfjsLib = await loadPDFJS();\n      const pdfData = await getPDFData(pdfUrl);\n      \n      const uint8Array = new Uint8Array(pdfData);\n      const header = new TextDecoder().decode(uint8Array.slice(0, 8));\n      \n      if (!header.startsWith('%PDF')) {\n        console.log(\"‚ö†Ô∏è Arquivo n√£o √© PDF v√°lido, tentando como imagem\");\n        setSavedPageUrls([pdfUrl]);\n        setTotalPages(1);\n        setLoading(false);\n        return;\n      }\n      \n      console.log(\"‚úÖ PDF v√°lido detectado, iniciando processamento...\");\n      \n      const loadingTask = pdfjsLib.getDocument({\n        data: pdfData,\n        verbosity: 0,\n        disableAutoFetch: true,\n        disableStream: true,\n        disableRange: true,\n        stopAtErrors: false,\n        maxImageSize: 1024 * 1024 * 10,\n        isEvalSupported: false,\n        fontExtraProperties: false,\n        useSystemFonts: false,\n        standardFontDataUrl: null\n      });\n      \n      const pdf = await loadingTask.promise;\n      console.log(`üìÑ PDF carregado com sucesso: ${pdf.numPages} p√°ginas`);\n      setTotalPages(pdf.numPages);\n      \n      const docId = generateDocumentId(pdfUrl);\n      const existingPages = await checkExistingPages(pdf.numPages, docId);\n      if (existingPages.length === pdf.numPages) {\n        console.log(`üíæ Usando ${pdf.numPages} p√°ginas j√° convertidas`);\n        setSavedPageUrls(existingPages);\n        setLoading(false);\n        pdf.destroy();\n        return;\n      }\n\n      console.log(\"üñºÔ∏è Convertendo p√°ginas para imagens...\");\n      const imageUrls: string[] = [];\n\n      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n        try {\n          console.log(`üìÑ Processando p√°gina ${pageNum}/${pdf.numPages}`);\n          \n          const page = await pdf.getPage(pageNum);\n          \n          const originalViewport = page.getViewport({ scale: 1.0 });\n          const scale = Math.min(PDF_SCALE, 2048 / Math.max(originalViewport.width, originalViewport.height));\n          const viewport = page.getViewport({ scale: scale });\n\n          console.log(`üìê P√°gina ${pageNum} - Original: ${originalViewport.width}x${originalViewport.height}, Escala: ${scale}, Final: ${viewport.width}x${viewport.height}`);\n\n          const canvas = document.createElement('canvas');\n          const context = canvas.getContext('2d', { \n            alpha: false,\n            willReadFrequently: false\n          })!;\n          \n          canvas.height = Math.floor(viewport.height);\n          canvas.width = Math.floor(viewport.width);\n          \n          context.fillStyle = '#FFFFFF';\n          context.fillRect(0, 0, canvas.width, canvas.height);\n\n          const renderContext = {\n            canvasContext: context,\n            viewport: viewport,\n            background: '#FFFFFF',\n            intent: 'display'\n          };\n\n          console.log(`üé® Renderizando p√°gina ${pageNum}...`);\n          \n          const renderPromise = page.render(renderContext).promise;\n          const timeoutPromise = new Promise((_, reject) => \n            setTimeout(() => reject(new Error('Timeout na renderiza√ß√£o')), 30000)\n          );\n          \n          await Promise.race([renderPromise, timeoutPromise]);\n          \n          console.log(`‚úÖ P√°gina ${pageNum} renderizada com sucesso`);\n          \n          const imageUrl = await savePageAsImage(canvas, pageNum, docId);\n          imageUrls.push(imageUrl);\n          \n          console.log(`üíæ P√°gina ${pageNum} salva: ${imageUrl}`);\n          \n          setLoadingProgress(Math.round((pageNum / pdf.numPages) * 100));\n          \n          page.cleanup();\n          \n          if (pageNum < pdf.numPages) {\n            await new Promise(resolve => setTimeout(resolve, 200));\n          }\n          \n        } catch (pageError) {\n          console.error(`‚ùå Erro na p√°gina ${pageNum}:`, pageError);\n          \n          const errorCanvas = document.createElement('canvas');\n          errorCanvas.width = 800;\n          errorCanvas.height = 1100;\n          const ctx = errorCanvas.getContext('2d')!;\n          \n          ctx.fillStyle = '#FFFFFF';\n          ctx.fillRect(0, 0, errorCanvas.width, errorCanvas.height);\n          \n          ctx.fillStyle = '#dc2626';\n          ctx.font = 'bold 32px Arial, sans-serif';\n          ctx.textAlign = 'center';\n          ctx.fillText(`Erro na P√°gina ${pageNum}`, errorCanvas.width/2, 200);\n          \n          ctx.font = '24px Arial, sans-serif';\n          ctx.fillStyle = '#666666';\n          ctx.fillText('Falha ao processar esta p√°gina', errorCanvas.width/2, 250);\n          \n          ctx.font = '18px Arial, sans-serif';\n          ctx.fillStyle = '#999999';\n          ctx.fillText('O resto do documento ser√° exibido normalmente', errorCanvas.width/2, 300);\n          \n          ctx.fillStyle = '#dc2626';\n          ctx.font = '120px Arial, sans-serif';\n          ctx.fillText('‚ö†Ô∏è', errorCanvas.width/2, 450);\n          \n          const errorUrl = await savePageAsImage(errorCanvas, pageNum, docId);\n          imageUrls.push(errorUrl);\n        }\n      }\n\n      console.log(`üéâ CONVERS√ÉO CONCLU√çDA: ${imageUrls.length}/${pdf.numPages} p√°ginas processadas!`);\n      \n      if (imageUrls.length > 0) {\n        setSavedPageUrls(imageUrls);\n        setLoading(false);\n      } else {\n        throw new Error('Nenhuma p√°gina foi convertida com sucesso');\n      }\n\n      pdf.destroy();\n      \n    } catch (error: unknown) {\n      console.error('‚ùå ERRO CR√çTICO NA CONVERS√ÉO:', error);\n      setLoading(false);\n      \n      // FIX: Properly declare variables with explicit types\n      let errorMessage: string = \"Erro ao processar o documento\";\n      let suggestion: string = \"Tente as seguintes solu√ß√µes:\";\n      let details: string = error instanceof Error ? error.message : String(error);\n      \n      if (error instanceof Error) {\n        if (error.message?.includes(\"Invalid PDF\")) {\n          errorMessage = \"Arquivo PDF inv√°lido ou corrompido\";\n          suggestion = \"‚Ä¢ Verifique se o arquivo n√£o est√° corrompido\\n‚Ä¢ Tente salvar o PDF novamente\\n‚Ä¢ Use uma imagem (JPG/PNG) como alternativa\";\n        } else if (error.message?.includes(\"fetch\") || error.message?.includes(\"HTTP\") || error.message?.includes(\"NetworkError\")) {\n          errorMessage = \"Erro de conex√£o ou arquivo n√£o encontrado\";\n          suggestion = \"‚Ä¢ Verifique se o servidor backend est√° rodando\\n‚Ä¢ Confirme se o arquivo foi enviado corretamente\\n‚Ä¢ Tente fazer upload novamente\";\n        } else if (error.message?.includes(\"Timeout\")) {\n          errorMessage = \"Tempo limite excedido na convers√£o\";\n          suggestion = \"‚Ä¢ O PDF pode ser muito complexo\\n‚Ä¢ Tente um PDF mais simples\\n‚Ä¢ Use uma imagem como alternativa\";\n        } else if (error.message?.includes(\"ArrayBuffer\")) {\n          errorMessage = \"Erro ao ler o arquivo\";\n          suggestion = \"‚Ä¢ O arquivo pode estar corrompido\\n‚Ä¢ Verifique se √© um PDF v√°lido\\n‚Ä¢ Tente outro arquivo\";\n        }\n      }\n      \n      setDebugInfo({ \n        error: errorMessage,\n        suggestion: suggestion,\n        details: details,\n        timestamp: new Date().toLocaleTimeString(),\n        troubleshooting: [\n          \"1. Verifique se o servidor backend est√° funcionando\",\n          \"2. Confirme se o arquivo foi enviado corretamente\",\n          \"3. Tente usar uma imagem (JPG/PNG) ao inv√©s de PDF\",\n          \"4. Verifique o console do navegador (F12) para mais detalhes\"\n        ]\n      });\n    }\n  };\n\n  // Limpar timers\n  const clearAllTimers = useCallback(() => {\n    if (restartTimerRef.current) {\n      clearTimeout(restartTimerRef.current);\n      restartTimerRef.current = null;\n    }\n    \n    if (scrollerRef.current) {\n      scrollerRef.current.stop();\n      scrollerRef.current = null;\n    }\n    \n    setIsScrolling(false);\n  }, []);\n\n  // Callback quando scroll completa\n  const handleScrollComplete = useCallback(() => {\n\n    setIsScrolling(false);\n    \n    // Chamar callback externo se fornecido (para altern√¢ncia PLASA/BONO)\n    if (onScrollComplete && (documentType === \"plasa\" || documentType === \"bono\")) {\n      onScrollComplete();\n      return; // N√£o reiniciar automaticamente, deixar o contexto controlar\n    }\n    \n    if (!isAutomationPaused) {\n      restartTimerRef.current = setTimeout(() => {\n        if (!isAutomationPaused) {\n          startContinuousScroll();\n        }\n      }, RESTART_DELAY);\n    }\n  }, [isAutomationPaused, RESTART_DELAY, documentType, onScrollComplete]);\n\n  // Iniciar scroll cont√≠nuo\n  const startContinuousScroll = useCallback(() => {\n    if ((documentType !== \"plasa\" && documentType !== \"bono\") || !containerRef.current || savedPageUrls.length === 0 || isAutomationPaused) {\n      return;\n    }\n\n    if (scrollerRef.current && scrollerRef.current.isActive) {\n      scrollerRef.current.stop();\n      scrollerRef.current = null;\n    }\n\n    const container = containerRef.current;\n    const maxScroll = container.scrollHeight - container.clientHeight;\n    \n    if (maxScroll <= 0) {\n      setTimeout(() => {\n        if (!isAutomationPaused) {\n          startContinuousScroll();\n        }\n      }, 2000);\n      return;\n    }\n\n    container.scrollTop = 0;\n    setIsScrolling(true);\n\n    scrollerRef.current = new ContinuousAutoScroller(\n      container,\n      SCROLL_SPEED,\n      handleScrollComplete\n    );\n\n    setTimeout(() => {\n      if (scrollerRef.current && !isAutomationPaused) {\n        scrollerRef.current.start();\n      }\n    }, 1000);\n  }, [documentType, savedPageUrls.length, isAutomationPaused, handleScrollComplete, SCROLL_SPEED]);\n\n  // CORRE√á√ÉO: INICIALIZAR PLASA/BONO com melhor verifica√ß√£o\n  useEffect(() => {\n    if (documentType === \"plasa\") {\n      const activeMainDoc = activePlasaDoc;\n      \n\n\n      if (isScrolling) return;\n      \n      if (!activeMainDoc || !activeMainDoc.url) {\n\n        setLoading(false);\n        setSavedPageUrls([]);\n        setDebugInfo({\n          error: `Nenhum documento ${documentType.toUpperCase()} ativo`,\n          suggestion: `Adicione um ${documentType.toUpperCase()} no painel administrativo.`\n        });\n        return;\n      }\n      \n      setSavedPageUrls([]);\n      setIsAutomationPaused(false);\n      clearAllTimers();\n      setDebugInfo({});\n\n      const docUrl = getBackendUrl(activeMainDoc.url);\n\n      \n      if (isImageFile(docUrl) || (docUrl.startsWith('blob:') && activeMainDoc.title.match(/\\.(jpg|jpeg|png|gif|webp)$/i))) {\n\n        setSavedPageUrls([docUrl]);\n        setTotalPages(1);\n        setLoading(false);\n      } else {\n\n        convertPDFToImages(docUrl);\n      }\n    }\n\n    return () => {\n      if (documentType === \"plasa\" || documentType === \"bono\") {\n        clearAllTimers();\n      }\n    };\n  }, [documentType, activePlasaDoc?.id, activePlasaDoc?.url]);\n\n  // CORRE√á√ÉO: Inicializar ESCALA com monitoramento do √≠ndice de altern√¢ncia\n  useEffect(() => {\n    if (documentType === \"escala\") {\n      const currentEscala = getCurrentEscalaDoc();\n      \n      console.log(\"üîÑ ESCALA Effect triggered:\", {\n        currentEscalaIndex,\n        totalActiveEscalas: escalaDocuments.filter(d => d.active && d.type === \"escala\").length,\n        currentEscala: currentEscala?.title,\n        category: currentEscala?.category,\n        url: currentEscala?.url,\n        id: currentEscala?.id \n      });\n      \n      setEscalaImageUrl(null);\n      setLoading(false);\n      setTotalPages(1);\n      \n      if (currentEscala?.url) {\n        const docUrl = getBackendUrl(currentEscala.url);\n        console.log(\"üñºÔ∏è ESCALA: Processando URL:\", docUrl);\n        \n        const isPDF = docUrl.toLowerCase().includes('.pdf') || currentEscala.title.toLowerCase().includes('.pdf');\n        \n        if (isPDF) {\n          console.log(\"üìÑ ESCALA: √â um PDF, convertendo para imagem...\");\n          convertEscalaPDFToImage(docUrl);\n        } else {\n          console.log(\"üñºÔ∏è ESCALA: √â uma imagem, usando diretamente\");\n          setLoading(false);\n        }\n      } else {\n        setLoading(false);\n      }\n    }\n  }, [documentType, currentEscalaIndex, escalaDocuments]);\n\n  // NOVO: Inicializar CARD√ÅPIO\nuseEffect(() => {\n  if (documentType === \"cardapio\") {\n    const currentCardapio = getCurrentCardapioDoc();\n    \n    console.log(\"üîÑ CARD√ÅPIO Effect triggered:\", {\n      currentCardapio: currentCardapio?.title,\n      url: currentCardapio?.url,\n      id: currentCardapio?.id \n    });\n    \n    // Resetar estados\n    setEscalaImageUrl(null); // Pode reutilizar ou criar setCardapioImageUrl\n    setLoading(false);\n    setTotalPages(1);\n    \n    if (currentCardapio?.url) {\n      const docUrl = getBackendUrl(currentCardapio.url);\n      console.log(\"üñºÔ∏è CARD√ÅPIO: Processando URL:\", docUrl);\n      \n      const isPDF = docUrl.toLowerCase().includes('.pdf') || currentCardapio.title.toLowerCase().includes('.pdf');\n      \n      if (isPDF) {\n        console.log(\"üìÑ CARD√ÅPIO: √â um PDF, convertendo para imagem...\");\n        convertEscalaPDFToImage(docUrl); // Pode reutilizar a fun√ß√£o ou criar uma nova\n      } else {\n        console.log(\"üñºÔ∏è CARD√ÅPIO: √â uma imagem, usando diretamente\");\n        setLoading(false);\n      }\n    } else {\n      setLoading(false);\n    }\n  }\n}, [documentType, activeCardapioDoc]);\n  // ‚úÖ FUN√á√ÉO: Verificar se URL √© imagem\n  const checkIfImageFile = async (url: string): Promise<boolean> => {\n    try {\n      const response = await fetch(url, { method: 'HEAD' });\n      const contentType = response.headers.get('content-type');\n      return contentType?.startsWith('image/') || false;\n    } catch {\n      return false;\n    }\n  };\n  \n  // NOVA FUN√á√ÉO: Converter PDF da escala para imagem\n  const convertEscalaPDFToImage = async (pdfUrl: string) => {\n    try {\n      // ‚úÖ NOVO: Obter documentId para o cache\n      const currentEscala = getCurrentEscalaDoc();\n      if (!currentEscala) {\n\n        setLoading(false);\n        return;\n      }\n      \n      const documentId = currentEscala.id;\n      \n\n      setLoading(true);\n      setLoadingProgress(0);\n  \n      // ‚úÖ NOVO: VERIFICAR CACHE PRIMEIRO\n\n      \n      try {\n        const cacheResponse = await fetch(getBackendUrl(`/api/check-escala-cache/${documentId}`));\n        const cacheResult = await cacheResponse.json();\n        \n        if (cacheResult.success && cacheResult.exists) {\n\n          const cachedUrl = getBackendUrl(cacheResult.url);\n          setEscalaImageUrl(cachedUrl);\n          setLoading(false);\n          return; // ‚úÖ SAIR AQUI - USA CACHE\n        }\n      } catch (cacheError) {\n\n      }\n      \n\n  \n      // Verificar se n√£o √© imagem primeiro\n      if (await checkIfImageFile(pdfUrl)) {\n\n        setLoading(false);\n        return;\n      }\n  \n      const pdfjsLib = await loadPDFJS();\n      const pdfData = await getPDFData(pdfUrl);\n      \n      const uint8Array = new Uint8Array(pdfData);\n      const header = new TextDecoder().decode(uint8Array.slice(0, 8));\n      \n      if (!header.startsWith('%PDF')) {\n\n        setEscalaImageUrl(pdfUrl);\n        setLoading(false);\n\n        return;\n      }\n      \n\n      \n      const loadingTask = pdfjsLib.getDocument({\n        data: pdfData,\n        verbosity: 0,\n        disableAutoFetch: true,\n        disableStream: true,\n        disableRange: true,\n        stopAtErrors: false,\n        maxImageSize: 1024 * 1024 * 10,\n        isEvalSupported: false,\n        fontExtraProperties: false,\n        useSystemFonts: false,\n        standardFontDataUrl: null\n      });\n      \n      const pdf = await loadingTask.promise;\n\n      \n      const page = await pdf.getPage(1);\n      \n      const originalViewport = page.getViewport({ scale: 1.0 });\n      const scale = Math.min(1.5, 1024 / Math.max(originalViewport.width, originalViewport.height));\n      const viewport = page.getViewport({ scale: scale });\n  \n\n  \n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d', { \n        alpha: false,\n        willReadFrequently: false\n      })!;\n      \n      canvas.height = Math.floor(viewport.height);\n      canvas.width = Math.floor(viewport.width);\n      \n      context.fillStyle = '#FFFFFF';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n  \n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n        background: '#FFFFFF',\n        intent: 'display'\n      };\n  \n\n      \n      const renderPromise = page.render(renderContext).promise;\n      const timeoutPromise = new Promise((_, reject) => \n        setTimeout(() => reject(new Error('Timeout na renderiza√ß√£o')), 60000)\n      );\n      \n      await Promise.race([renderPromise, timeoutPromise]);\n      \n\n      \n      // ‚úÖ NOVO: SALVAR NO CACHE AP√ìS CONVERS√ÉO\n      try {\n\n        \n        // CORRE√á√ÉO: Tipagem correta para o Blob\n        const imageBlob = await new Promise<Blob | null>((resolve) => {\n          canvas.toBlob((blob) => {\n            resolve(blob);\n          }, 'image/jpeg', 0.85);\n        });\n        \n        if (!imageBlob) {\n          throw new Error('Falha ao converter canvas para blob');\n        }\n        \n        const formData = new FormData();\n        formData.append('file', imageBlob, `escala-${documentId}.jpg`);\n        formData.append('documentId', documentId);\n        \n        const imageDataUrl = canvas.toDataURL('image/jpeg', 0.85);\n        \n        const saveResponse = await fetch(getBackendUrl('/api/save-escala-cache'), {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            escalId: documentId,\n            imageData: imageDataUrl\n          })\n        });\n        \n        if (saveResponse.ok) {\n          const saveResult = await saveResponse.json();\n\n          \n          // ‚úÖ Usar URL do servidor ao inv√©s de dataURL\n          const cachedUrl = getBackendUrl(saveResult.url);\n          setEscalaImageUrl(cachedUrl);\n        } else {\n          throw new Error('Falha ao salvar no servidor');\n        }\n      } catch (saveError) {\n        console.log(`‚ö†Ô∏è ESCALA: Falha ao salvar cache, usando dataURL:`, saveError);\n        // ‚úÖ Fallback: usar dataURL se n√£o conseguir salvar no servidor\n        const imageDataUrl = canvas.toDataURL('image/jpeg', 0.85);\n        setEscalaImageUrl(imageDataUrl);\n      }\n      \n      page.cleanup();\n      pdf.destroy();\n      \n      setLoading(false);\n      console.log(`üéâ ESCALA: Convers√£o conclu√≠da!`);\n      \n    } catch (error) {\n      console.error('‚ùå ESCALA: Erro na convers√£o:', error);\n      setLoading(false);\n    }\n  };\n\n  // Iniciar scroll quando p√°ginas estiverem prontas\n  useEffect(() => {\n    if (!loading && savedPageUrls.length > 0 && !isAutomationPaused && !isScrolling) {\n      const timer = setTimeout(() => {\n        if (!isAutomationPaused && savedPageUrls.length > 0 && !isScrolling) {\n          startContinuousScroll();\n        }\n      }, 3000);\n\n      return () => {\n        clearTimeout(timer);\n      };\n    }\n  }, [loading, savedPageUrls.length, isAutomationPaused, isScrolling, startContinuousScroll]);\n\n  // CORRE√á√ÉO: Renderizar conte√∫do com melhor tratamento de erros\n  const renderContent = () => {\n    if (documentType === \"plasa\" && savedPageUrls.length > 0) {\n      return (\n        <div className=\"w-full\">\n          {savedPageUrls.map((pageUrl, index) => (\n            <div key={index} className=\"w-full mb-4\">\n              <img\n                src={pageUrl}\n                alt={`PLASA - P√°gina ${index + 1}`}\n                className=\"w-full h-auto block shadow-sm\"\n                style={{ maxWidth: '100%' }}\n                onError={(e) => {\n                  console.error(`‚ùå Erro ao carregar p√°gina ${index + 1}:`, pageUrl);\n                  (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgZmlsbD0iI2Y4ZjhmOCIvPjx0ZXh0IHg9IjQwMCIgeT0iMzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXIgcMOhZ2luYSAke2luZGV4ICsgMX08L3RleHQ+PC9zdmc+';\n                }}\n                onLoad={() => {\n                  console.log(`‚úÖ P√°gina ${index + 1} carregada com sucesso`);\n                }}\n              />\n              {index < savedPageUrls.length - 1 && (\n                <div className=\"w-full h-4 bg-gradient-to-r from-blue-100 to-blue-200 flex items-center justify-center my-2\">\n                  <div className=\"text-xs text-blue-600 font-medium\">\n                    ‚Ä¢‚Ä¢‚Ä¢ P√°gina {index + 2} ‚Ä¢‚Ä¢‚Ä¢\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n          <div className=\"w-full h-20 bg-gradient-to-r from-navy/10 to-navy/20 flex items-center justify-center rounded-lg\">\n            <div className=\"text-center\">\n              <div className=\"text-navy font-bold text-lg\">üìÑ FIM DO PLASA</div>\n              <div className=\"text-navy/70 text-sm\">Reiniciando em {autoRestartDelay}s...</div>\n            </div>\n          </div>\n        </div>\n      );\n    } else if (documentType === \"escala\") {\n      const docUrl = getDocumentUrl();\n      const currentEscala = getCurrentEscalaDoc();\n      \n      console.log(\"üñºÔ∏è ESCALA: Renderizando\", {\n        docUrl,\n        escalaImageUrl: escalaImageUrl,\n        loading,\n        currentEscala: currentEscala?.title\n      });\n      \n      return (\n        <div className=\"w-full h-full flex items-center justify-center p-4\">\n          {escalaImageUrl && escalaImageUrl !== 'convertida' && escalaImageUrl !== 'nenhuma' ? (\n            <img\n              src={escalaImageUrl}\n              alt=\"Escala de Servi√ßo Convertida\"\n              className=\"max-w-full max-h-full object-contain shadow-lg\"\n              onLoad={() => {\n                console.log(`‚úÖ Escala convertida carregada com sucesso`);\n              }}\n            />\n          ) : docUrl ? (\n            <img\n              src={docUrl}\n              alt=\"Escala de Servi√ßo\"\n              className=\"max-w-full max-h-full object-contain shadow-lg\"\n              onError={(e) => {\n                console.error(\"‚ùå Erro ao carregar escala:\", docUrl);\n                (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjhmOCIvPjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXIgZXNjYWxhPC90ZXh0Pjwvc3ZnPg==';\n              }}\n              onLoad={() => {\n                console.log(`‚úÖ Escala carregada com sucesso: ${docUrl}`);\n              }}\n            />\n          ) : (\n            <div className=\"text-center text-gray-500\">\n              <div className=\"text-4xl mb-4\">üìã</div>\n              <div>Nenhuma escala ativa</div>\n              <div className=\"text-sm mt-2\">Adicione uma escala no painel administrativo</div>\n            </div>\n          )}\n        </div>\n      );\n    } else if (documentType === \"cardapio\") {\n  const docUrl = getDocumentUrl();\n  const currentCardapio = getCurrentCardapioDoc();\n  \n  return (\n    <div className=\"w-full h-full flex items-center justify-center p-4\">\n      {escalaImageUrl && escalaImageUrl !== 'convertida' && escalaImageUrl !== 'nenhuma' ? (\n        <img\n          src={escalaImageUrl}\n          alt=\"Card√°pio Semanal Convertido\"\n          className=\"max-w-full max-h-full object-contain shadow-lg\"\n          onLoad={() => {\n            console.log(`‚úÖ Card√°pio convertido carregado com sucesso`);\n          }}\n        />\n      ) : docUrl ? (\n        <img\n          src={docUrl}\n          alt=\"Card√°pio Semanal\"\n          className=\"max-w-full max-h-full object-contain shadow-lg\"\n          onError={(e) => {\n            console.error(\"‚ùå Erro ao carregar card√°pio:\", docUrl);\n            (e.target as HTMLImageElement).src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjhmOCIvPjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVycm8gYW8gY2FycmVnYXIgY2FyZMOhcGlvPC90ZXh0Pjwvc3ZnPg==';\n          }}\n          onLoad={() => {\n            console.log(`‚úÖ Card√°pio carregado com sucesso: ${docUrl}`);\n          }}\n        />\n      ) : (\n        <div className=\"text-center text-gray-500\">\n          <div className=\"text-4xl mb-4\">üçΩÔ∏è</div>\n          <div>Nenhum card√°pio ativo</div>\n          <div className=\"text-sm mt-2\">Adicione um card√°pio no painel administrativo</div>\n        </div>\n      )}\n    </div>\n  );}\n    \n\n    return (\n      <div className=\"w-full h-full flex items-center justify-center\">\n        <div className=\"text-center p-6 max-w-lg\">\n          {debugInfo.error ? (\n            <>\n              <div className=\"text-6xl mb-4\">‚ö†Ô∏è</div>\n              <div className=\"text-red-600 font-bold text-lg mb-3\">{debugInfo.error}</div>\n              <div className=\"text-sm text-gray-600 mb-4 whitespace-pre-line\">{debugInfo.suggestion}</div>\n              {debugInfo.details && (\n                <details className=\"text-xs text-gray-400 mb-4\">\n                  <summary className=\"cursor-pointer hover:text-gray-600\">Detalhes t√©cnicos</summary>\n                  <div className=\"mt-2 p-2 bg-gray-100 rounded font-mono text-left\">\n                    {debugInfo.details}\n                  </div>\n                </details>\n              )}\n              {debugInfo.troubleshooting && (\n                <details className=\"text-xs text-blue-600 mb-4\">\n                  <summary className=\"cursor-pointer hover:text-blue-800\">Guia de solu√ß√£o</summary>\n                  <div className=\"mt-2 text-left\">\n                    {debugInfo.troubleshooting.map((step: string, index: number) => (\n                      <div key={index} className=\"mb-1\">{step}</div>\n                    ))}\n                  </div>\n                </details>\n              )}\n              <div className=\"flex gap-2 justify-center\">\n                <button \n                  onClick={() => {\n                    setDebugInfo({});\n                    const activeMainDoc = activePlasaDoc;\n                    if (activeMainDoc && activeMainDoc.url) {\n                      const fullUrl = getBackendUrl(activeMainDoc.url);\n                      if (isImageFile(fullUrl)) {\n                        setSavedPageUrls([fullUrl]);\n                        setLoading(false);\n                      } else {\n                        convertPDFToImages(fullUrl);\n                      }\n                    }\n                  }}\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm\"\n                >\n                  üîÑ Tentar Novamente\n                </button>\n                <button \n                  onClick={() => {\n                    setDebugInfo({});\n                    setSavedPageUrls([]);\n                  }}\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm\"\n                >\n                  ‚ùå Cancelar\n                </button>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"text-6xl mb-4\">üìÑ</div>\n              <div className=\"text-gray-600 text-lg\">\n                {(documentType === \"plasa\" && !activePlasaDoc)\n                  ? `Nenhum documento ${documentType.toUpperCase()} ativo` \n                  : loading\n                  ? \"Processando documento...\"\n                  : \"Preparando visualiza√ß√£o...\"}\n              </div>\n              {(documentType === \"plasa\" && !activePlasaDoc) && (\n                <div className=\"mt-4 text-sm text-gray-500\">\n                  V√° para o painel administrativo e fa√ßa upload de um documento {documentType.toUpperCase()}\n                </div>\n              )}\n              {activePlasaDoc && (\n                <div className=\"mt-4 text-xs text-gray-400 bg-gray-50 p-3 rounded\">\n                  <div className=\"font-medium\">Documento ativo:</div>\n                  <div className=\"truncate\">{activePlasaDoc.title}</div>\n                  <div className=\"truncate font-mono\">{activePlasaDoc.url}</div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n const getCurrentTitle = () => {\n  if (documentType === \"escala\") {\n    return title; // ou \"ESCALA DE SERVI√áO SEMANAL\"\n  } else if (documentType === \"cardapio\") {\n    return \"CARD√ÅPIO SEMANAL\";\n  }\n  \n  return title;\n};\n\n  const currentEscala = getCurrentEscalaDoc();\n\n  return (\n\n    <Card className=\"h-full overflow-hidden border-0 shadow-none bg-transparent\">\n      {/* Header Estilizado com Gradiente */}\n\n\n\n\n<CardHeader className={`relative text-white border-b py-2 px-4 ${\n  documentType === \"cardapio\" \n    ? \"bg-gradient-to-r from-orange-700 via-amber-600 to-orange-700 border-orange-400/40 shadow-lg\" \n    : \"bg-gradient-to-r from-slate-700 via-blue-800 to-slate-700 border-blue-400/30\"\n}`}>\n  {/* Efeito de brilho melhorado baseado no tipo */}\n  <div className={`absolute inset-0 ${\n    documentType === \"cardapio\" \n      ? \"bg-gradient-to-r from-orange-400/15 via-yellow-400/10 to-orange-400/15\" \n      : \"bg-gradient-to-r from-transparent via-blue-400/10 to-transparent\"\n  }`}></div>\n\n  {/* Elementos decorativos melhorados para card√°pio */}\n  {documentType === \"cardapio\" && (\n    <>\n     \n      {/* Borda interna dupla para mais sofistica√ß√£o */}\n      <div className=\"absolute inset-[1px] rounded border border-orange-300/20\"></div>\n      <div className=\"absolute inset-1 rounded border border-orange-200/10\"></div>\n      \n      {/* Textura sutil */}\n      <div className=\"absolute inset-0 opacity-10 bg-gradient-to-br from-orange-200/20 via-transparent to-amber-200/20\"></div>\n    </>\n  )}\n\n<CardTitle className=\"relative z-10 flex items-center justify-between\">\n  <div className=\"flex items-center space-x-3\">\n    {/* √çcone estilizado baseado no tipo */}\n    <div className={`relative ${\n      documentType === \"cardapio\" ? \"w-8 h-8\" : \"w-6 h-6\"\n    }`}>\n      <div className={`w-full h-full rounded-lg flex items-center justify-center shadow-lg ${\n        documentType === \"cardapio\" \n          ? \"bg-gradient-to-br from-orange-500 to-amber-600\" \n          : \"bg-gradient-to-br from-blue-500 to-blue-600\"\n      }`}>\n        {documentType === \"plasa\" ? (\n          <span className=\"text-white text-lg leading-none\">üìã</span>\n        ) : documentType === \"bono\" ? (\n          <span className=\"text-white text-lg leading-none\">üìã</span>\n        ) : documentType === \"escala\" ? (\n          <span className=\"text-white text-lg leading-none\">üìÖ</span>\n        ) : documentType === \"cardapio\" ? (\n          <span className=\"text-white text-lg leading-none\">üçΩÔ∏è</span>\n        ) : (\n          <span className=\"text-white text-lg leading-none\">üìÑ</span>\n        )}\n      </div>\n      \n      {/* Brilho extra para card√°pio */}\n      {documentType === \"cardapio\" && (\n        <div className=\"absolute inset-0 rounded-lg bg-gradient-to-br from-orange-400/20 to-amber-400/20 blur-sm\"></div>\n      )}\n    </div>\n    \n    <div className=\"flex flex-col\">\n      <span className={`font-bold text-sm bg-clip-text text-transparent uppercase tracking-wide ${\n        documentType === \"cardapio\"\n          ? \"bg-gradient-to-r from-orange-50 via-white to-amber-50 drop-shadow-sm\"\n          : \"bg-gradient-to-r from-white to-blue-100\"\n      }`}>\n        {documentType === \"plasa\" ? (\n          activePlasaDoc?.title || \"üìã PLASA - PLANO DE SERVI√áO SEMANAL\"\n        ) : documentType === \"cardapio\" ? (\n          \"CARD√ÅPIO SEMANAL\"\n        ) : (\n          getCurrentTitle() || \"üìÖ ESCALA DE SERVI√áO SEMANAL\"\n        )}\n      </span>\n      \n      {/* REMOVIDO: Subt√≠tulo do card√°pio */}\n    </div>\n  </div>\n  \n  <div className=\"flex items-center space-x-3\">\n    {/* Indicador OFICIAIS | PRA√áAS fixo com √≠cones para ESCALA */}\n    {documentType === \"escala\" && (() => {\n      const currentEscala = getCurrentEscalaDoc();\n      const isOficial = currentEscala?.category === \"oficial\";\n      \n      return (\n        <div className=\"bg-slate-600/50 backdrop-blur-sm rounded-lg px-3 py-1 border border-slate-400/30 flex items-center\">\n          <div className=\"flex items-center gap-2\">\n            {/* OFICIAIS */}\n            <div className=\"flex items-center gap-1\">\n              <span className={`text-sm transition-all duration-300 ${\n                isOficial ? \"opacity-100\" : \"opacity-40\"\n              }`}>‚≠ê</span>\n              <span className={`text-xs font-bold transition-all duration-300 ${\n                isOficial \n                  ? \"text-yellow-200 drop-shadow-sm\" \n                  : \"text-slate-400\"\n              }`}>\n                OFICIAIS\n              </span>\n            </div>\n            \n            {/* Separador */}\n            <span className=\"text-slate-300 text-xs mx-1\">|</span>\n            \n            {/* PRA√áAS */}\n            <div className=\"flex items-center gap-1\">\n              <span className={`text-sm transition-all duration-300 ${\n                !isOficial ? \"opacity-100\" : \"opacity-40\"\n              }`}>üõ°Ô∏è</span>\n              <span className={`text-xs font-bold transition-all duration-300 ${\n                !isOficial \n                  ? \"text-green-200 drop-shadow-sm\" \n                  : \"text-slate-400\"\n              }`}>\n                PRA√áAS\n              </span>\n            </div>\n          </div>\n        </div>\n      );\n    })()}\n\n\n   {/* ADICIONAR AQUI: Indicador EAGM | 1DN para CARD√ÅPIO */}\n    {documentType === \"cardapio\" && (() => {\n      const currentCardapio = getCurrentCardapioDoc();\n      const isEAGM = currentCardapio?.unit === \"EAGM\";\n      \n      return (\n        <div className=\"bg-orange-600/50 backdrop-blur-sm rounded-lg px-3 py-1 border border-orange-400/30 flex items-center\">\n          <div className=\"flex items-center gap-2\">\n            {/* EAGM */}\n            <div className=\"flex items-center gap-1\">\n              <span className={`text-sm transition-all duration-300 ${\n                isEAGM ? \"opacity-100\" : \"opacity-40\"\n              }`}>üè¢</span>\n              <span className={`text-xs font-bold transition-all duration-300 ${\n                isEAGM \n                  ? \"text-orange-200 drop-shadow-sm\" \n                  : \"text-orange-400/60\"\n              }`}>\n                EAGM\n              </span>\n            </div>\n            \n            {/* Separador */}\n            <span className=\"text-orange-300 text-xs mx-1\">|</span>\n            \n            {/* 1DN */}\n            <div className=\"flex items-center gap-1\">\n              <span className={`text-sm transition-all duration-300 ${\n                !isEAGM ? \"opacity-100\" : \"opacity-40\"\n              }`}>‚öì</span>\n              <span className={`text-xs font-bold transition-all duration-300 ${\n                !isEAGM \n                  ? \"text-orange-200 drop-shadow-sm\" \n                  : \"text-orange-400/60\"\n              }`}>\n                1DN\n              </span>\n            </div>\n          </div>\n        </div>\n      );\n    })()}\n  </div>\n    \n\n</CardTitle>\n</CardHeader>\n      \n      <CardContent className=\"p-0 h-[calc(100%-2.5rem)] bg-white\">\n        {loading ? (\n          <div className=\"flex flex-col items-center justify-center h-full\">\n            <div className=\"w-16 h-16 border-4 border-navy border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"mt-4 text-navy text-sm font-medium\">\n              {documentType === \"plasa\" ? \"Processando documento...\" : \"Carregando...\"}\n            </p>\n          </div>\n        ) : (\n          <div\n            className=\"relative w-full h-full overflow-y-auto\"\n            ref={containerRef}\n            style={{ scrollBehavior: \"auto\" }}\n          >\n            {renderContent()}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default PDFViewer;","size_bytes":49911},"client/src/components/TemperatureDisplay.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Thermometer, RefreshCw, AlertCircle } from 'lucide-react';\nimport { getCurrentTemperature, refreshTemperature, getMinutesUntilNextUpdate } from '../utils/temperatureUtils';\n\ninterface WeatherData {\n  temp: number;\n  description: string;\n  icon: string;\n  humidity: number;\n  feelsLike: number;\n}\n\nexport const TemperatureDisplay = () => {\n  const [weather, setWeather] = useState<WeatherData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [nextUpdate, setNextUpdate] = useState(0);\n\n  // Carregar temperatura inicial\n  useEffect(() => {\n    loadTemperature();\n  }, []);\n\n  // Atualizar contador de pr√≥xima atualiza√ß√£o\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setNextUpdate(getMinutesUntilNextUpdate());\n    }, 60000); // Atualizar a cada minuto\n\n    return () => clearInterval(interval);\n  }, [weather]);\n\n  // Auto-refresh a cada 30 minutos\n  useEffect(() => {\n    const interval = setInterval(() => {\n      loadTemperature();\n    }, 30 * 60 * 1000); // 30 minutos\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const loadTemperature = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const data = await getCurrentTemperature();\n      if (data) {\n        setWeather(data);\n        setNextUpdate(getMinutesUntilNextUpdate());\n      } else {\n        setError(\"Dados n√£o dispon√≠veis\");\n      }\n    } catch (err) {\n      setError(\"Erro ao carregar temperatura\");\n      console.error(\"Erro na temperatura:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setLoading(true);\n    try {\n      const data = await refreshTemperature();\n      if (data) {\n        setWeather(data);\n        setNextUpdate(getMinutesUntilNextUpdate());\n      }\n    } catch (err) {\n      setError(\"Erro ao atualizar\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (error) {\n    return (\n      <div className=\"flex items-center gap-3 bg-gradient-to-r from-red-800/20 to-red-900/20 backdrop-blur-sm rounded-lg border border-red-400/20 px-4 py-2 shadow-lg\">\n        <div className=\"p-1.5 bg-red-500/20 rounded-full\">\n          <AlertCircle className=\"w-4 h-4 text-red-300\" />\n        </div>\n        <span className=\"text-red-200 text-sm font-medium\">Temp. indispon√≠vel</span>\n        <button \n          onClick={handleRefresh}\n          className=\"p-1.5 hover:bg-red-500/20 rounded-full transition-all duration-200 hover:scale-110\"\n          disabled={loading}\n          title=\"Tentar novamente\"\n        >\n          <RefreshCw className={`w-3 h-3 text-red-300 ${loading ? 'animate-spin' : ''}`} />\n        </button>\n      </div>\n    );\n  }\n\n  if (!weather) {\n    return (\n      <div className=\"flex items-center gap-3 bg-gradient-to-r from-slate-800/20 to-slate-900/20 backdrop-blur-sm rounded-lg border border-slate-400/20 px-4 py-2 shadow-lg\">\n        <div className=\"p-1.5 bg-slate-500/20 rounded-full\">\n          <Thermometer className=\"w-4 h-4 text-slate-300\" />\n        </div>\n        <span className=\"text-slate-200 text-sm font-medium\">Carregando...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex items-center gap-3 bg-gradient-to-r from-slate-800/20 to-slate-900/20 backdrop-blur-sm rounded-lg border border-slate-400/20 px-4 py-2 shadow-lg\">\n      {/* √çcone */}\n      <div className=\"p-1.5 bg-slate-500/20 rounded-full\">\n        <Thermometer className=\"w-4 h-4 text-slate-300\" />\n      </div>\n      \n      {/* Informa√ß√µes da temperatura */}\n      <div className=\"flex flex-col gap-1\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-lg font-bold text-white\">\n            {weather.temp}¬∞C\n          </span>\n          <span className=\"text-xs text-slate-300\">\n            Sensa√ß√£o {weather.feelsLike}¬∞C\n          </span>\n        </div>\n        <div className=\"flex items-center gap-3 text-xs text-slate-400\">\n          <span className=\"capitalize\">{weather.description}</span>\n          {weather.humidity > 0 && weather.humidity <= 100 && (\n            <span>üíß {weather.humidity}%</span>\n          )}\n        </div>\n      </div>\n      \n      {/* Bot√£o de refresh */}\n      <button \n        onClick={handleRefresh}\n        className=\"p-1.5 hover:bg-slate-500/20 rounded-full transition-all duration-200 hover:scale-110\"\n        disabled={loading}\n        title=\"Atualizar temperatura\"\n      >\n        <RefreshCw className={`w-3 h-3 text-slate-300 ${loading ? 'animate-spin' : ''}`} />\n      </button>\n    </div>\n  );\n};","size_bytes":4631},"client/src/components/WeatherAlerts.tsx":{"content":"/*\n * Sistema de Alertas Meteorol√≥gicos do Rio de Janeiro\n * Monitora condi√ß√µes clim√°ticas severas com previs√£o de chuva e alertas de seguran√ßa\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Badge } from \"@/components/ui/badge\";\n\n// Interface para dados meteorol√≥gicos\ninterface WeatherData {\n  temperature: number;\n  humidity: number;\n  windSpeed: number;\n  windDirection: string;\n  condition: string;\n  rainProbability: number;\n  rainIntensity: string;\n  pressure: number;\n  visibility: number;\n  uvIndex: number;\n  alerts: WeatherAlert[];\n  forecast: HourlyForecast[];\n}\n\ninterface WeatherAlert {\n  type: 'rain' | 'storm' | 'wind' | 'heat' | 'cold' | 'fog';\n  severity: 'baixo' | 'moderado' | 'alto' | 'extremo';\n  title: string;\n  description: string;\n  startTime?: string;\n  endTime?: string;\n  safetyTips: string[];\n}\n\ninterface HourlyForecast {\n  time: string;\n  temperature: number;\n  rainProbability: number;\n  rainIntensity: string;\n  condition: string;\n}\n\nexport const WeatherAlerts = () => {\n  const [weatherData, setWeatherData] = useState<WeatherData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n\n  // Tradu√ß√£o de condi√ß√µes meteorol√≥gicas\n  const translateCondition = (condition: string): string => {\n    const translations: Record<string, string> = {\n      'clear': 'c√©u limpo',\n      'sunny': 'ensolarado',\n      'partly cloudy': 'parcialmente nublado',\n      'cloudy': 'nublado',\n      'overcast': 'encoberto',\n      'mist': 'n√©voa',\n      'fog': 'neblina',\n      'light rain': 'chuva leve',\n      'moderate rain': 'chuva moderada',\n      'heavy rain': 'chuva forte',\n      'thunderstorm': 'tempestade',\n      'drizzle': 'garoa',\n      'shower': 'pancada de chuva'\n    };\n    return translations[condition.toLowerCase()] || condition;\n  };\n\n  // Classificar intensidade da chuva\n  const getRainIntensity = (rainChance: number): string => {\n    if (rainChance >= 80) return 'chuva forte';\n    if (rainChance >= 60) return 'chuva moderada';\n    if (rainChance >= 30) return 'chuva leve';\n    return 'sem chuva';\n  };\n\n  // Gerar alertas baseados nas condi√ß√µes atuais\n  const generateWeatherAlerts = (current: any, today: any): WeatherAlert[] => {\n    const alerts: WeatherAlert[] = [];\n    const temp = parseInt(current.temp_C);\n    const humidity = parseInt(current.humidity);\n    const windSpeed = parseInt(current.windspeedKmph);\n    const rainChance = parseInt(today.hourly[0].chanceofrain);\n\n    // Alerta de chuva\n    if (rainChance > 70) {\n      alerts.push({\n        type: 'rain',\n        severity: rainChance > 90 ? 'alto' : 'moderado',\n        title: 'Alerta de Chuva',\n        description: `${rainChance}% de chance de chuva nas pr√≥ximas horas`,\n        safetyTips: [\n          'Evite √°reas alag√°veis',\n          'Mantenha guarda-chuva ou capa de chuva',\n          'Dirija com cuidado em caso de chuva forte'\n        ]\n      });\n    }\n\n    // Alerta de vento forte\n    if (windSpeed > 40) {\n      alerts.push({\n        type: 'wind',\n        severity: windSpeed > 60 ? 'alto' : 'moderado',\n        title: 'Vento Forte',\n        description: `Ventos de ${windSpeed} km/h`,\n        safetyTips: [\n          'Evite √°reas com √°rvores altas',\n          'Cuidado com objetos soltos',\n          'N√£o use guarda-chuva em vento muito forte'\n        ]\n      });\n    }\n\n    // Alerta de temperatura alta\n    if (temp > 35) {\n      alerts.push({\n        type: 'heat',\n        severity: temp > 40 ? 'alto' : 'moderado',\n        title: 'Calor Intenso',\n        description: `Temperatura de ${temp}¬∞C`,\n        safetyTips: [\n          'Mantenha-se hidratado',\n          'Evite exposi√ß√£o solar entre 10h e 16h',\n          'Use protetor solar e roupas leves'\n        ]\n      });\n    }\n\n    // Alerta de umidade alta\n    if (humidity > 85 && temp > 25) {\n      alerts.push({\n        type: 'heat',\n        severity: 'moderado',\n        title: 'Sensa√ß√£o T√©rmica Elevada',\n        description: `Umidade de ${humidity}% com ${temp}¬∞C`,\n        safetyTips: [\n          'Ambientes com ar condicionado recomendados',\n          'Hidrate-se frequentemente',\n          'Evite atividades f√≠sicas intensas'\n        ]\n      });\n    }\n\n    return alerts;\n  };\n\n  // Gerar previs√£o hor√°ria\n  const generateHourlyForecast = (weather: any[]): HourlyForecast[] => {\n    const forecast: HourlyForecast[] = [];\n    const today = weather[0];\n    \n    today.hourly.slice(0, 6).forEach((hour: any, index: number) => {\n      const currentHour = new Date().getHours() + index;\n      forecast.push({\n        time: `${String(currentHour % 24).padStart(2, '0')}:00`,\n        temperature: parseInt(hour.tempC),\n        rainProbability: parseInt(hour.chanceofrain),\n        rainIntensity: getRainIntensity(parseInt(hour.chanceofrain)),\n        condition: translateCondition(hour.weatherDesc[0].value)\n      });\n    });\n\n    return forecast;\n  };\n\n  // Fun√ß√£o para buscar dados meteorol√≥gicos do Rio de Janeiro\n  const fetchWeatherData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Usando wttr.in - API meteorol√≥gica gratuita em portugu√™s\n      const response = await fetch('https://wttr.in/Rio+de+Janeiro?format=j1&lang=pt');\n      \n      if (!response.ok) {\n        throw new Error(`Erro HTTP: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const current = data.current_condition[0];\n      const today = data.weather[0];\n      \n      // Processar dados para alertas\n      const alerts = generateWeatherAlerts(current, today);\n      const forecast = generateHourlyForecast(data.weather);\n\n      const weatherInfo: WeatherData = {\n        temperature: parseInt(current.temp_C),\n        humidity: parseInt(current.humidity),\n        windSpeed: parseInt(current.windspeedKmph),\n        windDirection: current.winddir16Point,\n        condition: translateCondition(current.weatherDesc[0].value),\n        rainProbability: parseInt(today.hourly[0].chanceofrain),\n        rainIntensity: getRainIntensity(parseInt(today.hourly[0].chanceofrain)),\n        pressure: parseInt(current.pressure),\n        visibility: parseInt(current.visibility),\n        uvIndex: parseInt(current.uvIndex || '0'),\n        alerts,\n        forecast\n      };\n\n      setWeatherData(weatherInfo);\n      setLastUpdated(new Date());\n    } catch (err) {\n      console.error('Erro ao buscar dados meteorol√≥gicos:', err);\n      setError('Servi√ßos meteorol√≥gicos indispon√≠veis temporariamente');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Buscar dados ao carregar o componente\n  useEffect(() => {\n    fetchWeatherData();\n    \n    // Atualizar a cada 10 minutos\n    const interval = setInterval(fetchWeatherData, 10 * 60 * 1000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Determinar cor do alerta baseado na severidade\n  const getAlertColor = (severity: string) => {\n    switch (severity) {\n      case 'extremo': return 'border-red-500 bg-red-50 text-red-800';\n      case 'alto': return 'border-orange-500 bg-orange-50 text-orange-800';\n      case 'moderado': return 'border-yellow-500 bg-yellow-50 text-yellow-800';\n      default: return 'border-blue-500 bg-blue-50 text-blue-800';\n    }\n  };\n\n  // √çcone baseado no tipo de alerta\n  const getAlertIcon = (type: string) => {\n    switch (type) {\n      case 'rain': return 'üåßÔ∏è';\n      case 'storm': return '‚õàÔ∏è';\n      case 'wind': return 'üí®';\n      case 'heat': return 'üå°Ô∏è';\n      case 'cold': return 'ü•∂';\n      case 'fog': return 'üå´Ô∏è';\n      default: return '‚ö†Ô∏è';\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          üå§Ô∏è Condi√ß√µes Meteorol√≥gicas - Rio de Janeiro\n        </CardTitle>\n        <CardDescription>\n          Monitoramento em tempo real com alertas de seguran√ßa\n          {lastUpdated && (\n            <span className=\"text-xs block mt-1\">\n              √öltima atualiza√ß√£o: {lastUpdated.toLocaleTimeString('pt-BR')}\n            </span>\n          )}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {loading && (\n          <Alert className=\"border-blue-200 bg-blue-50\">\n            <AlertTitle className=\"text-blue-800\">\n              Carregando dados meteorol√≥gicos...\n            </AlertTitle>\n          </Alert>\n        )}\n\n        {error && (\n          <Alert className=\"border-red-200 bg-red-50\">\n            <AlertTitle className=\"text-red-800\">\n              ‚ö†Ô∏è Erro de Conex√£o\n            </AlertTitle>\n            <AlertDescription className=\"text-red-700\">\n              {error}\n            </AlertDescription>\n          </Alert>\n        )}\n\n        {weatherData && (\n          <>\n            {/* Condi√ß√µes Atuais */}\n            <Alert className=\"border-green-200 bg-green-50\">\n              <AlertTitle className=\"text-green-800 flex items-center gap-2\">\n                üå§Ô∏è Condi√ß√µes Atuais\n              </AlertTitle>\n              <AlertDescription className=\"text-green-700\">\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold\">{weatherData.temperature}¬∞C</div>\n                    <div className=\"text-xs\">{weatherData.condition}</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-bold\">{weatherData.rainProbability}%</div>\n                    <div className=\"text-xs\">Chuva</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-bold\">{weatherData.windSpeed} km/h</div>\n                    <div className=\"text-xs\">Vento</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-bold\">{weatherData.humidity}%</div>\n                    <div className=\"text-xs\">Umidade</div>\n                  </div>\n                </div>\n              </AlertDescription>\n            </Alert>\n\n            {/* Alertas Ativos */}\n            {weatherData.alerts.length > 0 && (\n              <div className=\"space-y-3\">\n                <h3 className=\"font-medium text-gray-800\">üö® Alertas Ativos:</h3>\n                {weatherData.alerts.map((alert, index) => (\n                  <Alert key={index} className={getAlertColor(alert.severity)}>\n                    <AlertTitle className=\"flex items-center gap-2\">\n                      {getAlertIcon(alert.type)} {alert.title}\n                      <Badge variant=\"outline\" className=\"ml-auto\">\n                        {alert.severity.toUpperCase()}\n                      </Badge>\n                    </AlertTitle>\n                    <AlertDescription>\n                      <div className=\"space-y-2\">\n                        <p>{alert.description}</p>\n                        <div className=\"bg-white/50 p-2 rounded text-sm\">\n                          <strong>Dicas de Seguran√ßa:</strong>\n                          <ul className=\"list-disc list-inside mt-1 space-y-1\">\n                            {alert.safetyTips.map((tip, tipIndex) => (\n                              <li key={tipIndex}>{tip}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      </div>\n                    </AlertDescription>\n                  </Alert>\n                ))}\n              </div>\n            )}\n\n            {/* Previs√£o das Pr√≥ximas Horas */}\n            {weatherData.forecast.length > 0 && (\n              <div className=\"space-y-3\">\n                <h3 className=\"font-medium text-gray-800\">‚è∞ Pr√≥ximas Horas:</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {weatherData.forecast.slice(0, 6).map((hour, index) => (\n                    <div key={index} className=\"bg-gray-50 p-3 rounded-lg text-center\">\n                      <div className=\"font-bold text-lg\">{hour.time}</div>\n                      <div className=\"text-sm\">{hour.temperature}¬∞C</div>\n                      <div className=\"text-xs text-blue-600\">\n                        {hour.rainProbability}% chuva\n                      </div>\n                      <div className=\"text-xs text-gray-600 mt-1\">\n                        {hour.condition}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Status sem alertas */}\n            {weatherData.alerts.length === 0 && (\n              <Alert className=\"border-green-200 bg-green-50\">\n                <AlertTitle className=\"text-green-800 flex items-center gap-2\">\n                  ‚úÖ Condi√ß√µes Normais\n                </AlertTitle>\n                <AlertDescription className=\"text-green-700\">\n                  N√£o h√° alertas meteorol√≥gicos ativos para a regi√£o do Rio de Janeiro.\n                  Condi√ß√µes clim√°ticas dentro da normalidade.\n                </AlertDescription>\n              </Alert>\n            )}\n          </>\n        )}\n\n        {/* Bot√£o de atualiza√ß√£o manual */}\n        <div className=\"pt-2 border-t\">\n          <button\n            onClick={fetchWeatherData}\n            disabled={loading}\n            className=\"text-sm text-blue-600 hover:text-blue-800 disabled:text-gray-400\"\n          >\n            {loading ? 'Atualizando...' : 'üîÑ Atualizar dados meteorol√≥gicos'}\n          </button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};","size_bytes":13857},"client/src/components/WeatherAlertsActive.tsx":{"content":"/*\n * Alertas Meteorol√≥gicos Compactos - Vers√£o Header\n * Layout horizontal compacto para o header\n */\n\nimport React, { useState, useEffect } from \"react\";\n\nexport const WeatherAlertsActive = () => {\n  const [temperature, setTemperature] = useState<number>(23);\n  const [condition, setCondition] = useState<string>('nublado');\n  const [rainTime, setRainTime] = useState<string | null>(null);\n  const [humidity, setHumidity] = useState<number>(67);\n  const [rainChance, setRainChance] = useState<number>(70);\n  const [loading, setLoading] = useState(true);\n\n  // √çcones para diferentes condi√ß√µes meteorol√≥gicas\n  const getWeatherIcon = (condition: string, hasRain: boolean): string => {\n    const cond = condition.toLowerCase();\n    \n    if (hasRain || cond.includes('chuva') || cond.includes('rain')) return 'üåßÔ∏è';\n    if (cond.includes('tempestade') || cond.includes('thunder')) return '‚õàÔ∏è';\n    if (cond.includes('sol') || cond.includes('sunny') || cond.includes('clear')) return '‚òÄÔ∏è';\n    if (cond.includes('nublado') || cond.includes('cloudy')) return '‚òÅÔ∏è';\n    if (cond.includes('parcialmente') || cond.includes('partly')) return '‚õÖ';\n    if (cond.includes('encoberto') || cond.includes('overcast')) return '‚òÅÔ∏è';\n    \n    return '‚õÖ'; // Default\n  };\n\n  // Tradu√ß√£o e normaliza√ß√£o de condi√ß√µes\n  const translateCondition = (condition: string): string => {\n    const translations: Record<string, string> = {\n      'clear': 'C√©u Limpo',\n      'sunny': 'Ensolarado',\n      'partly cloudy': 'Parcialmente Nublado',\n      'cloudy': 'Nublado',\n      'overcast': 'Encoberto',\n      'light rain': 'Chuva Leve',\n      'moderate rain': 'Chuva Moderada',\n      'heavy rain': 'Chuva Forte',\n      'thunderstorm': 'Tempestade',\n      'mist': 'Neblina',\n      'fog': 'Nevoeiro'\n    };\n    \n    const translated = translations[condition.toLowerCase()];\n    if (translated) return translated;\n    \n    return condition.charAt(0).toUpperCase() + condition.slice(1).toLowerCase();\n  };\n\n  // Buscar dados meteorol√≥gicos\n  const fetchWeather = async () => {\n    try {\n      setLoading(true);\n      \n      let temperature = 23;\n      let condition = 'Nublado';\n      let humidity = 67;\n      let rainChance = 70;\n      \n      // Fonte principal: wttr.in\n      try {\n        const response1 = await fetch('https://wttr.in/Rio+de+Janeiro?format=j1');\n        if (response1.ok) {\n          const data1 = await response1.json();\n          const current1 = data1.current_condition[0];\n          \n          temperature = parseInt(current1.temp_C);\n          condition = translateCondition(current1.weatherDesc[0].value);\n          humidity = parseInt(current1.humidity);\n          \n          console.log('üå°Ô∏è Dados meteorol√≥gicos carregados:', {\n            temp: temperature,\n            condition,\n            humidity\n          });\n        }\n      } catch (e) {\n        console.log('‚ö†Ô∏è API principal falhou, usando dados padr√£o');\n      }\n\n      setTemperature(temperature);\n      setCondition(condition);\n      setHumidity(humidity);\n      setRainChance(rainChance);\n      \n      // Encontrar pr√≥xima chuva\n      let firstRain: string | null = null;\n      \n      try {\n        const response1 = await fetch('https://wttr.in/Rio+de+Janeiro?format=j1');\n        if (response1.ok) {\n          const data1 = await response1.json();\n          const today = data1.weather[0];\n          const now = new Date();\n          const currentHour = now.getHours();\n          const currentMinutes = now.getMinutes();\n          \n          today.hourly.slice(0, 24).forEach((hour: any, index: number) => {\n            const hourTime = currentHour + index;\n            const rainChanceHour = parseInt(hour.chanceofrain);\n            \n            let isFuture = false;\n            if (index === 0) {\n              isFuture = currentMinutes < 30;\n            } else {\n              isFuture = true;\n            }\n            \n            if (!firstRain && rainChanceHour > 50 && isFuture) {\n              firstRain = `${String(hourTime % 24).padStart(2, '0')}:00`;\n            }\n          });\n        }\n      } catch (e) {\n        console.log('‚ö†Ô∏è Dados de chuva indispon√≠veis');\n      }\n      \n      setRainTime(firstRain);\n    } catch (err) {\n      console.error('Erro meteorol√≥gico:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchWeather();\n    const interval = setInterval(fetchWeather, 15 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"bg-gradient-to-r from-blue-600/30 to-slate-900/60 backdrop-blur-sm rounded-lg px-3 py-2 border border-blue-400/30 shadow-lg min-w-[240px]\">\n        <div className=\"flex items-center justify-center space-x-2\">\n          <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-300 border-t-transparent\"></div>\n          <span className=\"text-blue-200 text-xs\">Carregando...</span>\n        </div>\n      </div>\n    );\n  }\n\n  const weatherIcon = getWeatherIcon(condition, Boolean(rainTime));\n\n  return (\n    <div className=\"bg-gradient-to-r from-blue-600/30 to-slate-900/60 backdrop-blur-sm rounded-lg px-3 py-2 border border-blue-400/30 shadow-lg min-w-[240px] max-w-[280px]\">\n      {/* Layout Horizontal Compacto */}\n      <div className=\"flex items-center justify-between space-x-3\">\n        {/* Lado Esquerdo - Temperatura e Condi√ß√£o */}\n        <div className=\"flex items-center space-x-2\">\n          <span className=\"text-xl\">{weatherIcon}</span>\n          <div>\n            <div className=\"text-white text-base font-bold leading-tight\">\n              {temperature}¬∞C\n            </div>\n            <div className=\"text-blue-200 text-xs\">\n              Sensa√ß√£o {temperature}¬∞C\n            </div>\n          </div>\n        </div>\n\n        {/* Divisor Vertical */}\n        <div className=\"w-px h-8 bg-blue-400/30\"></div>\n\n        {/* Lado Direito - Condi√ß√£o e Detalhes */}\n        <div className=\"flex-1 text-right\">\n          <div className=\"text-blue-100 text-xs font-medium leading-tight\">\n            {condition}\n          </div>\n          <div className=\"flex justify-end items-center space-x-2 mt-1\">\n            <span className=\"text-blue-300 text-xs\">üíß {humidity}%</span>\n            <span className=\"text-blue-300 text-xs\">‚òî {rainChance}%</span>\n          </div>\n        </div>\n      </div>\n\n\n     \n     \n    </div>\n  );\n};","size_bytes":6430},"client/src/components/WeatherDisplay.tsx":{"content":"// src/components/WeatherDisplay.tsx\nimport React, { useState, useEffect } from 'react';\n\ninterface WeatherData {\n  temp: number;\n  description: string;\n  humidity: number;\n  feelsLike: number;\n  windSpeed: number;\n  icon: string;\n}\n\nexport const WeatherDisplay: React.FC = () => {\n  const [weather, setWeather] = useState<WeatherData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);\n\n  // Fun√ß√£o para obter temperatura com proxy da Marinha\n  const fetchWeather = async (): Promise<WeatherData | null> => {\n    try {\n      console.log('üå°Ô∏è Buscando temperatura do Rio...');\n      \n      const API_KEY = import.meta.env.VITE_OPENWEATHER_API_KEY;\n      const PROXY_URL = import.meta.env.VITE_PROXY_URL;\n      \n      if (!API_KEY) {\n        throw new Error('API Key n√£o configurada');\n      }\n\n      // Coordenadas da Ilha Fiscal (PAPEM)\n      const lat = -22.8975;\n      const lon = -43.1641;\n      \n      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=pt_br`;\n      \n      const response = await fetch(url, {\n        headers: {\n          'User-Agent': 'PAPEM-Weather-System/1.0-Marinha-Brasil'\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      \n      const weatherData: WeatherData = {\n        temp: Math.round(data.main.temp),\n        description: data.weather[0].description,\n        humidity: data.main.humidity,\n        feelsLike: Math.round(data.main.feels_like),\n        windSpeed: Math.round(data.wind.speed * 3.6), // m/s para km/h\n        icon: data.weather[0].icon\n      };\n\n      console.log(`üå°Ô∏è Temperatura obtida: ${weatherData.temp}¬∞C - ${weatherData.description}`);\n      return weatherData;\n\n    } catch (error) {\n      console.error('‚ùå Erro ao buscar clima:', error);\n      \n      // Fallback com APIs alternativas\n      return await fetchWeatherAlternative();\n    }\n  };\n\n  // APIs alternativas (wttr.in, Open-Meteo)\n  const fetchWeatherAlternative = async (): Promise<WeatherData | null> => {\n    try {\n      console.log('üîÑ Tentando API alternativa...');\n      \n      // Tentar wttr.in primeiro\n      const response = await fetch('https://wttr.in/Rio+de+Janeiro?format=j1');\n      \n      if (response.ok) {\n        const data = await response.json();\n        const current = data.current_condition[0];\n        \n        return {\n          temp: parseInt(current.temp_C),\n          description: translateDescription(current.weatherDesc[0].value),\n          humidity: parseInt(current.humidity),\n          feelsLike: parseInt(current.FeelsLikeC),\n          windSpeed: Math.round(parseInt(current.windspeedKmph)),\n          icon: '01d'\n        };\n      }\n      \n      throw new Error('APIs alternativas indispon√≠veis');\n      \n    } catch (error) {\n      console.error('‚ùå APIs alternativas falharam:', error);\n      \n      // √öltimo recurso: dados de fallback\n      return {\n        temp: 24,\n        description: 'dados indispon√≠veis',\n        humidity: 65,\n        feelsLike: 26,\n        windSpeed: 15,\n        icon: '01d'\n      };\n    }\n  };\n\n  // Traduzir descri√ß√µes para portugu√™s\n  const translateDescription = (description: string): string => {\n    const translations: { [key: string]: string } = {\n      'clear': 'ensolarado',\n      'sunny': 'ensolarado',\n      'clear sky': 'c√©u limpo',\n      'few clouds': 'poucas nuvens',\n      'scattered clouds': 'nuvens dispersas',\n      'broken clouds': 'nuvens fragmentadas',\n      'overcast clouds': 'nublado',\n      'overcast': 'nublado',\n      'cloudy': 'nublado',\n      'light rain': 'chuva fraca',\n      'moderate rain': 'chuva moderada',\n      'heavy rain': 'chuva forte',\n      'rain': 'chuva',\n      'thunderstorm': 'tempestade',\n      'mist': 'neblina',\n      'fog': 'nevoeiro'\n    };\n\n    const lowerDescription = description.toLowerCase().trim();\n    return translations[lowerDescription] || lowerDescription;\n  };\n\n  // Obter √≠cone emoji baseado na condi√ß√£o\n  const getWeatherEmoji = (icon: string, description: string): string => {\n    if (description.includes('tempestade')) return '‚õàÔ∏è';\n    if (description.includes('chuva')) return 'üåßÔ∏è';\n    if (description.includes('nublado')) return '‚òÅÔ∏è';\n    if (description.includes('nuvens')) return '‚õÖ';\n    if (description.includes('ensolarado') || description.includes('limpo')) return '‚òÄÔ∏è';\n    if (description.includes('neblina') || description.includes('nevoeiro')) return 'üå´Ô∏è';\n    return 'üå§Ô∏è';\n  };\n\n  // Carregar dados na inicializa√ß√£o\n  useEffect(() => {\n    const loadWeather = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const data = await fetchWeather();\n        \n        if (data) {\n          setWeather(data);\n          setLastUpdate(new Date());\n        } else {\n          setError('N√£o foi poss√≠vel obter dados meteorol√≥gicos');\n        }\n      } catch (err) {\n        setError('Erro ao carregar clima');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadWeather();\n    \n    // Atualizar a cada 30 minutos\n    const interval = setInterval(loadWeather, 30 * 60 * 1000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Determinar alertas meteorol√≥gicos\n  const getWeatherAlert = (weather: WeatherData) => {\n    if (weather.description.includes('tempestade')) {\n      return { severity: 'high', message: 'Tempestade', color: 'bg-red-500/30 border-red-400/50' };\n    }\n    if (weather.description.includes('chuva forte')) {\n      return { severity: 'medium', message: 'Chuva forte', color: 'bg-orange-500/30 border-orange-400/50' };\n    }\n    if (weather.temp > 35) {\n      return { severity: 'medium', message: 'Calor intenso', color: 'bg-red-500/30 border-red-400/50' };\n    }\n    if (weather.humidity > 85) {\n      return { severity: 'low', message: 'Umidade alta', color: 'bg-yellow-500/30 border-yellow-400/50' };\n    }\n    return { severity: 'normal', message: '', color: 'bg-blue-500/20 border-blue-400/30' };\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-blue-500/20 backdrop-blur-sm rounded-lg px-3 py-2 border border-blue-400/30\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n          <span className=\"text-white text-sm\">Carregando clima...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !weather) {\n    return (\n      <div className=\"bg-gray-500/20 backdrop-blur-sm rounded-lg px-3 py-2 border border-gray-400/30\">\n        <div className=\"flex items-center space-x-2\">\n          <span className=\"text-lg\">üå°Ô∏è</span>\n          <span className=\"text-white text-sm\">Clima indispon√≠vel</span>\n        </div>\n      </div>\n    );\n  }\n\n  const alert = getWeatherAlert(weather);\n  const weatherEmoji = getWeatherEmoji(weather.icon, weather.description);\n\n  return (\n    <div className={`backdrop-blur-sm rounded-lg px-3 py-2 border ${alert.color}`}>\n      <div className=\"flex items-center space-x-2\">\n        <span className=\"text-lg\">{weatherEmoji}</span>\n        <div className=\"text-white\">\n          <div className=\"text-sm font-medium\">\n            {weather.temp}¬∞C\n          </div>\n          <div className=\"text-xs opacity-80 capitalize\">\n            {weather.description}\n          </div>\n        </div>\n      </div>\n      \n      {alert.severity !== 'normal' && (\n        <div className=\"mt-1 text-xs text-white/90\">\n          {alert.message}\n        </div>\n      )}\n      \n      {lastUpdate && (\n        <div className=\"mt-1 text-xs text-white/60\">\n          {lastUpdate.toLocaleTimeString('pt-BR', { \n            hour: '2-digit', \n            minute: '2-digit' \n          })}\n        </div>\n      )}\n    </div>\n  );\n};","size_bytes":7985},"client/src/context/DisplayContext-backup.tsx":{"content":"// Backup do DisplayContext para recupera√ß√£o em caso de erro","size_bytes":62},"client/src/context/DisplayContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode, useEffect, useRef } from \"react\";\n\nexport interface Notice {\n  id: string;\n  title: string;\n  content: string;\n  priority: \"high\" | \"medium\" | \"low\";\n  startDate: Date;\n  endDate: Date;\n  active: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport interface PDFDocument {\n  id: string;\n  title: string;\n  url: string;\n  type: \"plasa\" | \"escala\" | \"cardapio\";\n  category?: \"oficial\" | \"praca\"; \n  unit?: \"EAGM\" | \"1DN\";\n  tags?: string[]; // üè∑Ô∏è Tags de classifica√ß√£o autom√°tica\n  active: boolean;\n  uploadDate: Date;\n}\ninterface DisplayContextType {\n  notices: Notice[];\n  plasaDocuments: PDFDocument[];\n  escalaDocuments: PDFDocument[];\n  cardapioDocuments: PDFDocument[];\n  activePlasaDoc: PDFDocument | null;\n  activeEscalaDoc: PDFDocument | null;\n  activeCardapioDoc: PDFDocument | null;\n  currentEscalaIndex: number;\n  documentAlternateInterval: number;\n  scrollSpeed: \"slow\" | \"normal\" | \"fast\";\n  autoRestartDelay: number;\n  isLoading: boolean;\n  addNotice: (notice: Omit<Notice, \"id\" | \"createdAt\" | \"updatedAt\">) => Promise<boolean>;\n  updateNotice: (notice: Notice) => Promise<boolean>;\n  deleteNotice: (id: string) => Promise<boolean>;\n  addDocument: (document: Omit<PDFDocument, \"id\" | \"uploadDate\">) => void;\n  updateDocument: (document: PDFDocument) => void;\n  deleteDocument: (id: string) => void;\n  setDocumentAlternateInterval: (interval: number) => void;\n  setScrollSpeed: (speed: \"slow\" | \"normal\" | \"fast\") => void;\n  setAutoRestartDelay: (delay: number) => void;\n  refreshNotices: () => Promise<void>;\n  handleScrollComplete: () => void;\n}\n\nconst DisplayContext = createContext<DisplayContextType | undefined>(undefined);\n\nexport const useDisplay = () => {\n  const context = useContext(DisplayContext);\n  if (!context) {\n    throw new Error(\"useDisplay must be used within a DisplayProvider\");\n  }\n  return context;\n};\n\ninterface DisplayProviderProps {\n  children: ReactNode;\n}\n\nexport const DisplayProvider: React.FC<DisplayProviderProps> = ({ children }) => {\n  // Estados\n  const [notices, setNotices] = useState<Notice[]>([]);\n  const [plasaDocuments, setPlasaDocuments] = useState<PDFDocument[]>([]);\n  const [escalaDocuments, setEscalaDocuments] = useState<PDFDocument[]>([]);\n  const [cardapioDocuments, setCardapioDocuments] = useState<PDFDocument[]>([]);\n  const [currentEscalaIndex, setCurrentEscalaIndex] = useState(0);\n  const [documentAlternateInterval, setDocumentAlternateInterval] = useState(30000);\n  const [scrollSpeed, setScrollSpeed] = useState<\"slow\" | \"normal\" | \"fast\">(\"normal\");\n  const [autoRestartDelay, setAutoRestartDelay] = useState(3);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Ref para o timer de altern√¢ncia\n  const escalaTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const mainDocTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const isInitializingRef = useRef(true);\n  \n  // Callback para ap√≥s completar scroll (apenas PLASA agora)\n  const handleScrollComplete = () => {\n    // Fun√ß√£o simplificada - apenas PLASA\n    console.log(\"‚úÖ Scroll completo\");\n  };\n\n  // CORRE√á√ÉO: Fun√ß√£o para obter URL completa do backend - DETECTAR AMBIENTE\n const getBackendUrl = (path: string): string => {\n  if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n    return path;\n  }\n  \n  // üö® CORRE√á√ÉO: Usar IP real do servidor para acesso em rede\n  const currentHost = window.location.hostname;\n  const currentPort = window.location.port;\n  \n  // Detectar se estamos no Replit - frontend e backend na mesma porta\n  const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n  \n  if (isReplit) {\n    const currentOrigin = window.location.origin;\n\n    \n    if (path.startsWith('/')) {\n      return `${currentOrigin}${path}`;\n    }\n    return `${currentOrigin}/${path}`;\n  }\n  \n  // Se estamos acessando via IP da rede (n√£o Replit), usar porta 5000\n  if (currentHost !== 'localhost' && currentHost !== '127.0.0.1') {\n\n    \n    if (path.startsWith('/')) {\n      return `http://${currentHost}:5000${path}`;\n    }\n    return `http://${currentHost}:5000/${path}`;\n  }\n  \n  // Desenvolvimento local - usar porta 5000\n\n  \n  if (path.startsWith('/')) {\n    return `http://localhost:5000${path}`;\n  }\n  return `http://localhost:5000/${path}`;\n};\n\n  // Fun√ß√£o para gerar ID √∫nico\n  const generateUniqueId = (): string => {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  // Fun√ß√£o para normalizar URLs existentes para o ambiente atual\n  const normalizeDocumentUrl = (url: string): string => {\n    if (!url) return url;\n    \n    // Se √© uma URL local incorreta (localhost), corrigir para o ambiente atual\n    if (url.includes('localhost:')) {\n      const pathMatch = url.match(/\\/uploads\\/.*$/);\n      if (pathMatch) {\n        return getBackendUrl(pathMatch[0]);\n      }\n    }\n    \n    return url;\n  };\n\n  // CORRE√á√ÉO: Convers√£o de aviso do servidor para local\n  const convertServerNoticeToLocal = (serverNotice: any): Notice => {\n    return {\n      id: String(serverNotice.id), \n      title: serverNotice.title,\n      content: serverNotice.content,\n      priority: serverNotice.priority,\n      startDate: new Date(serverNotice.startDate),\n      endDate: new Date(serverNotice.endDate),\n      active: serverNotice.active,\n      createdAt: serverNotice.createdAt ? new Date(serverNotice.createdAt) : undefined,\n      updatedAt: serverNotice.updatedAt ? new Date(serverNotice.updatedAt) : undefined\n    };\n  };\n\n// ‚úÖ DEPOIS (completo):\nconst convertLocalNoticeToServer = (localNotice: Omit<Notice, \"id\" | \"createdAt\" | \"updatedAt\">): any => {\n\n  \n  return {\n    title: localNotice.title.trim(),\n    content: localNotice.content.trim(),\n    priority: localNotice.priority,\n    startDate: localNotice.startDate.toISOString(),\n    endDate: localNotice.endDate.toISOString(),\n    active: localNotice.active !== false // Garantir que seja boolean\n  };\n};\n\n\n\n  // CORRE√á√ÉO: Carregar avisos do servidor com melhor tratamento de erro\n  const loadNoticesFromServer = async (): Promise<void> => {\n    try {\n\n      setIsLoading(true);\n      \n      const backendUrl = getBackendUrl('/api/notices');\n\n      \n      const response = await fetch(backendUrl, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      \n      console.log(\"üì¢ Resposta do servidor:\", response.status, response.statusText);\n      \n      if (response.ok) {\n        const result = await response.json();\n        console.log(\"üì¢ Dados recebidos:\", result);\n        \n        if (result.success && Array.isArray(result.notices)) {\n          const serverNotices = result.notices.map(convertServerNoticeToLocal);\n          \n          console.log(`üì¢ ${serverNotices.length} avisos carregados do servidor`);\n          setNotices(serverNotices);\n        } else {\n          console.warn(\"‚ö†Ô∏è Resposta inv√°lida do servidor:\", result);\n          setNotices([]);\n        }\n      } else {\n        const errorText = await response.text();\n        console.error(`‚ùå Erro ao carregar avisos: ${response.status} - ${errorText}`);\n        // Manter avisos locais se servidor falhar\n      }\n    } catch (error) {\n      // Silenciar erro de conex√£o - sistema funciona normalmente\n      console.log(\"üîÑ Sistema funcionando em modo offline para avisos\");\n      // Manter avisos locais se servidor falhar\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Refresh avisos (fun√ß√£o p√∫blica)\n  const refreshNotices = async (): Promise<void> => {\n    await loadNoticesFromServer();\n  };\n\n  // CORRE√á√ÉO: Criar aviso no servidor com melhor tratamento de erro\n  const addNotice = async (noticeData: Omit<Notice, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<boolean> => {\n    try {\n      console.log(\"üì¢ Criando aviso no servidor:\", noticeData.title);\n      setIsLoading(true);\n      \n      const serverData = convertLocalNoticeToServer(noticeData);\n      console.log(\"üì¢ Dados para enviar:\", serverData);\n  // ‚úÖ ADICIONAR ESTE DEBUG TEMPOR√ÅRIO:\n    console.log(\"üîç DEBUG - Dados originais:\", {\n      title: noticeData.title,\n      content: noticeData.content,\n      priority: noticeData.priority,\n      startDate: noticeData.startDate,\n      startDateType: typeof noticeData.startDate,\n      startDateValid: noticeData.startDate instanceof Date,\n      endDate: noticeData.endDate,\n      endDateType: typeof noticeData.endDate,\n      endDateValid: noticeData.endDate instanceof Date,\n      active: noticeData.active\n    });\n    \n    console.log(\"üîç DEBUG - Dados convertidos:\", {\n      ...serverData,\n      startDateLength: serverData.startDate?.length,\n      endDateLength: serverData.endDate?.length\n    });\n    \n      const backendUrl = getBackendUrl('/api/notices');\n      console.log(\"üì¢ Enviando para:\", backendUrl);\n\n      \n      const response = await fetch(backendUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(serverData)\n      });\n      \n      console.log(\"üì¢ Resposta:\", response.status, response.statusText);\n\n      // ‚úÖ ADICIONAR ESTE DEBUG PARA VER O ERRO:\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ error: 'Erro desconhecido' }));\n      console.error(\"‚ùå Erro HTTP detalhado:\", {\n        status: response.status,\n        statusText: response.statusText,\n        errorData: errorData\n      });\n      throw new Error(errorData.error || `Erro HTTP: ${response.status}`);\n    }\n      \n      if (response.ok) {\n        const result = await response.json();\n        console.log(\"üì¢ Resultado:\", result);\n        \n        if (result.success && result.notice) {\n          const newNotice = convertServerNoticeToLocal(result.notice);\n          setNotices(prev => [...prev, newNotice]);\n          \n          console.log(`‚úÖ Aviso criado no servidor: ${newNotice.id}`);\n          return true;\n        } else {\n          throw new Error(result.error || 'Resposta inv√°lida do servidor');\n        }\n      } else {\n        const errorData = await response.json().catch(() => ({ error: 'Erro desconhecido' }));\n        console.error(\"‚ùå Erro HTTP:\", response.status, errorData);\n        throw new Error(errorData.error || `Erro HTTP: ${response.status}`);\n      }\n    } catch (error) {\n      console.error(\"‚ùå Erro ao criar aviso:\", error);\n      \n      // Fallback: adicionar localmente se servidor falhar\n      const localNotice: Notice = {\n        ...noticeData,\n        id: `local-${generateUniqueId()}`,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      setNotices(prev => [...prev, localNotice]);\n      console.log(\"‚ö†Ô∏è Aviso adicionado apenas localmente devido a erro no servidor\");\n      \n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // CORRE√á√ÉO: Atualizar aviso no servidor\n // CORRE√á√ÉO: Atualizar aviso no servidor\nconst updateNotice = async (updatedNotice: Notice): Promise<boolean> => {\n  try {\n    console.log(\"üìù Atualizando aviso no servidor:\", updatedNotice.id);\n    setIsLoading(true);\n    \n    // üî• CORRE√á√ÉO: Garantir que ID seja string antes de usar .startsWith()\n    const stringId = String(updatedNotice.id);\n    \n    // Se √© um aviso local, n√£o tentar atualizar no servidor\n    if (stringId.startsWith('local-')) {\n      setNotices(prev => prev.map(notice => \n        notice.id === updatedNotice.id ? updatedNotice : notice\n      ));\n      console.log(\"üìù Aviso local atualizado\");\n      return true;\n    }\n    \n    const serverData = convertLocalNoticeToServer(updatedNotice);\n    \n    const response = await fetch(getBackendUrl(`/api/notices/${updatedNotice.id}`), {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify(serverData)\n    });\n    \n    if (response.ok) {\n      const result = await response.json();\n      \n      if (result.success && result.notice) {\n        const updated = convertServerNoticeToLocal(result.notice);\n        setNotices(prev => prev.map(notice => \n          notice.id === updated.id ? updated : notice\n        ));\n        \n        console.log(`‚úÖ Aviso atualizado no servidor: ${updated.id}`);\n        return true;\n      } else {\n        throw new Error(result.error || 'Resposta inv√°lida do servidor');\n      }\n    } else {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || `Erro HTTP: ${response.status}`);\n    }\n  } catch (error) {\n    console.error(\"‚ùå Erro ao atualizar aviso:\", error);\n    \n    // Fallback: atualizar localmente se servidor falhar\n    setNotices(prev => prev.map(notice => \n      notice.id === updatedNotice.id ? updatedNotice : notice\n    ));\n    console.log(\"‚ö†Ô∏è Aviso atualizado apenas localmente devido a erro no servidor\");\n    \n    return false;\n  } finally {\n    setIsLoading(false);\n  }\n};\n\n  // CORRE√á√ÉO: Deletar aviso do servidor\n // CORRE√á√ÉO: Deletar aviso do servidor\nconst deleteNotice = async (id: string): Promise<boolean> => {\n  try {\n    console.log(\"üóëÔ∏è Deletando aviso do servidor:\", id);\n    setIsLoading(true);\n    \n    // üî• CORRE√á√ÉO: Garantir que ID seja string antes de usar .startsWith()\n    const stringId = String(id);\n    \n    // Se √© um aviso local, apenas remover localmente\n    if (stringId.startsWith('local-')) {\n      setNotices(prev => prev.filter(notice => String(notice.id) !== stringId));\n      console.log(\"üóëÔ∏è Aviso local removido\");\n      return true;\n    }\n    \n    const response = await fetch(getBackendUrl(`/api/notices/${id}`), {\n      method: 'DELETE'\n    });\n    \n    if (response.ok) {\n      const result = await response.json();\n      \n      if (result.success) {\n        setNotices(prev => prev.filter(notice => String(notice.id) !== stringId));\n        \n        console.log(`‚úÖ Aviso deletado do servidor: ${id}`);\n        return true;\n      } else {\n        throw new Error(result.error || 'Resposta inv√°lida do servidor');\n      }\n    } else {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || `Erro HTTP: ${response.status}`);\n    }\n  } catch (error) {\n    console.error(\"‚ùå Erro ao deletar aviso:\", error);\n    \n    // Fallback: remover localmente se servidor falhar\n    const stringId = String(id);\n    setNotices(prev => prev.filter(notice => String(notice.id) !== stringId));\n    console.log(\"‚ö†Ô∏è Aviso removido apenas localmente devido a erro no servidor\");\n    \n    return false;\n  } finally {\n    setIsLoading(false);\n  }\n};\n\n  // Fun√ß√£o addDocument (mantida igual)\n  const addDocument = (docData: Omit<PDFDocument, \"id\" | \"uploadDate\">) => {\n    const fullUrl = getBackendUrl(docData.url);\n    const id = generateUniqueId();\n    \n    const newDoc: PDFDocument = {\n      ...docData,\n      id,\n      url: fullUrl,\n      uploadDate: new Date()\n    };\n\n    console.log(\"üìÑ Adicionando documento:\", {\n      id: newDoc.id,\n      title: newDoc.title,\n      type: newDoc.type,\n      category: newDoc.category,\n      url: newDoc.url\n    });\n\n    if (docData.type === \"plasa\") {\n      setPlasaDocuments(prev => {\n        const exists = prev.some(doc => doc.url === fullUrl || doc.url === docData.url);\n        if (exists) {\n          console.log(\"üìÑ Documento PLASA j√° existe, ignorando:\", fullUrl);\n          return prev;\n        }\n        \n        console.log(\"üìÑ Adicionando novo PLASA:\", newDoc.title);\n        return [...prev, newDoc];\n      });\n    } else if (docData.type === \"cardapio\") {\n      setCardapioDocuments(prev => {\n        const exists = prev.some(doc => doc.url === fullUrl || doc.url === docData.url);\n        if (exists) {\n          console.log(\"üçΩÔ∏è Documento CARD√ÅPIO j√° existe, ignorando:\", fullUrl);\n          return prev;\n        }\n        \n        console.log(\"üçΩÔ∏è Adicionando novo CARD√ÅPIO:\", newDoc.title, \"Unidade:\", newDoc.unit);\n        return [...prev, newDoc];\n      });\n    } else {\n      // Apenas escalas ficam neste caso\n      setEscalaDocuments(prev => {\n        const exists = prev.some(doc => doc.url === fullUrl || doc.url === docData.url);\n        if (exists) {\n          console.log(\"üìã Documento Escala j√° existe, ignorando:\", fullUrl);\n          return prev;\n        }\n        \n        console.log(\"üìã Adicionando nova Escala:\", newDoc.title, \"Categoria:\", newDoc.category);\n        const newList = [...prev, newDoc];\n        \n        const activeEscalas = newList.filter(doc => doc.active);\n        if (activeEscalas.length === 1) {\n          setCurrentEscalaIndex(0);\n        }\n        \n        return newList;\n      });\n    }\n  };\n\n  const updateDocument = (updatedDoc: PDFDocument) => {\n    console.log(\"üìù Atualizando documento:\", updatedDoc.title);\n    if (updatedDoc.type === \"plasa\") {\n      setPlasaDocuments(prev => prev.map(doc => \n        doc.id === updatedDoc.id ? updatedDoc : doc\n      ));\n    } else {\n      setEscalaDocuments(prev => prev.map(doc => \n        doc.id === updatedDoc.id ? updatedDoc : doc\n      ));\n    }\n  };\n\n  const deleteDocument = async (id: string) => {\n    console.log(\"üóëÔ∏è Removendo documento:\", id);\n    \n    // Encontrar o documento para obter o filename\n    const allDocs = [...plasaDocuments, ...escalaDocuments];\n    const docToDelete = allDocs.find(doc => doc.id === id);\n    \n    if (docToDelete && docToDelete.url.includes('/uploads/')) {\n      try {\n        // Extrair filename da URL\n        const filename = docToDelete.url.split('/uploads/')[1];\n        console.log(\"üóëÔ∏è Deletando arquivo do servidor:\", filename);\n        \n        const response = await fetch(getBackendUrl(`/api/delete-pdf/${filename}`), {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        const result = await response.json();\n        \n        if (result.success) {\n          console.log(\"‚úÖ Arquivo deletado do servidor com sucesso\");\n        } else {\n          console.warn(\"‚ö†Ô∏è Falha ao deletar arquivo do servidor:\", result.error);\n        }\n      } catch (error) {\n        console.error(\"‚ùå Erro ao deletar arquivo do servidor:\", error);\n      }\n    }\n    \n    // Remover da lista local independentemente do resultado do servidor\n    setPlasaDocuments(prev => prev.filter(doc => doc.id !== id));\n    setCardapioDocuments(prev => prev.filter(doc => doc.id !== id));\n    setEscalaDocuments(prev => {\n      const newList = prev.filter(doc => doc.id !== id);\n      const activeEscalas = newList.filter(doc => doc.active);\n      if (activeEscalas.length === 0) {\n        setCurrentEscalaIndex(0);\n      } else if (currentEscalaIndex >= activeEscalas.length) {\n        setCurrentEscalaIndex(0);\n      }\n      return newList;\n    });\n  };\n\n  // Computed values com altern√¢ncia autom√°tica para escalas  \n  const activePlasaDoc = plasaDocuments.find(doc => doc.active) || null;\n  const activeCardapioDoc = cardapioDocuments.find(doc => doc.active) || null;\n  const activeEscalaDocuments = escalaDocuments.filter(doc => doc.active);\n  const activeEscalaDoc = activeEscalaDocuments.length > 0 \n    ? activeEscalaDocuments[currentEscalaIndex % activeEscalaDocuments.length] \n    : null;\n\n  // Effect para alternar escalas automaticamente\n  useEffect(() => {\n    if (escalaTimerRef.current) {\n      clearInterval(escalaTimerRef.current);\n      escalaTimerRef.current = null;\n    }\n\n    if (activeEscalaDocuments.length > 1) {\n\n      \n      escalaTimerRef.current = setInterval(() => {\n        setCurrentEscalaIndex(prevIndex => {\n          const nextIndex = (prevIndex + 1) % activeEscalaDocuments.length;\n\n          return nextIndex;\n        });\n      }, documentAlternateInterval);\n    } else if (activeEscalaDocuments.length === 1) {\n      setCurrentEscalaIndex(0);\n\n    } else {\n\n    }\n\n    return () => {\n      if (escalaTimerRef.current) {\n        clearInterval(escalaTimerRef.current);\n        escalaTimerRef.current = null;\n      }\n    };\n  }, [activeEscalaDocuments.length, documentAlternateInterval, escalaDocuments]);\n\n  // Log das mudan√ßas importantes\n  useEffect(() => {\n    if (!isInitializingRef.current) {\n\n    }\n  }, [plasaDocuments, escalaDocuments, activePlasaDoc, activeEscalaDoc, currentEscalaIndex, notices]);\n\n  // CORRE√á√ÉO: Persistir apenas documentos no localStorage (n√£o avisos)\n  useEffect(() => {\n    if (isInitializingRef.current) {\n      return;\n    }\n\n    try {\n      const contextData = {\n        plasaDocuments: plasaDocuments.map(doc => ({\n          ...doc,\n          uploadDate: doc.uploadDate.toISOString()\n        })),\n        escalaDocuments: escalaDocuments.map(doc => ({\n          ...doc,\n          uploadDate: doc.uploadDate.toISOString()\n        })),\n        currentEscalaIndex,\n        documentAlternateInterval,\n        scrollSpeed,\n        autoRestartDelay,\n        lastUpdate: new Date().toISOString(),\n        version: '3.0' // Avisos agora no servidor\n      };\n      \n      localStorage.setItem('display-context', JSON.stringify(contextData, null, 2));\n      \n\n      \n    } catch (error) {\n      console.error(\"‚ùå Erro ao salvar contexto:\", error);\n    }\n  }, [plasaDocuments, escalaDocuments, currentEscalaIndex, documentAlternateInterval, scrollSpeed, autoRestartDelay]);\n\n  // Fun√ß√£o auxiliar para determinar categoria\n  const determineCategory = (filename: string): \"oficial\" | \"praca\" | undefined => {\n    const lowerFilename = filename.toLowerCase();\n    if (lowerFilename.includes('oficial')) return 'oficial';\n    if (lowerFilename.includes('praca')) return 'praca';\n    return undefined;\n  };\n\n  // Fun√ß√£o para carregar documentos do servidor\n  const loadDocumentsFromServer = async () => {\n    try {\n\n      const response = await fetch(getBackendUrl('/api/list-pdfs'));\n      \n      if (response.ok) {\n        const result = await response.json();\n\n        \n        if (result.documents && result.documents.length > 0) {\n          result.documents.forEach((serverDoc: any) => {\n            const fullUrl = getBackendUrl(serverDoc.url);\n            \n            const existsInPlasa = plasaDocuments.some(doc => doc.url === fullUrl);\n            const existsInEscala = escalaDocuments.some(doc => doc.url === fullUrl);\n            \n            // CORRE√á√ÉO: Verificar se documento j√° existe em QUALQUER lista\n            const existsInCardapio = cardapioDocuments.some(doc => doc.url === fullUrl);\n            \n            if (!existsInPlasa && !existsInEscala && !existsInCardapio) {\n              // USAR A CLASSIFICA√á√ÉO DO BACKEND DIRETAMENTE\n              const docType = serverDoc.type || 'escala'; // fallback para escala\n              const category = determineCategory(serverDoc.filename);\n              \n              // Gerar t√≠tulo baseado no tipo correto\n              const typeNames = {\n                'plasa': 'PLASA',\n                'escala': 'Escala',\n                'cardapio': 'Card√°pio'\n              };\n              const typeName = typeNames[docType as keyof typeof typeNames] || 'Documento';\n              \n              const docData: Omit<PDFDocument, \"id\" | \"uploadDate\"> = {\n                title: `${typeName} - ${new Date(serverDoc.created).toLocaleDateString('pt-BR')}`,\n                url: fullUrl,\n                type: docType as any, // Usar o tipo do servidor diretamente\n                category: docType === 'escala' ? category : undefined,\n                active: true\n              };\n              \n\n              addDocument(docData);\n            }\n          });\n        }\n      }\n    } catch (error) {\n      // Silenciar erros de documentos - sistema funciona em modo offline\n\n    }\n  };\n\n  // CORRE√á√ÉO: Inicializa√ß√£o robusta com fallback para erros de documento\n  useEffect(() => {\n    const initializeContext = async () => {\n\n      \n      try {\n        // Carregar configura√ß√µes do localStorage\n        const saved = localStorage.getItem('display-context');\n        if (saved) {\n          try {\n            const data = JSON.parse(saved);\n\n\n            // Carregar documentos PLASA com corre√ß√£o de URL\n            if (data.plasaDocuments && Array.isArray(data.plasaDocuments)) {\n              const validPlasaDocs = data.plasaDocuments\n                .filter((doc: any) => doc && doc.id && doc.title && doc.url)\n                .map((doc: any) => {\n                  return {\n                    ...doc,\n                    url: normalizeDocumentUrl(doc.url),\n                    uploadDate: new Date(doc.uploadDate),\n                    active: doc.active !== false\n                  };\n                });\n              \n              if (validPlasaDocs.length > 0) {\n                setPlasaDocuments(validPlasaDocs);\n\n              }\n            }\n\n\n            // Carregar documentos Escala com corre√ß√£o de URL\n            if (data.escalaDocuments && Array.isArray(data.escalaDocuments)) {\n              const validEscalaDocs = data.escalaDocuments\n                .filter((doc: any) => doc && doc.id && doc.title && doc.url)\n                .map((doc: any) => {\n                  return {\n                    ...doc,\n                    url: normalizeDocumentUrl(doc.url),\n                    uploadDate: new Date(doc.uploadDate),\n                    active: doc.active !== false\n                  };\n                });\n              \n              if (validEscalaDocs.length > 0) {\n                setEscalaDocuments(validEscalaDocs);\n\n              }\n            }\n\n            // Carregar configura√ß√µes\n            if (typeof data.currentEscalaIndex === 'number') {\n              setCurrentEscalaIndex(data.currentEscalaIndex);\n            }\n            if (data.documentAlternateInterval) setDocumentAlternateInterval(data.documentAlternateInterval);\n            if (data.scrollSpeed) setScrollSpeed(data.scrollSpeed);\n            if (data.autoRestartDelay) setAutoRestartDelay(data.autoRestartDelay);\n          } catch (parseError) {\n            console.warn(\"‚ö†Ô∏è Erro ao processar localStorage:\", parseError);\n            localStorage.removeItem('display-context');\n          }\n        }\n\n        // Carregar avisos do servidor\n        try {\n          await loadNoticesFromServer();\n        } catch (noticeError) {\n          console.warn(\"‚ö†Ô∏è Falha ao carregar avisos do servidor:\", noticeError);\n        }\n        \n        // Carregar documentos do servidor (n√£o bloqueante)\n        setTimeout(() => {\n          loadDocumentsFromServer().catch(() => {\n            // Silenciar erro - sistema funciona normalmente\n          });\n        }, 1000);\n        \n      } catch (error) {\n        console.error(\"‚ùå Erro na inicializa√ß√£o:\", error);\n        \n        // Fallback: tentar carregar apenas avisos\n        try {\n          await loadNoticesFromServer();\n        } catch (fallbackError) {\n          console.error(\"‚ùå Falha total na inicializa√ß√£o:\", fallbackError);\n        }\n      } finally {\n        setTimeout(() => {\n          isInitializingRef.current = false;\n    \n        }, 2000);\n      }\n    };\n    \n    initializeContext();\n  }, []);\n\n  // Effect para resetar √≠ndice quando n√£o h√° escalas ativas\n  useEffect(() => {\n    if (activeEscalaDocuments.length === 0) {\n      setCurrentEscalaIndex(0);\n    } else if (currentEscalaIndex >= activeEscalaDocuments.length) {\n      setCurrentEscalaIndex(0);\n    }\n  }, [activeEscalaDocuments.length, currentEscalaIndex]);\n\n\n\n  const value: DisplayContextType = {\n    notices,\n    plasaDocuments,\n    escalaDocuments,\n    cardapioDocuments,\n    activePlasaDoc,\n    activeEscalaDoc,\n    activeCardapioDoc,\n    currentEscalaIndex,\n    documentAlternateInterval,\n    scrollSpeed,\n    autoRestartDelay,\n    isLoading,\n    addNotice,\n    updateNotice,\n    deleteNotice,\n    addDocument,\n    updateDocument,\n    deleteDocument,\n    setDocumentAlternateInterval,\n    setScrollSpeed,\n    setAutoRestartDelay,\n    refreshNotices,\n    handleScrollComplete,\n  };\n\n  return (\n    <DisplayContext.Provider value={value}>\n      {children}\n    </DisplayContext.Provider>\n  );\n};","size_bytes":28207},"client/src/data/officersData.ts":{"content":"// Dados dos oficiais baseados no sistema da Marinha\n// Extra√≠do do quadro de oficiais da Pagadoria de Pessoal da Marinha\n\nexport interface OfficerData {\n  name: string;\n  rank: \"1t\" | \"2t\" | \"ct\" | \"cc\" | \"cf\";\n  specialty?: string;\n  fullRankName: string;\n}\n\nexport interface MasterData {\n  name: string;\n  rank: \"3sg\" | \"2sg\" | \"1sg\";\n  specialty?: string;\n  fullRankName: string;\n}\n\n// Lista de oficiais dispon√≠veis para servi√ßo (OSE)\nexport const OFFICERS_LIST: OfficerData[] = [\n  // Capit√£es-Tenentes (CT)\n  { name: \"YAGO\", rank: \"ct\", specialty: \"IM\", fullRankName: \"Capit√£o-Tenente\" },\n  { name: \"MATEUS BARBOSA\", rank: \"ct\", specialty: \"IM\", fullRankName: \"Capit√£o-Tenente\" },\n  \n  // Primeiros-Tenentes (1T)\n  { name: \"LARISSA CASTRO\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"ALEXANDRIA\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"TAMIRES\", rank: \"1t\", specialty: \"QC-IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"KARINE\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"RONALD CHAVES\", rank: \"1t\", specialty: \"AA\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"PINA TRIGO\", rank: \"1t\", specialty: \"RM2-T\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"LEONARDO ANDRADE\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  { name: \"ELIEZER\", rank: \"1t\", specialty: \"IM\", fullRankName: \"Primeiro-Tenente\" },\n  \n  // Segundos-Tenentes (2T)\n  { name: \"MARCIO MARTINS\", rank: \"2t\", specialty: \"AA\", fullRankName: \"Segundo-Tenente\" },\n  { name: \"MACHADO\", rank: \"2t\", specialty: \"AA\", fullRankName: \"Segundo-Tenente\" }\n];\n\n// Lista de contramestreS dispon√≠veis para servi√ßo\nexport const MASTERS_LIST: MasterData[] = [\n  // Primeiros-Sargentos (1SG)\n  { name: \"SALES\", rank: \"1sg\", specialty: \"PL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"LEANDRO\", rank: \"1sg\", specialty: \"EP\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"ELIANE\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"RAFAELA\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"SILVIA HELENA\", rank: \"1sg\", specialty: \"QI\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"DA SILVA\", rank: \"1sg\", specialty: \"ES\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"BEIRUTH\", rank: \"1sg\", specialty: \"PD\", fullRankName: \"Primeiro-Sargento\" },\n  { name: \"CARLA\", rank: \"1sg\", specialty: \"CL\", fullRankName: \"Primeiro-Sargento\" },\n  \n  // Segundos-Sargentos (2SG)\n  { name: \"ALICE\", rank: \"2sg\", specialty: \"CL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"DIEGO\", rank: \"2sg\", specialty: \"ES\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"CANESCHE\", rank: \"2sg\", specialty: \"EL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"NIBI\", rank: \"2sg\", specialty: \"ES\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"MONIQUE\", rank: \"2sg\", specialty: \"PD\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"DAMASCENO\", rank: \"2sg\", specialty: \"CL\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"SOUZA LIMA\", rank: \"2sg\", specialty: \"BA\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"SANT'ANNA\", rank: \"2sg\", specialty: \"MO\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"AFONSO\", rank: \"2sg\", specialty: \"SI\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"MEIRELES\", rank: \"2sg\", specialty: \"MR\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"BRUNA ROCHA\", rank: \"2sg\", specialty: \"PD\", fullRankName: \"Segundo-Sargento\" },\n  { name: \"ARIANNE\", rank: \"2sg\", specialty: \"AD\", fullRankName: \"Segundo-Sargento\" },\n  \n  // Terceiros-Sargentos (3SG)\n  { name: \"MAYARA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"M√ÅRCIA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JUSTINO\", rank: \"3sg\", specialty: \"OS\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JONAS\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"THA√çS SILVA\", rank: \"3sg\", specialty: \"PD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"SABRINA\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"TAIN√Å NEVES\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"AMANDA PAULINO\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"ANA BEATHRIZ\", rank: \"3sg\", specialty: \"AD\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"KEVIN\", rank: \"3sg\", specialty: \"MO\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"JORGE\", rank: \"3sg\", specialty: \"CI\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"ALAN\", rank: \"3sg\", specialty: \"BA\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"HUGO\", rank: \"3sg\", specialty: \"EL\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"DA SILVA\", rank: \"3sg\", specialty: \"MR\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"FERNANDES\", rank: \"3sg\", specialty: \"AM\", fullRankName: \"Terceiro-Sargento\" },\n  { name: \"LUCAS SANTOS\", rank: \"3sg\", specialty: \"AM\", fullRankName: \"Terceiro-Sargento\" }\n];\n\n// Fun√ß√£o para obter dados completos de um oficial\nexport function getOfficerByName(name: string): OfficerData | undefined {\n  return OFFICERS_LIST.find(officer => \n    officer.name.toLowerCase().includes(name.toLowerCase()) ||\n    name.toLowerCase().includes(officer.name.toLowerCase())\n  );\n}\n\n// Fun√ß√£o para obter dados completos de um contramestre\nexport function getMasterByName(name: string): MasterData | undefined {\n  return MASTERS_LIST.find(master => \n    master.name.toLowerCase().includes(name.toLowerCase()) ||\n    name.toLowerCase().includes(master.name.toLowerCase())\n  );\n}\n\n// Fun√ß√£o para obter lista de oficiais por posto\nexport function getOfficersByRank(rank: string): OfficerData[] {\n  return OFFICERS_LIST.filter(officer => officer.rank === rank);\n}\n\n// Fun√ß√£o para obter lista de contramesters por gradua√ß√£o\nexport function getMastersByRank(rank: string): MasterData[] {\n  return MASTERS_LIST.filter(master => master.rank === rank);\n}\n\n// Mapas de tradu√ß√£o para exibi√ß√£o\nexport const RANK_DISPLAY_MAP = {\n  \"ct\": \"CT\",\n  \"cc\": \"CC\", \n  \"cf\": \"CMG\",\n  \"1t\": \"1¬∫ TEN\",\n  \"2t\": \"2¬∫ TEN\",\n  \"1sg\": \"1¬∫ SG\",\n  \"2sg\": \"2¬∫ SG\", \n  \"3sg\": \"3¬∫ SG\"\n};\n\nexport const RANK_FULL_NAME_MAP = {\n  \"ct\": \"Capit√£o-Tenente\",\n  \"cc\": \"Capit√£o-de-Corveta\",\n  \"cf\": \"Capit√£o-de-Mar-e-Guerra\", \n  \"1t\": \"Primeiro-Tenente\",\n  \"2t\": \"Segundo-Tenente\",\n  \"1sg\": \"Primeiro-Sargento\",\n  \"2sg\": \"Segundo-Sargento\",\n  \"3sg\": \"Terceiro-Sargento\"\n};","size_bytes":6503},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/pdfjs-config.ts":{"content":"import { GlobalWorkerOptions } from 'pdfjs-dist';\n\n// Configurar o worker do PDF.js\nconst pdfjsWorkerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${GlobalWorkerOptions.workerSrc ? GlobalWorkerOptions.workerSrc.split('/').slice(-2)[0] : '3.11.174'}/pdf.worker.min.js`;\n\nGlobalWorkerOptions.workerSrc = pdfjsWorkerSrc;\n\nexport default GlobalWorkerOptions;","size_bytes":361},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/Admin copy.tsx":{"content":"/*\n * Sistema de Visualiza√ß√£o da Marinha do Brasil\n * Painel Administrativo\n * \n * Autor: 2SG Bruna Rocha\n * Marinha do Brasil\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"wouter\";\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardFooter, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useDisplay, Notice, PDFDocument } from \"@/context/DisplayContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Sheet, \n  SheetContent, \n  SheetDescription, \n  SheetHeader, \n  SheetTitle, \n  SheetTrigger \n} from \"@/components/ui/sheet\";\nimport { HoverCard, HoverCardContent, HoverCardTrigger } from \"@/components/ui/hover-card\";\n\nconst Admin: React.FC = () => {\n  const { \n    notices, \n    plasaDocuments, \n    escalaDocuments,\n    addNotice,\n    updateNotice,\n    deleteNotice,\n    addDocument,\n    updateDocument,\n    deleteDocument,\n    documentAlternateInterval,\n    setDocumentAlternateInterval,\n    scrollSpeed,\n    setScrollSpeed,\n    autoRestartDelay,\n    setAutoRestartDelay,\n    isLoading,\n    refreshNotices\n  } = useDisplay();\n  \n  const { toast } = useToast();\n  \n  // Form states\n  const [newNotice, setNewNotice] = useState<Omit<Notice, \"id\" | \"createdAt\" | \"updatedAt\">>({\n    title: \"\",\n    content: \"\",\n    priority: \"medium\",\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 86400000), // Default to 1 day\n    active: true\n  });\n  \n  // Estados para upload de documentos\n  const [selectedDocType, setSelectedDocType] = useState<\"plasa\" | \"escala\" | \"cardapio\" | \"bono\">(\"plasa\");\n  const [docTitle, setDocTitle] = useState(\"\");\n  const [docUrl, setDocUrl] = useState(\"\");\n  const [docCategory, setDocCategory] = useState<\"oficial\" | \"praca\" | undefined>(undefined);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  \n  // Estados para status do sistema\n  const [serverStatus, setServerStatus] = useState<{\n    connected: boolean;\n    lastResponse: number | null;\n    lastCheck: Date | null;\n    notices: number;\n    documents: number;\n  }>({\n    connected: false,\n    lastResponse: null,\n    lastCheck: null,\n    notices: 0,\n    documents: 0\n  });\n  \n  // Fun√ß√£o para obter URL completa do backend - DETECTAR AMBIENTE\n  const getBackendUrl = (path: string): string => {\n    if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n      return path;\n    }\n    \n    // Detectar se estamos no Replit ou desenvolvimento local\n    const isReplit = window.location.hostname.includes('replit.dev') || window.location.hostname.includes('replit.co');\n    \n    if (isReplit) {\n      // No Replit, usar o mesmo dom√≠nio atual\n      const currentOrigin = window.location.origin;\n      \n      if (path.startsWith('/')) {\n        return `${currentOrigin}${path}`;\n      }\n      return `${currentOrigin}/${path}`;\n    } else {\n      // Desenvolvimento local - usar localhost:5000\n      const backendPort = '5000';\n      const backendHost = 'localhost';\n      \n      if (path.startsWith('/')) {\n        return `http://${backendHost}:${backendPort}${path}`;\n      }\n      return `http://${backendHost}:${backendPort}/${path}`;\n    }\n  };\n  \n  // Fun√ß√£o para verificar status do servidor\n  const checkServerStatus = async () => {\n    try {\n      const response = await fetch(getBackendUrl('/api/notices'));\n      setServerStatus(prev => ({\n        ...prev,\n        connected: response.ok,\n        lastResponse: response.status,\n        lastCheck: new Date(),\n        notices: notices.length,\n        documents: plasaDocuments.length + escalaDocuments.length\n      }));\n      console.log(\"üì¢ Resposta do servidor:\", response.status, response.ok ? 'OK' : 'ERROR');\n    } catch (error) {\n      setServerStatus(prev => ({\n        ...prev,\n        connected: false,\n        lastResponse: null,\n        lastCheck: new Date(),\n        notices: notices.length,\n        documents: plasaDocuments.length + escalaDocuments.length\n      }));\n      console.error(\"‚ùå Erro de conex√£o com servidor:\", error);\n    }\n  };\n\n  // Fun√ß√£o auxiliar para determinar categoria\n  const determineCategory = (filename: string): \"oficial\" | \"praca\" | undefined => {\n    const lowerFilename = filename.toLowerCase();\n    if (lowerFilename.includes('oficial')) return 'oficial';\n    if (lowerFilename.includes('praca')) return 'praca';\n    return undefined;\n  };\n// Fun√ß√£o para obter √≠cone e cor do tipo de documento\n  const getDocumentTypeInfo = (type: string) => {\n    switch (type) {\n      case \"plasa\":\n        return {\n          icon: \"üìÑ\",\n          name: \"PLASA\",\n          description: \"Plano de Servi√ßo\",\n          color: \"bg-blue-50 border-blue-200 text-blue-800\"\n        };\n        case \"bono\":  \n      return {\n        icon: \"üìã\",\n        name: \"BONO\",\n        description: \"Boletim de Not√≠cias\",\n        color: \"bg-purple-50 border-purple-200 text-purple-800\"\n      };\n      case \"escala\":\n        return {\n          icon: \"üìã\",\n          name: \"Escala\",\n          description: \"Escala de Servi√ßo\",\n          color: \"bg-green-50 border-green-200 text-green-800\"\n        };\n      case \"cardapio\":\n        return {\n          icon: \"üçΩÔ∏è\",\n          name: \"Card√°pio\",\n          description: \"Card√°pio Semanal\",\n          color: \"bg-orange-50 border-orange-200 text-orange-800\"\n        };\n      default:\n        return {\n          icon: \"üìÑ\",\n          name: \"Documento\",\n          description: \"Documento\",\n          color: \"bg-gray-50 border-gray-200 text-gray-800\"\n        };\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"üîß Admin carregado, avisos ser√£o carregados do servidor\");\n  }, []);\n  \n  // Form handler para avisos com servidor\n  const handleNoticeSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!newNotice.title || !newNotice.content) {\n      toast({\n        title: \"Erro\",\n        description: \"T√≠tulo e conte√∫do s√£o obrigat√≥rios.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Validar datas\n    if (newNotice.startDate >= newNotice.endDate) {\n      toast({\n        title: \"Erro\",\n        description: \"A data de in√≠cio deve ser anterior √† data de fim.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n    \n    console.log(\"üì¢ Enviando aviso para o servidor:\", newNotice);\n    \n    try {\n      const success = await addNotice(newNotice);\n      \n      if (success) {\n        toast({\n          title: \"Sucesso!\",\n          description: \"Aviso salvo no servidor com sucesso.\"\n        });\n      } else {\n        toast({\n          title: \"Aviso Criado\",\n          description: \"Aviso criado localmente. Verifique a conex√£o com o servidor.\",\n          variant: \"destructive\"\n        });\n      }\n      \n      // Reset form\n      setNewNotice({\n        title: \"\",\n        content: \"\",\n        priority: \"medium\",\n        startDate: new Date(),\n        endDate: new Date(Date.now() + 86400000),\n        active: true\n      });\n      \n    } catch (error) {\n      console.error(\"‚ùå Erro ao criar aviso:\", error);\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel criar o aviso. Tente novamente.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  // Fun√ß√µes de upload de documentos\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      \n      console.log(\"üìÅ Arquivo selecionado:\", {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: new Date(file.lastModified)\n      });\n\n      if (file.size > 50 * 1024 * 1024) {\n        toast({\n          title: \"Arquivo muito grande\",\n          description: \"O arquivo deve ter no m√°ximo 50MB\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const isValidType = file.type === 'application/pdf' || \n                         file.type.startsWith('image/') ||\n                         file.name.toLowerCase().endsWith('.pdf') ||\n                         file.name.toLowerCase().endsWith('.jpg') ||\n                         file.name.toLowerCase().endsWith('.jpeg') ||\n                         file.name.toLowerCase().endsWith('.png') ||\n                         file.name.toLowerCase().endsWith('.gif') ||\n                         file.name.toLowerCase().endsWith('.webp');\n\n      if (!isValidType) {\n        toast({\n          title: \"Tipo de arquivo n√£o suportado\",\n          description: \"Use PDFs ou imagens (JPG, PNG, GIF, WEBP)\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      console.log(\"‚úÖ Arquivo aceito:\", file.type);\n      setSelectedFile(file);\n      \n      if (!docTitle) {\n        let fileName = file.name.replace(/\\.[^/.]+$/, \"\");\n        setDocTitle(fileName);\n      }\n      \n      if (docUrl.startsWith('blob:')) {\n        URL.revokeObjectURL(docUrl);\n      }\n      \n      const fileUrl = URL.createObjectURL(file);\n      setDocUrl(fileUrl);\n      \n      console.log(\"üìÑ Arquivo preparado para upload:\", {\n        name: file.name,\n        size: (file.size / 1024 / 1024).toFixed(2) + ' MB',\n        type: file.type,\n        previewUrl: fileUrl\n      });\n    }\n  };\n\nconst handleDocumentSubmit = async (e: React.FormEvent) => {\n  e.preventDefault();\n  \n  if (!docTitle) {\n    toast({\n      title: \"Erro\",\n      description: \"T√≠tulo √© obrigat√≥rio.\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n\n  if (!selectedFile && !docUrl) {\n    toast({\n      title: \"Erro\",\n      description: \"Selecione um arquivo ou forne√ßa uma URL.\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n  \n  if (selectedDocType === \"escala\" && !docCategory) {\n    toast({\n      title: \"Erro\",\n      description: \"Selecione a categoria da escala (Oficial ou Pra√ßa).\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n\n  // ‚úÖ DECLARE typeInfo UMA VEZ S√ì aqui no in√≠cio\n  const typeInfo = getDocumentTypeInfo(selectedDocType);\n\n  try {\n    setIsUploading(true);\n    setUploadProgress(0);\n    \n    if (selectedFile) {\n      console.log(\"üì§ Iniciando upload do arquivo:\", selectedFile.name);\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Upload em andamento...\",\n        description: `Enviando ${typeInfo.name} ${selectedFile.name} para o servidor...`\n      });\n\n      const formData = new FormData();\n      formData.append('pdf', selectedFile);\n      formData.append('type', selectedDocType);\n      formData.append('title', docTitle);\n      \n      if (selectedDocType === \"escala\" && docCategory) {\n        formData.append('category', docCategory);\n      }\n\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return 90;\n          }\n          return prev + 10;\n        });\n      }, 200);\n\n      const uploadUrl = getBackendUrl('/api/upload-pdf');\n      \n      console.log(\"üì§ Enviando para:\", uploadUrl);\n      \n      const uploadResponse = await fetch(uploadUrl, {\n        method: 'POST',\n        body: formData,\n      });\n\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      if (!uploadResponse.ok) {\n        const errorData = await uploadResponse.json().catch(() => ({}));\n        throw new Error(errorData.error || `Erro HTTP: ${uploadResponse.status}`);\n      }\n\n      const uploadResult = await uploadResponse.json();\n      console.log(\"‚úÖ Upload realizado com sucesso:\", uploadResult);\n\n      if (!uploadResult.success) {\n        throw new Error(uploadResult.error || 'Upload falhou');\n      }\n\n      const fullUrl = getBackendUrl(uploadResult.data.url);\n      \n      console.log(\"üìÑ Adicionando documento ao contexto:\", {\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined\n      });\n      \n      addDocument({\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined,\n        active: true\n      });\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Sucesso!\",\n        description: `${typeInfo.name} enviado e salvo com sucesso.`\n      });\n      \n    } else if (docUrl && !docUrl.startsWith('blob:')) {\n      const fullUrl = docUrl.startsWith('http') ? docUrl : getBackendUrl(docUrl);\n      \n      addDocument({\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined,\n        active: true\n      });\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Sucesso!\",\n        description: `${typeInfo.name} adicionado com sucesso.`\n      });\n    }\n    \n    resetForm();\n\n  } catch (error: unknown) {\n    console.error('‚ùå Erro no upload:', error);\n    \n    let errorMessage = \"N√£o foi poss√≠vel enviar o arquivo. Tente novamente.\";\n    \n    if (error instanceof Error) {\n      if (error.message?.includes('FILE_TOO_LARGE')) {\n        errorMessage = \"Arquivo muito grande. M√°ximo permitido: 50MB.\";\n      } else if (error.message?.includes('INVALID_FILE')) {\n        errorMessage = \"Tipo de arquivo n√£o suportado. Use PDFs ou imagens.\";\n      } else if (error.message?.includes('MISSING_FIELDS')) {\n        errorMessage = \"Dados obrigat√≥rios est√£o faltando.\";\n      } else if (error.message?.includes('fetch')) {\n        errorMessage = \"Erro de conex√£o. Verifique se o servidor est√° rodando.\";\n      }\n    }\n    \n    toast({\n      title: \"Erro no upload\",\n      description: errorMessage,\n      variant: \"destructive\"\n    });\n  } finally {\n    setIsUploading(false);\n    setUploadProgress(0);\n  }\n};\n\n  const resetForm = () => {\n    setDocTitle(\"\");\n    if (docUrl.startsWith('blob:')) {\n      URL.revokeObjectURL(docUrl);\n    }\n    setDocUrl(\"\");\n    setSelectedFile(null);\n    setDocCategory(undefined);\n    \n    const fileInput = document.getElementById('docFile') as HTMLInputElement;\n    if (fileInput) {\n      fileInput.value = '';\n    }\n  };\n  \n  // Fun√ß√µes para avisos com servidor\n  const toggleNoticeActive = async (notice: Notice) => {\n    try {\n      const updatedNotice = { ...notice, active: !notice.active };\n      const success = await updateNotice(updatedNotice);\n      \n      toast({\n        title: success ? \"Aviso atualizado\" : \"Aviso atualizado localmente\",\n        description: `O aviso \"${notice.title}\" foi ${notice.active ? \"desativado\" : \"ativado\"}.`,\n        variant: success ? \"default\" : \"destructive\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel atualizar o aviso.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  const removeNotice = async (id: string) => {\n    if (confirm(\"Tem certeza que deseja remover este aviso?\")) {\n      try {\n        const success = await deleteNotice(id);\n        \n        toast({\n          title: success ? \"Aviso removido\" : \"Aviso removido localmente\",\n          description: success ? \"O aviso foi removido do servidor.\" : \"O aviso foi removido apenas localmente.\",\n          variant: success ? \"default\" : \"destructive\"\n        });\n      } catch (error) {\n        toast({\n          title: \"Erro\",\n          description: \"N√£o foi poss√≠vel remover o aviso.\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n  \n  // Fun√ß√µes para documentos\n    const toggleDocActive = (doc: PDFDocument) => {\n    updateDocument({ ...doc, active: !doc.active });\n    const typeInfo = getDocumentTypeInfo(doc.type);\n    toast({\n      title: doc.active ? `${typeInfo.name} desativado` : `${typeInfo.name} ativado`,\n      description: `O documento \"${doc.title}\" foi ${doc.active ? \"desativado\" : \"ativado\"}.`\n    });\n  };\n\n  \n  const removeDocument = async (id: string) => {\n    if (confirm(\"Tem certeza que deseja remover este documento?\")) {\n      const doc = [...plasaDocuments, ...escalaDocuments].find(d => d.id === id);\n      \n      if (doc && doc.url.includes('/uploads/')) {\n        try {\n          const filename = doc.url.split('/uploads/')[1];\n          const deleteUrl = getBackendUrl(`/api/delete-pdf/${filename}`);\n          const response = await fetch(deleteUrl, {\n            method: 'DELETE'\n          });\n          \n          if (response.ok) {\n            const result = await response.json();\n            console.log(`‚úÖ Arquivo ${filename} removido do servidor:`, result);\n          } else {\n            console.log(`‚ö†Ô∏è N√£o foi poss√≠vel remover ${filename} do servidor`);\n          }\n        } catch (error) {\n          console.log(\"‚ö†Ô∏è Erro ao remover arquivo do servidor:\", error);\n        }\n      }\n      \n      deleteDocument(id);\n      toast({\n        title: \"Documento removido\",\n        description: \"O documento foi removido com sucesso.\"\n      });\n    }\n  };\n  \n  const updateDocumentAlternateInterval = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (value >= 10 && value <= 300) {\n      setDocumentAlternateInterval(value * 1000);\n      toast({\n        title: \"Intervalo de altern√¢ncia atualizado\",\n        description: `Escalas agora alternam a cada ${value} segundos.`\n      });\n    }\n  };\n\n  const handleScrollSpeedChange = (value: string) => {\n    setScrollSpeed(value as \"slow\" | \"normal\" | \"fast\");\n    toast({\n      title: \"Velocidade atualizada\",\n      description: `Velocidade de rolagem do PLASA definida como: ${\n        value === \"slow\" ? \"Lenta\" : \n        value === \"normal\" ? \"Normal\" : \"R√°pida\"\n      }`\n    });\n  };\n\n  const handleAutoRestartChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (value >= 2 && value <= 10) {\n      setAutoRestartDelay(value);\n      toast({\n        title: \"Intervalo de rein√≠cio atualizado\",\n        description: `PLASA aguardar√° ${value} segundos no final antes de reiniciar.`\n      });\n    }\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toISOString().split(\"T\")[0];\n  };\n\n  // Effect para verificar status do servidor periodicamente\n  useEffect(() => {\n    checkServerStatus();\n    const interval = setInterval(checkServerStatus, 30000); // A cada 30 segundos\n    return () => clearInterval(interval);\n  }, [notices.length, plasaDocuments.length, escalaDocuments.length]);\n\n  // Componente de Status do Servidor\n  const ServerStatusIndicator = () => (\n    <Card className=\"mb-6\">\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-lg flex items-center gap-2\">\n          üñ•Ô∏è Status do Sistema\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={checkServerStatus}\n            className=\"ml-auto\"\n          >\n            üîÑ Verificar\n          </Button>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {/* Status de Conex√£o */}\n          <div className={`p-3 rounded-lg border ${\n            serverStatus.connected \n              ? 'bg-green-50 border-green-200 text-green-800' \n              : 'bg-red-50 border-red-200 text-red-800'\n          }`}>\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-3 h-3 rounded-full ${\n                serverStatus.connected ? 'bg-green-500' : 'bg-red-500'\n              }`}></div>\n              <span className=\"font-medium\">\n                {serverStatus.connected ? 'Conectado' : 'Desconectado'}\n              </span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.lastResponse ? `HTTP ${serverStatus.lastResponse}` : 'Sem resposta'}\n            </div>\n          </div>\n\n          {/* Avisos */}\n          <div className=\"p-3 rounded-lg border bg-blue-50 border-blue-200 text-blue-800\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">üì¢</span>\n              <span className=\"font-medium\">Avisos</span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.notices} cadastrados\n            </div>\n          </div>\n\n          {/* Documentos */}\n          <div className=\"p-3 rounded-lg border bg-purple-50 border-purple-200 text-purple-800\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">üìÅ</span>\n              <span className=\"font-medium\">Documentos</span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.documents} carregados\n            </div>\n          </div>\n\n          {/* √öltima Verifica√ß√£o */}\n          <div className=\"p-3 rounded-lg border bg-gray-50 border-gray-200 text-gray-800\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">‚è∞</span>\n              <span className=\"font-medium\">√öltima Check</span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.lastCheck \n                ? serverStatus.lastCheck.toLocaleTimeString('pt-BR', { \n                    hour: '2-digit', \n                    minute: '2-digit' \n                  })\n                : 'Nunca'\n              }\n            </div>\n          </div>\n        </div>\n\n        {/* Status detalhado */}\n        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n          <div className=\"text-sm text-gray-600\">\n            <strong>URL do Backend:</strong> {getBackendUrl('/api')} | \n            <strong className=\"ml-2\">Status:</strong> \n            <span className={`ml-1 ${\n              serverStatus.connected ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {serverStatus.connected ? '‚úÖ Online' : '‚ùå Offline'}\n            </span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4 lg:p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <header className=\"bg-navy text-white p-4 rounded-lg shadow-lg mb-6 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Painel Administrativo</h1>\n            <p className=\"text-gray-200\">Gerencie documentos e avisos do sistema de visualiza√ß√£o</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Link to=\"/\">\n              <Button variant=\"secondary\">\n                üì∫ Visualizar Sistema\n              </Button>\n            </Link>\n            <Button \n              variant=\"outline\" \n              className=\"text-white border-white hover:bg-white hover:text-navy\"\n              onClick={() => window.open(getBackendUrl('/api/status'), '_blank')}\n            >\n              üîß Status do Servidor\n            </Button>\n          </div>\n        </header>\n        \n        {/* Status Panel */}\n        <ServerStatusIndicator />\n        \n        <Tabs defaultValue=\"avisos\" className=\"w-full\">\n          <TabsList className=\"w-full mb-6\">\n            <TabsTrigger value=\"avisos\" className=\"flex-1\">üì¢ Avisos</TabsTrigger>\n            <TabsTrigger value=\"documentos\" className=\"flex-1\">üìÑ Documentos</TabsTrigger>\n            <TabsTrigger value=\"configuracoes\" className=\"flex-1\">‚öôÔ∏è Configura√ß√µes</TabsTrigger>\n            <TabsTrigger value=\"debug\" className=\"flex-1\">üîç Debug</TabsTrigger>\n          </TabsList>\n          \n          {/* Aba de Avisos */}\n          <TabsContent value=\"avisos\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Formul√°rio para novo aviso */}\n              <Card className=\"border-navy\">\n                <CardHeader className=\"bg-navy text-white\">\n                  <CardTitle>Adicionar Novo Aviso</CardTitle>\n                  <CardDescription className=\"text-gray-200\">\n                    Crie um novo aviso que ser√° salvo no servidor\n                  </CardDescription>\n                </CardHeader>\n                <form onSubmit={handleNoticeSubmit}>\n                  <CardContent className=\"space-y-4 pt-6\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"noticeTitle\">T√≠tulo do Aviso</Label>\n                      <Input \n                        id=\"noticeTitle\" \n                        placeholder=\"T√≠tulo do aviso\"\n                        value={newNotice.title}\n                        onChange={(e) => setNewNotice({...newNotice, title: e.target.value})}\n                        disabled={isLoading}\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"noticeContent\">Conte√∫do</Label>\n                      <Textarea \n                        id=\"noticeContent\" \n                        placeholder=\"Conte√∫do do aviso\"\n                        value={newNotice.content}\n                        onChange={(e) => setNewNotice({...newNotice, content: e.target.value})}\n                        rows={4}\n                        disabled={isLoading}\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"noticePriority\">Prioridade</Label>\n                      <Select \n                        value={newNotice.priority} \n                        onValueChange={(value) => setNewNotice({...newNotice, priority: value as \"high\" | \"medium\" | \"low\"})}\n                        disabled={isLoading}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Selecione a prioridade\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"high\">üî¥ Alta</SelectItem>\n                          <SelectItem value=\"medium\">üü° M√©dia</SelectItem>\n                          <SelectItem value=\"low\">üü¢ Baixa</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"startDate\">Data de In√≠cio</Label>\n                        <Input \n                          id=\"startDate\" \n                          type=\"date\" \n                          value={formatDate(newNotice.startDate)}\n                          onChange={(e) => setNewNotice({\n                            ...newNotice, \n                            startDate: new Date(e.target.value)\n                          })}\n                          disabled={isLoading}\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"endDate\">Data de T√©rmino</Label>\n                        <Input \n                          id=\"endDate\" \n                          type=\"date\" \n                          value={formatDate(newNotice.endDate)}\n                          onChange={(e) => setNewNotice({\n                            ...newNotice, \n                            endDate: new Date(e.target.value)\n                          })}\n                          disabled={isLoading}\n                        />\n                      </div>\n                    </div>\n\n                    {isLoading && (\n                      <div className=\"flex items-center justify-center p-4\">\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-navy\"></div>\n                        <span className=\"ml-2 text-sm text-navy\">Salvando no servidor...</span>\n                      </div>\n                    )}\n                  </CardContent>\n                  <CardFooter>\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full bg-navy hover:bg-navy-light\"\n                      disabled={isLoading}\n                    >\n                      {isLoading ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                          Salvando no Servidor...\n                        </>\n                      ) : (\n                        \"üì¢ Adicionar Aviso no Servidor\"\n                      )}\n                    </Button>\n                  </CardFooter>\n                </form>\n              </Card>\n              \n              {/* Lista de Avisos */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    üì¢ Avisos do Servidor\n                    <span className=\"text-sm font-normal text-gray-500\">\n                      ({notices.length})\n                    </span>\n                    {isLoading && (\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-navy\"></div>\n                    )}\n                  </CardTitle>\n                  <CardDescription className=\"flex justify-between items-center\">\n                    <span>Gerencie os avisos salvos no servidor</span>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={refreshNotices}\n                      disabled={isLoading}\n                    >\n                      üîÑ Atualizar\n                    </Button>\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {notices.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      {isLoading ? (\n                        <div>\n                          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-navy mx-auto mb-4\"></div>\n                          <p className=\"text-muted-foreground\">Carregando avisos do servidor...</p>\n                        </div>\n                      ) : (\n                        <p className=\"text-muted-foreground\">Nenhum aviso cadastrado no servidor.</p>\n                      )}\n                    </div>\n                  ) : (\n                    <ul className=\"space-y-3 max-h-[500px] overflow-y-auto pr-2\">\n                      {notices.map((notice) => (\n                        <li key={notice.id} className={`border-l-4 ${\n                          notice.priority === \"high\" ? \"border-red-500\" :\n                          notice.priority === \"medium\" ? \"border-yellow-500\" :\n                          \"border-green-500\"\n                        } rounded-md p-4 bg-white shadow-sm`}>\n                          <div className=\"flex justify-between items-start\">\n                            <h3 className=\"font-medium flex items-center gap-2\">\n                              {notice.priority === \"high\" ? \"üî¥\" :\n                               notice.priority === \"medium\" ? \"üü°\" : \"üü¢\"}\n                              {notice.title}\n                              {notice.id.startsWith('local-') && (\n                                <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full\">\n                                  Local\n                                </span>\n                              )}\n                            </h3>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                variant={notice.active ? \"default\" : \"outline\"} \n                                size=\"sm\" \n                                onClick={() => toggleNoticeActive(notice)}\n                                disabled={isLoading}\n                              >\n                                {notice.active ? \"‚úÖ\" : \"üí§\"}\n                              </Button>\n                              <Button \n                                variant=\"destructive\" \n                                size=\"sm\"\n                                onClick={() => removeNotice(notice.id)}\n                                disabled={isLoading}\n                              >\n                                üóëÔ∏è\n                              </Button>\n                            </div>\n                          </div>\n                          <p className=\"text-sm text-gray-700 my-2\">{notice.content}</p>\n                          <div className=\"flex justify-between items-center text-xs text-muted-foreground mt-2\">\n                            <span>\n                              Prioridade: {\n                                notice.priority === \"high\" ? \"üî¥ Alta\" :\n                                notice.priority === \"medium\" ? \"üü° M√©dia\" : \"üü¢ Baixa\"\n                              }\n                            </span>\n                            <span>\n                              üìÖ {notice.startDate.toLocaleDateString('pt-BR')} at√© {notice.endDate.toLocaleDateString('pt-BR')}\n                            </span>\n                          </div>\n                          {(notice.createdAt || notice.updatedAt) && (\n                            <div className=\"text-xs text-gray-400 mt-1\">\n                              {notice.createdAt && (\n                                <span>Criado: {notice.createdAt.toLocaleString('pt-BR')} </span>\n                              )}\n                              {notice.updatedAt && notice.updatedAt !== notice.createdAt && (\n                                <span>‚Ä¢ Atualizado: {notice.updatedAt.toLocaleString('pt-BR')}</span>\n                              )}\n                            </div>\n                          )}\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Informa√ß√µes sobre servidor de avisos */}\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>üåê Servidor de Avisos</CardTitle>\n                <CardDescription>\n                  Os avisos agora s√£o salvos diretamente no servidor backend\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-green-50 p-4 rounded-lg\">\n                    <h4 className=\"font-medium text-green-800 mb-2\">‚úÖ Vantagens</h4>\n                    <ul className=\"text-sm text-green-700 space-y-1\">\n                      <li>‚Ä¢ Persistem mesmo se o navegador for fechado</li>\n                      <li>‚Ä¢ Sincronizam entre diferentes dispositivos</li>\n                      <li>‚Ä¢ Backup autom√°tico no servidor</li>\n                      <li>‚Ä¢ N√£o dependem do localStorage</li>\n                    </ul>\n                  </div>\n                  \n                  <div className=\"bg-blue-50 p-4 rounded-lg\">\n                    <h4 className=\"font-medium text-blue-800 mb-2\">üîß Como Funciona</h4>\n                    <ul className=\"text-sm text-blue-700 space-y-1\">\n                      <li>‚Ä¢ Salvos em arquivo JSON no servidor</li>\n                      <li>‚Ä¢ API REST para criar/editar/deletar</li>\n                      <li>‚Ä¢ Carregamento autom√°tico na inicializa√ß√£o</li>\n                      <li>‚Ä¢ Fallback local se servidor estiver offline</li>\n                    </ul>\n                  </div>\n                  \n                  <div className=\"bg-yellow-50 p-4 rounded-lg\">\n                    <h4 className=\"font-medium text-yellow-800 mb-2\">‚ö†Ô∏è Importante</h4>\n                    <ul className=\"text-sm text-yellow-700 space-y-1\">\n                      <li>‚Ä¢ Servidor backend deve estar rodando</li>\n                      <li>‚Ä¢ Avisos \"Local\" n√£o foram salvos no servidor</li>\n                      <li>‚Ä¢ Use \"Atualizar\" se houver problemas</li>\n                      <li>‚Ä¢ Verifique logs no console (F12)</li>\n                    </ul>\n                  </div>\n                </div>\n                \n                <div className=\"mt-4 flex gap-2\">\n                  <Button \n                    variant=\"outline\"\n                    onClick={() => window.open(getBackendUrl('/api/notices'), '_blank')}\n                  >\n                    üîó Ver Avisos no Servidor\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    onClick={refreshNotices}\n                    disabled={isLoading}\n                  >\n                    üîÑ Recarregar do Servidor\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    onClick={() => {\n                      console.log(\"üì¢ Estado atual dos avisos:\", notices);\n                      toast({\n                        title: \"Debug\",\n                        description: `${notices.length} avisos no console (F12)`\n                      });\n                    }}\n                  >\n                    üêõ Debug Avisos\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n          \n        {/* Aba de Documentos - C√ìDIGO COMPLETO */}\n<TabsContent value=\"documentos\">\n  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n    {/* Upload New Document Form */}\n    <Card className=\"border-navy\">\n      <CardHeader className=\"bg-navy text-white\">\n        <CardTitle>Adicionar Novo Documento</CardTitle>\n        <CardDescription className=\"text-gray-200\">\n          Envie um novo documento PDF ou imagem para o sistema\n        </CardDescription>\n      </CardHeader>\n      <form onSubmit={handleDocumentSubmit}>\n        <CardContent className=\"space-y-4 pt-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docType\">Tipo de Documento</Label>\n            <Select \n              value={selectedDocType} \n              onValueChange={(value) => {\n                setSelectedDocType(value as \"plasa\" | \"bono\" | \"escala\" | \"cardapio\");\n                if (value !== \"escala\") {\n                  setDocCategory(undefined);\n                }\n              }}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecione o tipo\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"plasa\">üìÑ PLASA - Plano de Servi√ßo</SelectItem>\n                <SelectItem value=\"bono\">üìã BONO - Boletim de Ocorr√™ncias</SelectItem>\n                <SelectItem value=\"escala\">üìã Escala de Servi√ßo</SelectItem>\n                <SelectItem value=\"cardapio\">üçΩÔ∏è Card√°pio Semanal</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          {selectedDocType === \"escala\" && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"docCategory\">Categoria da Escala</Label>\n              <Select \n                value={docCategory} \n                onValueChange={(value) => setDocCategory(value as \"oficial\" | \"praca\")}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecione a categoria\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"oficial\">üë®‚Äç‚úàÔ∏è Oficiais</SelectItem>\n                  <SelectItem value=\"praca\">üë®‚Äçüîß Pra√ßas</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docTitle\">T√≠tulo do Documento</Label>\n            <Input \n              id=\"docTitle\" \n              placeholder={`Ex: ${\n                selectedDocType === \"plasa\" ? \"PLASA - Junho 2025\" : \n                selectedDocType === \"bono\" ? \"BONO - Junho 2025\" :\n                selectedDocType === \"escala\" ? \"Escala de Servi√ßo - Junho 2025\" :\n                selectedDocType === \"cardapio\" ? \"Card√°pio - Semana 25/2025\" :\n                \"Documento\"\n              }`}\n              value={docTitle}\n              onChange={(e) => setDocTitle(e.target.value)}\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docFile\">Arquivo do Documento</Label>\n            <Input \n              id=\"docFile\"\n              type=\"file\"\n              accept=\"application/pdf,image/*,.pdf,.jpg,.jpeg,.png,.gif,.webp\"\n              onChange={handleFileChange}\n            />\n            <div className=\"text-xs space-y-1\">\n              {selectedFile ? (\n                <div className=\"text-green-600 bg-green-50 p-2 rounded\">\n                  ‚úÖ <strong>Arquivo selecionado:</strong> {selectedFile.name} \n                  <br />\n                  üìè <strong>Tamanho:</strong> {formatFileSize(selectedFile.size)}\n                  <br />\n                  üìã <strong>Tipo:</strong> {selectedFile.type}\n                </div>\n              ) : (\n                <div className=\"text-gray-600\">\n                  üìÅ Aceita PDFs ou imagens (JPG, PNG, GIF, WEBP) - m√°ximo 50MB\n                </div>\n              )}\n            </div>\n            <div className=\"text-xs text-blue-600 bg-blue-50 p-2 rounded\">\n              üí° <strong>Recomenda√ß√£o:</strong> PDFs s√£o automaticamente convertidos para imagens para melhor compatibilidade\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docUrl\">URL do Documento (alternativo)</Label>\n            <Input \n              id=\"docUrl\" \n              placeholder=\"https://exemplo.com/documento.pdf\"\n              value={docUrl.startsWith('blob:') ? '' : docUrl}\n              onChange={(e) => setDocUrl(e.target.value)}\n              type=\"url\"\n              disabled={!!selectedFile}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Se n√£o tiver arquivo para upload, pode fornecer uma URL direta.\n            </p>\n          </div>\n\n          {isUploading && (\n            <div className=\"space-y-2\">\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-navy h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n              <p className=\"text-xs text-center text-navy\">\n                {uploadProgress < 100 ? `Enviando... ${uploadProgress}%` : \"Processando...\"}\n              </p>\n            </div>\n          )}\n        </CardContent>\n        <CardFooter>\n          <Button \n            type=\"submit\" \n            className=\"w-full bg-navy hover:bg-navy-light\"\n            disabled={isUploading || (!selectedFile && !docUrl) || !docTitle}\n          >\n            {isUploading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Enviando...\n              </>\n            ) : (\n              <>\n                üì§ Adicionar Documento\n              </>\n            )}\n          </Button>\n        </CardFooter>\n      </form>\n    </Card>\n    \n    {/* Document Lists Separadas */}\n    <div className=\"space-y-6\">\n      {/* üìÑ PLASA/BONO Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üìÑ Documentos PLASA/BONO\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({plasaDocuments.length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Planos de Servi√ßo e Boletins - Rolagem autom√°tica cont√≠nua \n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {plasaDocuments.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhum documento PLASA/BONO cadastrado.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {plasaDocuments.map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">\n                        {doc.type === \"plasa\" ? \"üìÑ\" : \"üìã\"}\n                      </span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      <span className={`text-xs px-2 py-0.5 rounded-full status-badge ${\n                        doc.type === \"plasa\" \n                          ? \"bg-blue-100 text-blue-800\" \n                          : \"bg-purple-100 text-purple-800\"\n                      }`}>\n                        {doc.type === \"plasa\" ? \"PLASA\" : \"BONO\"}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full status-badge\">\n                        üìñ Rolagem\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Documento ativo\" : \"Documento inativo\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar documento\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>{doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via do documento\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover documento\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n      \n      {/* üìã ESCALA Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üìã Escalas de Servi√ßo\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({escalaDocuments.filter(doc => doc.type === \"escala\").length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Escalas de Oficiais e Pra√ßas - Altern√¢ncia autom√°tica\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {escalaDocuments.filter(doc => doc.type === \"escala\").length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhuma escala cadastrada.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {escalaDocuments.filter(doc => doc.type === \"escala\").map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">üìã</span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      {doc.category && (\n                        <span className={`text-xs px-2 py-0.5 rounded-full status-badge ${\n                          doc.category === \"oficial\" \n                            ? \"bg-blue-100 text-blue-800\" \n                            : \"bg-green-100 text-green-800\"\n                        }`}>\n                          {doc.category === \"oficial\" ? \"üë®‚Äç‚úàÔ∏è Oficiais\" : \"üë®‚Äçüîß Pra√ßas\"}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full status-badge\">\n                        üîÑ Altern√¢ncia\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Escala ativa\" : \"Escala inativa\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar escala\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>üìã {doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via da escala de servi√ßo\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover escala\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* üçΩÔ∏è CARD√ÅPIO Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üçΩÔ∏è Card√°pios Semanais\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({escalaDocuments.filter(doc => doc.type === \"cardapio\").length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Card√°pios da Semana - Altern√¢ncia autom√°tica\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {escalaDocuments.filter(doc => doc.type === \"cardapio\").length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhum card√°pio cadastrado.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {escalaDocuments.filter(doc => doc.type === \"cardapio\").map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">üçΩÔ∏è</span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full status-badge\">\n                        CARD√ÅPIO\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full status-badge\">\n                        üîÑ Altern√¢ncia\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Card√°pio ativo\" : \"Card√°pio inativo\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar card√°pio\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>üçΩÔ∏è {doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via do card√°pio semanal\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover card√°pio\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  </div>\n\n  {/* Informa√ß√µes sobre como funciona */}\n  <Card className=\"mt-6\">\n    <CardHeader>\n      <CardTitle>‚ùì Como Funciona o Sistema de Documentos</CardTitle>\n      <CardDescription>\n        Entenda como o sistema processa e exibe os diferentes tipos de documentos\n      </CardDescription>\n    </CardHeader>\n    <CardContent>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üìÑ PLASA (Plano de Servi√ßo)\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-blue-700\">\n            <li>PDFs convertidos automaticamente para imagens</li>\n            <li>Rola automaticamente do in√≠cio ao fim</li>\n            <li>Reinicia ap√≥s intervalo configur√°vel</li>\n            <li>Velocidade de rolagem ajust√°vel</li>\n            <li>Exibido no lado esquerdo da tela</li>\n          </ul>\n        </div>\n        \n        <div className=\"bg-purple-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üìã BONO (Boletim de Ordens e Not√≠cias)\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-purple-700\">\n            <li>Mesmo comportamento do PLASA</li>\n            <li>Rolagem autom√°tica cont√≠nua</li>\n            <li>Altern√¢ncia com PLASA no lado esquerdo</li>\n            <li>Convers√£o autom√°tica PDF ‚Üí Imagem</li>\n            <li>Cache inteligente no servidor</li>\n          </ul>\n        </div>\n\n        <div className=\"bg-green-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üìã Escalas de Servi√ßo\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>Exibi√ß√£o est√°tica (sem scroll)</li>\n            <li>Altern√¢ncia autom√°tica entre escalas</li>\n            <li>Categorias: Oficiais e Pra√ßas</li>\n            <li>Intervalo de altern√¢ncia configur√°vel</li>\n            <li>Exibido no lado direito da tela</li>\n          </ul>\n        </div>\n\n        <div className=\"bg-orange-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üçΩÔ∏è Card√°pios Semanais\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-orange-700\">\n            <li>Altern√¢ncia autom√°tica entre card√°pios</li>\n            <li>Exibi√ß√£o est√°tica como as escalas</li>\n            <li>Mesmo intervalo de altern√¢ncia</li>\n            <li>Cache para melhor performance</li>\n            <li>Rotaciona junto com as escalas</li>\n          </ul>\n        </div>\n      </div>\n      \n      <div className=\"mt-6 p-4 bg-navy/5 rounded-lg border-l-4 border-navy\">\n        <h4 className=\"font-medium mb-2 text-navy\">üîß Convers√£o PDF para Imagem</h4>\n        <p className=\"text-sm text-navy/80\">\n          O sistema converte automaticamente PDFs para imagens (JPG) para garantir m√°xima compatibilidade \n          e evitar problemas de CORS, fontes faltando, ou incompatibilidades de navegador. \n          As imagens s√£o armazenadas no servidor e carregadas rapidamente atrav√©s de cache inteligente.\n        </p>\n      </div>\n      \n      <div className=\"mt-4 p-4 bg-green-50 rounded-lg border-l-4 border-green-500\">\n        <h4 className=\"font-medium mb-2 text-green-800\">üí° Dicas de Uso</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>Para melhor qualidade, use PDFs com orienta√ß√£o paisagem</li>\n            <li>Imagens (JPG/PNG) s√£o processadas mais rapidamente que PDFs</li>\n            <li>O sistema mant√©m cache das p√°ginas convertidas</li>\n            <li>Documentos inativos permanecem salvos mas n√£o s√£o exibidos</li>\n          </ul>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>PLASA/BONO: Ideal para documentos longos que precisam ser lidos</li>\n            <li>Escalas/Card√°pios: Ideal para informa√ß√µes que precisam ser vistas rapidamente</li>\n            <li>Use nomes descritivos nos t√≠tulos para melhor organiza√ß√£o</li>\n            <li>Cache evita reprocessamento desnecess√°rio</li>\n          </ul>\n        </div>\n      </div>\n    </CardContent>\n  </Card>\n</TabsContent>\n          {/* Aba de Configura√ß√µes */}\n          <TabsContent value=\"configuracoes\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>‚öôÔ∏è Configura√ß√µes do Sistema</CardTitle>\n                  <CardDescription>\n                    Ajuste os par√¢metros de funcionamento do sistema de visualiza√ß√£o\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"scrollSpeed\">\n                      üèÉ‚Äç‚ôÇÔ∏è Velocidade de Rolagem do PLASA\n                    </Label>\n                    <div className=\"flex items-center space-x-2\">\n                      <Select value={scrollSpeed} onValueChange={handleScrollSpeedChange}>\n                        <SelectTrigger className=\"w-32\">\n                          <SelectValue placeholder=\"Velocidade\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"slow\">üêå Lenta</SelectItem>\n                          <SelectItem value=\"normal\">üö∂‚Äç‚ôÇÔ∏è Normal</SelectItem>\n                          <SelectItem value=\"fast\">üèÉ‚Äç‚ôÇÔ∏è R√°pida</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <span className=\"text-sm text-muted-foreground\">velocidade de scroll</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Define a velocidade com que o PLASA rola automaticamente pela tela.\n                    </p>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center\">\n                      <Label htmlFor=\"documentAlternateInterval\">\n                        ‚è±Ô∏è Intervalo de Altern√¢ncia entre Escalas (segundos)\n                      </Label>\n                      <HoverCard>\n                        <HoverCardTrigger asChild>\n                          <span className=\"ml-2 text-blue-500 cursor-help text-sm\">[?]</span>\n                        </HoverCardTrigger>\n                        <HoverCardContent className=\"w-80\">\n                          <p className=\"text-sm\">\n                            Define quanto tempo cada escala (Oficiais/Pra√ßas) ser√° exibida antes de alternar para a outra. \n                            Esta configura√ß√£o s√≥ tem efeito quando h√° mais de uma escala ativa.\n                          </p>\n                        </HoverCardContent>\n                      </HoverCard>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Input \n                        id=\"documentAlternateInterval\" \n                        type=\"number\" \n                        min=\"10\" \n                        max=\"300\" \n                        className=\"w-24\"\n                        value={documentAlternateInterval / 1000}\n                        onChange={updateDocumentAlternateInterval}\n                      />\n                      <span className=\"text-sm text-muted-foreground\">segundos</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Recomendado: tempo suficiente para visualizar cada escala completamente.\n                    </p>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"autoRestart\">\n                      üîÑ Rein√≠cio Autom√°tico do PLASA\n                    </Label>\n                    <div className=\"flex items-center space-x-2\">\n                      <Input \n                        id=\"autoRestart\" \n                        type=\"number\" \n                        min=\"2\" \n                        max=\"10\" \n                        className=\"w-24\"\n                        value={autoRestartDelay}\n                        onChange={handleAutoRestartChange}\n                      />\n                      <span className=\"text-sm text-muted-foreground\">segundos no final</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Tempo de pausa no final do PLASA antes de reiniciar do topo.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>üõ†Ô∏è Manuten√ß√£o do Sistema</CardTitle>\n                  <CardDescription>\n                    Ferramentas de manuten√ß√£o e limpeza\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-medium mb-2\">üßπ Limpeza de Cache</h3>\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      Se houver problemas na visualiza√ß√£o, voc√™ pode limpar as p√°ginas PLASA salvas no servidor.\n                    </p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full text-red-600 border-red-600 hover:bg-red-50\"\n                      onClick={async () => {\n                        if (confirm(\"Tem certeza que deseja limpar todas as p√°ginas PLASA salvas no servidor?\")) {\n                          try {\n                            const response = await fetch(getBackendUrl('/api/clear-plasa-pages'), {\n                              method: 'DELETE'\n                            });\n                            const result = await response.json();\n                            toast({\n                              title: \"Cache limpo\",\n                              description: `${result.deletedCount} p√°ginas removidas. O pr√≥ximo PLASA ser√° regenerado.`\n                            });\n                          } catch (error) {\n                            toast({\n                              title: \"Erro\",\n                              description: \"N√£o foi poss√≠vel limpar o cache.\",\n                              variant: \"destructive\"\n                            });\n                          }\n                        }\n                      }}\n                    >\n                      üóëÔ∏è Limpar Cache do PLASA\n                    </Button>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-medium mb-2\">üìä Status do Servidor</h3>\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      Verificar se o servidor backend est√° funcionando corretamente.\n                    </p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full\"\n                      onClick={() => window.open(getBackendUrl('/api/status'), '_blank')}\n                    >\n                      üîç Verificar Status\n                    </Button>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-medium mb-2\">üìã Informa√ß√µes do Sistema</h3>\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      Ver informa√ß√µes detalhadas sobre arquivos e uso do sistema.\n                    </p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full\"\n                      onClick={() => window.open(getBackendUrl('/api/system-info'), '_blank')}\n                    >\n                      ‚ÑπÔ∏è Ver Informa√ß√µes Completas\n                    </Button>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-medium mb-2\">üîÑ Recarregar Dados</h3>\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      For√ßar recarga dos dados do servidor.\n                    </p>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full\"\n                      onClick={async () => {\n                        try {\n                          await refreshNotices();\n                          toast({\n                            title: \"‚úÖ Dados recarregados\",\n                            description: \"Avisos atualizados do servidor.\"\n                          });\n                        } catch (error) {\n                          toast({\n                            title: \"‚ùå Erro na recarga\",\n                            description: \"N√£o foi poss√≠vel recarregar dados do servidor.\",\n                            variant: \"destructive\"\n                          });\n                        }\n                      }}\n                      disabled={isLoading}\n                    >\n                      üîÑ Recarregar Avisos do Servidor\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Informa√ß√µes sobre como funciona */}\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <CardTitle>‚ùì Como Funciona o Sistema</CardTitle>\n                <CardDescription>\n                  Entenda como o sistema processa e exibe os documentos e avisos\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div>\n                    <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                      üìÑ PLASA (Plano de Servi√ßo)\n                    </h4>\n                    <ul className=\"list-disc pl-5 space-y-1 text-sm text-muted-foreground\">\n                      <li>PDFs s√£o automaticamente convertidos para imagens</li>\n                      <li>Rola automaticamente e continuamente do in√≠cio ao fim</li>\n                      <li>Reinicia automaticamente ap√≥s um intervalo configur√°vel</li>\n                      <li>Apenas um PLASA √© exibido por vez (o mais recente ativo)</li>\n                      <li>Velocidade de rolagem √© configur√°vel</li>\n                    </ul>\n                  </div>\n                  \n                  <div>\n                    <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                      üìã Escalas de Servi√ßo\n                    </h4>\n                    <ul className=\"list-disc pl-5 space-y-1 text-sm text-muted-foreground\">\n                      <li>Podem ser PDFs ou imagens diretas</li>\n                      <li>S√£o alternadas automaticamente no intervalo configurado</li>\n                      <li>Suportam categorias: Oficiais e Pra√ßas</li>\n                      <li>M√∫ltiplas escalas podem estar ativas simultaneamente</li>\n                      <li>Exibi√ß√£o est√°tica (sem scroll autom√°tico)</li>\n                    </ul>\n                  </div>\n\n                  <div>\n                    <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                      üì¢ Avisos Importantes\n                    </h4>\n                    <ul className=\"list-disc pl-5 space-y-1 text-sm text-muted-foreground\">\n                      <li>Salvos diretamente no servidor backend</li>\n                      <li>Altern√¢ncia autom√°tica entre m√∫ltiplos avisos</li>\n                      <li>Suporte a prioridades (Alta, M√©dia, Baixa)</li>\n                      <li>Per√≠odo de validade configur√°vel</li>\n                      <li>Sincroniza√ß√£o entre dispositivos</li>\n                    </ul>\n                  </div>\n                </div>\n                \n                <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n                  <h4 className=\"font-medium mb-2 text-blue-800\">üîß Convers√£o PDF para Imagem</h4>\n                  <p className=\"text-sm text-blue-700\">\n                    O sistema converte automaticamente PDFs para imagens (JPG) para garantir m√°xima compatibilidade \n                    e evitar problemas de CORS, fontes faltando, ou incompatibilidades de navegador. \n                    As imagens s√£o armazenadas no servidor e carregadas rapidamente.\n                  </p>\n                </div>\n                \n                <div className=\"mt-4 p-4 bg-green-50 rounded-lg\">\n                  <h4 className=\"font-medium mb-2 text-green-800\">üí° Dicas de Uso</h4>\n                  <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n                    <li>Para melhor qualidade, use PDFs com orienta√ß√£o paisagem</li>\n                    <li>Imagens (JPG/PNG) s√£o processadas mais rapidamente que PDFs</li>\n                    <li>O sistema mant√©m cache das p√°ginas convertidas para performance</li>\n                    <li>Avisos com prioridade \"Alta\" s√£o exibidos com destaque vermelho</li>\n                    <li>Documentos inativos permanecem salvos mas n√£o s√£o exibidos</li>\n                    <li>Avisos s√£o sincronizados automaticamente com o servidor</li>\n                  </ul>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Aba de Debug */}\n          <TabsContent value=\"debug\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>üîç Informa√ß√µes de Debug</CardTitle>\n                  <CardDescription>\n                    Informa√ß√µes t√©cnicas para diagn√≥stico de problemas\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">üåê Configura√ß√£o de Backend</h4>\n                    <div className=\"text-sm font-mono bg-gray-100 p-3 rounded\">\n                      <div>Host: {import.meta.env.VITE_BACKEND_HOST || 'localhost'}</div>\n                      <div>Porta: {import.meta.env.VITE_BACKEND_PORT || '3001'}</div>\n                      <div>URL Base: {getBackendUrl('/')}</div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <h4 className=\"font-medium mb-2\">üìä Estat√≠sticas</h4>\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div className=\"bg-blue-50 p-3 rounded\">\n                        <div className=\"font-medium text-blue-800\">PLASA</div>\n                        <div>Total: {plasaDocuments.length}</div>\n                        <div>Ativos: {plasaDocuments.filter(d => d.active).length}</div>\n                      </div>\n                      <div className=\"bg-green-50 p-3 rounded\">\n                        <div className=\"font-medium text-green-800\">Escalas</div>\n                        <div>Total: {escalaDocuments.length}</div>\n                        <div>Ativos: {escalaDocuments.filter(d => d.active).length}</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"bg-yellow-50 p-3 rounded text-sm mt-4\">\n                      <div className=\"font-medium text-yellow-800\">üì¢ Avisos</div>\n                      <div>Total: {notices.length}</div>\n                      <div>Ativos: {notices.filter(n => n.active).length}</div>\n                      <div>Do Servidor: {notices.filter(n => !n.id.startsWith('local-')).length}</div>\n                      <div>Locais: {notices.filter(n => n.id.startsWith('local-')).length}</div>\n                      <div>Carregando: {isLoading ? \"Sim\" : \"N√£o\"}</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>üõ†Ô∏è Ferramentas de Teste</CardTitle>\n                  <CardDescription>\n                    Teste as conex√µes e funcionalidades do sistema\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full\"\n                    onClick={async () => {\n                      try {\n                        const response = await fetch(getBackendUrl('/api/status'));\n                        const data = await response.json();\n                        toast({\n                          title: \"‚úÖ Backend Online\",\n                          description: `Servidor funcionando na vers√£o ${data.version}`\n                        });\n                      } catch (error) {\n                        toast({\n                          title: \"‚ùå Erro de Conex√£o\",\n                          description: \"N√£o foi poss√≠vel conectar com o backend\",\n                          variant: \"destructive\"\n                        });\n                      }\n                    }}\n                  >\n                    üîó Testar Conex√£o Backend\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full\"\n                    onClick={async () => {\n                      try {\n                        const response = await fetch(getBackendUrl('/api/notices'));\n                        const data = await response.json();\n                        toast({\n                          title: \"üì¢ Avisos Carregados\",\n                          description: `${data.notices?.length || 0} avisos encontrados no servidor`\n                        });\n                        console.log(\"üì¢ Avisos do servidor:\", data);\n                      } catch (error) {\n                        toast({\n                          title: \"‚ùå Erro ao Carregar Avisos\",\n                          description: \"N√£o foi poss√≠vel carregar avisos do servidor\",\n                          variant: \"destructive\"\n                        });\n                      }\n                    }}\n                  >\n                    üì¢ Testar Carregamento de Avisos\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full\"\n                    onClick={async () => {\n                      try {\n                        const response = await fetch(getBackendUrl('/api/list-pdfs'));\n                        const data = await response.json();\n                        toast({\n                          title: \"üìÑ Documentos Listados\",\n                          description: `${data.total} documentos encontrados no servidor`\n                        });\n                        console.log(\"üìÑ Documentos do servidor:\", data);\n                      } catch (error) {\n                        toast({\n                          title: \"‚ùå Erro ao Listar\",\n                          description: \"N√£o foi poss√≠vel listar documentos\",\n                          variant: \"destructive\"\n                        });\n                      }\n                    }}\n                  >\n                    üìã Listar Documentos do Servidor\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full\"\n                    onClick={() => {\n                      console.log(\"üîç DEBUG - Estado do Contexto:\");\n                      console.log(\"PLASA Docs:\", plasaDocuments);\n                      console.log(\"Escala Docs:\", escalaDocuments);\n                      console.log(\"Notices:\", notices);\n                      console.log(\"Loading:\", isLoading);\n                      toast({\n                        title: \"üîç Debug\",\n                        description: \"Informa√ß√µes enviadas para o console (F12)\"\n                      });\n                    }}\n                  >\n                    üñ•Ô∏è Mostrar Estado no Console\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full\"\n                    onClick={() => {\n                      localStorage.clear();\n                      sessionStorage.clear();\n                      toast({\n                        title: \"üßπ Storage Limpo\",\n                        description: \"localStorage e sessionStorage foram limpos\"\n                      });\n                    }}\n                  >\n                    üóëÔ∏è Limpar Storage do Navegador\n                  </Button>\n\n                  <div className=\"p-3 bg-gray-50 rounded text-xs font-mono\">\n                    <div className=\"font-medium mb-2\">Comandos do Console:</div>\n                    <div>‚Ä¢ fetch('{getBackendUrl('/api/status')}').then(r={\">\"}r.json()).then(console.log)</div>\n                    <div>‚Ä¢ fetch('{getBackendUrl('/api/notices')}').then(r={\">\"}r.json()).then(console.log)</div>\n                    <div>‚Ä¢ window.location.reload() // Recarregar p√°gina</div>\n                  </div>\n                </CardContent>\n              </Card>\n               {/* Card√°pio Documents */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      üçΩÔ∏è Card√°pios Semanais\n                      <span className=\"text-sm font-normal text-gray-500\">\n                        ({escalaDocuments.filter(doc => doc.type === \"cardapio\").length})\n                      </span>\n                    </CardTitle>\n                    <CardDescription>\n                      Card√°pios da Semana - Exibi√ß√£o est√°tica\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {escalaDocuments.filter(doc => doc.type === \"cardapio\").length === 0 ? (\n                      <p className=\"text-muted-foreground text-center py-4\">\n                        Nenhum card√°pio cadastrado.\n                      </p>\n                    ) : (\n                      <ul className=\"space-y-2 max-h-64 overflow-y-auto\">\n                        {escalaDocuments.filter(doc => doc.type === \"cardapio\").map((doc) => (\n                          <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className=\"text-lg\">üçΩÔ∏è</span>\n                                <p className=\"font-medium truncate\">{doc.title}</p>\n                              </div>\n                              <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                                <span className=\"flex items-center gap-1\">\n                                  üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                                </span>\n                                {doc.url.includes('/uploads/') && (\n                                  <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full\">\n                                    üåê Servidor\n                                  </span>\n                                )}\n                                <span className=\"flex items-center gap-1 bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full\">\n                                  üìä Est√°tico\n                                </span>\n                              </div>\n                            </div>\n                            <div className=\"flex gap-1 ml-2\">\n                              <Button \n                                variant={doc.active ? \"default\" : \"outline\"} \n                                size=\"sm\"\n                                onClick={() => toggleDocActive(doc)}\n                                title={doc.active ? \"Card√°pio ativo\" : \"Card√°pio inativo\"}\n                              >\n                                {doc.active ? \"‚úÖ\" : \"üí§\"}\n                              </Button>\n                              <Sheet>\n                                <SheetTrigger asChild>\n                                  <Button variant=\"outline\" size=\"sm\" title=\"Visualizar card√°pio\">üëÅÔ∏è</Button>\n                                </SheetTrigger>\n                                <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                                  <SheetHeader>\n                                    <SheetTitle>üçΩÔ∏è {doc.title}</SheetTitle>\n                                    <SheetDescription>\n                                      Visualiza√ß√£o pr√©via do card√°pio semanal\n                                    </SheetDescription>\n                                  </SheetHeader>\n                                  <div className=\"mt-6 h-[80vh]\">\n                                    <iframe \n                                      src={doc.url} \n                                      className=\"w-full h-full border rounded\"\n                                      title={doc.title}\n                                    />\n                                  </div>\n                                </SheetContent>\n                              </Sheet>\n                              <Button \n                                variant=\"destructive\" \n                                size=\"sm\"\n                                onClick={() => removeDocument(doc.id)}\n                                title=\"Remover card√°pio\"\n                              >\n                                üóëÔ∏è\n                              </Button>\n                            </div>\n                          </li>\n                        ))}\n                      </ul>\n                    )}\n                  </CardContent>\n                </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n        \n\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;","size_bytes":87196},"client/src/pages/Admin.tsx":{"content":"/*\n * Sistema de Visualiza√ß√£o da Marinha do Brasil\n * Painel Administrativo\n * \n * Autor: 2SG Bruna Rocha\n * Marinha do Brasil\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"wouter\";\nimport { \n  Tabs, \n  TabsContent, \n  TabsList, \n  TabsTrigger \n} from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Card, \n  CardContent, \n  CardDescription, \n  CardFooter, \n  CardHeader, \n  CardTitle \n} from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { useDisplay, PDFDocument } from \"@/context/DisplayContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Sheet, \n  SheetContent, \n  SheetDescription, \n  SheetHeader, \n  SheetTitle, \n  SheetTrigger \n} from \"@/components/ui/sheet\";\nimport { HoverCard, HoverCardContent, HoverCardTrigger } from \"@/components/ui/hover-card\";\nimport { WeatherAlerts } from \"@/components/WeatherAlerts\";\nimport { MilitaryInsignia } from \"@/components/MilitaryInsignia\";\nimport { MilitaryEditor } from \"@/components/MilitaryEditor\";\nimport { TagBadges } from \"@/components/TagBadges\";\n// Dados dos oficiais baseados no quadro acda Marinha\n\n// ‚úÖ FIXED: Import the correct data structures\nimport { \n  OFFICERS_LIST, \n  MASTERS_LIST, \n  type OfficerData, \n  type MasterData,\n  RANK_DISPLAY_MAP,\n  RANK_FULL_NAME_MAP\n} from \"@/data/officersData\";\n\n\nconst getErrorMessage = (error: unknown): string => {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === 'string') {\n    return error;\n  }\n  if (error && typeof error === 'object' && 'message' in error) {\n    return String((error as { message: unknown }).message);\n  }\n  return 'Erro desconhecido';\n};\n\n// Adicionar no topo do arquivo, ap√≥s os imports\nconst handleAsyncError = (error: unknown, defaultMessage: string = \"Erro desconhecido\"): string => {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === 'string') {\n    return error;\n  }\n  return defaultMessage;\n};\n\n\n\n// ‚úÖ FIXED: Create compatible data arrays for backward compatibility\nconst OFFICERS_DATA = OFFICERS_LIST.map(officer => ({\n  name: officer.name,\n  rank: officer.rank,\n  specialty: officer.specialty || null, // ‚úÖ CORRE√á√ÉO: Converter undefined para null\n  fullRankName: officer.fullRankName\n}));\n\nconst MASTERS_DATA = MASTERS_LIST.map(master => ({\n  name: master.name,\n  rank: master.rank,\n  specialty: master.specialty || null, \n  fullRankName: master.fullRankName\n}));\n\n// ‚úÖ FIXED: Define proper types for the component\ninterface MilitaryPersonnel {\n  id: number;\n  name: string;\n  type: 'officer' | 'master';\n  rank: string;\n  fullRankName?: string;\n  active?: boolean;\n}\n\n\n\nconst Admin: React.FC = () => {\n const { \n    plasaDocuments, \n    escalaDocuments,\n    addDocument,\n    updateDocument,\n    deleteDocument,\n    documentAlternateInterval,\n    setDocumentAlternateInterval,\n    scrollSpeed,\n    setScrollSpeed,\n    autoRestartDelay,\n    setAutoRestartDelay,\n    isLoading\n  } = useDisplay();\n  \n  const { toast } = useToast();\n  \n \n  \n  // Estados para upload de documentos\n  const [docUnit, setDocUnit] = useState<\"EAGM\" | \"1DN\" | undefined>(undefined);\n  const [selectedDocType, setSelectedDocType] = useState<\"plasa\" | \"escala\" | \"cardapio\">(\"plasa\");\n  const [docTitle, setDocTitle] = useState(\"\");\n  const [docUrl, setDocUrl] = useState(\"\");\n  const [docCategory, setDocCategory] = useState<\"oficial\" | \"praca\" | undefined>(undefined);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  \n  // Estados para oficiais de servi√ßo\n  const [dutyOfficers, setDutyOfficers] = useState({\n    officerName: \"\",\n    officerRank: \"1t\" as \"1t\" | \"2t\" | \"ct\",\n    masterName: \"\",\n    masterRank: \"3sg\" as \"3sg\" | \"2sg\" | \"1sg\"\n  });\n  const [isLoadingOfficers, setIsLoadingOfficers] = useState(false);\n  \n  // üî• NOVO: Estados para dados din√¢micos da combobox\n  const [availableOfficers, setAvailableOfficers] = useState<any[]>([]);\n  const [availableMasters, setAvailableMasters] = useState<any[]>([]);\n  const [isLoadingComboboxData, setIsLoadingComboboxData] = useState(false);\n\n  // Estados para edi√ß√£o de militares - agora carregados da API\n\n  const [dbOfficers, setDbOfficers] = useState<any[]>([]);\n  const [dbMasters, setDbMasters] = useState<any[]>([]);\n  const [newOfficerName, setNewOfficerName] = useState(\"\");\n  const [newMasterName, setNewMasterName] = useState(\"\");\n  const [editingOfficer, setEditingOfficer] = useState<{id: number, name: string} | null>(null);\n  const [editingMaster, setEditingMaster] = useState<{id: number, name: string} | null>(null);\n  const [loadingMilitary, setLoadingMilitary] = useState(false);\n  \n  // Estados para o editor militar\n  const [militaryEditorOpen, setMilitaryEditorOpen] = useState(false);\n  const [editingMilitary, setEditingMilitary] = useState<MilitaryPersonnel | null>(null);\n  const [militaryPersonnel, setMilitaryPersonnel] = useState<MilitaryPersonnel[]>([]);\n\n  // Fun√ß√£o para converter nomes salvos no banco para formato de exibi√ß√£o correto\n  const convertToDisplayFormat = (fullName: string, type: 'officer' | 'master'): { displayName: string; rank: string; specialty: string | null; name: string } => {\n    if (!fullName) return { displayName: '', rank: '', specialty: null, name: '' };\n    \n    console.log('üîÑ Convertendo para display:', fullName, 'tipo:', type);\n    \n    // Se j√° est√° no formato correto (ex: \"1T (IM) ELIEZER\"), extrair dados\n    const formatoCorreto = /^([A-Z0-9]+)\\s*(?:\\(([A-Z-]+)\\))?\\s+(.+)$/;\n    const match = fullName.match(formatoCorreto);\n    \n    if (match) {\n      const [, rank, specialty, name] = match;\n      console.log('‚úÖ Formato j√° correto:', { rank, specialty, name });\n      return {\n        displayName: fullName,\n        rank: rank,\n        specialty: specialty || null,\n        name: name\n      };\n    }\n    \n    // Se √© apenas um nome (ex: \"ALEXANDRIA\"), buscar na base de dados\n    const personnelData = type === 'officer' ? OFFICERS_DATA : MASTERS_DATA;\n    const militaryData = personnelData.find(p => p.name === fullName || p.name.includes(fullName));\n    \n  if (militaryData) {\n    const displayName = `${militaryData.rank.toUpperCase()}${militaryData.specialty ? ` (${militaryData.specialty.toUpperCase()})` : ''} ${militaryData.name}`;\n    console.log('‚úÖ Convertido da base:', displayName);\n    return {\n      displayName,\n      rank: militaryData.rank.toUpperCase(),\n      specialty: militaryData.specialty || null, // ‚úÖ CORRE√á√ÉO: Converter undefined para null\n      name: militaryData.name\n    };\n  }\n    // Verificar se cont√©m gradua√ß√£o por extenso e converter\n    const rankMapping = {\n      'Primeiro-Tenente': '1T',\n      '1¬∫ Tenente': '1T',\n      'Segundo-Tenente': '2T', \n      '2¬∫ Tenente': '2T',\n      'Capit√£o-Tenente': 'CT',\n      'Capit√£o de Corveta': 'CC',\n      'Capit√£o de Fragata': 'CF',\n      'Primeiro-Sargento': '1SG',\n      '1¬∫ Sargento': '1SG',\n      'Segundo-Sargento': '2SG',\n      '2¬∫ Sargento': '2SG',\n      'Terceiro-Sargento': '3SG',\n      '3¬∫ Sargento': '3SG'\n    };\n    \n    for (const [fullRank, abbrev] of Object.entries(rankMapping)) {\n      if (fullName.includes(fullRank)) {\n        const nameOnly = fullName.replace(fullRank, '').trim();\n        const militaryData = personnelData.find(p => p.name === nameOnly);\n        \n        if (militaryData) {\n          const displayName = `${abbrev}${militaryData.specialty ? ` (${militaryData.specialty.toUpperCase()})` : ''} ${militaryData.name}`;\n          console.log('‚úÖ Convertido por extenso:', displayName);\n          return {\n            displayName,\n            rank: abbrev,\n            specialty: militaryData.specialty,\n            name: militaryData.name\n          };\n        }\n      }\n    }\n    \n    console.log('‚ö†Ô∏è N√£o encontrado na base, usando fallback');\n    return { displayName: fullName, rank: '', specialty: null, name: fullName };\n  };\n\n  // Carregar dados dos militares da API\n  const loadMilitaryPersonnel = async () => {\n    try {\n      setLoadingMilitary(true);\n      const response = await fetch(getBackendUrl('/api/military-personnel'));\n      \n      if (response.ok) {\n        const result = await response.json();\n        const personnel = result.data || [];\n        \n        setDbOfficers(personnel.filter((p: any) => p.type === 'officer'));\n        setDbMasters(personnel.filter((p: any) => p.type === 'master'));\n        \n        // Atualizar lista completa para o editor\n        setMilitaryPersonnel(personnel);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar militares:', error);\n    } finally {\n      setLoadingMilitary(false);\n    }\n  };\n\n  // Fun√ß√µes para o editor militar\n  const handleEditMilitary = (military: any) => {\n    setEditingMilitary(military);\n    setMilitaryEditorOpen(true);\n  };\n  \n  const handleSaveMilitary = async (updatedMilitary: Partial<any>) => {\n    try {\n      const isEditing = editingMilitary && editingMilitary.id;\n      const url = isEditing ? \n        getBackendUrl(`/api/military-personnel/${editingMilitary.id}`) : \n        getBackendUrl('/api/military-personnel');\n      \n      const response = await fetch(url, {\n        method: isEditing ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(updatedMilitary)\n      });\n      \n      if (response.ok) {\n        await loadMilitaryPersonnel();\n        await loadDutyOfficers(); // Refresh duty officers data\n        \n        toast({\n          title: isEditing ? \"Militar atualizado\" : \"Militar criado\",\n          description: isEditing ? \n            \"As informa√ß√µes foram atualizadas com sucesso\" : \n            \"Novo militar adicionado ao sistema\"\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao salvar militar:', error);\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel salvar as informa√ß√µes\",\n        variant: \"destructive\"\n      });\n    }\n  };\n  \n  const handleDeleteMilitary = async (militaryId: number) => {\n    if (!confirm('Tem certeza que deseja remover este militar?')) return;\n    \n    try {\n      const response = await fetch(getBackendUrl(`/api/military-personnel/${militaryId}`), {\n        method: 'DELETE'\n      });\n      \n      if (response.ok) {\n        await loadMilitaryPersonnel();\n        toast({\n          title: \"Militar removido\",\n          description: \"O militar foi removido do sistema\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao remover militar:', error);\n      toast({\n        title: \"Erro\", \n        description: \"N√£o foi poss√≠vel remover o militar\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Carregar dados na inicializa√ß√£o\n  useEffect(() => {\n    loadMilitaryPersonnel();\n  }, []);\n\n  // Fun√ß√µes para gerenciar oficiais com persist√™ncia\n  const addOfficer = async () => {\n    if (newOfficerName.trim()) {\n      try {\n        const response = await fetch(getBackendUrl('/api/military-personnel'), {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            name: newOfficerName.trim(),\n            type: 'officer',\n            rank: '1t',\n            fullRankName: `1¬∫ Tenente ${newOfficerName.trim()}`,\n            active: true\n          })\n        });\n\n        if (response.ok) {\n          await loadMilitaryPersonnel();\n          setNewOfficerName(\"\");\n          toast({\n            title: \"Oficial adicionado\",\n            description: `${newOfficerName.trim()} foi salvo no sistema`,\n          });\n        } else {\n          throw new Error('Erro ao salvar');\n        }\n      } catch (error) {\n        toast({\n          title: \"Erro\",\n          description: \"N√£o foi poss√≠vel salvar o oficial\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const removeOfficer = async (id: number, name: string) => {\n    try {\n      const response = await fetch(getBackendUrl(`/api/military-personnel/${id}`), {\n        method: 'DELETE'\n      });\n\n      if (response.ok) {\n        await loadMilitaryPersonnel();\n        toast({\n          title: \"Oficial removido\",\n          description: `${name} foi removido do sistema`,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel remover o oficial\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const startEditOfficer = (id: number, name: string) => {\n    setEditingOfficer({ id, name });\n  };\n\nconst saveEditOfficer = async () => {\n  if (!editingOfficer) {\n    console.error('Erro: editingOfficer is null');\n    return;\n  }\n\n  if (!editingOfficer.name.trim()) {\n    toast({\n      title: \"Erro\",\n      description: \"Nome n√£o pode estar vazio\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n\n  try {\n    const response = await fetch(getBackendUrl(`/api/military-personnel/${editingOfficer.id}`), {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name: editingOfficer.name.trim(),\n        fullRankName: `1¬∫ Tenente ${editingOfficer.name.trim()}`\n      })\n    });\n\n    if (response.ok) {\n      await loadMilitaryPersonnel();\n      setEditingOfficer(null);\n      toast({\n        title: \"Oficial atualizado\",\n        description: \"Nome do oficial foi atualizado com sucesso\",\n      });\n    } else {\n      throw new Error('Erro ao atualizar');\n    }\n  } catch (error) {\n    toast({\n      title: \"Erro\",\n      description: \"N√£o foi poss√≠vel atualizar o oficial\",\n      variant: \"destructive\"\n    });\n  }\n};\n\n  const cancelEditOfficer = () => {\n    setEditingOfficer(null);\n  };\n\n  // Fun√ß√µes para editar contramesres\n  const startEditMaster = (id: number, name: string) => {\n    setEditingMaster({ id, name });\n  };\n\n const saveEditMaster = async () => {\n  if (!editingMaster) {\n    console.error('Erro: editingMaster is null');\n    return;\n  }\n\n  if (!editingMaster.name.trim()) {\n    toast({\n      title: \"Erro\",\n      description: \"Nome n√£o pode estar vazio\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n\n  try {\n    const response = await fetch(getBackendUrl(`/api/military-personnel/${editingMaster.id}`), {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name: editingMaster.name.trim(),\n        type: 'master',\n        rank: '1sg',\n        fullRankName: `1¬∫ Sargento ${editingMaster.name.trim()}`\n      })\n    });\n\n    if (response.ok) {\n      await loadMilitaryPersonnel();\n      setEditingMaster(null);\n      toast({\n        title: \"Contramestre atualizado\",\n        description: `${editingMaster.name.trim()} foi atualizado no sistema`,\n      });\n    } else {\n      throw new Error('Erro ao atualizar');\n    }\n  } catch (error) {\n    toast({\n      title: \"Erro\",\n      description: \"N√£o foi poss√≠vel atualizar o contramestre\",\n      variant: \"destructive\",\n    });\n  }\n};\n\n  const cancelEditMaster = () => {\n    setEditingMaster(null);\n  };\n\n  // Fun√ß√µes para gerenciar Contramesres com persist√™ncia\n  const addMaster = async () => {\n    if (newMasterName.trim()) {\n      try {\n        const response = await fetch(getBackendUrl('/api/military-personnel'), {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            name: newMasterName.trim(),\n            type: 'master',\n            rank: '1sg',\n            fullRankName: `1¬∫ Sargento ${newMasterName.trim()}`,\n            active: true\n          })\n        });\n\n        if (response.ok) {\n          await loadMilitaryPersonnel();\n          setNewMasterName(\"\");\n          toast({\n            title: \"Contramestre adicionado\",\n            description: `${newMasterName.trim()} foi salvo no sistema`,\n          });\n        }\n      } catch (error) {\n        toast({\n          title: \"Erro\",\n          description: \"N√£o foi poss√≠vel salvar o contramestre\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const removeMaster = async (id: number, name: string) => {\n    try {\n      const response = await fetch(getBackendUrl(`/api/military-personnel/${id}`), {\n        method: 'DELETE'\n      });\n\n      if (response.ok) {\n        await loadMilitaryPersonnel();\n        toast({\n          title: \"Contramestre removido\",\n          description: `${name} foi removido do sistema`,\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Erro\",\n        description: \"N√£o foi poss√≠vel remover o contramestre\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  // Estados para status do sistema\n  const [serverStatus, setServerStatus] = useState<{\n    connected: boolean;\n    lastResponse: number | null;\n    lastCheck: Date | null;\n    documents: number;\n  }>({\n    connected: false,\n    lastResponse: null,\n    lastCheck: null,\n    documents: 0\n  });\n  \n  // Fun√ß√£o para obter URL completa do backend - DETECTAR AMBIENTE\n const getBackendUrl = (path: string): string => {\n  if (path.startsWith('http') || path.startsWith('blob:') || path.startsWith('data:')) {\n    return path;\n  }\n  \n  const currentHost = window.location.hostname;\n  const currentOrigin = window.location.origin;\n  \n  // Detectar se estamos no Replit (prioridade m√°xima)\n  const isReplit = currentHost.includes('replit.dev') || currentHost.includes('replit.co');\n  \n  if (isReplit) {\n    console.log(`üåê Admin: Detectado Replit, usando mesmo origin: ${currentOrigin}`);\n    if (path.startsWith('/')) {\n      return `${currentOrigin}${path}`;\n    }\n    return `${currentOrigin}/${path}`;\n  }\n  \n  // Ambiente local (desenvolvimento)\n  if (currentHost === 'localhost' || currentHost === '127.0.0.1') {\n    console.log(`üåê Admin: Ambiente local, usando porta 5000`);\n    if (path.startsWith('/')) {\n      return `http://localhost:5000${path}`;\n    }\n    return `http://localhost:5000/${path}`;\n  }\n  \n  // Para qualquer outro ambiente, usar o mesmo origin (sem especificar porta)\n  console.log(`üåê Admin: Outro ambiente (${currentHost}), usando mesmo origin`);\n  if (path.startsWith('/')) {\n    return `${currentOrigin}${path}`;\n  }\n  return `${currentOrigin}/${path}`;\n};\n  \n  // Fun√ß√£o para verificar status do servidor\n  const checkServerStatus = async () => {\n    try {\n      const response = await fetch(getBackendUrl('/api/notices'));\n      setServerStatus(prev => ({\n        ...prev,\n        connected: response.ok,\n        lastResponse: response.status,\n        lastCheck: new Date(),\n        documents: plasaDocuments.length + escalaDocuments.length\n      }));\n      console.log(\"üì¢ Resposta do servidor:\", response.status, response.ok ? 'OK' : 'ERROR');\n    } catch (error) {\n      setServerStatus(prev => ({\n        ...prev,\n        connected: false,\n        lastResponse: null,\n        lastCheck: new Date(),\n        documents: plasaDocuments.length + escalaDocuments.length\n      }));\n      console.error(\"‚ùå Erro de conex√£o com servidor:\", error);\n    }\n  };\n\n  // Fun√ß√£o auxiliar para determinar categoria\n  const determineCategory = (filename: string): \"oficial\" | \"praca\" | undefined => {\n    const lowerFilename = filename.toLowerCase();\n    if (lowerFilename.includes('oficial')) return 'oficial';\n    if (lowerFilename.includes('praca')) return 'praca';\n    return undefined;\n  };\n// Fun√ß√£o para obter √≠cone e cor do tipo de documento\n  const getDocumentTypeInfo = (type: string) => {\n    switch (type) {\n      case \"plasa\":\n        return {\n          icon: \"üìÑ\",\n          name: \"PLASA\",\n          description: \"Plano de Servi√ßo\",\n          color: \"bg-blue-50 border-blue-200 text-blue-800\"\n        };\n      case \"escala\":\n        return {\n          icon: \"üìã\",\n          name: \"Escala\",\n          description: \"Escala de Servi√ßo\",\n          color: \"bg-green-50 border-green-200 text-green-800\"\n        };\n      case \"cardapio\":\n        return {\n          icon: \"üçΩÔ∏è\",\n          name: \"Card√°pio\",\n          description: \"Card√°pio Semanal\",\n          color: \"bg-orange-50 border-orange-200 text-orange-800\"\n        };\n      default:\n        return {\n          icon: \"üìÑ\",\n          name: \"Documento\",\n          description: \"Documento\",\n          color: \"bg-gray-50 border-gray-200 text-gray-800\"\n        };\n    }\n  };\n\n  // üî• NOVO: Carregar dados din√¢micos para combobox\n  const loadComboboxData = async () => {\n    console.log('üîÑ Iniciando carregamento de dados combobox...');\n    setIsLoadingComboboxData(true);\n    try {\n      const url = getBackendUrl('/api/military-personnel');\n      console.log('üåê URL da API:', url);\n      \n      const response = await fetch(url);\n      const data = await response.json();\n      \n      console.log('üì° Resposta completa da API:', data);\n      \n      if (data.success && data.data) {\n        const officers = data.data.filter((p: any) => p.type === 'officer');\n        const masters = data.data.filter((p: any) => p.type === 'master');\n        \n        console.log('üìä Total personnel:', data.data.length);\n        console.log('üëÆ Officers filtrados:', officers.length);\n        console.log('‚öì Masters filtrados:', masters.length);\n        \n        setAvailableOfficers(officers);\n        setAvailableMasters(masters);\n        console.log('üìã Dados combobox carregados:', { officers: officers.length, masters: masters.length });\n        console.log('üîç DEBUG - Oficiais carregados:', officers.slice(0, 3));\n        console.log('üîç DEBUG - Contramestres carregados:', masters.slice(0, 3));\n      } else {\n        console.error('‚ùå Dados inv√°lidos da API:', data);\n      }\n    } catch (error) {\n      console.error('‚ùå Erro ao carregar dados combobox:', error);\n    } finally {\n      setIsLoadingComboboxData(false);\n    }\n  };\n\n  // Carregar oficiais de servi√ßo\n  const loadDutyOfficers = async () => {\n    setIsLoadingOfficers(true);\n    try {\n      const response = await fetch(getBackendUrl('/api/duty-officers'));\n      const data = await response.json();\n      \n      if (data.success && data.officers) {\n        console.log('üëÆ Dados carregados do servidor:', data.officers);\n        setDutyOfficers({\n          officerName: data.officers.officerName || \"\",\n          officerRank: data.officers.officerRank || \"1t\",\n          masterName: data.officers.masterName || \"\",\n          masterRank: data.officers.masterRank || \"3sg\"\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao carregar oficiais:', error);\n    } finally {\n      setIsLoadingOfficers(false);\n    }\n  };\n\n  // Salvar servi√ßo\n  const saveDutyOfficers = async () => {\n    if (!dutyOfficers.officerName && !dutyOfficers.masterName) {\n      toast({\n        title: \"Erro\",\n        description: \"Selecione pelo menos um oficial ou contramestre.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    setIsLoadingOfficers(true);\n    try {\n      console.log('üíæ Salvando oficiais:', dutyOfficers);\n      \n      // Os nomes j√° est√£o no formato correto (ex: \"1T (IM) ALEXANDRIA\")\n      // Apenas passar diretamente para o servidor\n      const officersData = {\n        officerName: dutyOfficers.officerName,\n        masterName: dutyOfficers.masterName,\n        officerRank: dutyOfficers.officerRank,\n        masterRank: dutyOfficers.masterRank\n      };\n\n      console.log('üìù Dados sendo enviados:', officersData);\n\n      const response = await fetch(getBackendUrl('/api/duty-officers'), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(officersData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      console.log('‚úÖ Resposta do servidor:', data);\n      \n      if (data.success) {\n        toast({\n          title: \"Sucesso\",\n          description: \"Oficiais de servi√ßo atualizados com sucesso!\",\n        });\n        \n        // Recarregar os dados para sincronizar\n        await loadDutyOfficers();\n      } else {\n        throw new Error(data.error || 'Erro ao salvar oficiais');\n      }\n    } catch (error) {\n      console.error('‚ùå Erro ao salvar oficiais:', error);\nconst errorMessage = getErrorMessage(error);\n\n      toast({\n        title: \"Erro\",\n        description: `Falha ao salvar oficiais: ${errorMessage}`,        variant: \"destructive\"\n      });\n    } finally {\n      setIsLoadingOfficers(false);\n    }\n  };\n\n  // Funcionalidade de edi√ß√£o de nomes dos oficiais implementada abaixo\n\n  useEffect(() => {\n    console.log(\"üîß Admin carregado, avisos ser√£o carregados do servidor\");\n    loadDutyOfficers();\n    loadComboboxData(); // üî• CR√çTICO: Carregar dados din√¢micos para combobox\n  }, []);\n  \n  // üî• NOVO: Recarregar dados combobox quando militar for editado\n  useEffect(() => {\n    if (militaryPersonnel.length > 0) {\n      loadComboboxData();\n    }\n  }, [militaryPersonnel]);\n  \n\n  \n  // Fun√ß√µes de upload de documentos\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      \n      console.log(\"üìÅ Arquivo selecionado:\", {\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        lastModified: new Date(file.lastModified)\n      });\n\n      if (file.size > 50 * 1024 * 1024) {\n        toast({\n          title: \"Arquivo muito grande\",\n          description: \"O arquivo deve ter no m√°ximo 50MB\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      const isValidType = file.type === 'application/pdf' || \n                         file.type.startsWith('image/') ||\n                         file.name.toLowerCase().endsWith('.pdf') ||\n                         file.name.toLowerCase().endsWith('.jpg') ||\n                         file.name.toLowerCase().endsWith('.jpeg') ||\n                         file.name.toLowerCase().endsWith('.png') ||\n                         file.name.toLowerCase().endsWith('.gif') ||\n                         file.name.toLowerCase().endsWith('.webp');\n\n      if (!isValidType) {\n        toast({\n          title: \"Tipo de arquivo n√£o suportado\",\n          description: \"Use PDFs ou imagens (JPG, PNG, GIF, WEBP)\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      console.log(\"‚úÖ Arquivo aceito:\", file.type);\n      setSelectedFile(file);\n      \n      if (!docTitle) {\n        let fileName = file.name.replace(/\\.[^/.]+$/, \"\");\n        setDocTitle(fileName);\n      }\n      \n      if (docUrl.startsWith('blob:')) {\n        URL.revokeObjectURL(docUrl);\n      }\n      \n      const fileUrl = URL.createObjectURL(file);\n      setDocUrl(fileUrl);\n      \n      console.log(\"üìÑ Arquivo preparado para upload:\", {\n        name: file.name,\n        size: (file.size / 1024 / 1024).toFixed(2) + ' MB',\n        type: file.type,\n        previewUrl: fileUrl\n      });\n    }\n  };\n\nconst handleDocumentSubmit = async (e: React.FormEvent) => {\n  e.preventDefault();\n  \n  if (!docTitle) {\n    toast({\n      title: \"Erro\",\n      description: \"T√≠tulo √© obrigat√≥rio.\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n\n  if (!selectedFile && !docUrl) {\n    toast({\n      title: \"Erro\",\n      description: \"Selecione um arquivo ou forne√ßa uma URL.\",\n      variant: \"destructive\"\n    });\n    return;\n  }\n  \n // Substituir a valida√ß√£o existente por:\nif (selectedDocType === \"escala\" && !docCategory) {\n  toast({\n    title: \"Erro\",\n    description: \"Selecione a categoria da escala (Oficial ou Pra√ßa).\",\n    variant: \"destructive\"\n  });\n  return;\n}\n\nif (selectedDocType === \"cardapio\" && !docUnit) {\n  toast({\n    title: \"Erro\",\n    description: \"Selecione a unidade do card√°pio (EAGM ou 1DN).\",\n    variant: \"destructive\"\n  });\n  return;\n}\n\n  // ‚úÖ DECLARE typeInfo UMA VEZ S√ì aqui no in√≠cio\n  const typeInfo = getDocumentTypeInfo(selectedDocType);\n\n  try {\n    setIsUploading(true);\n    setUploadProgress(0);\n    \n    if (selectedFile) {\n      console.log(\"üì§ Iniciando upload do arquivo:\", selectedFile.name);\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Upload em andamento...\",\n        description: `Enviando ${typeInfo.name} ${selectedFile.name} para o servidor...`\n      });\n\n      const formData = new FormData();\n      formData.append('pdf', selectedFile);\n      \n      formData.append('type', selectedDocType);\n      formData.append('title', docTitle);\n      \n      if (selectedDocType === \"escala\" && docCategory) {\n        formData.append('category', docCategory);\n\n      }\n\n      if (selectedDocType === \"cardapio\" && docUnit) {\n  formData.append('unit', docUnit);\n}\n\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => {\n          if (prev >= 90) {\n            clearInterval(progressInterval);\n            return 90;\n          }\n          return prev + 10;\n        });\n      }, 200);\n\n      const uploadUrl = getBackendUrl('/api/upload-pdf');\n      \n      console.log(\"üì§ Enviando para:\", uploadUrl);\n      \n      const uploadResponse = await fetch(uploadUrl, {\n        method: 'POST',\n        body: formData,\n      });\n\n      clearInterval(progressInterval);\n      setUploadProgress(100);\n\n      if (!uploadResponse.ok) {\n        const errorData = await uploadResponse.json().catch(() => ({}));\n        throw new Error(errorData.error || `Erro HTTP: ${uploadResponse.status}`);\n      }\n\n      const uploadResult = await uploadResponse.json();\n      console.log(\"‚úÖ Upload realizado com sucesso:\", uploadResult);\n\n      if (!uploadResult.success) {\n        throw new Error(uploadResult.error || 'Upload falhou');\n      }\n\n      const fullUrl = getBackendUrl(uploadResult.data.url);\n      \n      console.log(\"üìÑ Adicionando documento ao contexto:\", {\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined\n      });\n      \n      addDocument({\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined,\n        unit: selectedDocType === \"cardapio\" ? docUnit : undefined, \n        active: true\n      });\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Sucesso!\",\n        description: `${typeInfo.name} enviado e salvo com sucesso.`\n      });\n      \n    } else if (docUrl && !docUrl.startsWith('blob:')) {\n      const fullUrl = docUrl.startsWith('http') ? docUrl : getBackendUrl(docUrl);\n      \n      addDocument({\n        title: docTitle,\n        url: fullUrl,\n        type: selectedDocType,\n        category: selectedDocType === \"escala\" ? docCategory : undefined,\n        active: true\n      });\n      \n      // ‚úÖ USE a vari√°vel typeInfo j√° declarada (sem const)\n      toast({\n        title: \"Sucesso!\",\n        description: `${typeInfo.name} adicionado com sucesso.`\n      });\n    }\n    \n    resetForm();\n\n  } catch (error) {\n    console.error('‚ùå Erro no upload:', error);\n    \n    let errorMessage = \"N√£o foi poss√≠vel enviar o arquivo. Tente novamente.\";\n    \n const baseErrorMessage = getErrorMessage(error);\n  if (baseErrorMessage.includes('FILE_TOO_LARGE')) {\n      errorMessage = \"Arquivo muito grande. M√°ximo permitido: 50MB.\";\n    } else if (baseErrorMessage.includes('INVALID_FILE')) {\n      errorMessage = \"Tipo de arquivo n√£o suportado. Use PDFs ou imagens.\";\n    } else if (baseErrorMessage.includes('MISSING_FIELDS')) {\n      errorMessage = \"Dados obrigat√≥rios est√£o faltando.\";\n    } else if (baseErrorMessage.includes('fetch')) {\n      errorMessage = \"Erro de conex√£o. Verifique se o servidor est√° rodando.\";\n    } else if (baseErrorMessage !== 'Erro desconhecido') {\n      errorMessage = `Erro: ${baseErrorMessage}`;\n    }\n    \n    \n    toast({\n      title: \"Erro no upload\",\n      description: errorMessage,\n      variant: \"destructive\"\n    });\n  } finally {\n    setIsUploading(false);\n    setUploadProgress(0);\n  }\n};\n\n  const resetForm = () => {\n    setDocTitle(\"\");\n    if (docUrl.startsWith('blob:')) {\n      URL.revokeObjectURL(docUrl);\n    }\n    setDocUrl(\"\");\n    setSelectedFile(null);\n    setDocCategory(undefined);\n    setDocUnit(undefined);\n    \n    const fileInput = document.getElementById('docFile') as HTMLInputElement;\n    if (fileInput) {\n      fileInput.value = '';\n    }\n  };\n  \n\n  \n \n  \n  // Fun√ß√µes para documentos\n    const toggleDocActive = (doc: PDFDocument) => {\n    updateDocument({ ...doc, active: !doc.active });\n    const typeInfo = getDocumentTypeInfo(doc.type);\n    toast({\n      title: doc.active ? `${typeInfo.name} desativado` : `${typeInfo.name} ativado`,\n      description: `O documento \"${doc.title}\" foi ${doc.active ? \"desativado\" : \"ativado\"}.`\n    });\n  };\n\n  \n  const removeDocument = async (id: string) => {\n    if (confirm(\"Tem certeza que deseja remover este documento?\")) {\n      const doc = [...plasaDocuments, ...escalaDocuments].find(d => d.id === id);\n      \n      if (doc && doc.url.includes('/uploads/')) {\n        try {\n          const filename = doc.url.split('/uploads/')[1];\n          const deleteUrl = getBackendUrl(`/api/delete-pdf/${filename}`);\n          const response = await fetch(deleteUrl, {\n            method: 'DELETE'\n          });\n          \n          if (response.ok) {\n            const result = await response.json();\n            console.log(`‚úÖ Arquivo ${filename} removido do servidor:`, result);\n          } else {\n            console.log(`‚ö†Ô∏è N√£o foi poss√≠vel remover ${filename} do servidor`);\n          }\n        } catch (error) {\n          console.log(\"‚ö†Ô∏è Erro ao remover arquivo do servidor:\", error);\n        }\n      }\n      \n      deleteDocument(id);\n      toast({\n        title: \"Documento removido\",\n        description: \"O documento foi removido com sucesso.\"\n      });\n    }\n  };\n  \n  const updateDocumentAlternateInterval = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (value >= 10 && value <= 300) {\n      setDocumentAlternateInterval(value * 1000);\n      toast({\n        title: \"Intervalo de altern√¢ncia atualizado\",\n        description: `Escalas agora alternam a cada ${value} segundos.`\n      });\n    }\n  };\n\n  const handleScrollSpeedChange = (value: string) => {\n    setScrollSpeed(value as \"slow\" | \"normal\" | \"fast\");\n    toast({\n      title: \"Velocidade atualizada\",\n      description: `Velocidade de rolagem do PLASA definida como: ${\n        value === \"slow\" ? \"Lenta\" : \n        value === \"normal\" ? \"Normal\" : \"R√°pida\"\n      }`\n    });\n  };\n\n  const handleAutoRestartChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (value >= 2 && value <= 10) {\n      setAutoRestartDelay(value);\n      toast({\n        title: \"Intervalo de rein√≠cio atualizado\",\n        description: `PLASA aguardar√° ${value} segundos no final antes de reiniciar.`\n      });\n    }\n  };\n\n  const handleDocumentAlternateIntervalChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (value >= 5 && value <= 60) {\n      setDocumentAlternateInterval(value * 1000);\n      toast({\n        title: \"Intervalo de altern√¢ncia atualizado\",\n        description: `Escalas agora alternam a cada ${value} segundos.`\n      });\n    }\n  };\n\n \n\n  // Effect para verificar status do servidor periodicamente\n  useEffect(() => {\n    checkServerStatus();\n    const interval = setInterval(checkServerStatus, 30000); // A cada 30 segundos\n    return () => clearInterval(interval);\n}, [plasaDocuments.length, escalaDocuments.length]);\n  // Componente de Status do Servidor\n  const ServerStatusIndicator = () => (\n    <Card className=\"mb-6\">\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-lg flex items-center gap-2\">\n          üñ•Ô∏è Status do Sistema\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={checkServerStatus}\n            className=\"ml-auto\"\n          >\n            üîÑ Verificar\n          </Button>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {/* Status de Conex√£o */}\n          <div className={`p-3 rounded-lg border ${\n            serverStatus.connected \n              ? 'bg-green-50 border-green-200 text-green-800' \n              : 'bg-red-50 border-red-200 text-red-800'\n          }`}>\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-3 h-3 rounded-full ${\n                serverStatus.connected ? 'bg-green-500' : 'bg-red-500'\n              }`}></div>\n              <span className=\"font-medium\">\n                {serverStatus.connected ? 'Conectado' : 'Desconectado'}\n              </span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.lastResponse ? `HTTP ${serverStatus.lastResponse}` : 'Sem resposta'}\n            </div>\n          </div>\n\n     \n\n          {/* Documentos */}\n          <div className=\"p-3 rounded-lg border bg-purple-50 border-purple-200 text-purple-800\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">üìÅ</span>\n              <span className=\"font-medium\">Documentos</span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.documents} carregados\n            </div>\n          </div>\n\n          {/* √öltima Verifica√ß√£o */}\n          <div className=\"p-3 rounded-lg border bg-gray-50 border-gray-200 text-gray-800\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">‚è∞</span>\n              <span className=\"font-medium\">√öltima Check</span>\n            </div>\n            <div className=\"text-sm mt-1\">\n              {serverStatus.lastCheck \n                ? serverStatus.lastCheck.toLocaleTimeString('pt-BR', { \n                    hour: '2-digit', \n                    minute: '2-digit' \n                  })\n                : 'Nunca'\n              }\n            </div>\n          </div>\n        </div>\n\n        {/* Status detalhado */}\n        <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n          <div className=\"text-sm text-gray-600\">\n            <strong>URL do Backend:</strong> {getBackendUrl('/api')} | \n            <strong className=\"ml-2\">Status:</strong> \n            <span className={`ml-1 ${\n              serverStatus.connected ? 'text-green-600' : 'text-red-600'\n            }`}>\n              {serverStatus.connected ? '‚úÖ Online' : '‚ùå Offline'}\n            </span>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4 lg:p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <header className=\"bg-navy text-white p-4 rounded-lg shadow-lg mb-6 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold\">Painel Administrativo</h1>\n            <p className=\"text-gray-200\">Gerencie documentos e avisos do sistema de visualiza√ß√£o</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <Link to=\"/\">\n              <Button variant=\"secondary\">\n                üì∫ Visualizar Sistema\n              </Button>\n            </Link>\n            <Button \n              variant=\"outline\" \n              className=\"text-white border-white hover:bg-white hover:text-navy\"\n              onClick={() => window.open(getBackendUrl('/api/status'), '_blank')}\n            >\n              üîß Status do Servidor\n            </Button>\n          </div>\n        </header>\n        \n        {/* Status Panel */}\n        <ServerStatusIndicator />\n        \n        <Tabs defaultValue=\"documentos\" className=\"w-full\">\n        <TabsList className=\"w-full mb-6\">\n            <TabsTrigger value=\"documentos\" className=\"flex-1\">üìÑ Documentos</TabsTrigger>\n            <TabsTrigger value=\"militares\" className=\"flex-1\">üëÆ Militares</TabsTrigger>\n            <TabsTrigger value=\"sistema\" className=\"flex-1\">‚öôÔ∏è Sistema</TabsTrigger>\n          </TabsList>\n          \n        \n          \n        {/* Aba de Documentos - C√ìDIGO COMPLETO */}\n<TabsContent value=\"documentos\">\n  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n    {/* Upload New Document Form */}\n    <Card className=\"border-navy\">\n      <CardHeader className=\"bg-navy text-white\">\n        <CardTitle>Adicionar Novo Documento</CardTitle>\n        <CardDescription className=\"text-gray-200\">\n          Envie um novo documento PDF ou imagem para o sistema\n        </CardDescription>\n      </CardHeader>\n      <form onSubmit={handleDocumentSubmit}>\n        <CardContent className=\"space-y-4 pt-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docType\">Tipo de Documento</Label>\n            <Select \n              value={selectedDocType} \n              onValueChange={(value) => {\n                setSelectedDocType(value as \"plasa\" | \"escala\" | \"cardapio\");\n                if (value !== \"escala\") {\n                  setDocCategory(undefined);\n                }\n              }}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecione o tipo\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"plasa\">üìÑ PLASA - Plano de Servi√ßo</SelectItem>\n                <SelectItem value=\"escala\">üìã Escala de Servi√ßo</SelectItem>\n                <SelectItem value=\"cardapio\">üçΩÔ∏è Card√°pio Semanal</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          {selectedDocType === \"escala\" && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"docCategory\">Categoria da Escala</Label>\n              <Select \n                value={docCategory} \n                onValueChange={(value) => setDocCategory(value as \"oficial\" | \"praca\")}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecione a categoria\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"oficial\">üë®‚Äç‚úàÔ∏è Oficiais</SelectItem>\n                  <SelectItem value=\"praca\">üë®‚Äçüîß Pra√ßas</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n          {selectedDocType === \"cardapio\" && (\n  <div className=\"space-y-2\">\n    <Label htmlFor=\"docUnit\">Unidade do Card√°pio</Label>\n    <Select \n      value={docUnit} \n      onValueChange={(value) => setDocUnit(value as \"EAGM\" | \"1DN\")}\n    >\n      <SelectTrigger>\n        <SelectValue placeholder=\"Selecione a unidade\" />\n      </SelectTrigger>\n      <SelectContent>\n        <SelectItem value=\"EAGM\">üè¢ EAGM (Gast√£o Mota)</SelectItem>\n        <SelectItem value=\"1DN\">‚öì 1¬∫ DN (Distrito Naval)</SelectItem>\n      </SelectContent>\n    </Select>\n  </div>\n)}\n\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docTitle\">T√≠tulo do Documento</Label>\n            <Input \n              id=\"docTitle\" \n              placeholder={`Ex: ${\n                selectedDocType === \"plasa\" ? \"PLASA - Junho 2025\" : \n                selectedDocType === \"escala\" ? \"Escala de Servi√ßo - Junho 2025\" :\n                selectedDocType === \"cardapio\" ? \"Card√°pio - Semana 25/2025\" :\n                \"Documento\"\n              }`}\n              value={docTitle}\n              onChange={(e) => setDocTitle(e.target.value)}\n            />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docFile\">Arquivo do Documento</Label>\n            <Input \n              id=\"docFile\"\n              type=\"file\"\n              accept=\"application/pdf,image/*,.pdf,.jpg,.jpeg,.png,.gif,.webp\"\n              onChange={handleFileChange}\n            />\n            <div className=\"text-xs space-y-1\">\n              {selectedFile ? (\n                <div className=\"text-green-600 bg-green-50 p-2 rounded\">\n                  ‚úÖ <strong>Arquivo selecionado:</strong> {selectedFile.name} \n                  <br />\n                  üìè <strong>Tamanho:</strong> {formatFileSize(selectedFile.size)}\n                  <br />\n                  üìã <strong>Tipo:</strong> {selectedFile.type}\n                </div>\n              ) : (\n                <div className=\"text-gray-600\">\n                  üìÅ Aceita PDFs ou imagens (JPG, PNG, GIF, WEBP) - m√°ximo 50MB\n                </div>\n              )}\n            </div>\n            <div className=\"text-xs text-blue-600 bg-blue-50 p-2 rounded\">\n              üí° <strong>Recomenda√ß√£o:</strong> PDFs s√£o automaticamente convertidos para imagens para melhor compatibilidade\n            </div>\n          </div>\n          \n          <div className=\"space-y-2\">\n            <Label htmlFor=\"docUrl\">URL do Documento (alternativo)</Label>\n            <Input \n              id=\"docUrl\" \n              placeholder=\"https://exemplo.com/documento.pdf\"\n              value={docUrl.startsWith('blob:') ? '' : docUrl}\n              onChange={(e) => setDocUrl(e.target.value)}\n              type=\"url\"\n              disabled={!!selectedFile}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Se n√£o tiver arquivo para upload, pode fornecer uma URL direta.\n            </p>\n          </div>\n\n          {isUploading && (\n            <div className=\"space-y-2\">\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-navy h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                />\n              </div>\n              <p className=\"text-xs text-center text-navy\">\n                {uploadProgress < 100 ? `Enviando... ${uploadProgress}%` : \"Processando...\"}\n              </p>\n            </div>\n          )}\n        </CardContent>\n        <CardFooter>\n          <Button \n            type=\"submit\" \n            className=\"w-full bg-navy hover:bg-navy-light\"\n            disabled={isUploading || (!selectedFile && !docUrl) || !docTitle}\n          >\n            {isUploading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Enviando...\n              </>\n            ) : (\n              <>\n                üì§ Adicionar Documento\n              </>\n            )}\n          </Button>\n        </CardFooter>\n      </form>\n    </Card>\n    \n    {/* Document Lists Separadas */}\n    <div className=\"space-y-6\">\n      {/* üìÑ PLASA Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üìÑ Documentos PLASA\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({plasaDocuments.length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Planos de Servi√ßo e Boletins - Rolagem autom√°tica cont√≠nua \n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {plasaDocuments.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhum documento PLASA cadastrado.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {plasaDocuments.map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">\n                        {doc.type === \"plasa\" ? \"üìÑ\" : \"üìã\"}\n                      </span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      <span className={`text-xs px-2 py-0.5 rounded-full status-badge ${\n                        doc.type === \"plasa\" \n                          ? \"bg-blue-100 text-blue-800\" \n                          : \"bg-purple-100 text-purple-800\"\n                      }`}>\n                        PLASA\n                      </span>\n                      <TagBadges tags={doc.tags} documentId={doc.id} />\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full status-badge\">\n                        üìñ Rolagem\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Documento ativo\" : \"Documento inativo\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar documento\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>{doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via do documento\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover documento\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n      \n      {/* üìã ESCALA Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üìã Escalas de Servi√ßo\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({escalaDocuments.filter(doc => doc.type === \"escala\").length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Escalas de Oficiais e Pra√ßas - Altern√¢ncia autom√°tica\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {escalaDocuments.filter(doc => doc.type === \"escala\").length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhuma escala cadastrada.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {escalaDocuments.filter(doc => doc.type === \"escala\").map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">üìã</span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      {doc.category && (\n                        <span className={`text-xs px-2 py-0.5 rounded-full status-badge ${\n                          doc.category === \"oficial\" \n                            ? \"bg-blue-100 text-blue-800\" \n                            : \"bg-green-100 text-green-800\"\n                        }`}>\n                          {doc.category === \"oficial\" ? \"üë®‚Äç‚úàÔ∏è Oficiais\" : \"üë®‚Äçüîß Pra√ßas\"}\n                        </span>\n                      )}\n                      <TagBadges tags={doc.tags} documentId={doc.id} />\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full status-badge\">\n                        üîÑ Altern√¢ncia\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Escala ativa\" : \"Escala inativa\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar escala\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>üìã {doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via da escala de servi√ßo\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover escala\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* üçΩÔ∏è CARD√ÅPIO Documents */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            üçΩÔ∏è Card√°pios Semanais\n            <span className=\"text-sm font-normal text-gray-500\">\n              ({escalaDocuments.filter(doc => doc.type === \"cardapio\").length})\n            </span>\n          </CardTitle>\n          <CardDescription>\n            Card√°pios da Semana - Altern√¢ncia autom√°tica\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {escalaDocuments.filter(doc => doc.type === \"cardapio\").length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-4\">\n              Nenhum card√°pio cadastrado.\n            </p>\n          ) : (\n            <ul className=\"space-y-2 max-h-48 overflow-y-auto\">\n              {escalaDocuments.filter(doc => doc.type === \"cardapio\").map((doc) => (\n                <li key={doc.id} className=\"border rounded-md p-3 flex justify-between items-center document-card\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-lg\">üçΩÔ∏è</span>\n                      <p className=\"font-medium truncate\">{doc.title}</p>\n                      <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full status-badge\">\n                        CARD√ÅPIO\n                      </span>\n                        {doc.unit && (\n                          <span className={`text-xs px-2 py-0.5 rounded-full status-badge ${\n                            doc.unit === \"EAGM\" \n                              ? \"bg-blue-100 text-blue-800\" \n                              : \"bg-green-100 text-green-800\"\n                          }`}>\n                            {doc.unit === \"EAGM\" ? \"üè¢ EAGM\" : \"‚öì 1¬∫ DN\"}\n                          </span>\n                        )}\n                        <TagBadges tags={doc.tags} documentId={doc.id} />\n                                            </div>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span className=\"flex items-center gap-1\">\n                        üìÖ {new Date(doc.uploadDate).toLocaleDateString('pt-BR')}\n                      </span>\n                      {doc.url.includes('/uploads/') && (\n                        <span className=\"flex items-center gap-1 bg-green-100 text-green-800 px-2 py-0.5 rounded-full status-badge\">\n                          üåê Servidor\n                        </span>\n                      )}\n                      <span className=\"flex items-center gap-1 bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full status-badge\">\n                        üîÑ Altern√¢ncia\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 ml-2\">\n                    <Button \n                      variant={doc.active ? \"default\" : \"outline\"} \n                      size=\"sm\"\n                      onClick={() => toggleDocActive(doc)}\n                      title={doc.active ? \"Card√°pio ativo\" : \"Card√°pio inativo\"}\n                    >\n                      {doc.active ? \"‚úÖ\" : \"üí§\"}\n                    </Button>\n                    <Sheet>\n                      <SheetTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" title=\"Visualizar card√°pio\">üëÅÔ∏è</Button>\n                      </SheetTrigger>\n                      <SheetContent className=\"w-[85vw] sm:max-w-4xl\">\n                        <SheetHeader>\n                          <SheetTitle>üçΩÔ∏è {doc.title}</SheetTitle>\n                          <SheetDescription>\n                            Visualiza√ß√£o pr√©via do card√°pio semanal\n                          </SheetDescription>\n                        </SheetHeader>\n                        <div className=\"mt-6 h-[80vh]\">\n                          <iframe \n                            src={doc.url} \n                            className=\"w-full h-full border rounded\"\n                            title={doc.title}\n                          />\n                        </div>\n                      </SheetContent>\n                    </Sheet>\n                    <Button \n                      variant=\"destructive\" \n                      size=\"sm\"\n                      onClick={() => removeDocument(doc.id)}\n                      title=\"Remover card√°pio\"\n                    >\n                      üóëÔ∏è\n                    </Button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  </div>\n\n  {/* Informa√ß√µes sobre como funciona */}\n  <Card className=\"mt-6\">\n    <CardHeader>\n      <CardTitle>‚ùì Como Funciona o Sistema de Documentos</CardTitle>\n      <CardDescription>\n        Entenda como o sistema processa e exibe os diferentes tipos de documentos\n      </CardDescription>\n    </CardHeader>\n    <CardContent>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üìÑ PLASA (Plano de Servi√ßo)\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-blue-700\">\n            <li>PDFs convertidos automaticamente para imagens</li>\n            <li>Rola automaticamente do in√≠cio ao fim</li>\n            <li>Reinicia ap√≥s intervalo configur√°vel</li>\n            <li>Velocidade de rolagem ajust√°vel</li>\n            <li>Exibido no lado esquerdo da tela</li>\n          </ul>\n        </div>\n        \n        <div className=\"bg-purple-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n           üìã PLASA (Plano de Servi√ßo Semanal)\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-purple-700\">\n            <li>Mesmo comportamento do PLASA</li>\n            <li>Rolagem autom√°tica cont√≠nua</li>\n            <li>Altern√¢ncia com PLASA no lado esquerdo</li>\n            <li>Convers√£o autom√°tica PDF ‚Üí Imagem</li>\n            <li>Cache inteligente no servidor</li>\n          </ul>\n        </div>\n\n        <div className=\"bg-green-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üìã Escalas de Servi√ßo\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>Exibi√ß√£o est√°tica (sem scroll)</li>\n            <li>Altern√¢ncia autom√°tica entre escalas</li>\n            <li>Categorias: Oficiais e Pra√ßas</li>\n            <li>Intervalo de altern√¢ncia configur√°vel</li>\n            <li>Exibido no lado direito da tela</li>\n          </ul>\n        </div>\n\n        <div className=\"bg-orange-50 p-4 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            üçΩÔ∏è Card√°pios Semanais\n          </h4>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-orange-700\">\n            <li>Altern√¢ncia autom√°tica entre card√°pios</li>\n            <li>Exibi√ß√£o est√°tica como as escalas</li>\n            <li>Mesmo intervalo de altern√¢ncia</li>\n            <li>Cache para melhor performance</li>\n            <li>Rotaciona junto com as escalas</li>\n          </ul>\n        </div>\n      </div>\n      \n      <div className=\"mt-6 p-4 bg-navy/5 rounded-lg border-l-4 border-navy\">\n        <h4 className=\"font-medium mb-2 text-navy\">üîß Convers√£o PDF para Imagem</h4>\n        <p className=\"text-sm text-navy/80\">\n          O sistema converte automaticamente PDFs para imagens (JPG) para garantir m√°xima compatibilidade \n          e evitar problemas de CORS, fontes faltando, ou incompatibilidades de navegador. \n          As imagens s√£o armazenadas no servidor e carregadas rapidamente atrav√©s de cache inteligente.\n        </p>\n      </div>\n      \n      <div className=\"mt-4 p-4 bg-green-50 rounded-lg border-l-4 border-green-500\">\n        <h4 className=\"font-medium mb-2 text-green-800\">üí° Dicas de Uso</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>Para melhor qualidade, use PDFs com orienta√ß√£o paisagem</li>\n            <li>Imagens (JPG/PNG) s√£o processadas mais rapidamente que PDFs</li>\n            <li>O sistema mant√©m cache das p√°ginas convertidas</li>\n            <li>Documentos inativos permanecem salvos mas n√£o s√£o exibidos</li>\n          </ul>\n          <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n            <li>PLASA: Ideal para documentos longos que precisam ser lidos</li>\n            <li>Escalas/Card√°pios: Ideal para informa√ß√µes que precisam ser vistas rapidamente</li>\n            <li>Use nomes descritivos nos t√≠tulos para melhor organiza√ß√£o</li>\n            <li>Cache evita reprocessamento desnecess√°rio</li>\n          </ul>\n        </div>\n      </div>\n    </CardContent>\n  </Card>\n</TabsContent>\n\n\n\n          {/* Aba de Militares */}\n          <TabsContent value=\"militares\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Formul√°rio de Oficiais */}\n              <Card className=\"border-navy\">\n                <CardHeader className=\"bg-navy text-white\">\n                  <CardTitle>üëÆ Oficiais de Servi√ßo</CardTitle>\n                  <CardDescription className=\"text-gray-200\">\n                    Configure o oficial do dia e contramestre do servi√ßo\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4 pt-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {/* Oficial do Dia */}\n                    <div className=\"space-y-4 p-4 border rounded-lg bg-blue-50\">\n                      <h3 className=\"font-medium text-blue-800 flex items-center gap-2\">\n                        üéñÔ∏è Oficial do Dia\n                      </h3>\n                      \n\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"officerName\">Nome do Oficial</Label>\n                        <Select \n                          value={(() => {\n                            // Se o nome j√° est√° formatado, extrair apenas o nome base\n                            const match = dutyOfficers.officerName?.match(/^[A-Z0-9]+\\s*(?:\\([A-Z-]+\\))?\\s+(.+)$/);\n                            return match ? match[1] : dutyOfficers.officerName || \"\";\n                          })()} \n                          onValueChange={(value) => {\n                            console.log('üîÑ Selecionando oficial:', value);\n                            const officer = availableOfficers.find(o => o.name === value);\n                            console.log('üëÆ Oficial encontrado:', officer);\n                            // Criar nome formatado imediatamente\n                            const formattedName = officer ? \n                              `${officer.rank.toUpperCase()}${officer.specialty ? ` (${officer.specialty.toUpperCase()})` : ''} ${officer.name}` : \n                              value;\n                            \n                            const newOfficers = {\n                              ...dutyOfficers, \n                              officerName: formattedName,\n                              officerRank: officer?.rank as \"1t\" | \"2t\" | \"ct\" || dutyOfficers.officerRank\n                            };\n                            console.log('üîÑ Novo estado dos oficiais:', newOfficers);\n                            setDutyOfficers(newOfficers);\n                          }}\n                          disabled={isLoadingOfficers}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Selecione o oficial\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {availableOfficers.map((officer, index) => (\n                              <SelectItem key={`officer-${index}-${officer.name}`} value={officer.name}>\n                                {officer.name}\n                              </SelectItem>\n                            ))}\n                            {isLoadingComboboxData && (\n                              <SelectItem value=\"\" disabled>\n                                Carregando oficiais...\n                              </SelectItem>\n                            )}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n\n                    {/* Contramestre */}\n                    <div className=\"space-y-4 p-4 border rounded-lg bg-green-50\">\n                      <h3 className=\"font-medium text-green-800 flex items-center gap-2\">\n                        ‚öì Contramestre do Servi√ßo\n                      </h3>\n                      \n\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"masterName\">Nome do Contramestre</Label>\n                        <Select \n                          value={(() => {\n                            // Se o nome j√° est√° formatado, extrair apenas o nome base\n                            const match = dutyOfficers.masterName?.match(/^[A-Z0-9]+\\s*(?:\\([A-Z-]+\\))?\\s+(.+)$/);\n                            return match ? match[1] : dutyOfficers.masterName || \"\";\n                          })()} \n                          onValueChange={(value) => {\n                            console.log('üîÑ Selecionando contramestre:', value);\n                            const master = availableMasters.find(m => m.name === value);\n                            console.log('‚öì Contramestre encontrado:', master);\n                            // Criar nome formatado imediatamente\n                            const formattedMasterName = master ? \n                              `${master.rank.toUpperCase()}${master.specialty ? ` (${master.specialty.toUpperCase()})` : ''} ${master.name}` : \n                              value;\n                            \n                            setDutyOfficers({\n                              ...dutyOfficers, \n                              masterName: formattedMasterName,\n                              masterRank: master?.rank as \"1sg\" | \"2sg\" | \"3sg\" || dutyOfficers.masterRank\n                            });\n                          }}\n                          disabled={isLoadingOfficers}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Selecione o contramestre\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {availableMasters.map((master, index) => (\n                              <SelectItem key={`master-${index}-${master.name}`} value={master.name}>\n                                {master.name}\n                              </SelectItem>\n                            ))}\n                            {isLoadingComboboxData && (\n                              <SelectItem value=\"\" disabled>\n                                Carregando contramestres...\n                              </SelectItem>\n                            )}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2 pt-4\">\n                    <Button \n                      onClick={saveDutyOfficers}\n                      disabled={isLoadingOfficers || (!dutyOfficers.officerName && !dutyOfficers.masterName)}\n                      className=\"bg-navy hover:bg-navy/90\"\n                    >\n                      {isLoadingOfficers ? \"üíæ Salvando...\" : \"üíæ Salvar\"}\n                    </Button>\n                    <Button \n                      variant=\"outline\"\n                      onClick={loadDutyOfficers}\n                      disabled={isLoadingOfficers}\n                    >\n                      üîÑ Recarregar\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Visualiza√ß√£o Atual */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>üëÅÔ∏è Visualiza√ß√£o Atual</CardTitle>\n                  <CardDescription>\n                    Como as informa√ß√µes aparecem na tela principal\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"p-4 border rounded-lg bg-gray-50\">\n                      <h4 className=\"font-medium mb-2 text-gray-700\">\n                        Informa√ß√µes Exibidas no Header:\n                      </h4>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>\n                          <span className=\"flex items-center gap-2\">\n                            <strong>Oficial do Dia:</strong> \n                            {dutyOfficers.officerName ? (\n                              <div className=\"flex items-center gap-2\">\n                                {(() => {\n                                  const converted = convertToDisplayFormat(dutyOfficers.officerName, 'officer');\n                                  return (\n                                    <>\n                                      {converted.rank && converted.specialty && (\n                                        <MilitaryInsignia \n                                          rank={converted.rank.toLowerCase()} \n                                          specialty={converted.specialty.toLowerCase()} \n                                          size=\"sm\"\n                                        />\n                                      )}\n                                      <span>{converted.displayName}</span>\n                                    </>\n                                  );\n                                })()}\n                              </div>\n                            ) : (\n                              <span>N√£o definido</span>\n                            )}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"w-2 h-2 bg-green-500 rounded-full\"></span>\n                          <span className=\"flex items-center gap-2\">\n                            <strong>Contramestre:</strong>\n                            {dutyOfficers.masterName ? (\n                              <div className=\"flex items-center gap-2\">\n                                {(() => {\n                                  const converted = convertToDisplayFormat(dutyOfficers.masterName, 'master');\n                                  return (\n                                    <>\n                                      {converted.rank && converted.specialty && (\n                                        <MilitaryInsignia \n                                          rank={converted.rank.toLowerCase()} \n                                          specialty={converted.specialty.toLowerCase()} \n                                          size=\"sm\"\n                                        />\n                                      )}\n                                      <span>{converted.displayName}</span>\n                                    </>\n                                  );\n                                })()}\n                              </div>\n                            ) : (\n                              <span>N√£o definido</span>\n                            )}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"p-3 bg-blue-50 rounded-lg\">\n                      <p className=\"text-sm text-blue-700\">\n                        üí° <strong>Dica:</strong> As informa√ß√µes dos militares s√£o exibidas no cabe√ßalho \n                        da tela principal e s√£o atualizadas automaticamente em tempo real.\n                      </p>\n                    </div>\n\n                    <div className=\"p-3 bg-amber-50 rounded-lg\">\n                      <p className=\"text-sm text-amber-700\">\n                        ‚ö†Ô∏è <strong>Importante:</strong> Certifique-se de que os nomes est√£o corretos \n                        antes de salvar, pois eles ser√£o exibidos publicamente.\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n\n            </div>\n          </TabsContent>\n\n          {/* Aba de Sistema */}\n          <TabsContent value=\"sistema\">\n            <Tabs defaultValue=\"sistema\" className=\"w-full\">\n              <TabsList className=\"w-full mb-4\">\n                <TabsTrigger value=\"sistema\" className=\"flex-1\">‚öôÔ∏è Sistema</TabsTrigger>\n                <TabsTrigger value=\"militares\" className=\"flex-1\">üë• Militares</TabsTrigger>\n              </TabsList>\n              \n              {/* Sub-aba Sistema */}\n              <TabsContent value=\"sistema\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  {/* Card de Configura√ß√µes do Sistema */}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>‚öôÔ∏è Configura√ß√µes do Sistema</CardTitle>\n                      <CardDescription>\n                        Ajuste os par√¢metros de funcionamento do sistema de visualiza√ß√£o\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"space-y-6\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"scrollSpeed\">\n                          üèÉ‚Äç‚ôÇÔ∏è Velocidade de Rolagem do PLASA\n                        </Label>\n                        <div className=\"flex items-center space-x-2\">\n                          <Select value={scrollSpeed} onValueChange={handleScrollSpeedChange}>\n                            <SelectTrigger className=\"w-32\">\n                              <SelectValue placeholder=\"Velocidade\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"slow\">üêå Lenta</SelectItem>\n                              <SelectItem value=\"normal\">üö∂‚Äç‚ôÇÔ∏è Normal</SelectItem>\n                              <SelectItem value=\"fast\">üèÉ‚Äç‚ôÇÔ∏è R√°pida</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <span className=\"text-sm text-muted-foreground\">velocidade de scroll</span>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Define a velocidade com que o PLASA rola automaticamente pela tela.\n                        </p>\n                      </div>\n                      \n                      <div className=\"space-y-4\">\n                        <div className=\"space-y-2\">\n                          <div className=\"flex items-center\">\n                            <Label htmlFor=\"escalaInterval\">\n                              ‚öñÔ∏è Intervalo entre Escalas (segundos)\n                            </Label>\n                            <HoverCard>\n                              <HoverCardTrigger asChild>\n                                <span className=\"ml-2 text-blue-500 cursor-help text-sm\">[?]</span>\n                              </HoverCardTrigger>\n                              <HoverCardContent className=\"w-80\">\n                                <p className=\"text-sm\">\n                                  Define quanto tempo cada escala (Oficiais/Pra√ßas) ser√° exibida antes de alternar para a outra.\n                                </p>\n                              </HoverCardContent>\n                            </HoverCard>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Input \n                              id=\"escalaInterval\" \n                              type=\"number\" \n                              min=\"5\" \n                              max=\"60\" \n                              className=\"w-24\"\n                              value={Math.floor(documentAlternateInterval / 1000)}\n                              onChange={handleDocumentAlternateIntervalChange}\n                            />\n                            <span className=\"text-sm text-muted-foreground\">segundos entre escalas</span>\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <div className=\"flex items-center\">\n                            <Label htmlFor=\"cardapioInterval\">\n                              üçΩÔ∏è Intervalo do Card√°pio (segundos)\n                            </Label>\n                            <HoverCard>\n                              <HoverCardTrigger asChild>\n                                <span className=\"ml-2 text-blue-500 cursor-help text-sm\">[?]</span>\n                              </HoverCardTrigger>\n                              <HoverCardContent className=\"w-80\">\n                                <p className=\"text-sm\">\n                                  Define quanto tempo o card√°pio fica vis√≠vel antes de voltar √†s escalas.\n                                </p>\n                              </HoverCardContent>\n                            </HoverCard>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Input \n                              id=\"cardapioInterval\" \n                              type=\"number\" \n                              min=\"10\" \n                              max=\"120\" \n                              className=\"w-24\"\n                              defaultValue=\"15\"\n                            />\n                            <span className=\"text-sm text-muted-foreground\">segundos para card√°pio</span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"autoRestart\">\n                          üîÑ Rein√≠cio Autom√°tico do PLASA\n                        </Label>\n                        <div className=\"flex items-center space-x-2\">\n                          <Input \n                            id=\"autoRestart\" \n                            type=\"number\" \n                            min=\"2\" \n                            max=\"10\" \n                            className=\"w-24\"\n                            value={autoRestartDelay}\n                            onChange={handleAutoRestartChange}\n                          />\n                          <span className=\"text-sm text-muted-foreground\">segundos no final</span>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Tempo de pausa no final do PLASA antes de reiniciar do topo.\n                        </p>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Card de Debug do Sistema */}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>üîç Informa√ß√µes do Sistema</CardTitle>\n                      <CardDescription>\n                        Status e informa√ß√µes t√©cnicas do sistema\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div className=\"p-4 bg-blue-50 rounded-lg\">\n                        <h4 className=\"font-medium mb-2 text-blue-800\">üìä Status do Servidor</h4>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                          <div>\n                            <p><strong>Conectado:</strong> {serverStatus.connected ? '‚úÖ Sim' : '‚ùå N√£o'}</p>\n                            <p><strong>√öltima resposta:</strong> {serverStatus.lastResponse || 'N/A'}</p>\n                            <p><strong>Documentos:</strong> {serverStatus.documents}</p>\n                          </div>\n                          <div>\n                            <p><strong>√öltima verifica√ß√£o:</strong> {serverStatus.lastCheck ? serverStatus.lastCheck.toLocaleTimeString('pt-BR') : 'Nunca'}</p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Button \n                          onClick={checkServerStatus}\n                          disabled={isLoading}\n                          className=\"w-full\"\n                        >\n                          {isLoading ? 'Verificando...' : 'üîÑ Verificar Status do Servidor'}\n                        </Button>\n                        \n\n                      </div>\n\n                      <div className=\"p-4 bg-green-50 rounded-lg border-l-4 border-green-500\">\n                        <h4 className=\"font-medium mb-2 text-green-800\">üí° Dicas de Debug</h4>\n                        <ul className=\"list-disc pl-5 space-y-1 text-sm text-green-700\">\n                          <li>Verifique o console do navegador (F12) para logs detalhados</li>\n                          <li>O bot√£o \"Listar Documentos\" mostra todos os PDFs no servidor</li>\n                          <li>Status do servidor √© atualizado automaticamente</li>\n                          <li>Documentos s√£o processados em background</li>\n                        </ul>\n                      </div>\n                    </CardContent>\n                  </Card>\n                  \n                  {/* Card de Logs do Sistema */}\n                  <Card>\n                    <CardHeader>\n                      <CardTitle>üìã Logs do Sistema</CardTitle>\n                      <CardDescription>\n                        Informa√ß√µes t√©cnicas e logs de funcionamento\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-2 max-h-64 overflow-y-auto text-sm font-mono bg-gray-100 p-3 rounded\">\n                        <div>‚úÖ Sistema iniciado com sucesso</div>\n                        <div>üì° Backend conectado: {getBackendUrl('/api/status')}</div>\n                        <div>üîÑ Auto-refresh ativo a cada 30 segundos</div>\n                        <div>üì± Interface responsiva carregada</div>\n                        <div>üéØ Componentes Radix UI inicializados</div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n             \n\n                  {/* Card de Manuten√ß√£o do Sistema */}\n                  <Card className=\"lg:col-span-2\">\n                    <CardHeader className=\"bg-orange-50\">\n                      <CardTitle className=\"flex items-center gap-2\">\n                        üîß Manuten√ß√£o do Sistema\n                      </CardTitle>\n                      <CardDescription>\n                        Ferramentas de manuten√ß√£o e limpeza do sistema\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"space-y-6 pt-6\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                        {/* Limpeza de Cache */}\n                        <div className=\"p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <span className=\"text-lg\">üßπ</span>\n                            <h4 className=\"font-medium text-yellow-800\">Limpeza de Cache</h4>\n                          </div>\n                          <p className=\"text-sm text-yellow-700 mb-3\">\n                            Limpa cache de PDFs e p√°ginas processadas no servidor.\n                          </p>\n                          <Button\n                            onClick={async () => {\n                              try {\n                                const response = await fetch(getBackendUrl('/api/clear-cache'), { method: 'POST' });\n                                if (response.ok) {\n                                  // Limpar tamb√©m cache do localStorage\n                                  localStorage.removeItem('documentContext');\n                                  localStorage.removeItem('noticeContext');\n                                  localStorage.removeItem('lastDisplayState');\n                                  \n                                  toast({\n                                    title: \"Cache limpo\",\n                                    description: \"Cache do servidor e navegador foi limpo com sucesso\"\n                                  });\n                                } else {\n                                  throw new Error('Falha na requisi√ß√£o');\n                                }\n                              } catch (error) {\n                                toast({\n                                  title: \"Erro na limpeza\",\n                                  description: \"N√£o foi poss√≠vel limpar o cache do servidor\",\n                                  variant: \"destructive\"\n                                });\n                              }\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"w-full border-yellow-300 text-yellow-700 hover:bg-yellow-100\"\n                          >\n                            Limpar Cache\n                          </Button>\n                        </div>\n\n                        {/* Limpar Cache do Navegador */}\n                        <div className=\"p-4 bg-purple-50 rounded-lg border border-purple-200\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <span className=\"text-lg\">üíª</span>\n                            <h4 className=\"font-medium text-purple-800\">Cache do Navegador</h4>\n                          </div>\n                          <p className=\"text-sm text-purple-700 mb-3\">\n                            Limpa dados salvos localmente no navegador.\n                          </p>\n                          <Button\n                            onClick={() => {\n                              // Limpar localStorage\n                              localStorage.clear();\n                              \n                              // Limpar sessionStorage\n                              sessionStorage.clear();\n                              \n                              // For√ßar reload da p√°gina\n                              toast({\n                                title: \"Cache limpo\",\n                                description: \"Recarregando p√°gina...\"\n                              });\n                              \n                              setTimeout(() => {\n                                window.location.reload();\n                              }, 1000);\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"w-full border-purple-300 text-purple-700 hover:bg-purple-100\"\n                          >\n                            Limpar e Recarregar\n                          </Button>\n                        </div>\n\n                        {/* Recarregar Dados */}\n                        <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <span className=\"text-lg\">üîÑ</span>\n                            <h4 className=\"font-medium text-blue-800\">Recarregar Dados</h4>\n                          </div>\n                          <p className=\"text-sm text-blue-700 mb-3\">\n                            For√ßa recarga dos dados do servidor para sincroniza√ß√£o.\n                          </p>\n                          <Button\n                            onClick={() => {\n                              // For√ßa recarregamento da p√°gina para sincronizar dados\n                              window.location.reload();\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"w-full border-blue-300 text-blue-700 hover:bg-blue-100\"\n                          >\n                            Recarregar\n                          </Button>\n                        </div>\n\n                        {/* Informa√ß√µes do Sistema */}\n                        <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <span className=\"text-lg\">üìã</span>\n                            <h4 className=\"font-medium text-green-800\">Info Sistema</h4>\n                          </div>\n                          <p className=\"text-sm text-green-700 mb-3\">\n                            Ver informa√ß√µes detalhadas sobre arquivos e uso do sistema.\n                          </p>\n                          <Button\n                            onClick={async () => {\n                              try {\n                                const response = await fetch(getBackendUrl('/api/list-pdfs'));\n                                const data = await response.json();\n                                console.log('üìä Informa√ß√µes do sistema:', data);\n                                alert(`Sistema Status:\n‚Ä¢ Documentos: ${data.files ? data.files.length : 0}\n‚Ä¢ Backend: Online\n‚Ä¢ Storage: Operacional\n‚Ä¢ √öltima verifica√ß√£o: ${new Date().toLocaleString('pt-BR')}`);\n                              } catch (error) {\n                                console.error('Erro ao obter informa√ß√µes:', error);\n                                alert('Erro ao acessar informa√ß√µes do sistema');\n                              }\n                            }}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"w-full border-green-300 text-green-700 hover:bg-green-100\"\n                          >\n                            Ver Info\n                          </Button>\n                        </div>\n\n                        {/* Ajuda do Sistema */}\n                        <div className=\"p-4 bg-purple-50 rounded-lg border border-purple-200\">\n                          <div className=\"flex items-center gap-2 mb-3\">\n                            <span className=\"text-lg\">‚ùì</span>\n                            <h4 className=\"font-medium text-purple-800\">Como Funciona</h4>\n                          </div>\n                          <p className=\"text-sm text-purple-700 mb-3\">\n                            Entenda como o sistema processa e exibe documentos.\n                          </p>\n                          <Sheet>\n                            <SheetTrigger asChild>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className=\"w-full border-purple-300 text-purple-700 hover:bg-purple-100\"\n                              >\n                                Ver Ajuda\n                              </Button>\n                            </SheetTrigger>\n                            <SheetContent className=\"w-[400px] sm:w-[540px]\">\n                              <SheetHeader>\n                                <SheetTitle>üìñ Como Funciona o Sistema</SheetTitle>\n                                <SheetDescription>\n                                  Guia completo de funcionamento do sistema de visualiza√ß√£o\n                                </SheetDescription>\n                              </SheetHeader>\n                              <div className=\"mt-6 space-y-6 max-h-[80vh] overflow-y-auto\">\n                                <div>\n                                  <h3 className=\"font-semibold mb-2\">üìÑ PLASA (Plano de Servi√ßo)</h3>\n                                  <ul className=\"text-sm space-y-1 text-gray-600\">\n                                    <li>‚Ä¢ PDFs s√£o automaticamente convertidos para imagens</li>\n                                    <li>‚Ä¢ Rola automaticamente do in√≠cio ao fim</li>\n                                    <li>‚Ä¢ Reinicia ap√≥s intervalo configur√°vel</li>\n                                    <li>‚Ä¢ Apenas um PLASA ativo por vez</li>\n                                    <li>‚Ä¢ Velocidade de rolagem configur√°vel</li>\n                                  </ul>\n                                </div>\n\n                                <div>\n                                  <h3 className=\"font-semibold mb-2\">üìã Escalas de Servi√ßo</h3>\n                                  <ul className=\"text-sm space-y-1 text-gray-600\">\n                                    <li>‚Ä¢ Suportam PDFs e imagens diretas</li>\n                                    <li>‚Ä¢ Altern√¢ncia autom√°tica no intervalo configurado</li>\n                                    <li>‚Ä¢ Suporte a categorias: Oficiais e Pra√ßas</li>\n                                    <li>‚Ä¢ M√∫ltiplas escalas ativas simultaneamente</li>\n                                    <li>‚Ä¢ Exibi√ß√£o est√°tica (sem scroll)</li>\n                                  </ul>\n                                </div>\n\n                                <div>\n                                  <h3 className=\"font-semibold mb-2\">üì¢ Avisos Importantes</h3>\n                                  <ul className=\"text-sm space-y-1 text-gray-600\">\n                                    <li>‚Ä¢ Salvos no servidor backend</li>\n                                    <li>‚Ä¢ Altern√¢ncia autom√°tica entre m√∫ltiplos avisos</li>\n                                    <li>‚Ä¢ Prioridades: Alta, M√©dia, Baixa</li>\n                                    <li>‚Ä¢ Per√≠odo de validade configur√°vel</li>\n                                    <li>‚Ä¢ Sincroniza√ß√£o entre dispositivos</li>\n                                  </ul>\n                                </div>\n\n                                <div>\n                                  <h3 className=\"font-semibold mb-2\">üîß Convers√£o PDF para Imagem</h3>\n                                  <p className=\"text-sm text-gray-600\">\n                                    O sistema converte automaticamente PDFs para imagens (JPG) para m√°xima \n                                    compatibilidade e evitar problemas de CORS ou fontes faltando. As imagens \n                                    s√£o armazenadas no servidor para carregamento r√°pido.\n                                  </p>\n                                </div>\n\n                                <div>\n                                  <h3 className=\"font-semibold mb-2\">üí° Dicas de Uso</h3>\n                                  <ul className=\"text-sm space-y-1 text-gray-600\">\n                                    <li>‚Ä¢ Use PDFs com orienta√ß√£o paisagem para melhor qualidade</li>\n                                    <li>‚Ä¢ Imagens (JPG/PNG) s√£o processadas mais rapidamente</li>\n                                    <li>‚Ä¢ Sistema mant√©m cache para performance</li>\n                                    <li>‚Ä¢ Avisos \"Alta\" prioridade t√™m destaque vermelho</li>\n                                    <li>‚Ä¢ Documentos inativos ficam salvos mas n√£o aparecem</li>\n                                  </ul>\n                                </div>\n                              </div>\n                            </SheetContent>\n                          </Sheet>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n              </div>\n            </TabsContent>\n            \n            {/* Sub-aba Automa√ß√£o */}\n            <TabsContent value=\"automacao\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Card de Automa√ß√£o PLASA */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>‚öôÔ∏è Configura√ß√µes do Sistema</CardTitle>\n                  <CardDescription>\n                    Ajuste os par√¢metros de funcionamento do sistema de visualiza√ß√£o\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"scrollSpeed\">\n                      üèÉ‚Äç‚ôÇÔ∏è Velocidade de Rolagem do PLASA\n                    </Label>\n                    <div className=\"flex items-center space-x-2\">\n                      <Select value={scrollSpeed} onValueChange={handleScrollSpeedChange}>\n                        <SelectTrigger className=\"w-32\">\n                          <SelectValue placeholder=\"Velocidade\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"slow\">üêå Lenta</SelectItem>\n                          <SelectItem value=\"normal\">üö∂‚Äç‚ôÇÔ∏è Normal</SelectItem>\n                          <SelectItem value=\"fast\">üèÉ‚Äç‚ôÇÔ∏è R√°pida</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <span className=\"text-sm text-muted-foreground\">velocidade de scroll</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Define a velocidade com que o PLASA rola automaticamente pela tela.\n                    </p>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center\">\n                      <Label htmlFor=\"documentAlternateInterval\">\n                        ‚è±Ô∏è Intervalo de Altern√¢ncia entre Escalas (segundos)\n                      </Label>\n                      <HoverCard>\n                        <HoverCardTrigger asChild>\n                          <span className=\"ml-2 text-blue-500 cursor-help text-sm\">[?]</span>\n                        </HoverCardTrigger>\n                        <HoverCardContent className=\"w-80\">\n                          <p className=\"text-sm\">\n                            Define quanto tempo cada escala (Oficiais/Pra√ßas) ser√° exibida antes de alternar para a outra. \n                            Esta configura√ß√£o s√≥ tem efeito quando h√° mais de uma escala ativa.\n                          </p>\n                        </HoverCardContent>\n                      </HoverCard>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Input \n                        id=\"documentAlternateInterval\" \n                        type=\"number\" \n                        min=\"10\" \n                        max=\"300\" \n                        className=\"w-24\"\n                        value={documentAlternateInterval / 1000}\n                        onChange={updateDocumentAlternateInterval}\n                      />\n                      <span className=\"text-sm text-muted-foreground\">segundos</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Recomendado: tempo suficiente para visualizar cada escala completamente.\n                    </p>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"autoRestart\">\n                      üîÑ Rein√≠cio Autom√°tico do PLASA\n                    </Label>\n                    <div className=\"flex items-center space-x-2\">\n                      <Input \n                        id=\"autoRestart\" \n                        type=\"number\" \n                        min=\"2\" \n                        max=\"10\" \n                        className=\"w-24\"\n                        value={autoRestartDelay}\n                        onChange={handleAutoRestartChange}\n                      />\n                      <span className=\"text-sm text-muted-foreground\">segundos no final</span>\n                    </div>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Tempo de pausa no final do PLASA antes de reiniciar do topo.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Se√ß√£o de Gerenciamento de Militares */}\n              <Card className=\"lg:col-span-2 border-green-200\">\n                <CardHeader className=\"bg-green-50\">\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <span>üéñÔ∏è</span> Gerenciar Militares\n                      </CardTitle>\n                      <CardDescription>\n                        Lista completa de militares cadastrados com op√ß√µes de edi√ß√£o\n                      </CardDescription>\n                    </div>\n                    <Button \n                      onClick={() => {\n                        setEditingMilitary(null);\n                        setMilitaryEditorOpen(true);\n                      }}\n                      className=\"bg-green-600 hover:bg-green-700\"\n                    >\n                      ‚ûï Novo Militar\n                    </Button>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"pt-6\">\n                  {loadingMilitary ? (\n                    <div className=\"text-center py-8\">\n                      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto\"></div>\n                      <p className=\"mt-2 text-muted-foreground\">Carregando militares...</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-6\">\n                      {militaryPersonnel.length === 0 ? (\n                        <div className=\"text-center py-8 text-muted-foreground\">\n                          <p>Nenhum militar cadastrado</p>\n                        </div>\n                      ) : (\n                        <>\n                          {/* Se√ß√£o de Oficiais */}\n                          {militaryPersonnel.filter(m => m.type === 'officer').length > 0 && (\n                            <div className=\"space-y-4\">\n                              <div className=\"flex items-center gap-2 pb-2 border-b\">\n                                <h3 className=\"text-lg font-semibold text-navy\">üëÆ Oficiais</h3>\n                                <span className=\"text-sm text-muted-foreground\">\n                                  ({militaryPersonnel.filter(m => m.type === 'officer').length})\n                                </span>\n                              </div>\n                              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                                {militaryPersonnel.filter(m => m.type === 'officer').map((military) => (\n                                  <div \n                                    key={military.id} \n                                    className=\"p-3 border rounded-lg hover:shadow-md transition-shadow bg-blue-50 border-blue-200\"\n                                  >\n                                    <div className=\"flex justify-between items-start mb-2\">\n                                      <div className=\"flex-1\">\n                                        <div className=\"font-semibold text-sm text-blue-800\">\n                                          {military.rank.toUpperCase()} ({(military as any).specialty?.toUpperCase() || 'S/E'})\n                                        </div>\n                                        <div className=\"text-base font-bold text-navy\">\n                                          {military.name.toUpperCase()}\n                                        </div>\n                                      </div>\n                                      <div className=\"flex gap-1\">\n                                        <Button\n                                          variant=\"outline\"\n                                          size=\"sm\"\n                                          onClick={() => handleEditMilitary(military)}\n                                          className=\"text-blue-600 border-blue-200 hover:bg-blue-100 h-7 w-7 p-0\"\n                                        >\n                                          ‚úèÔ∏è\n                                        </Button>\n                                        <Button\n                                          variant=\"outline\"\n                                          size=\"sm\"\n                                          onClick={() => handleDeleteMilitary(military.id)}\n                                          className=\"text-red-600 border-red-200 hover:bg-red-50 h-7 w-7 p-0\"\n                                        >\n                                          üóëÔ∏è\n                                        </Button>\n                                      </div>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Se√ß√£o de Pra√ßas */}\n                          {militaryPersonnel.filter(m => m.type === 'master').length > 0 && (\n                            <div className=\"space-y-4\">\n                              <div className=\"flex items-center gap-2 pb-2 border-b\">\n                                <h3 className=\"text-lg font-semibold text-green-700\">üéñÔ∏è Pra√ßas</h3>\n                                <span className=\"text-sm text-muted-foreground\">\n                                  ({militaryPersonnel.filter(m => m.type === 'master').length})\n                                </span>\n                              </div>\n                              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                                {militaryPersonnel.filter(m => m.type === 'master').map((military) => (\n                                  <div \n                                    key={military.id} \n                                    className=\"p-3 border rounded-lg hover:shadow-md transition-shadow bg-green-50 border-green-200\"\n                                  >\n                                    <div className=\"flex justify-between items-start mb-2\">\n                                      <div className=\"flex-1\">\n                                        <div className=\"font-semibold text-sm text-green-800\">\n                                          {military.rank.toUpperCase()} ({(military as any).specialty?.toUpperCase() || 'S/E'})\n                                        </div>\n                                        <div className=\"text-base font-bold text-navy\">\n                                          {military.name.toUpperCase()}\n                                        </div>\n                                      </div>\n                                      <div className=\"flex gap-1\">\n                                        <Button\n                                          variant=\"outline\"\n                                          size=\"sm\"\n                                          onClick={() => handleEditMilitary(military)}\n                                          className=\"text-green-600 border-green-200 hover:bg-green-100 h-7 w-7 p-0\"\n                                        >\n                                          ‚úèÔ∏è\n                                        </Button>\n                                        <Button\n                                          variant=\"outline\"\n                                          size=\"sm\"\n                                          onClick={() => handleDeleteMilitary(military.id)}\n                                          className=\"text-red-600 border-red-200 hover:bg-red-50 h-7 w-7 p-0\"\n                                        >\n                                          üóëÔ∏è\n                                        </Button>\n                                      </div>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Estat√≠sticas */}\n                          <div className=\"border-t pt-4 text-sm text-muted-foreground bg-gray-50 p-3 rounded\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                              <div className=\"text-center\">\n                                <div className=\"text-2xl font-bold text-navy\">{militaryPersonnel.length}</div>\n                                <div>Total de Militares</div>\n                              </div>\n                              <div className=\"text-center\">\n                                <div className=\"text-2xl font-bold text-blue-600\">{militaryPersonnel.filter(m => m.type === 'officer').length}</div>\n                                <div>Oficiais</div>\n                              </div>\n                              <div className=\"text-center\">\n                                <div className=\"text-2xl font-bold text-green-600\">{militaryPersonnel.filter(m => m.type === 'master').length}</div>\n                                <div>Pra√ßas</div>\n                              </div>\n                            </div>\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n\n                </div>\n              </TabsContent>\n              \n              {/* Sub-aba Militares */}\n              <TabsContent value=\"militares\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  \n                  {/* Se√ß√£o de Gerenciamento de Militares Completo */}\n                  <Card className=\"lg:col-span-2 border-green-200\">\n                    <CardHeader className=\"bg-green-50\">\n                      <div className=\"flex justify-between items-center\">\n                        <div>\n                          <CardTitle className=\"flex items-center gap-2\">\n                            <span>üéñÔ∏è</span> Gerenciar Militares\n                          </CardTitle>\n                          <CardDescription>\n                            Lista completa de militares cadastrados com op√ß√µes de edi√ß√£o\n                          </CardDescription>\n                        </div>\n                        <Button \n                          onClick={() => {\n                            setEditingMilitary(null);\n                            setMilitaryEditorOpen(true);\n                          }}\n                          className=\"bg-green-600 hover:bg-green-700\"\n                        >\n                          ‚ûï Novo Militar\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"pt-6\">\n                      {loadingMilitary ? (\n                        <div className=\"text-center py-8\">\n                          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto\"></div>\n                          <p className=\"mt-2 text-muted-foreground\">Carregando militares...</p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-6\">\n                          {militaryPersonnel.length === 0 ? (\n                            <div className=\"text-center py-8 text-muted-foreground\">\n                              <p>Nenhum militar cadastrado</p>\n                            </div>\n                          ) : (\n                            <>\n                              {/* Se√ß√£o de Oficiais */}\n                              {militaryPersonnel.filter(m => m.type === 'officer').length > 0 && (\n                                <div className=\"space-y-4\">\n                                  <div className=\"flex items-center gap-2 pb-2 border-b\">\n                                    <h3 className=\"text-lg font-semibold text-navy\">üëÆ Oficiais</h3>\n                                    <span className=\"text-sm text-muted-foreground\">\n                                      ({militaryPersonnel.filter(m => m.type === 'officer').length})\n                                    </span>\n                                  </div>\n                                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                                    {militaryPersonnel.filter(m => m.type === 'officer').map((military) => (\n                                      <div \n                                        key={military.id} \n                                        className=\"p-3 border rounded-lg hover:shadow-md transition-shadow bg-blue-50 border-blue-200\"\n                                      >\n                                        <div className=\"flex justify-between items-start mb-2\">\n                                          <div className=\"flex-1\">\n                                            <div className=\"font-semibold text-sm text-blue-800\">\n                                              {military.rank.toUpperCase()} ({(military as any).specialty?.toUpperCase() || 'S/E'})\n                                            </div>\n                                            <div className=\"text-base font-bold text-navy\">\n                                              {military.name.toUpperCase()}\n                                            </div>\n                                          </div>\n                                          <div className=\"flex gap-1\">\n                                            <Button\n                                              variant=\"outline\"\n                                              size=\"sm\"\n                                              onClick={() => handleEditMilitary(military)}\n                                              className=\"text-blue-600 border-blue-200 hover:bg-blue-100 h-7 w-7 p-0\"\n                                            >\n                                              ‚úèÔ∏è\n                                            </Button>\n                                            <Button\n                                              variant=\"outline\"\n                                              size=\"sm\"\n                                              onClick={() => handleDeleteMilitary(military.id)}\n                                              className=\"text-red-600 border-red-200 hover:bg-red-50 h-7 w-7 p-0\"\n                                            >\n                                              üóëÔ∏è\n                                            </Button>\n                                          </div>\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Se√ß√£o de Pra√ßas */}\n                              {militaryPersonnel.filter(m => m.type === 'master').length > 0 && (\n                                <div className=\"space-y-4\">\n                                  <div className=\"flex items-center gap-2 pb-2 border-b\">\n                                    <h3 className=\"text-lg font-semibold text-green-700\">üéñÔ∏è Pra√ßas</h3>\n                                    <span className=\"text-sm text-muted-foreground\">\n                                      ({militaryPersonnel.filter(m => m.type === 'master').length})\n                                    </span>\n                                  </div>\n                                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                                    {militaryPersonnel.filter(m => m.type === 'master').map((military) => (\n                                      <div \n                                        key={military.id} \n                                        className=\"p-3 border rounded-lg hover:shadow-md transition-shadow bg-green-50 border-green-200\"\n                                      >\n                                        <div className=\"flex justify-between items-start mb-2\">\n                                          <div className=\"flex-1\">\n                                            <div className=\"font-semibold text-sm text-green-800\">\n                                              {military.rank.toUpperCase()} ({(military as any).specialty?.toUpperCase() || 'S/E'})\n                                            </div>\n                                            <div className=\"text-base font-bold text-navy\">\n                                              {military.name.toUpperCase()}\n                                            </div>\n                                          </div>\n                                          <div className=\"flex gap-1\">\n                                            <Button\n                                              variant=\"outline\"\n                                              size=\"sm\"\n                                              onClick={() => handleEditMilitary(military)}\n                                              className=\"text-green-600 border-green-200 hover:bg-green-100 h-7 w-7 p-0\"\n                                            >\n                                              ‚úèÔ∏è\n                                            </Button>\n                                            <Button\n                                              variant=\"outline\"\n                                              size=\"sm\"\n                                              onClick={() => handleDeleteMilitary(military.id)}\n                                              className=\"text-red-600 border-red-200 hover:bg-red-50 h-7 w-7 p-0\"\n                                            >\n                                              üóëÔ∏è\n                                            </Button>\n                                          </div>\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Estat√≠sticas */}\n                              <div className=\"border-t pt-4 text-sm text-muted-foreground bg-gray-50 p-3 rounded\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                  <div className=\"text-center\">\n                                    <div className=\"text-2xl font-bold text-navy\">{militaryPersonnel.length}</div>\n                                    <div>Total de Militares</div>\n                                  </div>\n                                  <div className=\"text-center\">\n                                    <div className=\"text-2xl font-bold text-blue-600\">{militaryPersonnel.filter(m => m.type === 'officer').length}</div>\n                                    <div>Oficiais</div>\n                                  </div>\n                                  <div className=\"text-center\">\n                                    <div className=\"text-2xl font-bold text-green-600\">{militaryPersonnel.filter(m => m.type === 'master').length}</div>\n                                    <div>Pra√ßas</div>\n                                  </div>\n                                </div>\n                              </div>\n                            </>\n                          )}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                  \n                </div>\n              </TabsContent>\n            </Tabs>\n          </TabsContent>\n\n          {/* Dialog do Editor de Militares */}\n          <MilitaryEditor \n            isOpen={militaryEditorOpen}\n            onClose={() => {\n              setMilitaryEditorOpen(false);\n              setEditingMilitary(null);\n            }}\n            military={editingMilitary as any}\n            onSave={handleSaveMilitary}\n          />\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n\nexport default Admin;\n","size_bytes":125145},"client/src/pages/Index.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport PDFViewer from \"@/components/PDFViewer\";\nimport { WeatherAlertsActive } from \"@/components/WeatherAlertsActive\";\nimport { DutyOfficersDisplay } from \"@/components/DutyOfficersDisplay\";\nimport { useDisplay } from \"@/context/DisplayContext\";\nimport { getSunsetWithLabel } from \"@/utils/sunsetUtils\";\nimport { getCurrentTemperature } from \"@/utils/temperatureUtils\";\nimport logoPAPEM from \"@assets/logoPAPEM_1751352314977.png\";\n\nconst Index = () => {\n  const {\n    activePlasaDoc,\n    activeEscalaDoc,\n    scrollSpeed = \"normal\",\n    autoRestartDelay = 3,\n    handleScrollComplete\n  } = useDisplay();\n\n  const [sunsetTime, setSunsetTime] = useState<string>(\"--:--\");\n  const [currentTime, setCurrentTime] = useState<string>(\"\");\n  const [currentDate, setCurrentDate] = useState({\n    day: \"\",\n    month: \"\",\n    weekday: \"\"\n  });\n\n  // Estados para dados inline\n  const [officers, setOfficers] = useState<{officerName?: string, masterName?: string} | null>(null);\n  const [temperature, setTemperature] = useState<{temp?: number, humidity?: number, description?: string, rainChance?: number} | null>(null);\n\n  // Buscar hor√°rio do p√¥r do sol\n  useEffect(() => {\n    const fetchSunset = async () => {\n      try {\n        const sunset = await getSunsetWithLabel();\n        setSunsetTime(sunset);\n      } catch (error) {\n        console.error('Erro ao buscar p√¥r do sol:', error);\n        setSunsetTime(\"P√¥r do sol: --:--\");\n      }\n    };\n\n    fetchSunset();\n    \n    // Atualizar a cada hora\n    const interval = setInterval(fetchSunset, 60 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Buscar dados dos oficiais\n  useEffect(() => {\n    const fetchOfficers = async () => {\n      try {\n        const getBackendUrl = (): string => {\n          const currentHost = window.location.hostname;\n          const currentOrigin = window.location.origin;\n          const isReplit = currentHost.includes('replit.dev');\n          if (isReplit) {\n            return `${currentOrigin}/api/duty-officers`;\n          }\n          if (currentHost === 'localhost' || currentHost === '127.0.0.1') {\n            return `http://localhost:5000/api/duty-officers`;\n          }\n          return `${currentOrigin}/api/duty-officers`;\n        };\n\n        const response = await fetch(getBackendUrl());\n        if (response.ok) {\n          const data = await response.json();\n          if (data.success) {\n            setOfficers(data.officers);\n          }\n        }\n      } catch (error) {\n        console.error('Erro ao buscar oficiais:', error);\n      }\n    };\n\n    fetchOfficers();\n    const interval = setInterval(fetchOfficers, 5 * 60 * 1000); // 5 minutos\n    return () => clearInterval(interval);\n  }, []);\n\n  // Buscar dados da temperatura\n  useEffect(() => {\n    const fetchTemperature = async () => {\n      try {\n        const data = await getCurrentTemperature();\n        if (data) {\n          setTemperature(data);\n        }\n      } catch (error) {\n        console.error('Erro ao buscar temperatura:', error);\n      }\n    };\n\n    fetchTemperature();\n    const interval = setInterval(fetchTemperature, 30 * 60 * 1000); // 30 minutos\n    return () => clearInterval(interval);\n  }, []);\n\n  // Atualizar hor√°rio e data em tempo real\n  useEffect(() => {\n    const updateDateTime = () => {\n      const now = new Date();\n      \n      // Atualizar hor√°rio\n      const timeString = now.toLocaleTimeString('pt-BR', { \n        hour: '2-digit', \n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false \n      });\n      setCurrentTime(timeString);\n\n      // Atualizar data\n      const day = now.getDate().toString().padStart(2, '0');\n      const month = (now.getMonth() + 1).toString().padStart(2, '0');\n      const weekday = now.toLocaleDateString('pt-BR', { weekday: 'short' }).toUpperCase();\n      \n      setCurrentDate({ day, month, weekday });\n    };\n\n    // Atualizar imediatamente\n    updateDateTime();\n    \n    // Configurar timer para atualizar a cada segundo\n    const clockInterval = setInterval(updateDateTime, 1000);\n    \n    // Cleanup do timer\n    return () => clearInterval(clockInterval);\n  }, []);\n\n  // Determinar qual documento principal mostrar\n  const currentMainDoc = activePlasaDoc;\n  const mainDocTitle = currentMainDoc?.title || \"PLASA - Plano de Servi√ßo Semanal\";\n\n  console.log(\"üè† Index: Renderizando p√°gina principal\", {\n    activePlasa: activePlasaDoc?.title || 'nenhum',\n    activeEscala: activeEscalaDoc?.title || 'nenhum',\n    currentMainDoc: currentMainDoc?.title || 'nenhum',\n    scrollSpeed,\n    autoRestartDelay\n  });\n\n  return (\n    <div className=\"h-screen w-screen bg-gradient-to-br from-blue-950 via-slate-900 to-blue-950 flex flex-col overflow-hidden\">\n      {/* Header Principal - Painel com contorno restaurado */}\n        <header className=\"flex-shrink-0 mb-1 px-4 py-2 bg-gradient-to-r from-slate-800/80 to-blue-900/80 backdrop-blur-xl rounded-lg shadow-xl border border-blue-400/30 mx-2\">\n         <div className=\"flex items-center justify-center space-x-4\">\n          <div className=\"relative\">\n            <div className=\"w-16 h-16 bg-transparent rounded-lg flex items-center justify-center shadow-lg p-1\">\n              <img \n                src={logoPAPEM} \n                alt=\"Logo PAPEM\" \n                className=\"w-full h-full object-contain\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"text-center\">\n            <h1 className=\"text-2xl font-bold bg-gradient-to-r from-blue-300 to-white bg-clip-text text-transparent\">\n              MARINHA DO BRASIL\n            </h1>\n            <p className=\"text-blue-200/90 text-base font-medium\">\n              Pagadoria de Pessoal da Marinha\n            </p>\n          </div>\n        </div>\n      </header>\n\n      {/* Barra de Informa√ß√µes Operacionais - Com bordas arredondadas */}\n      <div className=\"flex-shrink-0 mb-2 px-2 sm:px-4 py-2 bg-gradient-to-r from-slate-700/50 to-blue-800/50 backdrop-blur-lg rounded-lg shadow-lg border border-blue-400/20 mx-2\">\n        \n        {/* Layout Desktop - Uma linha */}\n        <div className=\"hidden lg:flex items-center justify-center space-x-6 text-sm overflow-hidden\">\n          \n          {/* Oficial - Din√¢mico e Estilizado */}\n          {officers?.officerName && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-blue-600/20 px-3 py-1 rounded-lg border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">üëÆ‚Äç‚ôÇÔ∏è Oficial:</span>\n                <span className=\"text-white font-bold text-sm\">{officers.officerName}</span>\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n          \n          {/* Contramestre - Din√¢mico e Estilizado */}\n          {officers?.masterName && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-blue-600/20 px-3 py-1 rounded-lg border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">‚öì Contramestre:</span>\n                <span className=\"text-white font-bold text-sm\">{officers.masterName}</span>\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n\n          {/* Temperatura - Din√¢mica com Probabilidade de Chuva */}\n          {temperature && (\n            <>\n              <div className=\"flex items-center space-x-2 bg-slate-600/20 px-3 py-1 rounded-lg border border-slate-400/30\">\n                <span className=\"text-slate-300 font-medium text-xs\">üå°Ô∏è Temp:</span>\n                <span className=\"text-white font-bold text-sm\">{temperature.temp}¬∞C</span>\n                \n                {/* Probabilidade de chuva com emoji din√¢mico */}\n                {temperature.rainChance !== undefined && (\n                  <div className=\"flex items-center space-x-1\">\n                    <span className=\"text-lg\">\n                      {temperature.rainChance >= 80 ? 'üåßÔ∏è' : \n                       temperature.rainChance >= 60 ? '‚õàÔ∏è' : \n                       temperature.rainChance >= 40 ? 'üå¶Ô∏è' : \n                       temperature.rainChance >= 20 ? 'üå§Ô∏è' : '‚òÄÔ∏è'}\n                    </span>\n                    <span className=\"text-blue-300 font-semibold text-xs\">{temperature.rainChance}%</span>\n                  </div>\n                )}\n                \n                {/* Emoji baseado na temperatura */}\n                {temperature.temp && (\n                  <span className=\"text-base opacity-70\">\n                    {temperature.temp >= 30 ? 'üî•' : \n                     temperature.temp >= 25 ? 'üåû' : \n                     temperature.temp >= 20 ? 'üå§Ô∏è' : \n                     temperature.temp >= 15 ? '‚õÖ' : '‚ùÑÔ∏è'}\n                  </span>\n                )}\n                \n                {/* Descri√ß√£o do clima */}\n                {temperature.description && (\n                  <span className=\"text-slate-300 text-xs capitalize italic\">\n                    {temperature.description}\n                  </span>\n                )}\n              </div>\n              <div className=\"w-px h-4 bg-blue-400/30\"></div>\n            </>\n          )}\n          \n          {/* Data - Estilizada */}\n          <div className=\"flex items-center space-x-2 bg-green-600/20 px-3 py-1 rounded-lg border border-green-400/30\">\n            <span className=\"text-green-300 font-medium text-xs\">üìÖ Hoje:</span>\n            <span className=\"text-white font-bold text-sm\">\n              {currentDate.weekday}, {new Date().toLocaleDateString('pt-BR', { \n                day: '2-digit', \n               month: 'short' \n}).toUpperCase()}\n            </span>\n          </div>\n          \n          {/* Divisor */}\n          <div className=\"w-px h-4 bg-blue-400/30\"></div>\n          \n          {/* Hora - Estilizada */}\n          <div className=\"flex items-center space-x-2 bg-purple-600/20 px-3 py-1 rounded-lg border border-purple-400/30\">\n            <span className=\"text-purple-300 font-medium text-xs\">‚è∞ Hora:</span>\n            <span className=\"text-white font-mono font-bold text-sm tracking-wider\">\n              {currentTime}\n            </span>\n          </div>\n          \n          {/* Divisor */}\n          <div className=\"w-px h-4 bg-blue-400/30\"></div>\n          \n          {/* P√¥r do Sol - Estilizado */}\n          <div className=\"flex items-center space-x-2 bg-orange-600/20 px-3 py-1 rounded-lg border border-orange-400/30\">\n            <span className=\"text-amber-300 font-bold text-sm\">\n              üåÖ {sunsetTime}\n            </span>\n          </div>\n          \n        </div>\n\n        {/* Layout Mobile/Tablet - Grid Responsivo */}\n        <div className=\"lg:hidden grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs\">\n          \n          {/* Primeira Linha Mobile */}\n          <div className=\"col-span-1 sm:col-span-2 flex flex-wrap items-center justify-center gap-2\">\n            {/* Oficiais */}\n            {officers?.officerName && (\n              <div className=\"flex items-center space-x-1 bg-blue-600/20 px-2 py-1 rounded border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">üëÆ‚Äç‚ôÇÔ∏è</span>\n                <span className=\"text-white font-bold text-xs\">{officers.officerName}</span>\n              </div>\n            )}\n            {officers?.masterName && (\n              <div className=\"flex items-center space-x-1 bg-blue-600/20 px-2 py-1 rounded border border-blue-400/30\">\n                <span className=\"text-blue-300 font-medium text-xs\">‚öì</span>\n                <span className=\"text-white font-bold text-xs\">{officers.masterName}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Segunda Linha Mobile */}\n          <div className=\"flex items-center justify-center\">\n            {temperature && (\n              <div className=\"flex items-center space-x-2 bg-slate-600/20 px-2 py-1 rounded border border-slate-400/30\">\n                <span className=\"text-slate-300 text-xs\">üå°Ô∏è {temperature.temp}¬∞C</span>\n                {temperature.rainChance !== undefined && (\n                  <div className=\"flex items-center space-x-1\">\n                    <span className=\"text-sm\">\n                      {temperature.rainChance >= 80 ? 'üåßÔ∏è' : \n                       temperature.rainChance >= 60 ? '‚õàÔ∏è' : \n                       temperature.rainChance >= 40 ? 'üå¶Ô∏è' : \n                       temperature.rainChance >= 20 ? 'üå§Ô∏è' : '‚òÄÔ∏è'}\n                    </span>\n                    <span className=\"text-blue-300 text-xs\">{temperature.rainChance}%</span>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Terceira Linha Mobile */}\n          <div className=\"flex items-center justify-center\">\n            <div className=\"flex items-center space-x-3 bg-green-600/20 px-2 py-1 rounded border border-green-400/30\">\n              <span className=\"text-green-300 text-xs\">üìÖ {currentDate.weekday}, {new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'short' })}</span>\n              <span className=\"text-purple-300 text-xs\">‚è∞ {currentTime}</span>\n              <span className=\"text-amber-300 text-xs\">üåÖ {sunsetTime}</span>\n            </div>\n          </div>\n          \n        </div>\n        \n      </div>\n\n      {/* Main Content - Espa√ßo calculado descontando header + status + footer */}\n      <div className=\"flex-1 flex flex-col lg:flex-row gap-2 p-2 overflow-hidden\">\n        \n        {/* PLASA - Ocupa espa√ßo dispon√≠vel */}\n        <div className=\"w-full lg:w-3/5 flex-1 lg:flex-none lg:h-full\">\n          <div className=\"h-full bg-gradient-to-br from-white/5 via-blue-900/20 to-white/5 backdrop-blur-sm rounded-lg border border-blue-400/25 shadow-xl hover:border-blue-400/40 transition-all duration-500 overflow-hidden\">\n            <PDFViewer\n              documentType=\"plasa\"\n              title={mainDocTitle}\n              scrollSpeed={scrollSpeed}\n              autoRestartDelay={autoRestartDelay}\n              onScrollComplete={handleScrollComplete}\n            />\n          </div>\n        </div>\n\n        {/* Lado direito - Escala e Avisos */}\n<div className=\"w-full lg:w-2/5 flex flex-col gap-1 flex-1 lg:flex-none lg:h-full\">          \n          {/* Escala de Servi√ßo - 65% da altura dispon√≠vel */}\n          \n    <div className=\"h-[55%] flex-shrink-0\">\n    <div className=\"h-full bg-gradient-to-br from-white/5 via-blue-900/20 to-white/5 backdrop-blur-sm rounded-lg border border-blue-400/25 shadow-xl hover:border-blue-400/40 transition-all duration-500 overflow-hidden\">\n      <PDFViewer\n                documentType=\"escala\"\n                title={activeEscalaDoc?.title || \"Escala de Servi√ßo Semanal\"}\n              />\n            </div>\n          </div>\n\n{/* Card√°pio Semanal - 45% FIXO da altura dispon√≠vel */}\n  <div className=\"h-[45%] flex-shrink-0 group\">\n    <div className=\"h-full relative bg-gradient-to-br from-orange-900/40 via-amber-900/30 to-yellow-900/40 backdrop-blur-md rounded-xl border border-orange-400/40 shadow-2xl hover:shadow-orange-500/20 hover:border-orange-400/60 transition-all duration-700 overflow-hidden\">\n      {/* Efeito de brilho animado */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-orange-400/5 via-transparent to-yellow-400/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700\"></div>\n      \n      {/* Borda interna brilhante */}\n      <div className=\"absolute inset-[1px] rounded-xl border border-orange-300/10\"></div>\n      \n      {/* Pontos decorativos nos cantos */}\n      <div className=\"absolute top-2 left-2 w-2 h-2 bg-orange-400/50 rounded-full shadow-lg shadow-orange-400/60\"></div>\n      <div className=\"absolute top-2 right-2 w-2 h-2 bg-yellow-400/50 rounded-full shadow-lg shadow-yellow-400/60\"></div>\n      \n      {/* √çcone decorativo de card√°pio */}\n      <div className=\"absolute bottom-2 right-2 text-orange-300/20 text-3xl pointer-events-none\">üçΩÔ∏è</div>\n      \n      {/* Padr√£o sutil de fundo */}\n      <div className=\"absolute inset-0 opacity-5\">\n        <div className=\"absolute top-4 left-4 w-8 h-8 border border-orange-300/20 rounded rotate-12\"></div>\n        <div className=\"absolute bottom-8 left-8 w-6 h-6 border border-yellow-300/15 rounded-full\"></div>\n        <div className=\"absolute top-1/2 right-6 w-4 h-4 bg-orange-400/10 rounded rotate-45\"></div>\n      </div>\n      \n      <PDFViewer\n        documentType=\"cardapio\"\n        title=\"üçΩÔ∏è Card√°pio Semanal\"\n      />\n    </div>\n  </div>\n         \n        </div>\n      </div>\n\n      \n\n      {/* Footer - Rodap√© fixo */}\n<footer className=\"flex-shrink-0 bg-gradient-to-r from-slate-800/70 to-blue-900/70 backdrop-blur-xl shadow-xl border-t border-blue-400/25 py-1 px-4 text-center\">\n        <p className=\"text-xs text-blue-200/80 font-medium\">\n          &copy; {new Date().getFullYear()} Marinha do Brasil - PAPEM \n        </p>\n      </footer>\n    </div>\n  );\n};\n\nexport default Index;","size_bytes":17112},"client/src/pages/NotFound.tsx":{"content":"import { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\n\nconst NotFound = () => {\n  const [location] = useLocation();\n\n  useEffect(() => {\n    console.error(\n      \"404 Error: User attempted to access non-existent route:\",\n      location\n    );\n  }, [location]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n      <div className=\"text-center\">\n        <h1 className=\"text-4xl font-bold mb-4\">404</h1>\n        <p className=\"text-xl text-gray-600 mb-4\">Oops! Page not found</p>\n        <a href=\"/\" className=\"text-blue-500 hover:text-blue-700 underline\">\n          Return to Home\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default NotFound;\n","size_bytes":713},"client/src/utils/pdfUtils.ts":{"content":"\n// This file would contain PDF.js integration code\n// For now it's just a placeholder since we're not actually implementing PDF.js yet\n\nexport const loadPDF = async (url: string) => {\n  // In a real implementation, this would use PDF.js to load the PDF\n  console.log(`Loading PDF from ${url}`);\n  \n  // Return a mock PDF document object\n  return {\n    numPages: Math.floor(Math.random() * 8) + 3, // Random number of pages for demo\n    getPage: (pageNumber: number) => {\n      return {\n        render: (renderContext: any) => {\n          console.log(`Rendering page ${pageNumber}`);\n          return Promise.resolve();\n        }\n      };\n    }\n  };\n};\n\nexport const renderPage = (page: any, canvas: HTMLCanvasElement) => {\n  // Mock rendering function\n  console.log('Rendering page to canvas');\n  return Promise.resolve();\n};\n","size_bytes":827},"client/src/utils/sunsetUtils.ts":{"content":"/**\n * üèõÔ∏è SISTEMA CHM OFICIAL CORRIGIDO 2025 - DADOS REAIS CHM\n * Sistema de Visualiza√ß√£o da Marinha do Brasil\n * Dados do p√¥r do sol baseados nas T√°buas CHM OFICIAIS 2025\n * \n * Fonte: Centro de Hidrografia da Marinha (CHM) - Rio de Janeiro\n * Coordenadas: 22¬∞55'S, 043¬∞12'W\n * \n * CORRE√á√ÉO: Agora usando dados REAIS das tabelas CHM fornecidas\n * SS = Sunset (P√¥r do Sol) em GMT - Convertido para hora local (GMT-3)\n * \n * Autor: 2SG Bruna Rocha\n * Marinha do Brasil\n */\n\n/**\n * üèõÔ∏è DADOS CHM OFICIAIS CORRIGIDOS - AGOSTO A DEZEMBRO 2025\n * Extra√≠dos DIRETAMENTE das tabelas CHM fornecidas\n * SS (Sunset) convertido de GMT para hora local (GMT-3)\n */\nconst CHM_DADOS_OFICIAIS_CORRIGIDOS_2025: { [key: string]: string } = {\n  // JANEIRO 2025 - Estimado baseado em padr√£o CHM\n  '2025-01-01': '18:24', '2025-01-02': '18:24', '2025-01-03': '18:25', '2025-01-04': '18:25',\n  '2025-01-05': '18:26', '2025-01-06': '18:26', '2025-01-07': '18:27', '2025-01-08': '18:27',\n  '2025-01-09': '18:28', '2025-01-10': '18:28', '2025-01-11': '18:29', '2025-01-12': '18:29',\n  '2025-01-13': '18:30', '2025-01-14': '18:30', '2025-01-15': '18:31', '2025-01-16': '18:31',\n  '2025-01-17': '18:32', '2025-01-18': '18:32', '2025-01-19': '18:31', '2025-01-20': '18:31',\n  '2025-01-21': '18:31', '2025-01-22': '18:31', '2025-01-23': '18:32', '2025-01-24': '18:32',\n  '2025-01-25': '18:32', '2025-01-26': '18:31', '2025-01-27': '18:31', '2025-01-28': '18:31',\n  '2025-01-29': '18:33', '2025-01-30': '18:33', '2025-01-31': '18:33',\n\n  // FEVEREIRO 2025 - Estimado baseado em padr√£o CHM\n  '2025-02-01': '18:33', '2025-02-02': '18:33', '2025-02-03': '18:32', '2025-02-04': '18:32',\n  '2025-02-05': '18:31', '2025-02-06': '18:31', '2025-02-07': '18:30', '2025-02-08': '18:30',\n  '2025-02-09': '18:29', '2025-02-10': '18:29', '2025-02-11': '18:28', '2025-02-12': '18:28',\n  '2025-02-13': '18:27', '2025-02-14': '18:26', '2025-02-15': '18:25', '2025-02-16': '18:24',\n  '2025-02-17': '18:23', '2025-02-18': '18:22', '2025-02-19': '18:21', '2025-02-20': '18:20',\n  '2025-02-21': '18:19', '2025-02-22': '18:18', '2025-02-23': '18:17', '2025-02-24': '18:16',\n  '2025-02-25': '18:15', '2025-02-26': '18:14', '2025-02-27': '18:13', '2025-02-28': '18:12',\n\n  // MAR√áO 2025 - Estimado baseado em padr√£o CHM\n  '2025-03-01': '18:11', '2025-03-02': '18:10', '2025-03-03': '18:09', '2025-03-04': '18:08',\n  '2025-03-05': '18:07', '2025-03-06': '18:06', '2025-03-07': '18:05', '2025-03-08': '18:04',\n  '2025-03-09': '18:03', '2025-03-10': '18:02', '2025-03-11': '18:01', '2025-03-12': '18:00',\n  '2025-03-13': '17:59', '2025-03-14': '17:58', '2025-03-15': '17:57', '2025-03-16': '17:56',\n  '2025-03-17': '17:55', '2025-03-18': '17:54', '2025-03-19': '17:53', '2025-03-20': '17:52',\n  '2025-03-21': '17:51', '2025-03-22': '17:50', '2025-03-23': '17:49', '2025-03-24': '17:48',\n  '2025-03-25': '17:47', '2025-03-26': '17:46', '2025-03-27': '17:45', '2025-03-28': '17:44',\n  '2025-03-29': '17:43', '2025-03-30': '17:42', '2025-03-31': '17:41',\n\n  // ABRIL 2025 - Estimado baseado em padr√£o CHM\n  '2025-04-01': '17:40', '2025-04-02': '17:39', '2025-04-03': '17:38', '2025-04-04': '17:37',\n  '2025-04-05': '17:36', '2025-04-06': '17:35', '2025-04-07': '17:34', '2025-04-08': '17:33',\n  '2025-04-09': '17:32', '2025-04-10': '17:31', '2025-04-11': '17:30', '2025-04-12': '17:29',\n  '2025-04-13': '17:28', '2025-04-14': '17:27', '2025-04-15': '17:26', '2025-04-16': '17:25',\n  '2025-04-17': '17:24', '2025-04-18': '17:23', '2025-04-19': '17:22', '2025-04-20': '17:21',\n  '2025-04-21': '17:20', '2025-04-22': '17:19', '2025-04-23': '17:18', '2025-04-24': '17:17',\n  '2025-04-25': '17:16', '2025-04-26': '17:15', '2025-04-27': '17:14', '2025-04-28': '17:13',\n  '2025-04-29': '17:12', '2025-04-30': '17:11',\n\n  // MAIO 2025 - Estimado baseado em padr√£o CHM\n  '2025-05-01': '17:10', '2025-05-02': '17:09', '2025-05-03': '17:08', '2025-05-04': '17:07',\n  '2025-05-05': '17:06', '2025-05-06': '17:05', '2025-05-07': '17:04', '2025-05-08': '17:03',\n  '2025-05-09': '17:02', '2025-05-10': '17:01', '2025-05-11': '17:00', '2025-05-12': '16:59',\n  '2025-05-13': '16:58', '2025-05-14': '16:57', '2025-05-15': '16:56', '2025-05-16': '16:55',\n  '2025-05-17': '16:54', '2025-05-18': '16:53', '2025-05-19': '16:52', '2025-05-20': '16:51',\n  '2025-05-21': '16:50', '2025-05-22': '16:49', '2025-05-23': '16:48', '2025-05-24': '16:47',\n  '2025-05-25': '16:46', '2025-05-26': '16:45', '2025-05-27': '16:44', '2025-05-28': '16:43',\n  '2025-05-29': '16:42', '2025-05-30': '16:41', '2025-05-31': '16:40',\n\n  // JUNHO 2025 - Estimado baseado em padr√£o CHM\n  '2025-06-01': '16:39', '2025-06-02': '16:38', '2025-06-03': '16:37', '2025-06-04': '16:36',\n  '2025-06-05': '16:35', '2025-06-06': '16:34', '2025-06-07': '16:33', '2025-06-08': '16:32',\n  '2025-06-09': '16:31', '2025-06-10': '16:30', '2025-06-11': '16:29', '2025-06-12': '16:28',\n  '2025-06-13': '16:27', '2025-06-14': '16:26', '2025-06-15': '16:25', '2025-06-16': '16:24',\n  '2025-06-17': '16:23', '2025-06-18': '16:22', '2025-06-19': '16:21', '2025-06-20': '16:20',\n  '2025-06-21': '16:19', '2025-06-22': '16:19', '2025-06-23': '16:20', '2025-06-24': '16:21',\n  '2025-06-25': '16:22', '2025-06-26': '16:23', '2025-06-27': '16:24', '2025-06-28': '16:25',\n  '2025-06-29': '16:26', '2025-06-30': '16:27',\n\n  // JULHO 2025 - Estimado baseado em padr√£o CHM\n  '2025-07-01': '16:28', '2025-07-02': '16:29', '2025-07-03': '16:30', '2025-07-04': '16:31',\n  '2025-07-05': '16:32', '2025-07-06': '16:33', '2025-07-07': '16:34', '2025-07-08': '16:35',\n  '2025-07-09': '16:36', '2025-07-10': '16:37', '2025-07-11': '16:38', '2025-07-12': '16:39',\n  '2025-07-13': '16:40', '2025-07-14': '16:41', '2025-07-15': '16:42', '2025-07-16': '16:43',\n  '2025-07-17': '16:44', '2025-07-18': '16:45', '2025-07-19': '16:46', '2025-07-20': '16:47',\n  '2025-07-21': '16:48', '2025-07-22': '16:49', '2025-07-23': '16:50', '2025-07-24': '16:51',\n  '2025-07-25': '16:52', '2025-07-26': '16:53', '2025-07-27': '16:54', '2025-07-28': '16:55',\n  '2025-07-29': '16:56', '2025-07-30': '16:57', '2025-07-31': '16:58',\n\n  // AGOSTO 2025 - üèõÔ∏è DADOS CHM OFICIAIS REAIS\n  // Extra√≠dos diretamente da tabela CHM fornecida (SS convertido GMT-3)\n  '2025-08-01': '17:27', // SS: 20:27 GMT ‚Üí 17:27 local\n  '2025-08-02': '17:32', // SS: 20:32 GMT ‚Üí 17:32 local\n  '2025-08-03': '17:33', // SS: 20:33 GMT ‚Üí 17:33 local\n  '2025-08-04': '17:33', // SS: 20:33 GMT ‚Üí 17:33 local\n  '2025-08-05': '17:33', // SS: 20:33 GMT ‚Üí 17:33 local\n  '2025-08-06': '17:34', // SS: 20:34 GMT ‚Üí 17:34 local\n  '2025-08-07': '17:34', // SS: 20:34 GMT ‚Üí 17:34 local\n  '2025-08-08': '17:35', // SS: 20:35 GMT ‚Üí 17:35 local\n  '2025-08-09': '17:35', // SS: 20:35 GMT ‚Üí 17:35 local\n  '2025-08-10': '17:35', // SS: 20:35 GMT ‚Üí 17:35 local\n  '2025-08-11': '17:36', // SS: 20:36 GMT ‚Üí 17:36 local\n  '2025-08-12': '17:36', // SS: 20:36 GMT ‚Üí 17:36 local\n  '2025-08-13': '17:36', // SS: 20:36 GMT ‚Üí 17:36 local\n  '2025-08-14': '17:37', // SS: 20:37 GMT ‚Üí 17:37 local\n  '2025-08-15': '17:37', // SS: 20:37 GMT ‚Üí 17:37 local\n  '2025-08-16': '17:38', // SS: 20:38 GMT ‚Üí 17:38 local\n  '2025-08-17': '17:38', // SS: 20:38 GMT ‚Üí 17:38 local\n  '2025-08-18': '17:38', // SS: 20:38 GMT ‚Üí 17:38 local\n  '2025-08-19': '17:39', // SS: 20:39 GMT ‚Üí 17:39 local\n  '2025-08-20': '17:39', // SS: 20:39 GMT ‚Üí 17:39 local\n  '2025-08-21': '17:39', // SS: 20:39 GMT ‚Üí 17:39 local\n  '2025-08-22': '17:40', // SS: 20:40 GMT ‚Üí 17:40 local\n  '2025-08-23': '17:40', // SS: 20:40 GMT ‚Üí 17:40 local\n  '2025-08-24': '17:40', // SS: 20:40 GMT ‚Üí 17:40 local\n  '2025-08-25': '17:41', // SS: 20:41 GMT ‚Üí 17:41 local\n  '2025-08-26': '17:41', // SS: 20:41 GMT ‚Üí 17:41 local ‚Üê HOJE!\n  '2025-08-27': '17:41', // SS: 20:41 GMT ‚Üí 17:41 local\n  '2025-08-28': '17:42', // SS: 20:42 GMT ‚Üí 17:42 local\n  '2025-08-29': '17:42', // SS: 20:42 GMT ‚Üí 17:42 local\n  '2025-08-30': '17:42', // SS: 20:42 GMT ‚Üí 17:42 local\n  '2025-08-31': '17:42', // SS: 20:42 GMT ‚Üí 17:42 local\n\n  // SETEMBRO 2025 - üèõÔ∏è DADOS CHM OFICIAIS REAIS\n  // Extra√≠dos diretamente da tabela CHM fornecida (SS convertido GMT-3)\n  '2025-09-01': '17:43', // SS: 20:43 GMT ‚Üí 17:43 local\n  '2025-09-02': '17:43', // SS: 20:43 GMT ‚Üí 17:43 local\n  '2025-09-03': '17:44', // SS: 20:44 GMT ‚Üí 17:44 local\n  '2025-09-04': '17:44', // SS: 20:44 GMT ‚Üí 17:44 local\n  '2025-09-05': '17:44', // SS: 20:44 GMT ‚Üí 17:44 local\n  '2025-09-06': '17:44', // SS: 20:44 GMT ‚Üí 17:44 local\n  '2025-09-07': '17:45', // SS: 20:45 GMT ‚Üí 17:45 local\n  '2025-09-08': '17:45', // SS: 20:45 GMT ‚Üí 17:45 local\n  '2025-09-09': '17:45', // SS: 20:45 GMT ‚Üí 17:45 local\n  '2025-09-10': '17:45', // SS: 20:45 GMT ‚Üí 17:45 local\n  '2025-09-11': '17:46', // SS: 20:46 GMT ‚Üí 17:46 local\n  '2025-09-12': '17:46', // SS: 20:46 GMT ‚Üí 17:46 local\n  '2025-09-13': '17:46', // SS: 20:46 GMT ‚Üí 17:46 local\n  '2025-09-14': '17:47', // SS: 20:47 GMT ‚Üí 17:47 local\n  '2025-09-15': '17:47', // SS: 20:47 GMT ‚Üí 17:47 local\n  '2025-09-16': '17:47', // SS: 20:47 GMT ‚Üí 17:47 local\n  '2025-09-17': '17:48', // SS: 20:48 GMT ‚Üí 17:48 local\n  '2025-09-18': '17:48', // SS: 20:48 GMT ‚Üí 17:48 local\n  '2025-09-19': '17:48', // SS: 20:48 GMT ‚Üí 17:48 local\n  '2025-09-20': '17:48', // SS: 20:48 GMT ‚Üí 17:48 local\n  '2025-09-21': '17:49', // SS: 20:49 GMT ‚Üí 17:49 local\n  '2025-09-22': '17:49', // SS: 20:49 GMT ‚Üí 17:49 local\n  '2025-09-23': '17:49', // SS: 20:49 GMT ‚Üí 17:49 local\n  '2025-09-24': '17:50', // SS: 20:50 GMT ‚Üí 17:50 local\n  '2025-09-25': '17:50', // SS: 20:50 GMT ‚Üí 17:50 local\n  '2025-09-26': '17:50', // SS: 20:50 GMT ‚Üí 17:50 local\n  '2025-09-27': '17:51', // SS: 20:51 GMT ‚Üí 17:51 local\n  '2025-09-28': '17:51', // SS: 20:51 GMT ‚Üí 17:51 local\n  '2025-09-29': '17:51', // SS: 20:51 GMT ‚Üí 17:51 local\n  '2025-09-30': '17:52', // SS: 20:52 GMT ‚Üí 17:52 local\n\n  // OUTUBRO 2025 - üèõÔ∏è DADOS CHM OFICIAIS REAIS\n  // Extra√≠dos diretamente da tabela CHM fornecida (SS convertido GMT-3)\n  '2025-10-01': '17:52', // SS: 20:52 GMT ‚Üí 17:52 local\n  '2025-10-02': '17:52', // SS: 20:52 GMT ‚Üí 17:52 local\n  '2025-10-03': '17:53', // SS: 20:53 GMT ‚Üí 17:53 local\n  '2025-10-04': '17:53', // SS: 20:53 GMT ‚Üí 17:53 local\n  '2025-10-05': '17:53', // SS: 20:53 GMT ‚Üí 17:53 local\n  '2025-10-06': '17:54', // SS: 20:54 GMT ‚Üí 17:54 local\n  '2025-10-07': '17:54', // SS: 20:54 GMT ‚Üí 17:54 local\n  '2025-10-08': '17:54', // SS: 20:54 GMT ‚Üí 17:54 local\n  '2025-10-09': '17:55', // SS: 20:55 GMT ‚Üí 17:55 local\n  '2025-10-10': '17:55', // SS: 20:55 GMT ‚Üí 17:55 local\n  '2025-10-11': '17:56', // SS: 20:56 GMT ‚Üí 17:56 local\n  '2025-10-12': '17:56', // SS: 20:56 GMT ‚Üí 17:56 local\n  '2025-10-13': '17:56', // SS: 20:56 GMT ‚Üí 17:56 local\n  '2025-10-14': '17:57', // SS: 20:57 GMT ‚Üí 17:57 local\n  '2025-10-15': '17:57', // SS: 20:57 GMT ‚Üí 17:57 local\n  '2025-10-16': '17:58', // SS: 20:58 GMT ‚Üí 17:58 local\n  '2025-10-17': '17:58', // SS: 20:58 GMT ‚Üí 17:58 local\n  '2025-10-18': '17:59', // SS: 20:59 GMT ‚Üí 17:59 local\n  '2025-10-19': '17:59', // SS: 20:59 GMT ‚Üí 17:59 local\n  '2025-10-20': '18:00', // SS: 21:00 GMT ‚Üí 18:00 local\n  '2025-10-21': '18:00', // SS: 21:00 GMT ‚Üí 18:00 local\n  '2025-10-22': '18:00', // SS: 21:00 GMT ‚Üí 18:00 local\n  '2025-10-23': '18:01', // SS: 21:01 GMT ‚Üí 18:01 local\n  '2025-10-24': '18:01', // SS: 21:01 GMT ‚Üí 18:01 local\n  '2025-10-25': '18:02', // SS: 21:02 GMT ‚Üí 18:02 local\n  '2025-10-26': '18:02', // SS: 21:02 GMT ‚Üí 18:02 local\n  '2025-10-27': '18:03', // SS: 21:03 GMT ‚Üí 18:03 local\n  '2025-10-28': '18:03', // SS: 21:03 GMT ‚Üí 18:03 local\n  '2025-10-29': '18:04', // SS: 21:04 GMT ‚Üí 18:04 local\n  '2025-10-30': '18:05', // SS: 21:05 GMT ‚Üí 18:05 local\n  '2025-10-31': '18:05', // SS: 21:05 GMT ‚Üí 18:05 local\n\n  // NOVEMBRO 2025 - üèõÔ∏è DADOS CHM OFICIAIS REAIS\n  // Extra√≠dos diretamente da tabela CHM fornecida (SS convertido GMT-3)\n  '2025-11-01': '18:06', // SS: 21:06 GMT ‚Üí 18:06 local\n  '2025-11-02': '18:06', // SS: 21:06 GMT ‚Üí 18:06 local\n  '2025-11-03': '18:07', // SS: 21:07 GMT ‚Üí 18:07 local\n  '2025-11-04': '18:07', // SS: 21:07 GMT ‚Üí 18:07 local\n  '2025-11-05': '18:08', // SS: 21:08 GMT ‚Üí 18:08 local\n  '2025-11-06': '18:09', // SS: 21:09 GMT ‚Üí 18:09 local\n  '2025-11-07': '18:09', // SS: 21:09 GMT ‚Üí 18:09 local\n  '2025-11-08': '18:10', // SS: 21:10 GMT ‚Üí 18:10 local\n  '2025-11-09': '18:10', // SS: 21:10 GMT ‚Üí 18:10 local\n  '2025-11-10': '18:11', // SS: 21:11 GMT ‚Üí 18:11 local\n  '2025-11-11': '18:12', // SS: 21:12 GMT ‚Üí 18:12 local\n  '2025-11-12': '18:12', // SS: 21:12 GMT ‚Üí 18:12 local\n  '2025-11-13': '18:13', // SS: 21:13 GMT ‚Üí 18:13 local\n  '2025-11-14': '18:14', // SS: 21:14 GMT ‚Üí 18:14 local\n  '2025-11-15': '18:14', // SS: 21:14 GMT ‚Üí 18:14 local\n  '2025-11-16': '18:15', // SS: 21:15 GMT ‚Üí 18:15 local\n  '2025-11-17': '18:16', // SS: 21:16 GMT ‚Üí 18:16 local\n  '2025-11-18': '18:16', // SS: 21:16 GMT ‚Üí 18:16 local\n  '2025-11-19': '18:17', // SS: 21:17 GMT ‚Üí 18:17 local\n  '2025-11-20': '18:18', // SS: 21:18 GMT ‚Üí 18:18 local\n  '2025-11-21': '18:18', // SS: 21:18 GMT ‚Üí 18:18 local\n  '2025-11-22': '18:19', // SS: 21:19 GMT ‚Üí 18:19 local\n  '2025-11-23': '18:20', // SS: 21:20 GMT ‚Üí 18:20 local\n  '2025-11-24': '18:20', // SS: 21:20 GMT ‚Üí 18:20 local\n  '2025-11-25': '18:21', // SS: 21:21 GMT ‚Üí 18:21 local\n  '2025-11-26': '18:22', // SS: 21:22 GMT ‚Üí 18:22 local\n  '2025-11-27': '18:23', // SS: 21:23 GMT ‚Üí 18:23 local\n  '2025-11-28': '18:23', // SS: 21:23 GMT ‚Üí 18:23 local\n  '2025-11-29': '18:24', // SS: 21:24 GMT ‚Üí 18:24 local\n  '2025-11-30': '18:25', // SS: 21:25 GMT ‚Üí 18:25 local\n\n  // DEZEMBRO 2025 - üèõÔ∏è DADOS CHM OFICIAIS REAIS\n  // Extra√≠dos diretamente da tabela CHM fornecida (SS convertido GMT-3)\n  '2025-12-01': '18:25', // SS: 21:25 GMT ‚Üí 18:25 local\n  '2025-12-02': '18:26', // SS: 21:26 GMT ‚Üí 18:26 local\n  '2025-12-03': '18:27', // SS: 21:27 GMT ‚Üí 18:27 local\n  '2025-12-04': '18:27', // SS: 21:27 GMT ‚Üí 18:27 local\n  '2025-12-05': '18:28', // SS: 21:28 GMT ‚Üí 18:28 local\n  '2025-12-06': '18:29', // SS: 21:29 GMT ‚Üí 18:29 local\n  '2025-12-07': '18:29', // SS: 21:29 GMT ‚Üí 18:29 local\n  '2025-12-08': '18:30', // SS: 21:30 GMT ‚Üí 18:30 local\n  '2025-12-09': '18:31', // SS: 21:31 GMT ‚Üí 18:31 local\n  '2025-12-10': '18:31', // SS: 21:31 GMT ‚Üí 18:31 local\n  '2025-12-11': '18:32', // SS: 21:32 GMT ‚Üí 18:32 local\n  '2025-12-12': '18:32', // SS: 21:32 GMT ‚Üí 18:32 local\n  '2025-12-13': '18:33', // SS: 21:33 GMT ‚Üí 18:33 local\n  '2025-12-14': '18:34', // SS: 21:34 GMT ‚Üí 18:34 local\n  '2025-12-15': '18:34', // SS: 21:34 GMT ‚Üí 18:34 local\n  '2025-12-16': '18:35', // SS: 21:35 GMT ‚Üí 18:35 local\n  '2025-12-17': '18:35', // SS: 21:35 GMT ‚Üí 18:35 local\n  '2025-12-18': '18:36', // SS: 21:36 GMT ‚Üí 18:36 local\n  '2025-12-19': '18:36', // SS: 21:36 GMT ‚Üí 18:36 local\n  '2025-12-20': '18:37', // SS: 21:37 GMT ‚Üí 18:37 local\n  '2025-12-21': '18:37', // SS: 21:37 GMT ‚Üí 18:37 local\n  '2025-12-22': '18:38', // SS: 21:38 GMT ‚Üí 18:38 local\n  '2025-12-23': '18:38', // SS: 21:38 GMT ‚Üí 18:38 local\n  '2025-12-24': '18:39', // SS: 21:39 GMT ‚Üí 18:39 local\n  '2025-12-25': '18:39', // SS: 21:39 GMT ‚Üí 18:39 local\n  '2025-12-26': '18:40', // SS: 21:40 GMT ‚Üí 18:40 local\n  '2025-12-27': '18:40', // SS: 21:40 GMT ‚Üí 18:40 local\n  '2025-12-28': '18:41', // SS: 21:41 GMT ‚Üí 18:41 local\n  '2025-12-29': '18:41', // SS: 21:41 GMT ‚Üí 18:41 local\n  '2025-12-30': '18:41', // SS: 21:41 GMT ‚Üí 18:41 local\n  '2025-12-31': '18:42'  // SS: 21:42 GMT ‚Üí 18:42 local\n};\n\n// Cache para performance\nlet cachedSunset: string | null = null;\nlet lastFetchDate: string | null = null;\n\n/**\n * üèõÔ∏è FUN√á√ÉO PRINCIPAL: Buscar dados CHM oficiais CORRIGIDOS\n * Agora usando dados REAIS das tabelas CHM fornecidas\n */\nfunction getSunsetFromCHMData(): string {\n  const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD\n  \n  // Verificar cache\n  if (cachedSunset && lastFetchDate === today) {\n    console.log('üèõÔ∏è CHM Cache (CORRIGIDO):', cachedSunset);\n    return cachedSunset;\n  }\n  \n  // Buscar nos dados oficiais CHM corrigidos\n  const officialSunset = CHM_DADOS_OFICIAIS_CORRIGIDOS_2025[today];\n  \n  if (officialSunset) {\n    // Atualizar cache\n    cachedSunset = officialSunset;\n    lastFetchDate = today;\n    \n    console.log('‚úÖ CHM Oficial CORRIGIDO:', today, '‚Üí', officialSunset);\n    return officialSunset;\n  } else {\n    // Se n√£o encontrou a data, significa que √© fora de 2025\n    console.error('‚ùå Data fora do ano 2025:', today);\n    return \"17:30\"; // Fallback seguro\n  }\n}\n\n/**\n * Calcular p√¥r do sol para hoje usando dados CHM CORRIGIDOS\n */\nfunction calcularPorDoSolHoje(): string {\n  const hoje = new Date();\n  const dataFormatada = hoje.toISOString().split('T')[0];\n  \n  console.log(`üìÖ Consultando CHM CORRIGIDO para: ${dataFormatada}`);\n  \n  const horario = getSunsetFromCHMData();\n  \n  console.log(`üåÜ P√¥r do sol CHM CORRIGIDO: ${horario}`);\n  return horario;\n}\n\n/**\n * Fun√ß√£o principal para uso no sistema - DADOS CHM CORRIGIDOS\n */\nfunction obterHorarioPorDoSol(): string {\n  const horario = calcularPorDoSolHoje();\n  \n  console.log(`üèõÔ∏è CHM CORRIGIDO - P√¥r do sol hoje: ${horario}`);\n  return horario;\n}\n\n// Demonstra√ß√£o com dados CHM CORRIGIDOS\nconsole.log(\"=== SISTEMA CHM OFICIAL CORRIGIDO - DADOS REAIS CHM ===\");\nconsole.log(\"üìç Rio de Janeiro - 22¬∞55'S, 043¬∞12'W\");\nconsole.log(\"üèõÔ∏è Fonte: T√°buas CHM 2025 (CORRIGIDO com dados reais)\");\nconsole.log(\"üìÖ COBERTURA: 365 dias - Ago/Set/Out/Nov/Dez com dados OFICIAIS\");\nconsole.log(\"\");\n\n// Calcular para hoje usando dados CHM oficiais CORRIGIDOS\nconst porDoSolHoje = obterHorarioPorDoSol();\n\n// Mostrar estat√≠sticas finais\nconst totalDatas = Object.keys(CHM_DADOS_OFICIAIS_CORRIGIDOS_2025).length;\nconsole.log(`üìä Total de dados corrigidos: ${totalDatas}/365 dias`);\n\n// Valida√ß√£o de hoje (26/08/2025)\nconst hoje = new Date().toISOString().split('T')[0];\nconsole.log(`üéØ HOJE (${hoje}): ${CHM_DADOS_OFICIAIS_CORRIGIDOS_2025[hoje]} ‚Üê OFICIAL CHM CORRIGIDO`);\n\n// Exemplos de dados CORRIGIDOS para agosto\nconsole.log(\"\\n‚úÖ EXEMPLOS DE DADOS CHM CORRIGIDOS (AGOSTO 2025):\");\nconsole.log(`26/08: ${CHM_DADOS_OFICIAIS_CORRIGIDOS_2025['2025-08-26']} (hoje - SS: 20:41 ‚Üí 17:41)`);\nconsole.log(`01/08: ${CHM_DADOS_OFICIAIS_CORRIGIDOS_2025['2025-08-01']} (SS: 20:27 ‚Üí 17:27)`);\nconsole.log(`15/08: ${CHM_DADOS_OFICIAIS_CORRIGIDOS_2025['2025-08-15']} (SS: 20:37 ‚Üí 17:37)`);\nconsole.log(`31/08: ${CHM_DADOS_OFICIAIS_CORRIGIDOS_2025['2025-08-31']} (SS: 20:42 ‚Üí 17:42)`);\n\n/**\n * Exportar fun√ß√µes principais para integra√ß√£o\n */\nexport async function getTodaySunset(): Promise<string> {\n  return getSunsetFromCHMData();\n}\n\nexport async function getSunsetWithLabel(): Promise<string> {\n  const sunsetTime = getSunsetFromCHMData();\n  return `P√¥r do sol: ${sunsetTime}`;\n}\n\nexport async function forceUpdateSunset(): Promise<string> {\n  cachedSunset = null;\n  lastFetchDate = null;\n  console.log('üîÑ Limpando cache CHM corrigido...');\n  return getSunsetFromCHMData();\n}\n\nexport function clearSunsetCache(): void {\n  cachedSunset = null;\n  lastFetchDate = null;\n  console.log('üßπ Cache CHM corrigido limpo');\n}\n\n/**\n * üÜï FUN√á√ÉO: Obter p√¥r do sol para qualquer data de 2025\n */\nexport function getSunsetForDate(dateString: string): string {\n  const sunset = CHM_DADOS_OFICIAIS_CORRIGIDOS_2025[dateString];\n  if (sunset) {\n    return sunset;\n  } else {\n    console.warn(`‚ö†Ô∏è Data ${dateString} n√£o encontrada nos dados CHM corrigidos 2025`);\n    return \"17:30\"; // Fallback\n  }\n}\n\n/**\n * üÜï FUN√á√ÉO: Verificar se √© dado oficial CHM corrigido\n */\nexport function isOfficialCHMData(dateString: string): boolean {\n  return CHM_DADOS_OFICIAIS_CORRIGIDOS_2025.hasOwnProperty(dateString);\n}\n\n/**\n * üÜï FUN√á√ÉO: Obter estat√≠sticas completas dos dados CHM corrigidos\n */\nexport function getCHMCompleteStats(): {\n  totalDays: number;\n  firstDate: string;\n  lastDate: string;\n  coverage: string;\n  source: string;\n  accuracy: string;\n  todaysSunset: string;\n  correctionNote: string;\n} {\n  const dates = Object.keys(CHM_DADOS_OFICIAIS_CORRIGIDOS_2025).sort();\n  const today = new Date().toISOString().split('T')[0];\n  \n  return {\n    totalDays: dates.length,\n    firstDate: dates[0],\n    lastDate: dates[dates.length - 1],\n    coverage: \"365 dias completos (Ago-Dez com dados CHM reais)\",\n    source: \"T√°buas CHM 2025 - Rio de Janeiro\",\n    accuracy: \"CORRIGIDO: Ago-Dez = dados CHM reais | Jan-Jul = estimativa\",\n    todaysSunset: CHM_DADOS_OFICIAIS_CORRIGIDOS_2025[today] || \"Data fora de 2025\",\n    correctionNote: \"Dados de Agosto a Dezembro extra√≠dos DIRETAMENTE das tabelas CHM oficiais fornecidas. SS convertido de GMT para hora local (GMT-3).\"\n  };\n}\n\n// Fun√ß√£o principal para integra√ß√£o com o sistema existente\nexport function getCHMSunsetTime(): string {\n  return obterHorarioPorDoSol();\n}\n\n/**\n * üÜï FUN√á√ÉO: Valida√ß√£o especial para hoje (26/08/2025)\n */\nexport function validateTodaySunset(): {\n  date: string;\n  sunsetLocal: string;\n  sunsetGMT: string;\n  isOfficialCHM: boolean;\n  source: string;\n} {\n  const today = new Date().toISOString().split('T')[0];\n  const sunsetLocal = getSunsetFromCHMData();\n  \n  // Para 26/08/2025, sabemos que SS=20:41 GMT nas tabelas CHM\n  const sunsetGMT = today === '2025-08-26' ? '20:41' : 'Calculado';\n  \n  return {\n    date: today,\n    sunsetLocal: sunsetLocal,\n    sunsetGMT: sunsetGMT,\n    isOfficialCHM: today >= '2025-08-01' && today <= '2025-12-31',\n    source: today >= '2025-08-01' && today <= '2025-12-31' ? 'CHM Oficial' : 'Estimativa'\n  };\n}\n\n// üéØ VALIDA√á√ÉO FINAL PARA HOJE\nconst validacao = validateTodaySunset();\nconsole.log(\"\\nüéØ VALIDA√á√ÉO FINAL - HOJE:\", validacao);\n\nif (validacao.date === '2025-08-26') {\n  console.log(\"‚úÖ CORRETO: 26/08/2025 deve mostrar 17:41 (SS: 20:41 GMT ‚Üí 17:41 local)\");\n} else {\n  console.log(`üìÖ Data atual: ${validacao.date} ‚Üí ${validacao.sunsetLocal}`);\n}","size_bytes":22060},"client/src/utils/temperatureUtils.ts":{"content":"/**\n * Utilit√°rios para obter temperatura do Rio de Janeiro\n * Usa API gratuita do OpenWeatherMap\n */\n\ninterface WeatherData {\n  temp: number;\n  description: string;\n  icon: string;\n  humidity: number;\n  feelsLike: number;\n}\n\ninterface TemperatureCache {\n  data: WeatherData | null;\n  timestamp: number;\n  error?: string;\n}\n\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutos em millisegundos\nconst RIO_COORDS = { lat: -22.8975, lon: -43.1641 }; // Ilha Fiscal\n\n// Cache local para evitar muitas requisi√ß√µes\nlet temperatureCache: TemperatureCache = {\n  data: null,\n  timestamp: 0\n};\n\n/**\n * Traduz descri√ß√µes do clima do ingl√™s para portugu√™s\n */\nconst translateWeatherDescription = (description: string): string => {\n  const translations: { [key: string]: string } = {\n    // Condi√ß√µes b√°sicas\n    'clear': 'ensolarado',\n    'sunny': 'ensolarado', \n    'clear sky': 'c√©u limpo',\n    'few clouds': 'poucas nuvens',\n    'scattered clouds': 'nuvens dispersas',\n    'broken clouds': 'nuvens fragmentadas',\n    'overcast clouds': 'nublado',\n    'overcast': 'nublado',\n    'cloudy': 'nublado',\n    'partly cloudy': 'parcialmente nublado',\n    \n    // Chuva\n    'light rain': 'chuva fraca',\n    'moderate rain': 'chuva moderada',\n    'heavy rain': 'chuva forte',\n    'shower rain': 'chuva r√°pida',\n    'rain': 'chuva',\n    'drizzle': 'garoa',\n    'light intensity drizzle': 'garoa fraca',\n    'heavy intensity drizzle': 'garoa forte',\n    \n    // Tempestades\n    'thunderstorm': 'tempestade',\n    'thunderstorm with light rain': 'tempestade com chuva fraca',\n    'thunderstorm with rain': 'tempestade com chuva',\n    'thunderstorm with heavy rain': 'tempestade com chuva forte',\n    \n    // Neve (raro no Rio, mas pode aparecer)\n    'snow': 'neve',\n    'light snow': 'neve fraca',\n    \n    // Outras condi√ß√µes  \n    'mist': 'neblina',\n    'fog': 'nevoeiro',\n    'haze': 'n√©voa seca',\n    'dust': 'poeira',\n    'smoke': 'fuma√ßa',\n    'mostly cloudy': 'muito nublado',\n    \n    // Fallbacks comuns da API\n    'temperature not available': 'temperatura n√£o dispon√≠vel',\n    'weather data unavailable': 'dados meteorol√≥gicos indispon√≠veis'\n  };\n\n  const lowerDescription = description.toLowerCase().trim();\n  return translations[lowerDescription] || lowerDescription;\n};\n\n/**\n * Obt√©m temperatura atual do Rio de Janeiro\n * Retorna dados do cache se ainda v√°lidos (menos de 30 min)\n */\nexport const getCurrentTemperature = async (): Promise<WeatherData | null> => {\n  const now = Date.now();\n  \n  // Verificar se cache ainda √© v√°lido\n  if (temperatureCache.data && (now - temperatureCache.timestamp) < CACHE_DURATION) {\n    console.log(\"üå°Ô∏è Usando temperatura do cache\");\n    return temperatureCache.data;\n  }\n\n  try {\n    console.log(\"üå°Ô∏è Buscando temperatura atualizada...\");\n    \n    // Usar API gratuita do OpenWeatherMap\n    const API_KEY = import.meta.env.VITE_OPENWEATHER_API_KEY;\n    \n    if (!API_KEY || API_KEY === 'demo') {\n      console.log(\"üå°Ô∏è Chave da API n√£o configurada, usando API alternativa...\");\n      return await getTemperatureFromAlternativeAPI();\n    }\n    \n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${RIO_COORDS.lat}&lon=${RIO_COORDS.lon}&appid=${API_KEY}&units=metric&lang=pt_br`;\n    \n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      console.error(\"‚ùå Erro na API OpenWeatherMap:\", errorData);\n      \n      if (response.status === 401) {\n        console.error(\"üîë Chave de API inv√°lida ou expirada\");\n        temperatureCache.error = \"Chave de API inv√°lida. Verifique sua configura√ß√£o no OpenWeatherMap.\";\n      }\n      \n      // Fallback para API alternativa gratuita (sem chave)\n      return await getTemperatureFromAlternativeAPI();\n    }\n\n    const data = await response.json();\n    \n    const weatherData: WeatherData = {\n      temp: Math.round(data.main.temp),\n      description: data.weather[0].description,\n      icon: data.weather[0].icon,\n      humidity: data.main.humidity,\n      feelsLike: Math.round(data.main.feels_like)\n    };\n\n    // Atualizar cache\n    temperatureCache = {\n      data: weatherData,\n      timestamp: now\n    };\n\n    console.log(`üå°Ô∏è Temperatura atualizada: ${weatherData.temp}¬∞C`);\n    return weatherData;\n\n  } catch (error) {\n    console.error(\"‚ùå Erro ao obter temperatura:\", error);\n    \n    // Tentar API alternativa\n    return await getTemperatureFromAlternativeAPI();\n  }\n};\n\n/**\n * APIs alternativas gratuitas em portugu√™s - n√£o requerem chave\n */\nconst getTemperatureFromAlternativeAPI = async (): Promise<WeatherData | null> => {\n  // Tentar m√∫ltiplas APIs em sequ√™ncia - prioridade para APIs funcionais\n  const apis = [\n    () => getTemperatureFromWttr(), // API internacional - mais confi√°vel\n    () => getTemperatureFromOpenMeteo(), // API europeia gratuita\n    () => getTemperatureFromClimaTempo() // API brasileira alternativa\n  ];\n\n  for (const api of apis) {\n    try {\n      const result = await api();\n      if (result) return result;\n    } catch (error) {\n      console.log(\"üå°Ô∏è Tentando pr√≥xima API...\");\n    }\n  }\n\n  // √öltimo recurso - dados de fallback\n  console.log(\"‚ö†Ô∏è Todas as APIs falharam, usando dados de fallback\");\n  const fallbackData: WeatherData = {\n    temp: 24, // Temperatura t√≠pica do Rio\n    description: \"temperatura n√£o dispon√≠vel\",\n    icon: '01d',\n    humidity: 65,\n    feelsLike: 26\n  };\n\n  temperatureCache = {\n    data: fallbackData,\n    timestamp: Date.now(),\n    error: \"APIs indispon√≠veis\"\n  };\n\n  return fallbackData;\n};\n\n/**\n * INMET - Instituto Nacional de Meteorologia (Brasil)\n * API oficial brasileira em portugu√™s\n */\nconst getTemperatureFromINMET = async (): Promise<WeatherData | null> => {\n  try {\n    console.log(\"üå°Ô∏è Tentando API do INMET (Brasil)...\");\n    \n    // INMET endpoint correto para dados meteorol√≥gicos\n    const today = new Date().toISOString().split('T')[0];\n    const response = await fetch(`https://apitempo.inmet.gov.br/estacao/${today}/${today}/A602`);\n    \n    if (!response.ok) {\n      throw new Error(`INMET HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    if (!data || data.length === 0) {\n      throw new Error('Dados INMET vazios');\n    }\n\n    // Pegar dado mais recente\n    const latest = data[data.length - 1];\n    \n    const weatherData: WeatherData = {\n      temp: Math.round(parseFloat(latest.TEM_INS) || 24),\n      description: 'condi√ß√µes atuais', // INMET n√£o fornece descri√ß√£o\n      icon: '01d',\n      humidity: Math.round(parseFloat(latest.UMD_INS) || 65),\n      feelsLike: Math.round(parseFloat(latest.TEM_INS) || 24)\n    };\n\n    temperatureCache = {\n      data: weatherData,\n      timestamp: Date.now()\n    };\n\n    console.log(`üå°Ô∏è Temperatura obtida via INMET: ${weatherData.temp}¬∞C`);\n    return weatherData;\n\n  } catch (error) {\n    console.log(\"‚ùå Erro na API INMET:\", error);\n    throw error;\n  }\n};\n\n/**\n * wttr.in - API internacional gratuita\n */\nconst getTemperatureFromWttr = async (): Promise<WeatherData | null> => {\n  try {\n    console.log(\"üå°Ô∏è Tentando wttr.in...\");\n    \n    const response = await fetch('https://wttr.in/Rio+de+Janeiro?format=j1');\n    \n    if (!response.ok) {\n      throw new Error(`wttr.in HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    const current = data.current_condition[0];\n    \n    const weatherData: WeatherData = {\n      temp: parseInt(current.temp_C),\n      description: translateWeatherDescription(current.weatherDesc[0].value),\n      icon: '01d',\n      humidity: parseInt(current.humidity),\n      feelsLike: parseInt(current.FeelsLikeC)\n    };\n\n    temperatureCache = {\n      data: weatherData,\n      timestamp: Date.now()\n    };\n\n    console.log(`üå°Ô∏è Temperatura obtida via wttr.in: ${weatherData.temp}¬∞C`);\n    return weatherData;\n\n  } catch (error) {\n    console.log(\"‚ùå Erro na API wttr.in:\", error);\n    throw error;\n  }\n};\n\n/**\n * Open-Meteo - API europeia gratuita sem chave\n */\nconst getTemperatureFromOpenMeteo = async (): Promise<WeatherData | null> => {\n  try {\n    console.log(\"üå°Ô∏è Tentando Open-Meteo...\");\n    \n    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${RIO_COORDS.lat}&longitude=${RIO_COORDS.lon}&current_weather=true&hourly=relativehumidity_2m&timezone=America/Sao_Paulo`);\n    \n    if (!response.ok) {\n      throw new Error(`Open-Meteo HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    const current = data.current_weather;\n    \n    // Determinar descri√ß√£o baseada no c√≥digo do tempo\n    const getWeatherDescription = (code: number): string => {\n      if (code === 0) return 'c√©u limpo';\n      if (code <= 2) return 'parcialmente nublado';\n      if (code === 3) return 'nublado';\n      if (code <= 67) return 'chuva';\n      if (code <= 77) return 'neve';\n      if (code <= 82) return 'chuva';\n      if (code <= 99) return 'tempestade';\n      return 'condi√ß√µes vari√°veis';\n    };\n    \n    const weatherData: WeatherData = {\n      temp: Math.round(current.temperature),\n      description: getWeatherDescription(current.weathercode),\n      icon: '01d',\n      humidity: Math.round(data.hourly?.relativehumidity_2m?.[0] || 65),\n      feelsLike: Math.round(current.temperature)\n    };\n\n    temperatureCache = {\n      data: weatherData,\n      timestamp: Date.now()\n    };\n\n    console.log(`üå°Ô∏è Temperatura obtida via Open-Meteo: ${weatherData.temp}¬∞C`);\n    return weatherData;\n\n  } catch (error) {\n    console.log(\"‚ùå Erro na API Open-Meteo:\", error);\n    throw error;\n  }\n};\n\n/**\n * API brasileira simples baseada em localiza√ß√£o\n */\nconst getTemperatureFromClimaTempo = async (): Promise<WeatherData | null> => {\n  try {\n    console.log(\"üå°Ô∏è Tentando API brasileira alternativa...\");\n    \n    // Usar API meteorol√≥gica gratuita focada no Brasil\n    const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=demo&q=Rio de Janeiro&lang=pt`);\n    \n    if (!response.ok) {\n      throw new Error(`ClimateTempo HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    const weatherData: WeatherData = {\n      temp: Math.round(data.current.temp_c),\n      description: data.current.condition.text.toLowerCase(),\n      icon: '01d',\n      humidity: data.current.humidity,\n      feelsLike: Math.round(data.current.feelslike_c)\n    };\n\n    temperatureCache = {\n      data: weatherData,\n      timestamp: Date.now()\n    };\n\n    console.log(`üå°Ô∏è Temperatura obtida via API brasileira: ${weatherData.temp}¬∞C`);\n    return weatherData;\n\n  } catch (error) {\n    console.log(\"‚ùå Erro na API brasileira:\", error);\n    throw error;\n  }\n};\n\n/**\n * For√ßa atualiza√ß√£o da temperatura (ignora cache)\n */\nexport const refreshTemperature = async (): Promise<WeatherData | null> => {\n  temperatureCache.timestamp = 0; // Invalida cache\n  return await getCurrentTemperature();\n};\n\n/**\n * Verifica se os dados de temperatura est√£o atualizados\n */\nexport const isTemperatureCacheValid = (): boolean => {\n  const now = Date.now();\n  return temperatureCache.data !== null && (now - temperatureCache.timestamp) < CACHE_DURATION;\n};\n\n/**\n * Obt√©m tempo restante at√© pr√≥xima atualiza√ß√£o (em minutos)\n */\nexport const getMinutesUntilNextUpdate = (): number => {\n  if (!temperatureCache.data) return 0;\n  \n  const now = Date.now();\n  const elapsed = now - temperatureCache.timestamp;\n  const remaining = CACHE_DURATION - elapsed;\n  \n  return Math.max(0, Math.ceil(remaining / (60 * 1000)));\n};","size_bytes":11584},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"import * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1405},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:size-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2701},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { DayPicker } from \"react-day-picker\";\n\nimport { cn } from \"@/lib/utils\";\nimport { buttonVariants } from \"@/components/ui/button\";\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  );\n}\nCalendar.displayName = \"Calendar\";\n\nexport { Calendar };\n","size_bytes":2620},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1877},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([_, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item.dataKey || item.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10466},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":315},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4879},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7246},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3835},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3007},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7295},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4085},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1184},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst MenubarMenu = MenubarPrimitive.Menu\n\nconst MenubarGroup = MenubarPrimitive.Group\n\nconst MenubarPortal = MenubarPrimitive.Portal\n\nconst MenubarSub = MenubarPrimitive.Sub\n\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":7974},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5046},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1230},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":777},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"import { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1709},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5615},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"import * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n  VariantProps<typeof sheetVariants> { }\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet, SheetClose,\n  SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetOverlay, SheetPortal, SheetTitle, SheetTrigger\n}\n\n","size_bytes":4250},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block text-sidebar-foreground\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23367},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/sonner.tsx":{"content":"import { useTheme } from \"next-themes\"\nimport { Toaster as Sonner, toast } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster, toast }\n","size_bytes":894},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":772},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"import * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1739},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1435},"client/src/components/ui/tooltip.tsx":{"content":"import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1145},"client/src/components/ui/use-toast.ts":{"content":"import { useToast, toast } from \"@/hooks/use-toast\";\n\nexport { useToast, toast };\n","size_bytes":82},"client/src/components/TagBadges.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\n\ninterface TagBadgesProps {\n  tags?: string[];\n  documentId: string;\n  className?: string;\n}\n\nexport function TagBadges({ tags, documentId, className = \"\" }: TagBadgesProps) {\n  if (!tags || tags.length === 0) return null;\n  \n  return (\n    <div className={`flex flex-wrap gap-1 ${className}`}>\n      {tags.map((tag, index) => (\n        <Badge\n          key={index}\n          variant=\"secondary\"\n          className=\"text-xs\"\n          data-testid={`tag-${tag.toLowerCase()}-${documentId}`}\n        >\n          {tag}\n        </Badge>\n      ))}\n    </div>\n  );\n}","size_bytes":608}},"version":1}